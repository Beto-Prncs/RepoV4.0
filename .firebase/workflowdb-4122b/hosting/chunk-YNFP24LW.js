import{b as oe,c as ae,d as re,e as le}from"./chunk-XLRFKHDE.js";import{c as Y}from"./chunk-NOIAGMWN.js";import{a as q,b as j,d as H,e as X,f as J,g as K,h as Z,i as Q,l as $,m as ee,n as te,o as ie,s as ne}from"./chunk-QFMXGRBX.js";import{c as P,d as D,e as R,i as W,k as z,u as U}from"./chunk-OLDY7IAS.js";import{Ab as N,Bb as E,Eb as C,Fb as d,Gb as B,Lb as G,Mb as a,Nb as f,Ob as u,Pb as L,Qb as h,Rb as v,Sb as y,Ta as i,Tb as k,Ub as T,Yb as c,Z as V,Zb as s,bb as A,ga as g,gb as S,ha as m,ob as _,qb as M,yb as o,zb as n}from"./chunk-GCXAMRXK.js";import{a as F,g as w}from"./chunk-OIKEWKHE.js";var O=Y("Preferences",{web:()=>import("./chunk-X4LJBACC.js").then(l=>new l.PreferencesWeb)});var b=l=>({active:l});function ce(l,x){if(l&1){let e=E();o(0,"div",13)(1,"label",18),a(2),c(3,"translate"),n(),o(4,"input",19),c(5,"translate"),y("ngModelChange",function(t){g(e);let r=d(2);return v(r.config.name,t)||(r.config.name=t),m(t)}),n()()}if(l&2){let e=d(2);i(2),f(s(3,3,"CONFIG.COMPANY_NAME")),i(2),B("placeholder",s(5,5,"CONFIG.ENTER_COMPANY_NAME")),h("ngModel",e.config.name)}}function se(l,x){if(l&1){let e=E();o(0,"section",11)(1,"h2"),a(2),c(3,"translate"),n(),S(4,ce,6,7,"div",12),o(5,"div",13)(6,"label"),a(7),c(8,"translate"),n(),o(9,"div",14)(10,"p")(11,"strong"),a(12),c(13,"translate"),n(),a(14),n(),o(15,"p")(16,"strong"),a(17),c(18,"translate"),n(),a(19),n(),o(20,"p")(21,"strong"),a(22),c(23,"translate"),n(),a(24),c(25,"titlecase"),n(),o(26,"p")(27,"strong"),a(28),c(29,"translate"),n(),a(30),n()()(),o(31,"div",13)(32,"div",15)(33,"input",16),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.autoSave,t)||(r.config.autoSave=t),m(t)}),n(),o(34,"label",17),a(35),c(36,"translate"),n()()()()}if(l&2){let e=d();_("ngClass",T(30,b,e.activeSection==="general")),i(2),f(s(3,14,"CONFIG.GENERAL")),i(2),_("ngIf",e.userRole==="admin"),i(3),f(s(8,16,"CONFIG.USER_INFO")),i(5),u("",s(13,18,"CONFIG.NAME"),":"),i(2),u(" ",e.currentUser==null?null:e.currentUser.Nombre,""),i(3),u("",s(18,20,"CONFIG.EMAIL"),":"),i(2),u(" ",e.currentUser==null?null:e.currentUser.Correo,""),i(3),u("",s(23,22,"CONFIG.ROLE"),":"),i(2),u(" ",s(25,24,e.userRole),""),i(4),u("",s(29,26,"CONFIG.DEPARTMENT"),":"),i(2),u(" ",e.currentUser==null?null:e.currentUser.Departamento,""),i(3),h("ngModel",e.config.autoSave),i(2),f(s(36,28,"CONFIG.AUTO_SAVE"))}}function pe(l,x){if(l&1){let e=E();o(0,"section",11)(1,"h2"),a(2),c(3,"translate"),n(),o(4,"div",13)(5,"label"),a(6),c(7,"translate"),n(),o(8,"div",20)(9,"div",21),a(10),c(11,"translate"),n(),o(12,"label",22)(13,"input",23),y("ngModelChange",function(t){g(e);let r=d();return v(r.isDarkMode,t)||(r.isDarkMode=t),m(t)}),C("change",function(){g(e);let t=d();return m(t.toggleDarkMode())}),n(),N(14,"span",24),n(),o(15,"div",21),a(16),c(17,"translate"),n()()(),o(18,"div",13)(19,"label",25),a(20),c(21,"translate"),n(),o(22,"div",26)(23,"span",27),a(24,"A"),n(),o(25,"input",28),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.textSize,t)||(r.config.textSize=t),m(t)}),C("change",function(){g(e);let t=d();return m(t.applyTextSize())}),n(),o(26,"span",29),a(27,"A"),n()()()()}if(l&2){let e=d();_("ngClass",T(18,b,e.activeSection==="appearance")),i(2),f(s(3,8,"CONFIG.APPEARANCE")),i(4),f(s(7,10,"CONFIG.APP_THEME")),i(4),f(s(11,12,"CONFIG.LIGHT_MODE")),i(3),h("ngModel",e.isDarkMode),i(3),f(s(17,14,"CONFIG.DARK_MODE")),i(4),f(s(21,16,"CONFIG.TEXT_SIZE")),i(5),h("ngModel",e.config.textSize)}}function de(l,x){if(l&1&&(o(0,"option",39),a(1),n()),l&2){let e=x.$implicit;_("value",e.code),i(),u(" ",e.name," ")}}function ge(l,x){if(l&1&&(o(0,"option",39),a(1),n()),l&2){let e=x.$implicit;_("value",e.value),i(),u(" ",e.label," ")}}function me(l,x){if(l&1&&(o(0,"option",39),a(1),n()),l&2){let e=x.$implicit;_("value",e.value),i(),u(" ",e.example," ")}}function ue(l,x){if(l&1&&(o(0,"option",39),a(1),n()),l&2){let e=x.$implicit;_("value",e.code),i(),L(" ",e.name," (",e.symbol,") ")}}function _e(l,x){if(l&1){let e=E();o(0,"section",11)(1,"h2"),a(2),c(3,"translate"),n(),o(4,"div",13)(5,"label",30),a(6),c(7,"translate"),n(),o(8,"select",31),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.language,t)||(r.config.language=t),m(t)}),C("change",function(){g(e);let t=d();return m(t.changeLanguage())}),S(9,de,2,2,"option",32),n()(),o(10,"div",13)(11,"label",33),a(12),c(13,"translate"),n(),o(14,"select",34),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.timezone,t)||(r.config.timezone=t),m(t)}),S(15,ge,2,2,"option",32),n()(),o(16,"div",13)(17,"label",35),a(18),c(19,"translate"),n(),o(20,"select",36),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.dateFormat,t)||(r.config.dateFormat=t),m(t)}),S(21,me,2,2,"option",32),n()(),o(22,"div",13)(23,"label",37),a(24),c(25,"translate"),n(),o(26,"select",38),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.currency,t)||(r.config.currency=t),m(t)}),S(27,ue,2,3,"option",32),n()()()}if(l&2){let e=d();_("ngClass",T(24,b,e.activeSection==="regional")),i(2),f(s(3,14,"CONFIG.REGIONAL")),i(4),f(s(7,16,"CONFIG.LANGUAGE")),i(2),h("ngModel",e.config.language),i(),_("ngForOf",e.languages),i(3),f(s(13,18,"CONFIG.TIMEZONE")),i(2),h("ngModel",e.config.timezone),i(),_("ngForOf",e.timezones),i(3),f(s(19,20,"CONFIG.DATE_FORMAT")),i(2),h("ngModel",e.config.dateFormat),i(),_("ngForOf",e.dateFormats),i(3),f(s(25,22,"CONFIG.CURRENCY")),i(2),h("ngModel",e.config.currency),i(),_("ngForOf",e.currencies)}}function fe(l,x){if(l&1){let e=E();o(0,"div",13)(1,"label",44),a(2),c(3,"translate"),n(),o(4,"select",45),y("ngModelChange",function(t){g(e);let r=d(2);return v(r.config.autoLogoutTime,t)||(r.config.autoLogoutTime=t),m(t)}),C("change",function(){g(e);let t=d(2);return m(t.setupAutoLogout())}),o(5,"option",46),a(6),c(7,"translate"),n(),o(8,"option",47),a(9),c(10,"translate"),n(),o(11,"option",48),a(12),c(13,"translate"),n(),o(14,"option",49),a(15),c(16,"translate"),n()()()}if(l&2){let e=d(2);i(2),f(s(3,6,"CONFIG.AUTO_LOGOUT_TIME")),i(2),h("ngModel",e.config.autoLogoutTime),i(2),u("5 ",s(7,8,"CONFIG.MINUTES"),""),i(3),u("15 ",s(10,10,"CONFIG.MINUTES"),""),i(3),u("30 ",s(13,12,"CONFIG.MINUTES"),""),i(3),u("1 ",s(16,14,"CONFIG.HOUR"),"")}}function Ce(l,x){if(l&1){let e=E();o(0,"section",11)(1,"h2"),a(2),c(3,"translate"),n(),o(4,"div",13)(5,"button",40),C("click",function(){g(e);let t=d();return m(t.changePassword())}),a(6),c(7,"translate"),n()(),o(8,"div",13)(9,"div",41)(10,"label",42),a(11),c(12,"translate"),n(),o(13,"div",20)(14,"label",22)(15,"input",43),y("ngModelChange",function(t){g(e);let r=d();return v(r.config.autoLogout,t)||(r.config.autoLogout=t),m(t)}),C("change",function(){g(e);let t=d();return m(t.setupInactivityMonitor())}),n(),N(16,"span",24),n()()()(),S(17,fe,17,16,"div",12),n()}if(l&2){let e=d();_("ngClass",T(12,b,e.activeSection==="security")),i(2),f(s(3,6,"CONFIG.SECURITY")),i(4),u(" ",s(7,8,"CONFIG.CHANGE_PASSWORD")," "),i(5),f(s(12,10,"CONFIG.AUTO_LOGOUT")),i(4),h("ngModel",e.config.autoLogout),i(2),_("ngIf",e.config.autoLogout)}}function xe(l,x){l&1&&(o(0,"small"),a(1),c(2,"translate"),n()),l&2&&(i(),f(s(2,1,"CONFIG.DEBUG_WARNING")))}function he(l,x){if(l&1){let e=E();o(0,"div",53)(1,"h3"),a(2),c(3,"translate"),n(),o(4,"div",13)(5,"div",41)(6,"label",54),a(7),c(8,"translate"),n(),o(9,"div",20)(10,"label",22)(11,"input",55),y("ngModelChange",function(t){g(e);let r=d(2);return v(r.config.debugMode,t)||(r.config.debugMode=t),m(t)}),n(),N(12,"span",24),n()()(),S(13,xe,3,3,"small",56),n()()}if(l&2){let e=d(2);i(2),f(s(3,4,"CONFIG.ADMIN_OPTIONS")),i(5),f(s(8,6,"CONFIG.DEBUG_MODE")),i(4),h("ngModel",e.config.debugMode),i(2),_("ngIf",e.config.debugMode)}}function ve(l,x){if(l&1){let e=E();o(0,"section",11)(1,"h2"),a(2),c(3,"translate"),n(),S(4,he,14,8,"div",50),o(5,"div",51)(6,"button",9),C("click",function(){g(e);let t=d();return m(t.clearCache())}),a(7),c(8,"translate"),n(),o(9,"button",9),C("click",function(){g(e);let t=d();return m(t.exportConfiguration())}),a(10),c(11,"translate"),n(),o(12,"button",52),C("click",function(){g(e);let t=d();return m(t.resetConfiguration())}),a(13),c(14,"translate"),n()()()}if(l&2){let e=d();_("ngClass",T(14,b,e.activeSection==="advanced")),i(2),f(s(3,6,"CONFIG.ADVANCED")),i(2),_("ngIf",e.userRole==="admin"),i(3),u(" ",s(8,8,"CONFIG.CLEAR_CACHE")," "),i(3),u(" ",s(11,10,"CONFIG.EXPORT_CONFIG")," "),i(3),u(" ",s(14,12,"CONFIG.RESET_CONFIG")," ")}}var Le=(()=>{class l{activeSection="general";userRole="";isDarkMode=!1;inactivityTimer;currentUser=null;config={name:"",language:"es",timezone:"America/Mexico_City",theme:"light",textSize:2,autoSave:!1,currency:"MXN",dateFormat:"DD/MM/YYYY",autoLogout:!1,autoLogoutTime:"15",debugMode:!1,idioma:"es",tema:"light",notificaciones:!1};languages=[{code:"es",name:"Espa\xF1ol"},{code:"en",name:"English"},{code:"pt",name:"Portugu\xEAs"},{code:"fr",name:"Fran\xE7ais"}];timezones=[{value:"America/Mexico_City",label:"Ciudad de M\xE9xico (GMT-6)"},{value:"America/Argentina/Buenos_Aires",label:"Buenos Aires (GMT-3)"},{value:"America/Bogota",label:"Bogot\xE1 (GMT-5)"},{value:"America/Santiago",label:"Santiago (GMT-4)"},{value:"Europe/Madrid",label:"Madrid (GMT+1)"}];currencies=[{code:"MXN",name:"Peso Mexicano",symbol:"$"},{code:"USD",name:"D\xF3lar Estadounidense",symbol:"$"},{code:"EUR",name:"Euro",symbol:"\u20AC"},{code:"ARS",name:"Peso Argentino",symbol:"$"},{code:"CLP",name:"Peso Chileno",symbol:"$"}];dateFormats=[{value:"DD/MM/YYYY",example:"31/12/2023"},{value:"MM/DD/YYYY",example:"12/31/2023"},{value:"YYYY-MM-DD",example:"2023-12-31"}];router=V(U);translate=V(ae);ngOnInit(){this.loadUserInfo(),this.loadConfiguration(),this.setupInactivityMonitor(),this.changeLanguage(),this.applyTheme(),this.applyTextSize()}loadUserInfo(){return w(this,null,function*(){try{let e=yield this.getPreference("userRole","worker"),p=yield this.getPreference("userEmail","demo@ejemplo.com");this.userRole=e,this.currentUser={IdUsuario:"1",Nombre:"Usuario de Demostraci\xF3n",Correo:p,Rol:e,Departamento:"Sistemas",Telefono:"555-1234",Foto_Perfil:void 0,Email:p}}catch(e){console.error("Error loading user info:",e),this.showToast("Error al cargar informaci\xF3n de usuario","danger")}})}loadConfiguration(){return w(this,null,function*(){try{let e=yield this.getPreference("appConfig","");if(e){let p=JSON.parse(e);this.config=F(F({},this.config),p),this.config.idioma=this.config.language,this.config.tema=this.config.theme}this.isDarkMode=this.config.theme==="dark"}catch(e){console.error("Error loading configuration:",e),this.showToast("Error al cargar la configuraci\xF3n","danger")}})}setActiveSection(e){this.activeSection=e}saveConfiguration(){return w(this,null,function*(){try{this.config.idioma=this.config.language,this.config.tema=this.config.theme,yield this.setPreference("appConfig",JSON.stringify(this.config)),this.showToast("Configuraci\xF3n guardada exitosamente","success"),this.applyTheme(),this.applyTextSize()}catch(e){console.error("Error saving configuration:",e),this.showToast("Error al guardar la configuraci\xF3n","danger")}})}resetConfiguration(){return w(this,null,function*(){if(confirm("\xBFEst\xE1s seguro de que deseas restablecer la configuraci\xF3n?"))try{this.config={name:"",language:"es",timezone:"America/Mexico_City",theme:"light",textSize:2,autoSave:!1,currency:"MXN",dateFormat:"DD/MM/YYYY",autoLogout:!1,autoLogoutTime:"15",debugMode:!1,idioma:"es",tema:"light",notificaciones:!1},yield O.remove({key:"appConfig"}),this.isDarkMode=!1,this.applyTheme(),this.applyTextSize(),this.changeLanguage(),this.showToast("Configuraci\xF3n restablecida correctamente","success")}catch(e){console.error("Error resetting configuration:",e),this.showToast("Error al restablecer la configuraci\xF3n","danger")}})}showToast(e,p="primary"){alert(e)}changeLanguage(){this.config.idioma=this.config.language,this.translate.use(this.config.language)}toggleDarkMode(){this.config.theme=this.isDarkMode?"dark":"light",this.config.tema=this.config.theme,this.applyTheme()}applyTheme(){document.body.classList.toggle("dark",this.config.theme==="dark")}applyTextSize(){let e=`text-size-${this.config.textSize}`;document.body.classList.remove("text-size-1","text-size-2","text-size-3"),document.body.classList.add(e)}changePassword(){if(!prompt("Ingrese su contrase\xF1a actual:"))return;let p=prompt("Ingrese su nueva contrase\xF1a:");if(!p)return;let t=prompt("Confirme su nueva contrase\xF1a:");if(t){if(p!==t){this.showToast("Las contrase\xF1as no coinciden","danger");return}if(p.length<6){this.showToast("La contrase\xF1a debe tener al menos 6 caracteres","danger");return}this.showToast("Contrase\xF1a actualizada correctamente (simulado)","success")}}clearCache(){return w(this,null,function*(){if(confirm("\xBFEst\xE1s seguro de que deseas limpiar la cach\xE9? Esto eliminar\xE1 datos temporales."))try{this.showToast("Cach\xE9 limpiada correctamente","success")}catch(e){console.error("Error clearing cache:",e),this.showToast("Error al limpiar cach\xE9","danger")}})}exportConfiguration(){let e=JSON.stringify(this.config,null,2),p="data:application/json;charset=utf-8,"+encodeURIComponent(e),t="app-config.json",r=document.createElement("a");r.setAttribute("href",p),r.setAttribute("download",t),r.click()}setupInactivityMonitor(){this.config.autoLogout&&this.setupAutoLogout()}setupAutoLogout(){this.inactivityTimer&&clearTimeout(this.inactivityTimer);let e=["mousedown","mousemove","keypress","scroll","touchstart"],t=parseInt(this.config.autoLogoutTime)*60*1e3,r=()=>{this.inactivityTimer&&clearTimeout(this.inactivityTimer),this.inactivityTimer=setTimeout(()=>this.autoLogoutDueToInactivity(),t)};e.forEach(I=>{window.addEventListener(I,r,!1)}),r()}autoLogoutDueToInactivity(){this.showToast("Tu sesi\xF3n ha expirado por inactividad. En una aplicaci\xF3n real, se cerrar\xEDa la sesi\xF3n.","warning"),this.setupAutoLogout()}goBack(){this.userRole==="admin"?this.router.navigate(["/admin1"]):this.userRole==="worker"?this.router.navigate(["/worker"]):this.router.navigate(["/"])}getPreference(e,p){return w(this,null,function*(){let{value:t}=yield O.get({key:e});return t||p})}setPreference(e,p){return w(this,null,function*(){yield O.set({key:e,value:p})})}static \u0275fac=function(p){return new(p||l)};static \u0275cmp=A({type:l,selectors:[["app-configuration"]],features:[k([oe])],decls:38,vars:37,consts:[["configForm","ngForm"],[1,"admin-config-container"],[1,"sidebar"],[1,"sidebar-menu"],["href","javascript:void(0)",3,"click"],[1,"config-content"],[3,"ngSubmit"],["class","config-section",3,"ngClass",4,"ngIf"],[1,"action-buttons"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"config-section",3,"ngClass"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"user-info"],[1,"checkbox-container"],["type","checkbox","id","auto-save","name","autoSave",3,"ngModelChange","ngModel"],["for","auto-save",1,"checkbox-label"],["for","company-name"],["type","text","id","company-name","name","companyName","required","",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"toggle-switch"],[1,"toggle-label"],[1,"switch"],["type","checkbox","name","darkMode",3,"ngModelChange","change","ngModel"],[1,"slider","round"],["for","text-size"],[1,"text-size-control"],[1,"size-label","small"],["type","range","id","text-size","min","1","max","3","step","1","name","textSize",3,"ngModelChange","change","ngModel"],[1,"size-label","large"],["for","language"],["id","language","name","language","required","",1,"form-control",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","timezone"],["id","timezone","name","timezone","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","dateFormat"],["id","dateFormat","name","dateFormat","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","currency"],["id","currency","name","currency","required","",1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],["type","button",1,"btn","btn-primary",3,"click"],[1,"toggle-container"],["for","auto-logout",1,"toggle-label"],["type","checkbox","id","auto-logout","name","autoLogout",3,"ngModelChange","change","ngModel"],["for","autoLogoutTime"],["id","autoLogoutTime","name","autoLogoutTime","required","",1,"form-control",3,"ngModelChange","change","ngModel"],["value","5"],["value","15"],["value","30"],["value","60"],["class","admin-options",4,"ngIf"],[1,"button-group"],["type","button",1,"btn","btn-danger",3,"click"],[1,"admin-options"],["for","debug-mode",1,"toggle-label"],["type","checkbox","id","debug-mode","name","debugMode",3,"ngModelChange","ngModel"],[4,"ngIf"]],template:function(p,t){if(p&1){let r=E();o(0,"div",1)(1,"aside",2)(2,"ul",3)(3,"li")(4,"a",4),C("click",function(){return g(r),m(t.setActiveSection("general"))}),a(5),c(6,"translate"),n()(),o(7,"li")(8,"a",4),C("click",function(){return g(r),m(t.setActiveSection("appearance"))}),a(9),c(10,"translate"),n()(),o(11,"li")(12,"a",4),C("click",function(){return g(r),m(t.setActiveSection("regional"))}),a(13),c(14,"translate"),n()(),o(15,"li")(16,"a",4),C("click",function(){return g(r),m(t.setActiveSection("security"))}),a(17),c(18,"translate"),n()(),o(19,"li")(20,"a",4),C("click",function(){return g(r),m(t.setActiveSection("advanced"))}),a(21),c(22,"translate"),n()()()(),o(23,"main",5)(24,"form",6,0),C("ngSubmit",function(){return g(r),m(t.saveConfiguration())}),S(26,se,37,32,"section",7)(27,pe,28,20,"section",7)(28,_e,28,26,"section",7)(29,Ce,18,14,"section",7)(30,ve,15,16,"section",7),o(31,"div",8)(32,"button",9),C("click",function(){return g(r),m(t.goBack())}),a(33),c(34,"translate"),n(),o(35,"button",10),a(36),c(37,"translate"),n()()()()()}if(p&2){let r=G(25);i(4),M("active",t.activeSection==="general"),i(),u(" ",s(6,23,"CONFIG.GENERAL")," "),i(3),M("active",t.activeSection==="appearance"),i(),u(" ",s(10,25,"CONFIG.APPEARANCE")," "),i(3),M("active",t.activeSection==="regional"),i(),u(" ",s(14,27,"CONFIG.REGIONAL")," "),i(3),M("active",t.activeSection==="security"),i(),u(" ",s(18,29,"CONFIG.SECURITY")," "),i(3),M("active",t.activeSection==="advanced"),i(),u(" ",s(22,31,"CONFIG.ADVANCED")," "),i(5),_("ngIf",t.activeSection==="general"),i(),_("ngIf",t.activeSection==="appearance"),i(),_("ngIf",t.activeSection==="regional"),i(),_("ngIf",t.activeSection==="security"),i(),_("ngIf",t.activeSection==="advanced"),i(3),u(" ",s(34,33,"COMMON.BACK")," "),i(2),_("disabled",!r.form.valid),i(),u(" ",s(37,35,"COMMON.SAVE")," ")}},dependencies:[z,P,D,R,W,ne,Z,ee,te,j,Q,q,$,H,X,ie,K,J,le,re],encapsulation:2})}return l})();export{Le as ConfigurationComponent};
//# sourceMappingURL=chunk-YNFP24LW.js.map
