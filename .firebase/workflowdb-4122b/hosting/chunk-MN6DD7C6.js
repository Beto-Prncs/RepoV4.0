import{a as Ne}from"./chunk-AKP2VPKK.js";import{a as fa}from"./chunk-NBQJQKZZ.js";import{a as Tg}from"./chunk-LQAXUOUF.js";import"./chunk-P5C6PN4L.js";import{a as ql,b as Xs,c as Wl,d as _g}from"./chunk-NOIAGMWN.js";import{c as Eg,d as Lg,e as Mg,f as kg}from"./chunk-YMQWHXKC.js";import{b as Gl,c as vu,d as $l,g as Xl,l as xg,m as Ag,n as Cg,r as Pg,s as Yl,t as Sg}from"./chunk-GF3YVLDL.js";import{M as gg,P as mg,Q as mu,S as Vl,T as bg,U as vg,W as yg,Y as bu,Z as wg,y as pg}from"./chunk-5O2P5WTG.js";import{c as hg,h as ug,j as Hl,k as dg,u as fg}from"./chunk-4ACV6U3O.js";import{$a as rg,A as Yp,B as Kp,Bb as ze,Cb as Kt,D as Jp,Eb as uo,Fb as fo,Gb as po,Hb as go,Jb as Lt,Kb as Ti,Lb as qs,Na as Vs,Nb as Ws,Ob as Gs,P as qe,Pa as sg,Pb as $s,Q as Qp,Qa as zt,Qb as og,T as Zp,U as tg,Ub as lg,Va as pu,Vb as da,Wb as cg,Xb as mo,Z as gs,_a as ca,a as $p,db as xi,f as Xp,fa as eg,g as oa,ga as Le,ha as Me,ia as Us,ja as la,lb as Vi,n as ho,nb as br,pa as Hs,pb as ag,qa as ig,qb as Be,rb as gu,ta as ng,tb as ha,ub as ua,vb as bt,wb as vt,xb as si,yb as vn,z as ni}from"./chunk-F77T7Y3R.js";import{a as pe,b as mi,d as Wp,f as aa,g as dt,h as du,i as fu,j as Gp}from"./chunk-OIKEWKHE.js";var pa=class{constructor(t,e,i,n){if(isNaN(t)||isNaN(e))throw new Error(`Point is invalid: (${t}, ${e})`);this.x=+t,this.y=+e,this.pressure=i||0,this.time=n||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}},yu=class r{static fromPoints(t,e){let i=this.calculateControlPoints(t[0],t[1],t[2]).c2,n=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new r(t[1],i,n,t[2],e.start,e.end)}static calculateControlPoints(t,e,i){let n=t.x-e.x,s=t.y-e.y,a=e.x-i.x,o=e.y-i.y,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2},c={x:(e.x+i.x)/2,y:(e.y+i.y)/2},u=Math.sqrt(n*n+s*s),d=Math.sqrt(a*a+o*o),g=l.x-c.x,p=l.y-c.y,v=u+d==0?0:d/(u+d),y={x:c.x+g*v,y:c.y+p*v},x=e.x-y.x,_=e.y-y.y;return{c1:new pa(l.x+x,l.y+_),c2:new pa(c.x+x,c.y+_)}}constructor(t,e,i,n,s,a){this.startPoint=t,this.control2=e,this.control1=i,this.endPoint=n,this.startWidth=s,this.endWidth=a}length(){let e=0,i,n;for(let s=0;s<=10;s+=1){let a=s/10,o=this.point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this.point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(s>0){let c=o-i,u=l-n;e+=Math.sqrt(c*c+u*u)}i=o,n=l}return e}point(t,e,i,n,s){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+s*t*t*t}},wu=class{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,e,i){this._et.addEventListener(t,e,i)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,e,i){this._et.removeEventListener(t,e,i)}};function f1(r,t=250){let e=0,i=null,n,s,a,o=()=>{e=Date.now(),i=null,n=r.apply(s,a),i||(s=null,a=[])};return function(...c){let u=Date.now(),d=t-(u-e);return s=this,a=c,d<=0||d>t?(i&&(clearTimeout(i),i=null),e=u,n=r.apply(s,a),i||(s=null,a=[])):i||(i=window.setTimeout(o,d)),n}}var Kl=class r extends wu{constructor(t,e={}){var i,n,s;super(),this.canvas=t,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=a=>{!this._isLeftButtonPressed(a,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(a))},this._handleMouseMove=a=>{if(!this._isLeftButtonPressed(a,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(a),!1);return}this._strokeMoveUpdate(this._pointerEventToSignatureEvent(a))},this._handleMouseUp=a=>{this._isLeftButtonPressed(a)||this._strokeEnd(this._pointerEventToSignatureEvent(a))},this._handleTouchStart=a=>{a.targetTouches.length!==1||this._drawingStroke||(a.cancelable&&a.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(a)))},this._handleTouchMove=a=>{if(a.targetTouches.length===1){if(a.cancelable&&a.preventDefault(),!this._drawingStroke){this._strokeEnd(this._touchEventToSignatureEvent(a),!1);return}this._strokeMoveUpdate(this._touchEventToSignatureEvent(a))}},this._handleTouchEnd=a=>{a.targetTouches.length===0&&(a.cancelable&&a.preventDefault(),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this._strokeEnd(this._touchEventToSignatureEvent(a)))},this._handlePointerDown=a=>{!a.isPrimary||!this._isLeftButtonPressed(a)||this._drawingStroke||(a.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(a)))},this._handlePointerMove=a=>{if(a.isPrimary){if(!this._isLeftButtonPressed(a,!0)||!this._drawingStroke){this._strokeEnd(this._pointerEventToSignatureEvent(a),!1);return}a.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(a))}},this._handlePointerUp=a=>{!a.isPrimary||this._isLeftButtonPressed(a)||(a.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(a)))},this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle=(i=e.throttle)!==null&&i!==void 0?i:16,this.minDistance=(n=e.minDistance)!==null&&n!==void 0?n:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions=(s=e.canvasContextOptions)!==null&&s!==void 0?s:{},this._strokeMoveUpdate=this.throttle?f1(r.prototype._strokeUpdate,this.throttle):r.prototype._strokeUpdate,this._ctx=t.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){let{_ctx:t,canvas:e}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,e={}){return new Promise((i,n)=>{let s=new Image,a=e.ratio||window.devicePixelRatio||1,o=e.width||this.canvas.width/a,l=e.height||this.canvas.height/a,c=e.xOffset||0,u=e.yOffset||0;this._reset(this._getPointGroupOptions()),s.onload=()=>{this._ctx.drawImage(s,c,u,o,l),i()},s.onerror=d=>{n(d)},s.crossOrigin="anonymous",s.src=t,this._isEmpty=!1})}toDataURL(t="image/png",e){switch(t){case"image/svg+xml":return typeof e!="object"&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`;default:return typeof e!="number"&&(e=void 0),this.canvas.toDataURL(t,e)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var t;let e=window.document===this.canvas.ownerDocument?window:(t=this.canvas.ownerDocument.defaultView)!==null&&t!==void 0?t:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){let{removeEventListener:t}=this._getListenerFunctions();t("pointermove",this._handlePointerMove),t("pointerup",this._handlePointerUp),t("mousemove",this._handleMouseMove),t("mouseup",this._handleMouseUp),t("touchmove",this._handleTouchMove),t("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:e=!0}={}){e&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_isLeftButtonPressed(t,e){return e?t.buttons===1:(t.buttons&1)===1}_pointerEventToSignatureEvent(t){return{event:t,type:t.type,x:t.clientX,y:t.clientY,pressure:"pressure"in t?t.pressure:0}}_touchEventToSignatureEvent(t){let e=t.changedTouches[0];return{event:t,type:t.type,x:e.clientX,y:e.clientY,pressure:e.force}}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}}_strokeBegin(t){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:t,cancelable:!0})))return;let{addEventListener:i}=this._getListenerFunctions();switch(t.event.type){case"mousedown":i("mousemove",this._handleMouseMove),i("mouseup",this._handleMouseUp);break;case"touchstart":i("touchmove",this._handleTouchMove),i("touchend",this._handleTouchEnd);break;case"pointerdown":i("pointermove",this._handlePointerMove),i("pointerup",this._handlePointerUp);break}this._drawingStroke=!0;let n=this._getPointGroupOptions(),s=Object.assign(Object.assign({},n),{points:[]});this._data.push(s),this._reset(n),this._strokeUpdate(t)}_strokeUpdate(t){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(t);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));let e=this._createPoint(t.x,t.y,t.pressure),i=this._data[this._data.length-1],n=i.points,s=n.length>0&&n[n.length-1],a=s?e.distanceTo(s)<=this.minDistance:!1,o=this._getPointGroupOptions(i);if(!s||!(s&&a)){let l=this._addPoint(e,o);s?l&&this._drawCurve(l,o):this._drawDot(e,o),n.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t,e=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(e&&this._strokeUpdate(t),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:t})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation}_createPoint(t,e,i){let n=this.canvas.getBoundingClientRect();return new pa(t-n.left,e-n.top,i,new Date().getTime())}_addPoint(t,e){let{_lastPoints:i}=this;if(i.push(t),i.length>2){i.length===3&&i.unshift(i[0]);let n=this._calculateCurveWidths(i[1],i[2],e),s=yu.fromPoints(i,n);return i.shift(),s}return null}_calculateCurveWidths(t,e,i){let n=i.velocityFilterWeight*e.velocityFrom(t)+(1-i.velocityFilterWeight)*this._lastVelocity,s=this._strokeWidth(n,i),a={end:s,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=s,a}_strokeWidth(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)}_drawCurveSegment(t,e,i){let n=this._ctx;n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,e){let i=this._ctx,n=t.endWidth-t.startWidth,s=Math.ceil(t.length())*2;i.beginPath(),i.fillStyle=e.penColor;for(let a=0;a<s;a+=1){let o=a/s,l=o*o,c=l*o,u=1-o,d=u*u,g=d*u,p=g*t.startPoint.x;p+=3*d*o*t.control1.x,p+=3*u*l*t.control2.x,p+=c*t.endPoint.x;let v=g*t.startPoint.y;v+=3*d*o*t.control1.y,v+=3*u*l*t.control2.y,v+=c*t.endPoint.y;let y=Math.min(t.startWidth+c*n,e.maxWidth);this._drawCurveSegment(p,v,y)}i.closePath(),i.fill()}_drawDot(t,e){let i=this._ctx,n=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;i.beginPath(),this._drawCurveSegment(t.x,t.y,n),i.closePath(),i.fillStyle=e.penColor,i.fill()}_fromData(t,e,i){for(let n of t){let{points:s}=n,a=this._getPointGroupOptions(n);if(s.length>1)for(let o=0;o<s.length;o+=1){let l=s[o],c=new pa(l.x,l.y,l.pressure,l.time);o===0&&this._reset(a);let u=this._addPoint(c,a);u&&e(u,a)}else this._reset(a),i(s[0],a)}}toSVG({includeBackgroundColor:t=!1}={}){let e=this._data,i=Math.max(window.devicePixelRatio||1,1),n=0,s=0,a=this.canvas.width/i,o=this.canvas.height/i,l=document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),l.setAttribute("viewBox",`${n} ${s} ${a} ${o}`),l.setAttribute("width",a.toString()),l.setAttribute("height",o.toString()),t&&this.backgroundColor){let c=document.createElement("rect");c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("fill",this.backgroundColor),l.appendChild(c)}return this._fromData(e,(c,{penColor:u})=>{let d=document.createElement("path");if(!isNaN(c.control1.x)&&!isNaN(c.control1.y)&&!isNaN(c.control2.x)&&!isNaN(c.control2.y)){let g=`M ${c.startPoint.x.toFixed(3)},${c.startPoint.y.toFixed(3)} C ${c.control1.x.toFixed(3)},${c.control1.y.toFixed(3)} ${c.control2.x.toFixed(3)},${c.control2.y.toFixed(3)} ${c.endPoint.x.toFixed(3)},${c.endPoint.y.toFixed(3)}`;d.setAttribute("d",g),d.setAttribute("stroke-width",(c.endWidth*2.25).toFixed(3)),d.setAttribute("stroke",u),d.setAttribute("fill","none"),d.setAttribute("stroke-linecap","round"),l.appendChild(d)}},(c,{penColor:u,dotSize:d,minWidth:g,maxWidth:p})=>{let v=document.createElement("circle"),y=d>0?d:(g+p)/2;v.setAttribute("r",y.toString()),v.setAttribute("cx",c.x.toString()),v.setAttribute("cy",c.y.toString()),v.setAttribute("fill",u),l.appendChild(v)}),l.outerHTML}};var ya={};Wp(ya,{AbortException:()=>u2,AnnotationEditorLayer:()=>d2,AnnotationEditorParamsType:()=>f2,AnnotationEditorType:()=>Jd,AnnotationEditorUIManager:()=>p2,AnnotationLayer:()=>g2,AnnotationMode:()=>m2,ColorPicker:()=>b2,DOMSVGFactory:()=>v2,DrawLayer:()=>y2,FeatureTest:()=>w2,GlobalWorkerOptions:()=>Qd,ImageKind:()=>_2,InvalidPDFException:()=>x2,MissingPDFException:()=>A2,OPS:()=>C2,OutputScale:()=>P2,PDFDataRangeTransport:()=>S2,PDFDateString:()=>E2,PDFWorker:()=>L2,PasswordResponses:()=>M2,PermissionFlag:()=>k2,PixelsPerInch:()=>T2,RenderingCancelledException:()=>O2,TextLayer:()=>N2,UnexpectedResponseException:()=>I2,Util:()=>R2,VerbosityLevel:()=>Zd,XfaLayer:()=>F2,build:()=>D2,createValidAbsoluteUrl:()=>j2,fetchData:()=>B2,getDocument:()=>tf,getFilenameFromUrl:()=>z2,getPdfFilenameFromUrl:()=>U2,getXfaPageViewport:()=>H2,isDataScheme:()=>V2,isPdfFile:()=>q2,noContextMenu:()=>W2,normalizeUnicode:()=>G2,setLayerDimensions:()=>$2,shadow:()=>X2,version:()=>Do});var _o={};_o.d=(r,t)=>{for(var e in t)_o.o(t,e)&&!_o.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})};_o.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var se=globalThis.pdfjsLib={};_o.d(se,{AbortException:()=>_s,AnnotationEditorLayer:()=>h2,AnnotationEditorParamsType:()=>te,AnnotationEditorType:()=>he,AnnotationEditorUIManager:()=>Eo,AnnotationLayer:()=>Dd,AnnotationMode:()=>Ys,ColorPicker:()=>Fc,DOMSVGFactory:()=>Oo,DrawLayer:()=>Vd,FeatureTest:()=>Ei,GlobalWorkerOptions:()=>yr,ImageKind:()=>nc,InvalidPDFException:()=>ac,MissingPDFException:()=>ws,OPS:()=>On,OutputScale:()=>So,PDFDataRangeTransport:()=>xc,PDFDateString:()=>lc,PDFWorker:()=>ba,PasswordResponses:()=>v1,PermissionFlag:()=>b1,PixelsPerInch:()=>Ks,RenderingCancelledException:()=>Po,TextLayer:()=>ko,UnexpectedResponseException:()=>va,Util:()=>Vt,VerbosityLevel:()=>jc,XfaLayer:()=>Pc,build:()=>l2,createValidAbsoluteUrl:()=>x1,fetchData:()=>Hc,getDocument:()=>s2,getFilenameFromUrl:()=>k1,getPdfFilenameFromUrl:()=>T1,getXfaPageViewport:()=>O1,isDataScheme:()=>Vc,isPdfFile:()=>Gd,noContextMenu:()=>wn,normalizeUnicode:()=>E1,setLayerDimensions:()=>wr,shadow:()=>me,version:()=>o2});var Ni=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),$g=[1,0,0,1,0,0],Su=[.001,0,0,.001,0,0],p1=1e7,ic=1.35,g1=.35,Fy=g1/ic,on={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ys={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},m1="pdfjs_internal_editor_",he={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},te={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},b1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Oi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},bi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var bo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var jc={ERRORS:0,WARNINGS:1,INFOS:5},On={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},v1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Bc=jc.WARNINGS;function y1(r){Number.isInteger(r)&&(Bc=r)}function w1(){return Bc}function zc(r){Bc>=jc.INFOS&&console.log(`Info: ${r}`)}function ue(r){Bc>=jc.WARNINGS&&console.log(`Warning: ${r}`)}function Ue(r){throw new Error(r)}function vi(r,t){r||Ue(t)}function _1(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function x1(r,t=null,e=null){if(!r)return null;try{if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=S1(r)}catch{}let i=t?new URL(r,t):new URL(r);if(_1(i))return i}catch{}return null}function me(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}var Js=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}(),xo=class extends Js{constructor(t,e){super(t,"PasswordException"),this.code=e}},Ao=class extends Js{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},ac=class extends Js{constructor(t){super(t,"InvalidPDFException")}},ws=class extends Js{constructor(t){super(t,"MissingPDFException")}},va=class extends Js{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},Eu=class extends Js{constructor(t){super(t,"FormatError")}},_s=class extends Js{constructor(t){super(t,"AbortException")}};function Xg(r){(typeof r!="object"||r?.length===void 0)&&Ue("Invalid argument for bytesToString");let t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);let i=[];for(let n=0;n<t;n+=e){let s=Math.min(n+e,t),a=r.subarray(n,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function Uc(r){typeof r!="string"&&Ue("Invalid argument for stringToBytes");let t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function A1(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function qd(r){let t=Object.create(null);for(let[e,i]of r)t[e]=i;return t}function C1(){let r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function P1(){try{return new Function(""),!0}catch{return!1}}var Ei=class{static get isLittleEndian(){return me(this,"isLittleEndian",C1())}static get isEvalSupported(){return me(this,"isEvalSupported",P1())}static get isOffscreenCanvasSupported(){return me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?me(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):me(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return me(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},_u=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0")),Vt=class{static makeHexColor(t,e,i){return`#${_u[t]}${_u[e]}${_u[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){let i=t[0]*e[0]+t[1]*e[2]+e[4],n=t[0]*e[1]+t[1]*e[3]+e[5];return[i,n]}static applyInverseTransform(t,e){let i=e[0]*e[3]-e[1]*e[2],n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,s=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i;return[n,s]}static getAxialAlignedBoundingBox(t,e){let i=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),s=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],n[0],s[0],a[0]),Math.min(i[1],n[1],s[1],a[1]),Math.max(i[0],n[0],s[0],a[0]),Math.max(i[1],n[1],s[1],a[1])]}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){let e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],s=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-s*n))/2,c=o+l||1,u=o-l||1;return[Math.sqrt(c),Math.sqrt(u)]}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;let s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>a?null:[i,s,n,a]}static#t(t,e,i,n,s,a,o,l,c,u){if(c<=0||c>=1)return;let d=1-c,g=c*c,p=g*c,v=d*(d*(d*t+3*c*e)+3*g*i)+p*n,y=d*(d*(d*s+3*c*a)+3*g*o)+p*l;u[0]=Math.min(u[0],v),u[1]=Math.min(u[1],y),u[2]=Math.max(u[2],v),u[3]=Math.max(u[3],y)}static#e(t,e,i,n,s,a,o,l,c,u,d,g){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#t(t,e,i,n,s,a,o,l,-d/u,g);return}let p=u**2-4*d*c;if(p<0)return;let v=Math.sqrt(p),y=2*c;this.#t(t,e,i,n,s,a,o,l,(-u+v)/y,g),this.#t(t,e,i,n,s,a,o,l,(-u-v)/y,g)}static bezierBoundingBox(t,e,i,n,s,a,o,l,c){return c?(c[0]=Math.min(c[0],t,o),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,o),c[3]=Math.max(c[3],e,l)):c=[Math.min(t,o),Math.min(e,l),Math.max(t,o),Math.max(e,l)],this.#e(t,i,s,o,e,n,a,l,3*(-t+3*(i-s)+o),6*(t-2*i+s),3*(i-t),c),this.#e(t,i,s,o,e,n,a,l,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),c),c}};function S1(r){return decodeURIComponent(escape(r))}var xu=null,Og=null;function E1(r){return xu||(xu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Og=new Map([["\uFB05","\u017Ft"]])),r.replaceAll(xu,(t,e,i)=>e?e.normalize("NFKC"):Og.get(i))}function L1(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let r=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(r);else for(let t=0;t<32;t++)r[t]=Math.floor(Math.random()*255);return Xg(r)}var Wd="pdfjs_internal_id_",ms={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function M1(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Xg(r))}var vs="http://www.w3.org/2000/svg",Ks=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function Hc(r,t="text"){return dt(this,null,function*(){if(wo(r,document.baseURI)){let e=yield fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{let n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})})}var Co=class r{constructor({viewBox:t,scale:e,rotation:i,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=n,this.offsetY=s;let o=(t[2]+t[0])/2,l=(t[3]+t[1])/2,c,u,d,g;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,u=0,d=0,g=1;break;case 90:c=0,u=1,d=1,g=0;break;case 270:c=0,u=-1,d=-1,g=0;break;case 0:c=1,u=0,d=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,g=-g);let p,v,y,x;c===0?(p=Math.abs(l-t[1])*e+n,v=Math.abs(o-t[0])*e+s,y=(t[3]-t[1])*e,x=(t[2]-t[0])*e):(p=Math.abs(o-t[0])*e+n,v=Math.abs(l-t[1])*e+s,y=(t[2]-t[0])*e,x=(t[3]-t[1])*e),this.transform=[c*e,u*e,d*e,g*e,p-c*e*o-d*e*l,v-u*e*o-g*e*l],this.width=y,this.height=x}get rawDims(){let{viewBox:t}=this;return me(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new r({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){return Vt.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){let e=Vt.applyTransform([t[0],t[1]],this.transform),i=Vt.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return Vt.applyInverseTransform([t,e],this.transform)}},Po=class extends Js{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function Vc(r){let t=r.length,e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function Gd(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function k1(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function T1(r,t="document.pdf"){if(typeof r!="string")return t;if(Vc(r))return ue('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(r),s=i.exec(n[1])||i.exec(n[2])||i.exec(n[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||t}var oc=class{started=Object.create(null);times=[];time(t){t in this.started&&ue(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ue(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:i}of this.times)e=Math.max(i.length,e);for(let{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms
`);return t.join("")}};function wo(r,t){try{let{protocol:e}=t?new URL(r,t):new URL(r);return e==="http:"||e==="https:"}catch{return!1}}function wn(r){r.preventDefault()}function Ng(r){console.log("Deprecated API usage: "+r)}var lc=class{static#t;static toDateObject(t){if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#t.exec(t);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;let c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(a+=u,o+=d):c==="+"&&(a-=u,o-=d),new Date(Date.UTC(i,n,s,a,o,l))}};function O1(r,{scale:t=1,rotation:e=0}){let{width:i,height:n}=r.attributes.style,s=[0,0,parseInt(i),parseInt(n)];return new Co({viewBox:s,scale:t,rotation:e})}function $d(r){if(r.startsWith("#")){let t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ue(`Not a valid color format: "${r}"`),[0,0,0])}function N1(r){let t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(let e of r.keys()){t.style.color=e;let i=window.getComputedStyle(t).color;r.set(e,$d(i))}t.remove()}function We(r){let{a:t,b:e,c:i,d:n,e:s,f:a}=r.getTransform();return[t,e,i,n,s,a]}function bs(r){let{a:t,b:e,c:i,d:n,e:s,f:a}=r.getTransform().invertSelf();return[t,e,i,n,s,a]}function wr(r,t,e=!1,i=!0){if(t instanceof Co){let{pageWidth:n,pageHeight:s}=t.rawDims,{style:a}=r,o=Ei.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,c=`var(--scale-factor) * ${s}px`,u=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=o?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!e||t.rotation%180===0?(a.width=u,a.height=d):(a.width=d,a.height=u)}i&&r.setAttribute("data-main-rotation",t.rotation)}var So=class{constructor(){let t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}},Lu=class r{#t=null;#e=null;#i;#n=null;#s=null;static#r=null;constructor(t){this.#i=t,r.#r||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){let t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#i._uiManager._signal;t.addEventListener("contextmenu",wn,{signal:e}),t.addEventListener("pointerdown",r.#l,{signal:e});let i=this.#n=document.createElement("div");i.className="buttons",t.append(i);let n=this.#i.toolbarPosition;if(n){let{style:s}=t,a=this.#i._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),t}get div(){return this.#t}static#l(t){t.stopPropagation()}#c(t){this.#i._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#h(t){this.#i._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#o(t){let e=this.#i._uiManager._signal;t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",wn,{signal:e})}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#s?.shown()}#u(){let{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",r.#r[t]),this.#o(i),i.addEventListener("click",n=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#a(){let t=document.createElement("div");return t.className="divider",t}addAltText(t){return dt(this,null,function*(){let e=yield t.render();this.#o(e),this.#n.prepend(e,this.#a),this.#s=t})}addColorPicker(t){this.#e=t;let e=t.renderButton();this.#o(e),this.#n.prepend(e,this.#a)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}},Mu=class{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){let t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",wn,{signal:this.#i._signal});let e=this.#t=document.createElement("div");return e.className="buttons",t.append(e),this.#r(),t}#s(t,e){let i=0,n=0;for(let s of t){let a=s.y+s.height;if(a<i)continue;let o=s.x+(e?s.width:0);if(a>i){n=o,i=a;continue}e?o>n&&(n=o):o<n&&(n=o)}return[e?1-n:n,i]}show(t,e,i){let[n,s]=this.#s(e,i),{style:a}=this.#e||=this.#n();t.append(this.#e),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#r(){let t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");let i=this.#i._signal;t.addEventListener("contextmenu",wn,{signal:i}),t.addEventListener("click",()=>{this.#i.highlightSelection("floating_button")},{signal:i}),this.#t.append(t)}};function cc(r,t,e){for(let i of e)t.addEventListener(i,r[i].bind(r))}function I1(r){return Math.round(Math.min(255,Math.max(1,255*r))).toString(16).padStart(2,"0")}var ku=class{#t=0;get id(){return`${m1}${this.#t++}`}},Tu=class r{#t=L1();#e=0;#i=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;let s=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return me(this,"_isSVGFittingCanvas",s)}#n(t,e){return dt(this,null,function*(){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let n;if(typeof e=="string"?(i.url=e,n=yield Hc(e,"blob")):e instanceof File?n=i.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){let s=r._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,u)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,c()},a.onload=()=>dt(this,null,function*(){let d=i.svgUrl=a.result;o.src=(yield s)?`${d}#svgView(preserveAspectRatio(none))`:d}),o.onerror=a.onerror=u});a.readAsDataURL(n),yield l}else i.bitmap=yield createImageBitmap(n);i.refCounter=1}catch(n){console.error(n),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i})}getFromFile(t){return dt(this,null,function*(){let{lastModified:e,name:i,size:n,type:s}=t;return this.#n(`${e}_${i}_${n}_${s}`,t)})}getFromUrl(t){return dt(this,null,function*(){return this.#n(t,t)})}getFromBlob(t,e){return dt(this,null,function*(){let i=yield e;return this.#n(t,i)})}getFromId(t){return dt(this,null,function*(){this.#i||=new Map;let e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)})}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;let n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){let e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;let e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:i}=e;if(!e.url&&!e.file){let n=new OffscreenCanvas(i.width,i.height);n.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=n.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}},Ou=class{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&t(),this.#e)return;let l={cmd:t,undo:e,post:i,type:s};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(l);return}if(a&&this.#t[this.#n].type===s){o&&(l.undo=this.#t[this.#n].undo),this.#t[this.#n]=l;return}let c=this.#n+1;c===this.#i?this.#t.splice(0,1):(this.#n=c,c<this.#t.length&&this.#t.splice(c)),this.#t.push(l)}undo(){if(this.#n===-1)return;this.#e=!0;let{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;let{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}destroy(){this.#t=null}},_r=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=Ei.platform;for(let[i,n,s={}]of t)for(let a of i){let o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:n,options:s}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:n,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let i=this.callbacks.get(this.#t(e));if(!i)return;let{callback:n,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(t,e)||(n.bind(t,...a,e)(),s||(e.stopPropagation(),e.preventDefault()))}},Nu=class r{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return N1(t),me(this,"_colors",t)}convert(t){let e=$d(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[i,n]of this._colors)if(n.every((s,a)=>s===e[a]))return r._colorsMapping.get(i);return e}getHexCode(t){let e=this._colors.get(t);return e?Vt.makeHexColor(...e):t}},Eo=(()=>{class r{#t=new AbortController;#e=null;#i=new Map;#n=new Map;#s=null;#r=null;#l=null;#c=new Ou;#h=null;#o=0;#u=new Set;#a=null;#d=null;#p=new Set;#f=!1;#g=!1;#b=!1;#m=null;#v=null;#w=null;#A=null;#_=!1;#x=null;#k=new ku;#E=!1;#C=!1;#L=null;#S=null;#T=null;#N=null;#P=he.NONE;#y=new Set;#M=null;#O=null;#D=null;#U={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#F=null;#j=null;#B=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let e=r.prototype,i=o=>o.#j.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){let{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return me(this,"_keyboardManager",new _r([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#j.contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&o.#j.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:i}]]))}constructor(e,i,n,s,a,o,l,c,u,d,g){let p=this._signal=this.#t.signal;this.#j=e,this.#B=i,this.#s=n,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:p}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),s._on("setpreference",this.onSetPreference.bind(this),{signal:p}),s._on("switchannotationeditorparams",v=>this.updateParams(v.type,v.value),{signal:p}),this.#tt(),this.#st(),this.#$(),this.#r=a.annotationStorage,this.#m=a.filterFactory,this.#O=o,this.#A=l||null,this.#f=c,this.#g=u,this.#b=d,this.#N=g||null,this.viewParameters={realScale:Ks.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(let e of this.#n.values())e.destroy();this.#n.clear(),this.#i.clear(),this.#p.clear(),this.#e=null,this.#y.clear(),this.#c.destroy(),this.#s?.destroy(),this.#x?.hide(),this.#x=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#F&&(clearTimeout(this.#F),this.#F=null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#N}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return me(this,"hcmFilter",this.#O?this.#m.addHCMFilter(this.#O.foreground,this.#O.background):"none")}get direction(){return me(this,"direction",getComputedStyle(this.#j).direction)}get highlightColors(){return me(this,"highlightColors",this.#A?new Map(this.#A.split(",").map(e=>e.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){this.#T=e}editAltText(e,i=!1){this.#s?.editAltText(this,e,i)}switchToMode(e,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,i){this._eventBus.dispatch("setpreference",{source:this,name:e,value:i})}onSetPreference({name:e,value:i}){switch(e){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:e}){this.#o=e-1}focusMainContainer(){this.#j.focus()}findParent(e,i){for(let n of this.#n.values()){let{x:s,y:a,width:o,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+o&&i>=a&&i<=a+l)return n}return null}disableUserSelect(e=!1){this.#B.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ks.PDF_TO_CSS_UNITS;for(let i of this.#p)i.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#G(e){let{currentLayer:i}=this;if(i.hasTextLayer(e))return i;for(let n of this.#n.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e=""){let i=document.getSelection();if(!i||i.isCollapsed)return;let{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o}=i,l=i.toString(),u=this.#q(i).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;i.empty();let g=this.#G(u),p=this.#P===he.NONE,v=()=>{g?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o,text:l}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(he.HIGHLIGHT,v);return}v()}#Q(){let e=document.getSelection();if(!e||e.isCollapsed)return;let n=this.#q(e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#x||=new Mu(this),this.#x.show(n,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}#Z(){let e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#x?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}let{anchorNode:i}=e;if(i===this.#M)return;let s=this.#q(e).closest(".textLayer");if(!s){this.#M&&(this.#x?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#M=i,this.#R({hasSelectedText:!0}),!(this.#P!==he.HIGHLIGHT&&this.#P!==he.NONE)&&(this.#P===he.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#_=this.isShiftKeyDown,!this.isShiftKeyDown)){let a=this.#P===he.HIGHLIGHT?this.#G(s):null;a?.toggleDrawing();let o=new AbortController,l=this.combinedSignal(o),c=u=>{u.type==="pointerup"&&u.button!==0||(o.abort(),a?.toggleDrawing(!0),u.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}}#W(e=""){this.#P===he.HIGHLIGHT?this.highlightSelection(e):this.#f&&this.#Q()}#tt(){document.addEventListener("selectionchange",this.#Z.bind(this),{signal:this._signal})}#et(){if(this.#w)return;this.#w=new AbortController;let e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#it(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#W("main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let i of this.#y)if(i.div.contains(e)){this.#S=[i,e],i._focusEventsAllowed=!1;break}}focus(){if(!this.#S)return;let[e,i]=this.#S;this.#S=null,i.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#$(){if(this.#L)return;this.#L=new AbortController;let e=this.combinedSignal(this.#L);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#nt(){this.#L?.abort(),this.#L=null}#X(){if(this.#h)return;this.#h=new AbortController;let e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#h?.abort(),this.#h=null}#st(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#$(),this.#X()}removeEditListeners(){this.#nt(),this.#Y()}dragOver(e){for(let{type:i}of e.dataTransfer.items)for(let n of this.#d)if(n.isHandlingMimeForPasting(i)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let i of e.dataTransfer.items)for(let n of this.#d)if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let i=[];for(let n of this.#y){let s=n.serialize(!0);s&&i.push(s)}i.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}paste(e){return dt(this,null,function*(){e.preventDefault();let{clipboardData:i}=e;for(let a of i.items)for(let o of this.#d)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){ue(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let s=this.currentLayer;try{let a=[];for(let c of n){let u=yield s.deserialize(c);if(!u)return;a.push(u)}let o=()=>{for(let c of a)this.#K(c);this.#J(a)},l=()=>{for(let c of a)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(a){ue(`paste: "${a.message}".`)}})}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#P!==he.NONE&&!this.isEditorHandlingKeyboard&&r._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#R(e){Object.entries(e).some(([n,s])=>this.#U[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#U,e)}),this.#P===he.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[te.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#et(),this.#X(),this.#R({isEditing:this.#P!==he.NONE,isEmpty:this.#V(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#it(),this.#Y(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(let i of this.#d)this.#H(i.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#n.get(this.#o)}getLayer(e){return this.#n.get(e)}get currentPageIndex(){return this.#o}addLayer(e){this.#n.set(e.pageIndex,e),this.#E?e.enable():e.disable()}removeLayer(e){this.#n.delete(e.pageIndex)}updateMode(e,i=null,n=!1){return dt(this,null,function*(){if(this.#P!==e&&!(this.#I&&(yield this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#P=e,e===he.NONE){this.setEditingState(!1),this.#at(),this.#I.resolve();return}this.setEditingState(!0),yield this.#rt(),this.unselectAll();for(let s of this.#n.values())s.updateMode(e);if(!i){n&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(let s of this.#i.values())s.annotationElementId===i?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#I.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#P&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,i){if(this.#d){switch(e){case te.CREATE:this.currentLayer.addNewEditor();return;case te.HIGHLIGHT_DEFAULT_COLOR:this.#T?.updateColor(i);break;case te.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#D||=new Map).set(e,i),this.showAllEditors("highlight",i);break}for(let n of this.#y)n.updateParams(e,i);for(let n of this.#d)n.updateDefaultParams(e,i)}}showAllEditors(e,i,n=!1){for(let a of this.#i.values())a.editorType===e&&a.show(i);(this.#D?.get(te.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#H([[te.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(e=!1){if(this.#C!==e){this.#C=e;for(let i of this.#n.values())e?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",e)}}#rt(){return dt(this,null,function*(){if(!this.#E){this.#E=!0;let e=[];for(let i of this.#n.values())e.push(i.enable());yield Promise.all(e);for(let i of this.#i.values())i.enable()}})}#at(){if(this.unselectAll(),this.#E){this.#E=!1;for(let e of this.#n.values())e.disable();for(let e of this.#i.values())e.disable()}}getEditors(e){let i=[];for(let n of this.#i.values())n.pageIndex===e&&i.push(n);return i}getEditor(e){return this.#i.get(e)}addEditor(e){this.#i.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#i.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#u.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#u.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#u.has(e)}removeDeletedAnnotationElement(e){this.#u.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#K(e){let i=this.#n.get(e.pageIndex);i?i.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#e!==e&&(this.#e=e,e&&this.#H(e.propertiesToUpdate))}get#ot(){let e=null;for(e of this.#y);return e}updateUI(e){this.#ot===e&&this.#H(e.propertiesToUpdate)}toggleSelected(e){if(this.#y.has(e)){this.#y.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#y.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){for(let i of this.#y)i!==e&&i.unselect();this.#y.clear(),this.#y.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#y.has(e)}get firstSelectedEditor(){return this.#y.values().next().value}unselect(e){e.unselect(),this.#y.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#y.size!==0}get isEnterHandled(){return this.#y.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#V()})}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#V()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#V()})}#V(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(let e of this.#i.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let e=[...this.#y],i=()=>{for(let s of e)s.remove()},n=()=>{for(let s of e)this.#K(s)};this.addCommands({cmd:i,undo:n,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#J(e){for(let i of this.#y)i.unselect();this.#y.clear();for(let i of e)i.isEmpty()||(this.#y.add(i),i.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(let e of this.#y)e.commit();this.#J(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#P!==he.NONE))&&this.hasSelection){for(let e of this.#y)e.unselect();this.#y.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=i;let[s,a]=this.#z,o=[...this.#y],l=1e3;this.#F&&clearTimeout(this.#F),this.#F=setTimeout(()=>{this.#F=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(let c of o)this.#i.has(c.id)&&c.translateInPage(s,a)},undo:()=>{for(let c of o)this.#i.has(c.id)&&c.translateInPage(-s,-a)},mustExec:!1})},l);for(let c of o)c.translateInPage(e,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#a=new Map;for(let e of this.#y)this.#a.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#a)return!1;this.disableUserSelect(!1);let e=this.#a;this.#a=null;let i=!1;for(let[{x:s,y:a,pageIndex:o},l]of e)l.newX=s,l.newY=a,l.newPageIndex=o,i||=s!==l.savedX||a!==l.savedY||o!==l.savedPageIndex;if(!i)return!1;let n=(s,a,o,l)=>{if(this.#i.has(s.id)){let c=this.#n.get(l);c?s._setParentAndPosition(c,a,o):(s.pageIndex=l,s.x=a,s.y=o)}};return this.addCommands({cmd:()=>{for(let[s,{newX:a,newY:o,newPageIndex:l}]of e)n(s,a,o,l)},undo:()=>{for(let[s,{savedX:a,savedY:o,savedPageIndex:l}]of e)n(s,a,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,i){if(this.#a)for(let n of this.#a.keys())n.drag(e,i)}rebuild(e){if(e.parent===null){let i=this.getLayer(e.pageIndex);i?(i.changeParent(e),i.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#y.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#e===e}getActive(){return this.#e}getMode(){return this.#P}get imageManager(){return me(this,"imageManager",new Tu)}getSelectionBoxes(e){if(!e)return null;let i=document.getSelection();for(let u=0,d=i.rangeCount;u<d;u++)if(!e.contains(i.getRangeAt(u).commonAncestorContainer))return null;let{x:n,y:s,width:a,height:o}=e.getBoundingClientRect(),l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,g,p)=>({x:(d-s)/o,y:1-(u+g-n)/a,width:p/o,height:g/a});break;case"180":l=(u,d,g,p)=>({x:1-(u+g-n)/a,y:1-(d+p-s)/o,width:g/a,height:p/o});break;case"270":l=(u,d,g,p)=>({x:1-(d+p-s)/o,y:(u-n)/a,width:p/o,height:g/a});break;default:l=(u,d,g,p)=>({x:(u-n)/a,y:(d-s)/o,width:g/a,height:p/o});break}let c=[];for(let u=0,d=i.rangeCount;u<d;u++){let g=i.getRangeAt(u);if(!g.collapsed)for(let{x:p,y:v,width:y,height:x}of g.getClientRects())y===0||x===0||c.push(l(p,v,y,x))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:i}){(this.#l||=new Map).set(e,i)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){let i=this.#l?.get(e.data.id);if(!i)return;let n=this.#r.getRawValue(i);n&&(this.#P===he.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}}return r})(),Ig=(()=>{class r{#t=null;#e=!1;#i=null;#n=null;#s=null;#r=null;#l=!1;#c=null;#h=null;#o=null;#u=null;#a=!1;static#d=null;static _l10n=null;constructor(e){this.#h=e,this.#a=e._uiManager.useNewAltTextFlow,r.#d||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){r._l10n??=e}render(){return dt(this,null,function*(){let e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";let i=this.#n=document.createElement("span");e.append(i),this.#a?(e.classList.add("new"),e.setAttribute("data-l10n-id",r.#d.missing),i.setAttribute("data-l10n-id",r.#d["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=this.#h._uiManager._signal;e.addEventListener("contextmenu",wn,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});let s=a=>{a.preventDefault(),this.#h._uiManager.editAltText(this.#h),this.#a&&this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#p}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#l=!0,s(a))},{signal:n}),yield this.#f(),e})}get#p(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#a?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#a?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}setGuessedText(e){return dt(this,null,function*(){this.#t===null&&(this.#o=e,this.#u=yield r._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())})}toggleAltTextBadge(e=!1){if(!this.#a||this.#t){this.#c?.remove(),this.#c=null;return}if(!this.#c){let i=this.#c=document.createElement("div");i.className="noAltTextBadge",this.#h.div.append(i)}this.#c.classList.toggle("hidden",!e)}serialize(e){let i=this.#t;return!e&&this.#o===i&&(i=this.#u),{altText:i,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#u}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:e,decorative:i,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(this.#o=n,this.#u=s),!(this.#t===e&&this.#e===i)&&(a||(this.#t=e,this.#e=i),this.#f())}toggle(e=!1){this.#i&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!e)}shown(){this.#h._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#p}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s=null,this.#c?.remove(),this.#c=null}#f(){return dt(this,null,function*(){let e=this.#i;if(!e)return;if(this.#a){if(e.classList.toggle("done",!!this.#t),e.setAttribute("data-l10n-id",r.#d[this.#p]),this.#n?.setAttribute("data-l10n-id",r.#d[`${this.#p}-label`]),!this.#t){this.#s?.remove();return}}else{if(!this.#t&&!this.#e){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#s;if(!i){this.#s=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#h.id}`;let s=100,a=this.#h._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#s.classList.add("show"),this.#h._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s?.classList.remove("show")},{signal:a})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||e.append(i),this.#h.getImageForAltText()?.setAttribute("aria-describedby",i.id)})}}return r})(),ke=class r{#t=null;#e=null;#i=null;#n=!1;#s=!1;#r=null;#l=null;#c=null;#h="";#o=!1;#u=null;#a=!1;#d=!1;#p=!1;#f=null;#g=0;#b=0;#m=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#v=!1;#w=r._zIndex++;static _borderLineWidth=-1;static _colorManager=new Nu;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=r.prototype._resizeWithKeyboard,e=Eo.TRANSLATE_SMALL,i=Eo.TRANSLATE_BIG;return me(this,"_resizerKeyboardManager",new _r([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],r.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;let{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,a];let[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new Iu({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(r._l10n??=t,r._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),r._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);r._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#v}set _isDraggable(t){this.#v=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#w}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#D(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#o?this.#o=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){let[s,a]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/a,this.fixAndSetPosition()}#A([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this.fixAndSetPosition()}translate(t,e){this.#A(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y],this.#A(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){this.#u||=[this.x,this.y];let[i,n]=this.parentDimensions;if(this.x+=t/i,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:c,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,c,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this,[o,l]=this.getBaseTranslation();s+=o,a+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:i}=r,n=i/t,s=i/e;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let[e,i]=this.pageDimensions,{x:n,y:s,width:a,height:o}=this;if(a*=e,o*=i,n*=e,s*=i,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-a,n)),s=Math.max(0,Math.min(i-o,s));break;case 90:n=Math.max(0,Math.min(e-o,n)),s=Math.min(i,Math.max(a,s));break;case 180:n=Math.min(e,Math.max(a,n)),s=Math.min(i,Math.max(o,s));break;case 270:n=Math.min(e,Math.max(o,n)),s=Math.max(0,Math.min(i-a,s));break}this.x=n/=e,this.y=s/=i;let[l,c]=this.getBaseTranslation();n+=l,s+=c;let{style:u}=this.div;u.left=`${(100*n).toFixed(2)}%`,u.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#_(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return r.#_(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return r.#_(t,e,360-this.parentRotation)}#x(t){switch(t){case 90:{let[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){let[i,n]=this.parentDimensions;this.div.style.width=`${(100*t/i).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){let{style:t}=this.div,{height:e,width:i}=t,n=i.endsWith("%"),s=!this.#s&&e.endsWith("%");if(n&&s)return;let[a,o]=this.parentDimensions;n||(t.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!this.#s&&!s&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#k(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let i of t){let n=document.createElement("div");this.#r.append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",this.#E.bind(this,i),{signal:e}),n.addEventListener("contextmenu",wn,{signal:e}),n.tabIndex=-1}this.div.prepend(this.#r)}#E(t,e){e.preventDefault();let{isMac:i}=Ei.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);let n=this._isDraggable;this._isDraggable=!1;let s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",wn,{signal:a});let o=this.x,l=this.y,c=this.width,u=this.height,d=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let p=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=d,this.div.style.cursor=g,this.#C(o,l,c,u)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})}#C(t,e,i,n){let s=this.x,a=this.y,o=this.width,l=this.height;s===t&&a===e&&o===i&&l===n||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=s,this.y=a;let[c,u]=this.parentDimensions;this.setDims(c*o,u*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=n,this.x=t,this.y=e;let[c,u]=this.parentDimensions;this.setDims(c*i,u*n),this.fixAndSetPosition()},mustExec:!0})}#L(t,e){let[i,n]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,c=r.MIN_SIZE/i,u=r.MIN_SIZE/n,d=it=>Math.round(it*1e4)/1e4,g=this.#x(this.rotation),p=(it,Q)=>[g[0]*it+g[2]*Q,g[1]*it+g[3]*Q],v=this.#x(360-this.rotation),y=(it,Q)=>[v[0]*it+v[2]*Q,v[1]*it+v[3]*Q],x,_,A=!1,T=!1;switch(t){case"topLeft":A=!0,x=(it,Q)=>[0,0],_=(it,Q)=>[it,Q];break;case"topMiddle":x=(it,Q)=>[it/2,0],_=(it,Q)=>[it/2,Q];break;case"topRight":A=!0,x=(it,Q)=>[it,0],_=(it,Q)=>[0,Q];break;case"middleRight":T=!0,x=(it,Q)=>[it,Q/2],_=(it,Q)=>[0,Q/2];break;case"bottomRight":A=!0,x=(it,Q)=>[it,Q],_=(it,Q)=>[0,0];break;case"bottomMiddle":x=(it,Q)=>[it/2,Q],_=(it,Q)=>[it/2,0];break;case"bottomLeft":A=!0,x=(it,Q)=>[0,Q],_=(it,Q)=>[it,0];break;case"middleLeft":T=!0,x=(it,Q)=>[0,Q/2],_=(it,Q)=>[it,Q/2];break}let R=x(o,l),z=_(o,l),Y=p(...z),U=d(s+Y[0]),F=d(a+Y[1]),I=1,W=1,[S,N]=this.screenToPageTranslation(e.movementX,e.movementY);if([S,N]=y(S/i,N/n),A){let it=Math.hypot(o,l);I=W=Math.max(Math.min(Math.hypot(z[0]-R[0]-S,z[1]-R[1]-N)/it,1/o,1/l),c/o,u/l)}else T?I=Math.max(c,Math.min(1,Math.abs(z[0]-R[0]-S)))/o:W=Math.max(u,Math.min(1,Math.abs(z[1]-R[1]-N)))/l;let G=d(o*I),H=d(l*W);Y=p(..._(G,H));let at=U-Y[0],rt=F-Y[1];this.width=G,this.height=H,this.x=at,this.y=rt,this.setDims(i*G,n*H),this.fixAndSetPosition()}altTextFinish(){this.#i?.finish()}addEditToolbar(){return dt(this,null,function*(){return this._editToolbar||this.#d?this._editToolbar:(this._editToolbar=new Lu(this),this.div.append(this._editToolbar.render()),this.#i&&(yield this._editToolbar.addAltText(this.#i)),this._editToolbar)})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#i?.destroy())}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){return dt(this,null,function*(){this.#i||(Ig.initialize(r._l10n),this.#i=new Ig(this),this.#t&&(this.#i.data=this.#t,this.#t=null),yield this.addEditToolbar())})}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}setGuessedAltText(t){return dt(this,null,function*(){yield this.#i?.setGuessedText(t)})}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#n?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#N();let[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);let[i,n]=this.getInitialTranslation();return this.translate(i,n),cc(this,this.div,["pointerdown"]),this.div}pointerdown(t){let{isMac:e}=Ei.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#o=!0,this._isDraggable){this.#T(t);return}this.#S(t)}get isSelected(){return this._uiManager.isSelected(this)}#S(t){let{isMac:e}=Ei.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#T(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let i=new AbortController,n=this._uiManager.combinedSignal(i);if(e){this.div.classList.add("moving"),this.#g=t.clientX,this.#b=t.clientY;let a=o=>{let{clientX:l,clientY:c}=o,[u,d]=this.screenToPageTranslation(l-this.#g,c-this.#b);this.#g=l,this.#b=c,this._uiManager.dragSelectedEditors(u,d)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:n})}let s=()=>{i.abort(),e&&this.div.classList.remove("moving"),this.#o=!1,this._uiManager.endDragSession()||this.#S(t)};window.addEventListener("pointerup",s,{signal:n}),window.addEventListener("blur",s,{signal:n})}moveInDOM(){this.#f&&clearTimeout(this.#f),this.#f=setTimeout(()=>{this.#f=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){let n=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=t/n,u=e/n,d=this.x*s,g=this.y*a,p=this.width*s,v=this.height*a;switch(i){case 0:return[d+c+o,a-g-u-v+l,d+c+p+o,a-g-u+l];case 90:return[d+u+o,a-g+c+l,d+u+v+o,a-g+c+p+l];case 180:return[d-c-p+o,a-g+u+l,d-c+o,a-g+u+v+l];case 270:return[d-u-v+o,a-g-c-p+l,d-u+o,a-g-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[i,n,s,a]=t,o=s-i,l=a-n;switch(this.rotation){case 0:return[i,e-a,o,l];case 90:return[i,e-n,l,o];case 180:return[s,e-n,o,l];case 270:return[s,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return this.#p}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}#N(){if(this.#c||!this.div)return;this.#c=new AbortController;let t=this._uiManager.combinedSignal(this.#c);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#N()}rotate(t){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ue("An editor must be serializable")}static deserialize(t,e,i){return dt(this,null,function*(){let n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});n.rotation=t.rotation,n.#t=t.accessibilityData;let[s,a]=n.pageDimensions,[o,l,c,u]=n.getRectInCurrentCoords(t.rect,a);return n.x=o/s,n.y=l/a,n.width=c/s,n.height=u/a,n})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#c?.abort(),this.#c=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#f&&(clearTimeout(this.#f),this.#f=null),this.#D(),this.removeEditToolbar(),this.#m){for(let t of this.#m.values())clearTimeout(t);this.#m=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#k(),this.#r.classList.remove("hidden"),cc(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#r.children;if(!this.#e){this.#e=Array.from(e);let a=this.#P.bind(this),o=this.#y.bind(this),l=this._uiManager._signal;for(let c of this.#e){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",this.#M.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",r._l10nResizer[u])}}let i=this.#e[0],n=0;for(let a of e){if(a===i)break;n++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(s!==n){if(s<n)for(let o=0;o<n-s;o++)this.#r.append(this.#r.firstChild);else if(s>n)for(let o=0;o<s-n;o++)this.#r.firstChild.before(this.#r.lastChild);let a=0;for(let o of e){let c=this.#e[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",r._l10nResizer[c])}}this.#O(0),this.#p=!0,this.#r.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#P(t){r._resizerKeyboardManager.exec(this,t)}#y(t){this.#p&&t.relatedTarget?.parentNode!==this.#r&&this.#D()}#M(t){this.#h=this.#p?t:""}#O(t){if(this.#e)for(let e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#p&&this.#L(this.#h,{movementX:t,movementY:e})}#D(){if(this.#p=!1,this.#O(-1),this.#l){let{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#l;this.#C(t,e,i,n),this.#l=null}}_stopResizingWithKeyboard(){this.#D(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#a}set isEditing(t){this.#a=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#s=!0;let i=t/e,{style:n}=this.div;n.aspectRatio=i,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#m||=new Map;let{action:i}=t,n=this.#m.get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),this.#m.delete(i),this.#m.size===0&&(this.#m=null)},r._telemetryTimeout),this.#m.set(i,n);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#n=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#n=!0}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){let{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},Iu=class extends ke{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},Rg=3285377520,yn=4294901760,Kn=65535,hc=class{constructor(t){this.h1=t?t&4294967295:Rg,this.h2=t?t&4294967295:Rg}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let y=0,x=t.length;y<x;y++){let _=t.charCodeAt(y);_<=255?e[i++]=_:(e[i++]=_>>>8,e[i++]=_&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let n=i>>2,s=i-n*4,a=new Uint32Array(e.buffer,0,n),o=0,l=0,c=this.h1,u=this.h2,d=3432918353,g=461845907,p=d&Kn,v=g&Kn;for(let y=0;y<n;y++)y&1?(o=a[y],o=o*d&yn|o*p&Kn,o=o<<15|o>>>17,o=o*g&yn|o*v&Kn,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[y],l=l*d&yn|l*p&Kn,l=l<<15|l>>>17,l=l*g&yn|l*v&Kn,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,s){case 3:o^=e[n*4+2]<<16;case 2:o^=e[n*4+1]<<8;case 1:o^=e[n*4],o=o*d&yn|o*p&Kn,o=o<<15|o>>>17,o=o*g&yn|o*v&Kn,n&1?c^=o:u^=o}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&yn|t*36045&Kn,e=e*4283543511&yn|((e<<16|t>>>16)*2950163797&yn)>>>16,t^=e>>>1,t=t*444984403&yn|t*60499&Kn,e=e*3301882366&yn|((e<<16|t>>>16)*3120437893&yn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},Ru=Object.freeze({map:null,hash:"",transfer:void 0}),Lo=class{#t=!1;#e=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){if(this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let e of this.#i.values())if(e instanceof ke)return;this.onAnnotationEditor(null)}}setValue(t,e){let i=this.#i.get(t),n=!1;if(i!==void 0)for(let[s,a]of Object.entries(e))i[s]!==a&&(n=!0,i[s]=a);else n=!0,this.#i.set(t,e);n&&this.#n(),e instanceof ke&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#i.has(t)}getAll(){return this.#i.size>0?qd(this.#i):null}setAll(t){for(let[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#i.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new uc(this)}get serializable(){if(this.#i.size===0)return Ru;let t=new Map,e=new hc,i=[],n=Object.create(null),s=!1;for(let[a,o]of this.#i){let l=o instanceof ke?o.serialize(!1,n):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(let a of t.values())a.bitmap&&i.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Ru}get editorStats(){let t=null,e=new Map;for(let i of this.#i.values()){if(!(i instanceof ke))continue;let n=i.telemetryFinalData;if(!n)continue;let{type:s}=n;e.has(s)||e.set(s,Object.getPrototypeOf(i).constructor),t||=Object.create(null);let a=t[s]||=new Map;for(let[o,l]of Object.entries(n)){if(o==="type")continue;let c=a.get(o);c||(c=new Map,a.set(o,c));let u=c.get(l)??0;c.set(l,u+1)}}for(let[i,n]of e)t[i]=n.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){this.#e=null}get modifiedIds(){if(this.#e)return this.#e;let t=[];for(let e of this.#i.values())!(e instanceof ke)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}},uc=class extends Lo{#t;constructor(t){super();let{map:e,hash:i,transfer:n}=t.serializable,s=structuredClone(e,n?{transfer:n}:null);this.#t={map:s,hash:i,transfer:n}}get print(){Ue("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return me(this,"modifiedIds",{ids:new Set,hash:""})}},Fu=class{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return dt(this,arguments,function*({systemFontInfo:t,_inspectFont:e}){if(!(!t||this.#t.has(t.loadedName))){if(vi(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:n,src:s,style:a}=t,o=new FontFace(n,s,a);this.addNativeFontFace(o);try{yield o.load(),this.#t.add(n),e?.(t)}catch{ue(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ue("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return dt(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{yield i.loaded}catch(n){throw ue(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(i=>{let n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}})}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return me(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Ni||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),me(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(vi(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){let s=i.shift();setTimeout(s.callback,0)}}let{loadingRequests:i}=this,n={done:!1,complete:e,callback:t};return i.push(n),n}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return me(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(R,z){return R.charCodeAt(z)<<24|R.charCodeAt(z+1)<<16|R.charCodeAt(z+2)<<8|R.charCodeAt(z+3)&255}function n(R,z,Y,U){let F=R.substring(0,z),I=R.substring(z+Y);return F+U+I}let s,a,o=this._document.createElement("canvas");o.width=1,o.height=1;let l=o.getContext("2d"),c=0;function u(R,z){if(++c>30){ue("Load test font never loaded."),z();return}if(l.font="30px "+R,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(u.bind(null,R,z))}let d=`lt${Date.now()}${this.loadTestFontId++}`,g=this._loadTestFont;g=n(g,976,d.length,d);let v=16,y=1482184792,x=i(g,v);for(s=0,a=d.length-3;s<a;s+=4)x=x-y+i(d,s)|0;s<d.length&&(x=x-y+i(d+"XXX",s)|0),g=n(g,v,4,A1(x));let _=`url(data:font/opentype;base64,${btoa(g)});`,A=`@font-face {font-family:"${d}";src:${_}}`;this.insertRule(A);let T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(let R of[t.loadedName,d]){let z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=R,T.append(z)}this._document.body.append(T),u(d,()=>{T.remove(),e.complete()})}},Du=class{constructor(t,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(let n in t)this[n]=t[n];this.disableFontFace=e===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${M1(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(s){ue(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[e]=function(s,a){};let n=[];for(let s=0,a=i.length;s<a;)switch(i[s++]){case ms.BEZIER_CURVE_TO:{let[o,l,c,u,d,g]=i.slice(s,s+6);n.push(p=>p.bezierCurveTo(o,l,c,u,d,g)),s+=6}break;case ms.MOVE_TO:{let[o,l]=i.slice(s,s+2);n.push(c=>c.moveTo(o,l)),s+=2}break;case ms.LINE_TO:{let[o,l]=i.slice(s,s+2);n.push(c=>c.lineTo(o,l)),s+=2}break;case ms.QUADRATIC_CURVE_TO:{let[o,l,c,u]=i.slice(s,s+4);n.push(d=>d.quadraticCurveTo(o,l,c,u)),s+=4}break;case ms.RESTORE:n.push(o=>o.restore());break;case ms.SAVE:n.push(o=>o.save());break;case ms.SCALE:vi(n.length===2,"Scale command is only valid at the third position.");break;case ms.TRANSFORM:{let[o,l,c,u,d,g]=i.slice(s,s+6);n.push(p=>p.transform(o,l,c,u,d,g)),s+=6}break;case ms.TRANSLATE:{let[o,l]=i.slice(s,s+2);n.push(c=>c.translate(o,l)),s+=2}break}return this.compiledGlyphs[e]=function(a,o){n[0](a),n[1](a),a.scale(o,-o);for(let l=2,c=n.length;l<c;l++)n[l](a)}}},dc=class{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ue("Abstract method `_createCanvas` called.")}},ju=class extends dc{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},fc=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}fetch(e){return dt(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})})}_fetch(t){return dt(this,null,function*(){Ue("Abstract method `_fetch` called.")})}},pc=class extends fc{_fetch(t){return dt(this,null,function*(){let e=yield Hc(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Uc(e)})}},gc=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(t=!1){}},Bu=class extends gc{#t;#e;#i;#n;#s;#r;#l=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#s=e}get#c(){return this.#e||=new Map}get#h(){return this.#r||=new Map}get#o(){if(!this.#i){let t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let i=this.#s.createElementNS(vs,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#s.createElementNS(vs,"defs"),t.append(i),i.append(this.#i),this.#s.body.append(t)}return this.#i}#u(t){if(t.length===1){let l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;let u=c.join(",");return[u,u,u]}let[e,i,n]=t,s=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)s[l]=e[l]/255,a[l]=i[l]/255,o[l]=n[l]/255;return[s.join(","),a.join(","),o.join(",")]}#a(t){if(this.#t===void 0){this.#t="";let e=this.#s.URL;e!==this.#s.baseURI&&(Vc(e)?ue('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=e.split("#",1)[0])}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#c.get(t);if(e)return e;let[i,n,s]=this.#u(t),a=t.length===1?i:`${i}${n}${s}`;if(e=this.#c.get(a),e)return this.#c.set(t,e),e;let o=`g_${this.#n}_transfer_map_${this.#l++}`,l=this.#a(o);this.#c.set(t,l),this.#c.set(a,l);let c=this.#f(o);return this.#b(i,n,s,c),l}addHCMFilter(t,e){let i=`${t}-${e}`,n="base",s=this.#h.get(n);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#h.set(n,s)),!t||!e))return s.url;let a=this.#v(t);t=Vt.makeHexColor(...a);let o=this.#v(e);if(e=Vt.makeHexColor(...o),this.#o.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;let l=new Array(256);for(let p=0;p<=255;p++){let v=p/255;l[p]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}let c=l.join(","),u=`g_${this.#n}_hcm_filter`,d=s.filter=this.#f(u);this.#b(c,c,c,d),this.#p(d);let g=(p,v)=>{let y=a[p]/255,x=o[p]/255,_=new Array(v+1);for(let A=0;A<=v;A++)_[A]=y+A/v*(x-y);return _.join(",")};return this.#b(g(0,5),g(1,5),g(2,5),d),s.url=this.#a(u),s.url}addAlphaFilter(t){let e=this.#c.get(t);if(e)return e;let[i]=this.#u([t]),n=`alpha_${i}`;if(e=this.#c.get(n),e)return this.#c.set(t,e),e;let s=`g_${this.#n}_alpha_map_${this.#l++}`,a=this.#a(s);this.#c.set(t,a),this.#c.set(n,a);let o=this.#f(s);return this.#m(i,o),a}addLuminosityFilter(t){let e=this.#c.get(t||"luminosity");if(e)return e;let i,n;if(t?([i]=this.#u([t]),n=`luminosity_${i}`):n="luminosity",e=this.#c.get(n),e)return this.#c.set(t,e),e;let s=`g_${this.#n}_luminosity_map_${this.#l++}`,a=this.#a(s);this.#c.set(t,a),this.#c.set(n,a);let o=this.#f(s);return this.#d(o),t&&this.#m(i,o),a}addHighlightHCMFilter(t,e,i,n,s){let a=`${e}-${i}-${n}-${s}`,o=this.#h.get(t);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#h.set(t,o)),!e||!i))return o.url;let[l,c]=[e,i].map(this.#v.bind(this)),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[g,p]=[n,s].map(this.#v.bind(this));d<u&&([u,d,g,p]=[d,u,p,g]),this.#o.style.color="";let v=(_,A,T)=>{let R=new Array(256),z=(d-u)/T,Y=_/255,U=(A-_)/(255*T),F=0;for(let I=0;I<=T;I++){let W=Math.round(u+I*z),S=Y+I*U;for(let N=F;N<=W;N++)R[N]=S;F=W+1}for(let I=F;I<256;I++)R[I]=R[F-1];return R.join(",")},y=`g_${this.#n}_hcm_${t}_filter`,x=o.filter=this.#f(y);return this.#p(x),this.#b(v(g[0],p[0],5),v(g[1],p[1],5),v(g[2],p[2],5),x),o.url=this.#a(y),o.url}destroy(t=!1){t&&this.#h.size!==0||(this.#i&&(this.#i.parentNode.parentNode.remove(),this.#i=null),this.#e&&(this.#e.clear(),this.#e=null),this.#l=0)}#d(t){let e=this.#s.createElementNS(vs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#p(t){let e=this.#s.createElementNS(vs,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){let e=this.#s.createElementNS(vs,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#o.append(e),e}#g(t,e,i){let n=this.#s.createElementNS(vs,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#b(t,e,i,n){let s=this.#s.createElementNS(vs,"feComponentTransfer");n.append(s),this.#g(s,"feFuncR",t),this.#g(s,"feFuncG",e),this.#g(s,"feFuncB",i)}#m(t,e){let i=this.#s.createElementNS(vs,"feComponentTransfer");e.append(i),this.#g(i,"feFuncA",t)}#v(t){return this.#o.style.color=t,$d(getComputedStyle(this.#o).getPropertyValue("color"))}},mc=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return dt(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})})}_fetch(t){return dt(this,null,function*(){Ue("Abstract method `_fetch` called.")})}},bc=class extends mc{_fetch(t){return dt(this,null,function*(){let e=yield Hc(t,"arraybuffer");return new Uint8Array(e)})}};Ni&&(sc=Promise.withResolvers(),rc=null,dt(void 0,null,function*(){let t=yield import("./chunk-K36MFXZO.js"),e=yield import("./chunk-44RZXR4W.js"),i=yield import("./chunk-DFZRZQIY.js"),n=yield import("./chunk-4XFN7BUU.js"),s,a;return new Map(Object.entries({fs:t,http:e,https:i,url:n,canvas:s,path2d:a}))}).then(t=>{rc=t,sc.resolve()},t=>{ue(`loadPackages: ${t}`),rc=new Map,sc.resolve()}));var sc,rc,Jn=class{static get promise(){return sc.promise}static get(t){return rc?.get(t)}};function Yg(r){return dt(this,null,function*(){let e=yield Jn.get("fs").promises.readFile(r);return new Uint8Array(e)})}var zu=class extends gc{},Uu=class extends dc{_createCanvas(t,e){return Jn.get("canvas").createCanvas(t,e)}},Hu=class extends fc{_fetch(t){return dt(this,null,function*(){return Yg(t)})}},Vu=class extends mc{_fetch(t){return dt(this,null,function*(){return Yg(t)})}},qi={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function qu(r,t){if(!t)return;let e=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,i),r.clip(n)}var Mo=class{getPattern(){Ue("Abstract method `getPattern` called.")}},Wu=class extends Mo{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,n){let s;if(n===qi.STROKE||n===qi.FILL){let a=e.current.getClippedPathBoundingBox(n,We(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=e.cachedCanvases.getCanvas("pattern",o,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),i=Vt.transform(i,[1,0,0,1,a[0],a[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),qu(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=t.createPattern(c.canvas,"no-repeat");let d=new DOMMatrix(i);s.setTransform(d)}else qu(t,this._bbox),s=this._createGradient(t);return s}};function Au(r,t,e,i,n,s,a,o){let l=t.coords,c=t.colors,u=r.data,d=r.width*4,g;l[e+1]>l[i+1]&&(g=e,e=i,i=g,g=s,s=a,a=g),l[i+1]>l[n+1]&&(g=i,i=n,n=g,g=a,a=o,o=g),l[e+1]>l[i+1]&&(g=e,e=i,i=g,g=s,s=a,a=g);let p=(l[e]+t.offsetX)*t.scaleX,v=(l[e+1]+t.offsetY)*t.scaleY,y=(l[i]+t.offsetX)*t.scaleX,x=(l[i+1]+t.offsetY)*t.scaleY,_=(l[n]+t.offsetX)*t.scaleX,A=(l[n+1]+t.offsetY)*t.scaleY;if(v>=A)return;let T=c[s],R=c[s+1],z=c[s+2],Y=c[a],U=c[a+1],F=c[a+2],I=c[o],W=c[o+1],S=c[o+2],N=Math.round(v),G=Math.round(A),H,at,rt,it,Q,ut,pt,Mt;for(let L=N;L<=G;L++){if(L<x){let nt=L<v?0:(v-L)/(v-x);H=p-(p-y)*nt,at=T-(T-Y)*nt,rt=R-(R-U)*nt,it=z-(z-F)*nt}else{let nt;L>A?nt=1:x===A?nt=0:nt=(x-L)/(x-A),H=y-(y-_)*nt,at=Y-(Y-I)*nt,rt=U-(U-W)*nt,it=F-(F-S)*nt}let j;L<v?j=0:L>A?j=1:j=(v-L)/(v-A),Q=p-(p-_)*j,ut=T-(T-I)*j,pt=R-(R-W)*j,Mt=z-(z-S)*j;let V=Math.round(Math.min(H,Q)),$=Math.round(Math.max(H,Q)),Z=d*L+V*4;for(let nt=V;nt<=$;nt++)j=(H-nt)/(H-Q),j<0?j=0:j>1&&(j=1),u[Z++]=at-(at-ut)*j|0,u[Z++]=rt-(rt-pt)*j|0,u[Z++]=it-(it-Mt)*j|0,u[Z++]=255}}function R1(r,t,e){let i=t.coords,n=t.colors,s,a;switch(t.type){case"lattice":let o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let u=s*o;for(let d=0;d<c;d++,u++)Au(r,e,i[u],i[u+1],i[u+o],n[u],n[u+1],n[u+o]),Au(r,e,i[u+o+1],i[u+1],i[u+o],n[u+o+1],n[u+1],n[u+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Au(r,e,i[s],i[s+1],i[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}var Gu=class extends Mo{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){let o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),p=c/d,v=u/g,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/v},x=d+2*2,_=g+2*2,A=i.getCanvas("mesh",x,_),T=A.context,R=T.createImageData(d,g);if(e){let Y=R.data;for(let U=0,F=Y.length;U<F;U+=4)Y[U]=e[0],Y[U+1]=e[1],Y[U+2]=e[2],Y[U+3]=255}for(let Y of this._figures)R1(R,Y,y);return T.putImageData(R,2,2),{canvas:A.canvas,offsetX:o-2*p,offsetY:l-2*v,scaleX:p,scaleY:v}}getPattern(t,e,i,n){qu(t,this._bbox);let s;if(n===qi.SHADING)s=Vt.singularValueDecompose2dScale(We(t));else if(s=Vt.singularValueDecompose2dScale(e.baseTransform),this.matrix){let o=Vt.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}let a=this._createMeshCanvas(s,n===qi.SHADING?null:this._background,e.cachedCanvases);return n!==qi.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}},$u=class extends Mo{getPattern(){return"hotpink"}};function F1(r){switch(r[0]){case"RadialAxial":return new Wu(r);case"Mesh":return new Gu(r);case"Dummy":return new $u}throw new Error(`Unknown IR type: ${r[0]}`)}var Fg={COLORED:1,UNCOLORED:2},D1=(()=>{class r{static MAX_PATTERN_SIZE=3e3;constructor(e,i,n,s,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=i,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(e){let{bbox:i,operatorList:n,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this,{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),zc("TilingType: "+a);let d=i[0],g=i[1],p=i[2],v=i[3],y=p-d,x=v-g,_=Vt.singularValueDecompose2dScale(this.matrix),A=Vt.singularValueDecompose2dScale(this.baseTransform),T=_[0]*A[0],R=_[1]*A[1],z=y,Y=x,U=!1,F=!1,I=Math.ceil(c*T),W=Math.ceil(u*R),S=Math.ceil(y*T),N=Math.ceil(x*R);I>=S?z=c:U=!0,W>=N?Y=u:F=!0;let G=this.getSizeAndScale(z,this.ctx.canvas.width,T),H=this.getSizeAndScale(Y,this.ctx.canvas.height,R),at=e.cachedCanvases.getCanvas("pattern",G.size,H.size),rt=at.context,it=l.createCanvasGraphics(rt);if(it.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(it,s,o),rt.translate(-G.scale*d,-H.scale*g),it.transform(G.scale,0,0,H.scale,0,0),rt.save(),this.clipBbox(it,d,g,p,v),it.baseTransform=We(it.ctx),it.executeOperatorList(n),it.endDrawing(),rt.restore(),U||F){let Q=at.canvas;U&&(z=c),F&&(Y=u);let ut=this.getSizeAndScale(z,this.ctx.canvas.width,T),pt=this.getSizeAndScale(Y,this.ctx.canvas.height,R),Mt=ut.size,L=pt.size,j=e.cachedCanvases.getCanvas("pattern-workaround",Mt,L),V=j.context,$=U?Math.floor(y/c):0,Z=F?Math.floor(x/u):0;for(let nt=0;nt<=$;nt++)for(let ct=0;ct<=Z;ct++)V.drawImage(Q,Mt*nt,L*ct,Mt,L,0,0,Mt,L);return{canvas:j.canvas,scaleX:ut.scale,scaleY:pt.scale,offsetX:d,offsetY:g}}return{canvas:at.canvas,scaleX:G.scale,scaleY:H.scale,offsetX:d,offsetY:g}}getSizeAndScale(e,i,n){let s=Math.max(r.MAX_PATTERN_SIZE,i),a=Math.ceil(e*n);return a>=s?a=s:n=a/e,{scale:n,size:a}}clipBbox(e,i,n,s,a){let o=s-i,l=a-n;e.ctx.rect(i,n,o,l),e.current.updateRectMinMax(We(e.ctx),[i,n,s,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,i,n){let s=e.ctx,a=e.current;switch(i){case Fg.COLORED:let o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case Fg.UNCOLORED:let l=Vt.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,a.fillColor=l,a.strokeColor=l;break;default:throw new Eu(`Unsupported paint type: ${i}`)}}getPattern(e,i,n,s){let a=n;s!==qi.SHADING&&(a=Vt.transform(a,i.baseTransform),this.matrix&&(a=Vt.transform(a,this.matrix)));let o=this.createPatternCanvas(i),l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);let c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}}return r})();function j1({src:r,srcPos:t=0,dest:e,width:i,height:n,nonBlackColor:s=4294967295,inverseDecode:a=!1}){let o=Ei.isLittleEndian?4278190080:255,[l,c]=a?[s,o]:[o,s],u=i>>3,d=i&7,g=r.length;e=new Uint32Array(e.buffer);let p=0;for(let v=0;v<n;v++){for(let x=t+u;t<x;t++){let _=t<g?r[t]:255;e[p++]=_&128?c:l,e[p++]=_&64?c:l,e[p++]=_&32?c:l,e[p++]=_&16?c:l,e[p++]=_&8?c:l,e[p++]=_&4?c:l,e[p++]=_&2?c:l,e[p++]=_&1?c:l}if(d===0)continue;let y=t<g?r[t++]:255;for(let x=0;x<d;x++)e[p++]=y&1<<7-x?c:l}return{srcPos:t,destPos:p}}var Dg=16,jg=100,B1=15,Bg=10,zg=1e3,Qi=16;function z1(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(i,n){t.translate(i,n),this.__originalTranslate(i,n)},r.scale=function(i,n){t.scale(i,n),this.__originalScale(i,n)},r.transform=function(i,n,s,a,o,l){t.transform(i,n,s,a,o,l),this.__originalTransform(i,n,s,a,o,l)},r.setTransform=function(i,n,s,a,o,l){t.setTransform(i,n,s,a,o,l),this.__originalSetTransform(i,n,s,a,o,l)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(i){t.rotate(i),this.__originalRotate(i)},r.clip=function(i){t.clip(i),this.__originalClip(i)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,n,s,a,o){t.bezierCurveTo(e,i,n,s,a,o),this.__originalBezierCurveTo(e,i,n,s,a,o)},r.rect=function(e,i,n,s){t.rect(e,i,n,s),this.__originalRect(e,i,n,s)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var Xu=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function Jl(r,t,e,i,n,s,a,o,l,c){let[u,d,g,p,v,y]=We(r);if(d===0&&g===0){let A=a*u+v,T=Math.round(A),R=o*p+y,z=Math.round(R),Y=(a+l)*u+v,U=Math.abs(Math.round(Y)-T)||1,F=(o+c)*p+y,I=Math.abs(Math.round(F)-z)||1;return r.setTransform(Math.sign(u),0,0,Math.sign(p),T,z),r.drawImage(t,e,i,n,s,0,0,U,I),r.setTransform(u,d,g,p,v,y),[U,I]}if(u===0&&p===0){let A=o*g+v,T=Math.round(A),R=a*d+y,z=Math.round(R),Y=(o+c)*g+v,U=Math.abs(Math.round(Y)-T)||1,F=(a+l)*d+y,I=Math.abs(Math.round(F)-z)||1;return r.setTransform(0,Math.sign(d),Math.sign(g),0,T,z),r.drawImage(t,e,i,n,s,0,0,I,U),r.setTransform(u,d,g,p,v,y),[I,U]}r.drawImage(t,e,i,n,s,a,o,l,c);let x=Math.hypot(u,d),_=Math.hypot(g,p);return[x*l,_*c]}function U1(r){let{width:t,height:e}=r;if(t>zg||e>zg)return null;let i=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=t+1,a=new Uint8Array(s*(e+1)),o,l,c,u=t+7&-8,d=new Uint8Array(u*e),g=0;for(let _ of r.data){let A=128;for(;A>0;)d[g++]=_&A?0:255,A>>=1}let p=0;for(g=0,d[g]!==0&&(a[0]=1,++p),l=1;l<t;l++)d[g]!==d[g+1]&&(a[l]=d[g]?2:1,++p),g++;for(d[g]!==0&&(a[l]=2,++p),o=1;o<e;o++){g=o*u,c=o*s,d[g-u]!==d[g]&&(a[c]=d[g]?1:8,++p);let _=(d[g]?4:0)+(d[g-u]?8:0);for(l=1;l<t;l++)_=(_>>2)+(d[g+1]?4:0)+(d[g-u+1]?8:0),n[_]&&(a[c+l]=n[_],++p),g++;if(d[g-u]!==d[g]&&(a[c+l]=d[g]?2:4,++p),p>i)return null}for(g=u*(e-1),c=o*s,d[g]!==0&&(a[c]=8,++p),l=1;l<t;l++)d[g]!==d[g+1]&&(a[c+l]=d[g]?4:8,++p),g++;if(d[g]!==0&&(a[c+l]=4,++p),p>i)return null;let v=new Int32Array([0,s,-1,0,-s,0,0,0,1]),y=new Path2D;for(o=0;p&&o<=e;o++){let _=o*s,A=_+t;for(;_<A&&!a[_];)_++;if(_===A)continue;y.moveTo(_%s,o);let T=_,R=a[_];do{let z=v[R];do _+=z;while(!a[_]);let Y=a[_];Y!==5&&Y!==10?(R=Y,a[_]=0):(R=Y&51*R>>4,a[_]&=R>>2|R<<2),y.lineTo(_%s,_/s|0),a[_]||--p}while(T!==_);--o}return d=null,a=null,function(_){_.save(),_.scale(1/t,-1/e),_.translate(0,-e),_.fill(y),_.beginPath(),_.restore()}}var vc=class{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=$g,this.textMatrixScale=1,this.fontMatrix=Su,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Oi.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=Vt.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){let i=Vt.applyTransform(e,t),n=Vt.applyTransform(e.slice(2),t),s=Vt.applyTransform([e[0],e[3]],t),a=Vt.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],n[0],s[0],a[0]),this.minY=Math.min(this.minY,i[1],n[1],s[1],a[1]),this.maxX=Math.max(this.maxX,i[0],n[0],s[0],a[0]),this.maxY=Math.max(this.maxY,i[1],n[1],s[1],a[1])}updateScalingPathMinMax(t,e){Vt.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,n,s,a,o,l,c,u){let d=Vt.bezierBoundingBox(e,i,n,s,a,o,l,c,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=qi.FILL,e=null){let i=[this.minX,this.minY,this.maxX,this.maxY];if(t===qi.STROKE){e||Ue("Stroke bounding box must include transform.");let n=Vt.singularValueDecompose2dScale(e),s=n[0]*this.lineWidth/2,a=n[1]*this.lineWidth/2;i[0]-=s,i[1]-=a,i[2]+=s,i[3]+=a}return i}updateClipFromPath(){let t=Vt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=qi.FILL,e=null){return Vt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function Ug(r,t){if(typeof ImageData<"u"&&t instanceof ImageData){r.putImageData(t,0,0);return}let e=t.height,i=t.width,n=e%Qi,s=(e-n)/Qi,a=n===0?s:s+1,o=r.createImageData(i,Qi),l=0,c,u=t.data,d=o.data,g,p,v,y;if(t.kind===nc.GRAYSCALE_1BPP){let x=u.byteLength,_=new Uint32Array(d.buffer,0,d.byteLength>>2),A=_.length,T=i+7>>3,R=4294967295,z=Ei.isLittleEndian?4278190080:255;for(g=0;g<a;g++){for(v=g<s?Qi:n,c=0,p=0;p<v;p++){let Y=x-l,U=0,F=Y>T?i:Y*8-7,I=F&-8,W=0,S=0;for(;U<I;U+=8)S=u[l++],_[c++]=S&128?R:z,_[c++]=S&64?R:z,_[c++]=S&32?R:z,_[c++]=S&16?R:z,_[c++]=S&8?R:z,_[c++]=S&4?R:z,_[c++]=S&2?R:z,_[c++]=S&1?R:z;for(;U<F;U++)W===0&&(S=u[l++],W=128),_[c++]=S&W?R:z,W>>=1}for(;c<A;)_[c++]=0;r.putImageData(o,0,g*Qi)}}else if(t.kind===nc.RGBA_32BPP){for(p=0,y=i*Qi*4,g=0;g<s;g++)d.set(u.subarray(l,l+y)),l+=y,r.putImageData(o,0,p),p+=Qi;g<a&&(y=i*n*4,d.set(u.subarray(l,l+y)),r.putImageData(o,0,p))}else if(t.kind===nc.RGB_24BPP)for(v=Qi,y=i*v,g=0;g<a;g++){for(g>=s&&(v=n,y=i*v),c=0,p=y;p--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;r.putImageData(o,0,g*Qi)}else throw new Error(`bad image kind: ${t.kind}`)}function Hg(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}let e=t.height,i=t.width,n=e%Qi,s=(e-n)/Qi,a=n===0?s:s+1,o=r.createImageData(i,Qi),l=0,c=t.data,u=o.data;for(let d=0;d<a;d++){let g=d<s?Qi:n;({srcPos:l}=j1({src:c,srcPos:l,dest:u,width:i,height:g,nonBlackColor:0})),r.putImageData(o,0,d*Qi)}}function vo(r,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Ql(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!Ni){let{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}}function Vg(r,t){if(t)return!0;let e=Vt.singularValueDecompose2dScale(r);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);let i=Math.fround((globalThis.devicePixelRatio||1)*Ks.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}var H1=["butt","round","square"],V1=["miter","round","bevel"],q1={},qg={},ma=class r{constructor(t,e,i,n,s,{optionalContentConfig:a,markedContentStack:o=null},l,c){this.ctx=t,this.current=new vc(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Xu(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){let s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){let l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...We(this.compositeCtx))}this.ctx.save(),Ql(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=We(this.ctx)}executeOperatorList(t,e,i,n){let s=t.argsArray,a=t.fnArray,o=e||0,l=s.length;if(l===o)return o;let c=l-o>Bg&&typeof i=="function",u=c?Date.now()+B1:0,d=0,g=this.commonObjs,p=this.objs,v;for(;;){if(n!==void 0&&o===n.nextBreakPoint)return n.breakIt(o,i),o;if(v=a[o],v!==On.dependency)this[v].apply(this,s[o]);else for(let y of s[o]){let x=y.startsWith("g_")?g:p;if(!x.has(y))return x.get(y,i),o}if(o++,o===l)return o;if(c&&++d>Bg){if(Date.now()>u)return i(),o;d=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let i=t.width??t.displayWidth,n=t.height??t.displayHeight,s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=i,l=n,c="prescale1",u,d;for(;s>2&&o>1||a>2&&l>1;){let g=o,p=l;s>2&&o>1&&(g=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/g),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),u=this.cachedCanvases.getCanvas(c,g,p),d=u.context,d.clearRect(0,0,g,p),d.drawImage(t,0,0,o,l,0,0,g,p),t=u.canvas,o=g,l=p,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){let e=this.ctx,{width:i,height:n}=t,s=this.current.fillColor,a=this.current.patternFill,o=We(e),l,c,u,d;if((t.bitmap||t.data)&&t.count>1){let F=t.bitmap||t.data.buffer;c=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(F),l||(l=new Map,this._cachedBitmapsMap.set(F,l));let I=l.get(c);if(I&&!a){let W=Math.round(Math.min(o[0],o[2])+o[4]),S=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:I,offsetX:W,offsetY:S}}u=I}u||(d=this.cachedCanvases.getCanvas("maskCanvas",i,n),Hg(d.context,t));let g=Vt.transform(o,[1/i,0,0,-1/n,0,0]);g=Vt.transform(g,[1,0,0,1,0,-n]);let[p,v,y,x]=Vt.getAxialAlignedBoundingBox([0,0,i,n],g),_=Math.round(y-p)||1,A=Math.round(x-v)||1,T=this.cachedCanvases.getCanvas("fillCanvas",_,A),R=T.context,z=p,Y=v;R.translate(-z,-Y),R.transform(...g),u||(u=this._scaleImage(d.canvas,bs(R)),u=u.img,l&&a&&l.set(c,u)),R.imageSmoothingEnabled=Vg(We(R),t.interpolate),Jl(R,u,0,0,u.width,u.height,0,0,i,n),R.globalCompositeOperation="source-in";let U=Vt.transform(bs(R),[1,0,0,1,-z,-Y]);return R.fillStyle=a?s.getPattern(e,this,U,qi.FILL):s,R.fillRect(0,0,i,n),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,T.canvas)),{canvas:T.canvas,offsetX:Math.round(z),offsetY:Math.round(Y)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=H1[t]}setLineJoin(t){this.ctx.lineJoin=V1[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;let s=this.ctx;s.setTransform(...We(this.suspendedCtx)),vo(this.suspendedCtx,s),z1(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),vo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){let s=n[0],a=n[1],o=n[2]-s,l=n[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,s,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,a,o,l,c,u,d){let g=t.canvas,p=l-u,v=c-d;if(a){let x=Vt.makeHexColor(...a);if(p<0||v<0||p+i>g.width||v+n>g.height){let _=this.cachedCanvases.getCanvas("maskExtension",i,n),A=_.context;A.drawImage(g,-p,-v),A.globalCompositeOperation="destination-atop",A.fillStyle=x,A.fillRect(0,0,i,n),A.globalCompositeOperation="source-over",g=_.canvas,p=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let _=new Path2D;_.rect(p,v,i,n),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=x,t.fillRect(p,v,i,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));let y=new Path2D;y.rect(l,c,i,n),e.clip(y),e.globalCompositeOperation="destination-in",e.drawImage(g,p,v,i,n,l,c,i,n),e.restore()}save(){this.inSMaskMode?(vo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),vo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,n,s,a){this.ctx.transform(t,e,i,n,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let n=this.ctx,s=this.current,a=s.x,o=s.y,l,c,u=We(n),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,g=d?i.slice(0):null;for(let p=0,v=0,y=t.length;p<y;p++)switch(t[p]|0){case On.rectangle:a=e[v++],o=e[v++];let x=e[v++],_=e[v++],A=a+x,T=o+_;n.moveTo(a,o),x===0||_===0?n.lineTo(A,T):(n.lineTo(A,o),n.lineTo(A,T),n.lineTo(a,T)),d||s.updateRectMinMax(u,[a,o,A,T]),n.closePath();break;case On.moveTo:a=e[v++],o=e[v++],n.moveTo(a,o),d||s.updatePathMinMax(u,a,o);break;case On.lineTo:a=e[v++],o=e[v++],n.lineTo(a,o),d||s.updatePathMinMax(u,a,o);break;case On.curveTo:l=a,c=o,a=e[v+4],o=e[v+5],n.bezierCurveTo(e[v],e[v+1],e[v+2],e[v+3],a,o),s.updateCurvePathMinMax(u,l,c,e[v],e[v+1],e[v+2],e[v+3],a,o,g),v+=6;break;case On.curveTo2:l=a,c=o,n.bezierCurveTo(a,o,e[v],e[v+1],e[v+2],e[v+3]),s.updateCurvePathMinMax(u,l,c,a,o,e[v],e[v+1],e[v+2],e[v+3],g),a=e[v+2],o=e[v+3],v+=4;break;case On.curveTo3:l=a,c=o,a=e[v+2],o=e[v+3],n.bezierCurveTo(e[v],e[v+1],a,o,a,o),s.updateCurvePathMinMax(u,l,c,e[v],e[v+1],a,o,a,o,g),v+=4;break;case On.closePath:n.closePath();break}d&&s.updateScalingPathMinMax(u,g),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){let e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,bs(e),qi.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){let e=this.ctx,i=this.current.fillColor,n=this.current.patternFill,s=!1;n&&(e.save(),e.fillStyle=i.getPattern(e,this,bs(e),qi.FILL),s=!0);let a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=q1}eoClip(){this.pendingClip=qg}beginText(){this.current.textMatrix=$g,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(let i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){let i=this.commonObjs.get(t),n=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=i.fontMatrix||Su,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&ue("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;let s=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`,o="normal";i.black?o="900":i.bold&&(o="bold");let l=i.italic?"italic":"normal",c=e;e<Dg?c=Dg:e>jg&&(c=jg),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${o} ${c}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,n,s,a){this.current.textMatrix=[t,e,i,n,s,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,n){let s=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,c=a.fontSize/a.fontSizeScale,u=l&Oi.FILL_STROKE_MASK,d=!!(l&Oi.ADD_TO_PATH_FLAG),g=a.patternFill&&!o.missingFile,p;(o.disableFontFace||d||g)&&(p=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||g?(s.save(),s.translate(e,i),s.beginPath(),p(s,c),n&&s.setTransform(...n),(u===Oi.FILL||u===Oi.FILL_STROKE)&&s.fill(),(u===Oi.STROKE||u===Oi.FILL_STROKE)&&s.stroke(),s.restore()):((u===Oi.FILL||u===Oi.FILL_STROKE)&&s.fillText(t,e,i),(u===Oi.STROKE||u===Oi.FILL_STROKE)&&s.strokeText(t,e,i)),d&&(this.pendingTextPaths||=[]).push({transform:We(s),x:e,y:i,fontSize:c,addToPath:p})}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return me(this,"isFontSubpixelAAEnabled",i)}showText(t){let e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);let n=e.fontSize;if(n===0)return;let s=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,d=t.length,g=i.vertical,p=g?1:-1,v=i.defaultVMetrics,y=n*e.fontMatrix[0],x=e.textRenderingMode===Oi.FILL&&!i.disableFontFace&&!e.patternFill;s.save(),s.transform(...e.textMatrix),s.translate(e.x,e.y+e.textRise),c>0?s.scale(u,-1):s.scale(u,1);let _;if(e.patternFill){s.save();let Y=e.fillColor.getPattern(s,this,bs(s),qi.FILL);_=We(s),s.restore(),s.fillStyle=Y}let A=e.lineWidth,T=e.textMatrixScale;if(T===0||A===0){let Y=e.textRenderingMode&Oi.FILL_STROKE_MASK;(Y===Oi.STROKE||Y===Oi.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=T;if(a!==1&&(s.scale(a,a),A/=a),s.lineWidth=A,i.isInvalidPDFjsFont){let Y=[],U=0;for(let F of t)Y.push(F.unicode),U+=F.width;s.fillText(Y.join(""),0,0),e.x+=U*y*u,s.restore(),this.compose();return}let R=0,z;for(z=0;z<d;++z){let Y=t[z];if(typeof Y=="number"){R+=p*Y*n/1e3;continue}let U=!1,F=(Y.isSpace?l:0)+o,I=Y.fontChar,W=Y.accent,S,N,G=Y.width;if(g){let at=Y.vmetric||v,rt=-(Y.vmetric?at[1]:G*.5)*y,it=at[2]*y;G=at?-at[0]:G,S=rt/a,N=(R+it)/a}else S=R/a,N=0;if(i.remeasure&&G>0){let at=s.measureText(I).width*1e3/n*a;if(G<at&&this.isFontSubpixelAAEnabled){let rt=G/at;U=!0,s.save(),s.scale(rt,1),S/=rt}else G!==at&&(S+=(G-at)/2e3*n/a)}if(this.contentVisible&&(Y.isInFont||i.missingFile)){if(x&&!W)s.fillText(I,S,N);else if(this.paintChar(I,S,N,_),W){let at=S+n*W.offset.x/a,rt=N-n*W.offset.y/a;this.paintChar(W.fontChar,at,rt,_)}}let H=g?G*y-F*c:G*y+F*c;R+=H,U&&s.restore()}g?e.y-=R:e.x+=R*u,s.restore(),this.compose()}showType3Text(t){let e=this.ctx,i=this.current,n=i.font,s=i.fontSize,a=i.fontDirection,o=n.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,u=i.textHScale*a,d=i.fontMatrix||Su,g=t.length,p=i.textRenderingMode===Oi.INVISIBLE,v,y,x,_;if(!(p||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(u,a),v=0;v<g;++v){if(y=t[v],typeof y=="number"){_=o*y*s/1e3,this.ctx.translate(_,0),i.x+=_*u;continue}let A=(y.isSpace?c:0)+l,T=n.charProcOperatorList[y.operatorListId];if(!T){ue(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),e.scale(s,s),e.transform(...d),this.executeOperatorList(T),this.restore()),x=Vt.applyTransform([y.width,0],d)[0]*s+A,e.translate(x,0),i.x+=x*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,n,s,a){this.ctx.rect(i,n,s-i,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){let i=t[1],n=this.baseTransform||We(this.ctx),s={createCanvasGraphics:a=>new r(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new D1(t,i,this.ctx,s,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){this.ctx.strokeStyle=this.current.strokeColor=Vt.makeHexColor(t,e,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,i){this.ctx.fillStyle=this.current.fillColor=Vt.makeHexColor(t,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=F1(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;let e=this.ctx;this.save();let i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,bs(e),qi.SHADING);let n=bs(e);if(n){let{width:s,height:a}=e.canvas,[o,l,c,u]=Vt.getAxialAlignedBoundingBox([0,0,s,a],n);this.ctx.fillRect(o,l,c-o,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ue("Should not call beginInlineImage")}beginImageData(){Ue("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=We(this.ctx),e)){let i=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],i,n),this.current.updateRectMinMax(We(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let e=this.ctx;t.isolated||zc("TODO: Support non-isolated groups."),t.knockout&&ue("Knockout groups not supported.");let i=We(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=Vt.getAxialAlignedBoundingBox(t.bbox,We(e)),s=[0,0,e.canvas.width,e.canvas.height];n=Vt.intersect(n,s)||[0,0,0,0];let a=Math.floor(n[0]),o=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),c=Math.max(Math.ceil(n[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,c]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);let d=this.cachedCanvases.getCanvas(u,l,c),g=d.context;g.translate(-a,-o),g.transform(...i),t.smask?this.smaskStack.push({canvas:d.canvas,context:g,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),vo(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;let e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let n=We(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);let s=Vt.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(t,e,i,n,s){if(this.#t(),Ql(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){let a=e[2]-e[0],o=e[3]-e[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;let[l,c]=Vt.singularValueDecompose2dScale(We(this.ctx)),{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),g=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,g);let{canvas:p,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,o*c),Ql(this.ctx)}else Ql(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new vc(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;let e=t.count;t=this.getObject(t.data,t),t.count=e;let i=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=U1(t)),n.compiled)){n.compiled(i);return}let s=this._createMaskCanvas(t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,n=0,s,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);let o=this.ctx;o.save();let l=We(o);o.transform(e,i,n,s,0,0);let c=this._createMaskCanvas(t);o.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let u=0,d=a.length;u<d;u+=2){let g=Vt.transform(l,[e,i,n,s,a[u],a[u+1]]),[p,v]=Vt.applyTransform([0,0],g);o.drawImage(c.canvas,p,v)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;let e=this.ctx,i=this.current.fillColor,n=this.current.patternFill;for(let s of t){let{data:a,width:o,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=u.context;d.save();let g=this.getObject(a,s);Hg(d,g),d.globalCompositeOperation="source-in",d.fillStyle=n?i.getPattern(d,this,bs(e),qi.FILL):i,d.fillRect(0,0,o,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),Jl(e,u.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;let e=this.getObject(t);if(!e){ue("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,n){if(!this.contentVisible)return;let s=this.getObject(t);if(!s){ue("Dependent image isn't ready yet");return}let a=s.width,o=s.height,l=[];for(let c=0,u=n.length;c<u;c+=2)l.push({transform:[e,0,0,i,n[c],n[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",s.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;let e=t.width,i=t.height,n=this.ctx;if(this.save(),!Ni){let{filter:o}=n;o!=="none"&&o!==""&&(n.filter="none")}n.scale(1/e,-1/i);let s;if(t.bitmap)s=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)s=t;else{let l=this.cachedCanvases.getCanvas("inlineImage",e,i).context;Ug(l,t),s=this.applyTransferMapsToCanvas(l)}let a=this._scaleImage(s,bs(n));n.imageSmoothingEnabled=Vg(We(n),t.interpolate),Jl(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;let i=this.ctx,n;if(t.bitmap)n=t.bitmap;else{let s=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;Ug(l,t),n=this.applyTransferMapsToCanvas(l)}for(let s of e)i.save(),i.transform(...s.transform),i.scale(1,-1),Jl(i,n,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){let e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);let i=this.ctx;this.pendingClip&&(e||(this.pendingClip===qg?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=We(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform(),a,o;if(i===0&&n===0){let l=Math.abs(e),c=Math.abs(s);if(l===c)if(t===0)a=o=1/l;else{let u=l*t;a=o=u<1?1/u:1}else if(t===0)a=1/l,o=1/c;else{let u=l*t,d=c*t;a=u<1?1/u:1,o=d<1?1/d:1}}else{let l=Math.abs(e*s-i*n),c=Math.hypot(e,i),u=Math.hypot(n,s);if(t===0)a=u/l,o=c/l;else{let d=t*l;a=u>d?u/d:1,o=c>d?c/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){let{ctx:e}=this,{lineWidth:i}=this.current,[n,s]=this.getScaleForStroking();if(e.lineWidth=i||1,n===1&&s===1){e.stroke();return}let a=e.getLineDash();if(t&&e.save(),e.scale(n,s),a.length>0){let o=Math.max(n,s);e.setLineDash(a.map(l=>l/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let r in On)ma.prototype[r]!==void 0&&(ma.prototype[On[r]]=ma.prototype[r]);var yr=class{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}},Zl={UNKNOWN:0,DATA:1,ERROR:2},fi={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function an(r){switch(r instanceof Error||typeof r=="object"&&r!==null||Ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new _s(r.message);case"MissingPDFException":return new ws(r.message);case"PasswordException":return new xo(r.message,r.code);case"UnexpectedResponseException":return new va(r.message,r.status);case"UnknownErrorException":return new Ao(r.message,r.details);default:return new Ao(r.message,r.toString())}}var vr=class{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){let i=t.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Zl.DATA)n.resolve(t.data);else if(t.callback===Zl.ERROR)n.reject(an(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let i=this.sourceName,n=t.sourceName,s=this.comObj;new Promise(function(a){a(e(t.data))}).then(function(a){s.postMessage({sourceName:i,targetName:n,callback:Zl.DATA,callbackId:t.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:n,callback:Zl.ERROR,callbackId:t.callbackId,reason:an(a)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){let i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){let n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(t,e,i,n){let s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:s,data:e,desiredSize:c.desiredSize},n),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:fi.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{vi(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:fi.CANCEL,streamId:s,reason:an(c)}),u.promise}},i)}#i(t){let e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;let g=this.desiredSize;this.desiredSize-=u,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:fi.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:fi.CLOSE,streamId:e}),delete a.streamSinks[e])},error(c){vi(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:fi.ERROR,streamId:e,reason:an(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(c){c(o(t.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:n,stream:fi.START_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:i,targetName:n,stream:fi.START_COMPLETE,streamId:e,reason:an(c)})})}#n(t){let e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case fi.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(an(t.reason));break;case fi.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(an(t.reason));break;case fi.PULL:if(!o){s.postMessage({sourceName:i,targetName:n,stream:fi.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise(function(l){l(o.onPull?.())}).then(function(){s.postMessage({sourceName:i,targetName:n,stream:fi.PULL_COMPLETE,streamId:e,success:!0})},function(l){s.postMessage({sourceName:i,targetName:n,stream:fi.PULL_COMPLETE,streamId:e,reason:an(l)})});break;case fi.ENQUEUE:if(vi(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case fi.CLOSE:if(vi(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#s(a,e);break;case fi.ERROR:vi(a,"error should have stream controller"),a.controller.error(an(t.reason)),this.#s(a,e);break;case fi.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(an(t.reason)),this.#s(a,e);break;case fi.CANCEL:if(!o)break;new Promise(function(l){l(o.onCancel?.(an(t.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:n,stream:fi.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){s.postMessage({sourceName:i,targetName:n,stream:fi.CANCEL_COMPLETE,streamId:e,reason:an(l)})}),o.sinkCapability.reject(an(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#s(t,e){return dt(this,null,function*(){yield Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]})}destroy(){this.#t?.abort(),this.#t=null}},Yu=class{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}getAll(){return qd(this.#t)}has(t){return this.#t.has(t)}},ga=Symbol("INTERNAL"),Ku=class{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:n,rbGroups:s}){this.#t=!!(t&on.DISPLAY),this.#e=!!(t&on.PRINT),this.name=e,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;let{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==ga&&Ue("Internal method `_setVisible` called."),this.#i=i,this.#n=e}},Ju=class{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=on.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(let i of t.groups)this.#e.set(i.id,new Ku(e,i));if(t.baseState==="OFF")for(let i of this.#e.values())i._setVisible(ga,!1);for(let i of t.on)this.#e.get(i)._setVisible(ga,!0);for(let i of t.off)this.#e.get(i)._setVisible(ga,!1);this.#i=this.getHash()}}#s(t){let e=t.length;if(e<2)return!0;let i=t[0];for(let n=1;n<e;n++){let s=t[n],a;if(Array.isArray(s))a=this.#s(s);else if(this.#e.has(s))a=this.#e.get(s).visible;else return ue(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return zc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(ue(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#e.has(e))return ue(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#e.has(e))return ue(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#e.has(e))return ue(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#e.has(e))return ue(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return ue(`Unknown optional content policy ${t.policy}.`),!0}return ue(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){let n=this.#e.get(t);if(!n){ue(`Optional content group not found: ${t}`);return}if(i&&e&&n.rbGroups.length)for(let s of n.rbGroups)for(let a of s)a!==t&&this.#e.get(a)?._setVisible(ga,!1,!0);n._setVisible(ga,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(let n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}let s=this.#e.get(n);if(s)switch(i){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!s.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?qd(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;let t=new hc;for(let[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}},Qu=class{constructor(t,{disableRange:e=!1,disableStream:i=!1}){vi(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:n,initialData:s,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,s?.length>0){let l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let n=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});vi(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){vi(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new Zu(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new td(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},Zu=class{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=Gd(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return dt(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},td=class{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return dt(this,null,function*(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function W1(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let u=o(e);return u=unescape(u),u=l(u),u=c(u),s(u)}if(e=a(r),e){let u=c(e);return s(u)}if(e=i("filename","i").exec(r),e){e=e[1];let u=o(e);return u=c(u),s(u)}function i(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function n(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let g=new TextDecoder(u,{fatal:!0}),p=Uc(d);d=g.decode(p),t=!1}catch{}}return d}function s(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function a(u){let d=[],g,p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=p.exec(u))!==null;){let[,y,x,_]=g;if(y=parseInt(y,10),y in d){if(y===0)break;continue}d[y]=[x,_]}let v=[];for(let y=0;y<d.length&&y in d;++y){let[x,_]=d[y];_=o(_),x&&(_=unescape(_),y===0&&(_=l(_))),v.push(_)}return v.join("")}function o(u){if(u.startsWith('"')){let d=u.slice(1).split('\\"');for(let g=0;g<d.length;++g){let p=d[g].indexOf('"');p!==-1&&(d[g]=d[g].slice(0,p),d.length=g+1),d[g]=d[g].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){let d=u.indexOf("'");if(d===-1)return u;let g=u.slice(0,d),v=u.slice(d+1).replace(/^[^']*'/,"");return n(g,v)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,g,p,v){if(p==="q"||p==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,x){return String.fromCharCode(parseInt(x,16))}),n(g,v);try{v=atob(v)}catch{}return n(g,v)})}return""}function Xd(r,t){let e=new Headers;if(!r||!t||typeof t!="object")return e;for(let i in t){let n=t[i];n!==void 0&&e.append(i,n)}return e}function Yd({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){let n={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(n.suggestedLength=s,s<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function Kd(r){let t=r.get("Content-Disposition");if(t){let e=W1(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Gd(e))return e}return null}function qc(r,t){return r===404||r===0&&t.startsWith("file:")?new ws('Missing PDF "'+t+'".'):new va(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r)}function Kg(r){return r===200||r===206}function Jg(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Qg(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ue(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}var yc=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Xd(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return vi(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ed(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new id(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},ed=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let i=new Headers(t.headers),n=e.url;fetch(n,Jg(i,this._withCredentials,this._abortController)).then(s=>{if(!Kg(s.status))throw qc(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();let a=s.headers,{allowRangeRequests:o,suggestedLength:l}=Yd({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=Kd(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _s("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){yield this._headersCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Qg(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},id=class{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;let n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;let s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);let a=n.url;fetch(a,Jg(s,this._withCredentials,this._abortController)).then(o=>{if(!Kg(o.status))throw qc(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){yield this._readCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Qg(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},Cu=200,Pu=206;function G1(r){let t=r.response;return typeof t!="string"?t:Uc(t).buffer}var nd=class{constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Xd(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){let n={begin:t,end:e};for(let s in i)n[s]=i[s];return this.request(n)}requestFull(t){return this.request(t)}request(t){let e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[s,a]of this.headers)e.setRequestHeader(s,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Pu):n.expectedStatus=Cu,e.responseType="arraybuffer",t.onError&&(e.onerror=function(s){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){let i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){let i=this.pendingRequests[t];if(!i)return;let n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){i.onError?.(n.status);return}let s=n.status||Cu;if(!(s===Cu&&i.expectedStatus===Pu)&&s!==i.expectedStatus){i.onError?.(n.status);return}let o=G1(n);if(s===Pu){let l=n.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);i.onDone({begin:parseInt(c[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):i.onError?.(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},sd=class{constructor(t){this._source=t,this._manager=new nd(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return vi(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rd(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let i=new ad(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},rd=class{constructor(t,e){this._manager=t;let i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{let[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:n,suggestedLength:s}=Yd({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=Kd(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=qc(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return dt(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},ad=class{constructor(t,e,i){this._manager=t;let n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=qc(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return dt(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},$1=/^[a-z][a-z0-9\-+.]+:/i;function X1(r){if($1.test(r))return new URL(r);let t=Jn.get("url");return new URL(t.pathToFileURL(r))}function Zg(r,t,e){return r.protocol==="http:"?Jn.get("http").request(r,{headers:t},e):Jn.get("https").request(r,{headers:t},e)}var od=class{constructor(t){this.source=t,this.url=X1(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Xd(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return vi(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new hd(this):new ld(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=this.isFsUrl?new ud(this,t,e):new cd(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},wc=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _s("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},_c=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return dt(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},ld=class extends wc{constructor(t){super(t);let e=Object.fromEntries(t.headers),i=n=>{if(n.statusCode===404){let l=new ws(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);let s=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=Yd({responseHeaders:s,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=Kd(s)};this._request=Zg(this._url,e,i),this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}},cd=class extends _c{constructor(t,e,i){super(t);let n=Object.fromEntries(t.headers);n.Range=`bytes=${e}-${i-1}`;let s=a=>{if(a.statusCode===404){let o=new ws(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=Zg(this._url,n,s),this._request.on("error",a=>{this._storedError=a}),this._request.end()}},hd=class extends wc{constructor(t){super(t);let e=Jn.get("fs");e.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new ws(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}},ud=class extends _c{constructor(t,e,i){super(t);let n=Jn.get("fs");this._setReadableStream(n.createReadStream(this._url,{start:e,end:i-1}))}},Y1=1e5,Ji=30,K1=.8,ko=class r{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#r=null;#l=0;#c=0;#h=null;#o=null;#u=0;#a=0;#d=Object.create(null);#p=[];#f=null;#g=[];#b=new WeakMap;#m=null;static#v=new Map;static#w=new Map;static#A=new WeakMap;static#_=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=e,this.#a=i.scale*(globalThis.devicePixelRatio||1),this.#u=i.rotation,this.#r={div:null,properties:null,ctx:null};let{pageWidth:n,pageHeight:s,pageX:a,pageY:o}=i.rawDims;this.#m=[1,0,0,-1,-a,o+s],this.#c=n,this.#l=s,r.#T(),wr(e,i),this.#t.promise.finally(()=>{r.#x.delete(this),this.#r=null,this.#d=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=Ei.platform;return me(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#h.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#s??=e.lang,Object.assign(this.#d,e.styles),this.#k(e.items),t()},this.#t.reject)};return this.#h=this.#f.getReader(),r.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){let i=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==this.#u&&(e?.(),this.#u=n,wr(this.#o,{rotation:n})),i!==this.#a){e?.(),this.#a=i;let s={div:null,properties:null,ctx:r.#L(this.#s)};for(let a of this.#g)s.properties=this.#b.get(a),s.div=a,this.#C(s)}}cancel(){let t=new _s("TextLayer task cancelled.");this.#h?.cancel(t).catch(()=>{}),this.#h=null,this.#t.reject(t)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#p}#k(t){if(this.#i)return;this.#r.ctx??=r.#L(this.#s);let e=this.#g,i=this.#p;for(let n of t){if(e.length>Y1){ue("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){let s=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),n.id!==null&&this.#e.setAttribute("id",`${n.id}`),s.append(this.#e)}else n.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(n.str),this.#E(n)}}#E(t){let e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#g.push(e);let n=Vt.transform(this.#m,t.transform),s=Math.atan2(n[1],n[0]),a=this.#d[t.fontName];a.vertical&&(s+=Math.PI/2);let o=this.#n&&a.fontSubstitution||a.fontFamily;o=r.fontFamilyMap.get(o)||o;let l=Math.hypot(n[2],n[3]),c=l*r.#N(o,this.#s),u,d;s===0?(u=n[4],d=n[5]-c):(u=n[4]+c*Math.sin(s),d=n[5]-c*Math.cos(s));let g="calc(var(--scale-factor)*",p=e.style;this.#e===this.#o?(p.left=`${(100*u/this.#c).toFixed(2)}%`,p.top=`${(100*d/this.#l).toFixed(2)}%`):(p.left=`${g}${u.toFixed(2)}px)`,p.top=`${g}${d.toFixed(2)}px)`),p.fontSize=`${g}${(r.#_*l).toFixed(2)}px)`,p.fontFamily=o,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let y=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);y!==x&&Math.max(y,x)/Math.min(y,x)>1.5&&(v=!0)}if(v&&(i.canvasWidth=a.vertical?t.height:t.width),this.#b.set(e,i),this.#r.div=e,this.#r.properties=i,this.#C(this.#r),i.hasText&&this.#e.append(e),i.hasEOL){let y=document.createElement("br");y.setAttribute("role","presentation"),this.#e.append(y)}}#C(t){let{div:e,properties:i,ctx:n}=t,{style:s}=e,a="";if(r.#_>1&&(a=`scale(${1/r.#_})`),i.canvasWidth!==0&&i.hasText){let{fontFamily:o}=s,{canvasWidth:l,fontSize:c}=i;r.#S(n,c*this.#a,o);let{width:u}=n.measureText(e.textContent);u>0&&(a=`scaleX(${l*this.#a/u}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(let{canvas:t}of this.#w.values())t.remove();this.#w.clear()}}static#L(t=null){let e=this.#w.get(t||="");if(!e){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(t,e),this.#A.set(e,{size:0,family:""})}return e}static#S(t,e,i){let n=this.#A.get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)}static#T(){if(this.#_!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#N(t,e){let i=this.#v.get(t);if(i)return i;let n=this.#L(e);n.canvas.width=n.canvas.height=Ji,this.#S(n,Ji,t);let s=n.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){let u=a/(a+o);return this.#v.set(t,u),n.canvas.width=n.canvas.height=0,u}n.strokeStyle="red",n.clearRect(0,0,Ji,Ji),n.strokeText("g",0,0);let l=n.getImageData(0,0,Ji,Ji).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/Ji);break}n.clearRect(0,0,Ji,Ji),n.strokeText("A",0,Ji),l=n.getImageData(0,0,Ji,Ji).data,a=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){a=Ji-Math.floor(u/4/Ji);break}n.canvas.width=n.canvas.height=0;let c=a?a/(a+o):K1;return this.#v.set(t,c),c}},To=class r{static textContent(t){let e=[],i={items:e,styles:Object.create(null)};function n(s){if(!s)return;let a=null,o=s.name;if(o==="#text")a=s.value;else if(r.shouldBuildText(o))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&e.push({str:a}),!!s.children)for(let l of s.children)n(l)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},J1=65536,Q1=100,Z1=5e3,t2=Ni?Uu:ju,e2=Ni?Hu:pc,i2=Ni?zu:Bu,n2=Ni?Vu:bc;function s2(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let t=new dd,{docId:e}=t,i=r.url?r2(r.url):null,n=r.data?a2(r.data):null,s=r.httpHeaders||null,a=r.withCredentials===!0,o=r.password??null,l=r.range instanceof xc?r.range:null,c=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:J1,u=r.worker instanceof ba?r.worker:null,d=r.verbosity,g=typeof r.docBaseUrl=="string"&&!Vc(r.docBaseUrl)?r.docBaseUrl:null,p=typeof r.cMapUrl=="string"?r.cMapUrl:null,v=r.cMapPacked!==!1,y=r.CMapReaderFactory||e2,x=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,_=r.StandardFontDataFactory||n2,A=r.stopAtErrors!==!0,T=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,R=r.isEvalSupported!==!1,z=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ni,Y=typeof r.isChrome=="boolean"?r.isChrome:!Ei.platform.isFirefox&&typeof window<"u"&&!!window?.chrome,U=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,F=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ni,I=r.fontExtraProperties===!0,W=r.enableXfa===!0,S=r.ownerDocument||globalThis.document,N=r.disableRange===!0,G=r.disableStream===!0,H=r.disableAutoFetch===!0,at=r.pdfBug===!0,rt=r.CanvasFactory||t2,it=r.FilterFactory||i2,Q=r.enableHWA===!0,ut=l?l.length:r.length??NaN,pt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ni&&!F,Mt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:y===pc&&_===bc&&p&&x&&wo(p,document.baseURI)&&wo(x,document.baseURI);r.canvasFactory&&Ng("`canvasFactory`-instance option, please use `CanvasFactory` instead."),r.filterFactory&&Ng("`filterFactory`-instance option, please use `FilterFactory` instead.");let L=null;y1(d);let j={canvasFactory:new rt({ownerDocument:S,enableHWA:Q}),filterFactory:new it({docId:e,ownerDocument:S}),cMapReaderFactory:Mt?null:new y({baseUrl:p,isCompressed:v}),standardFontDataFactory:Mt?null:new _({baseUrl:x})};if(!u){let Z={verbosity:d,port:yr.workerPort};u=Z.port?ba.fromPort(Z):new ba(Z),t._worker=u}let V={docId:e,apiVersion:"4.8.69",data:n,password:o,disableAutoFetch:H,rangeChunkSize:c,length:ut,docBaseUrl:g,enableXfa:W,evaluatorOptions:{maxImageSize:T,disableFontFace:F,ignoreErrors:A,isEvalSupported:R,isOffscreenCanvasSupported:z,isChrome:Y,canvasMaxAreaInBytes:U,fontExtraProperties:I,useSystemFonts:pt,cMapUrl:Mt?p:null,standardFontDataUrl:Mt?x:null}},$={disableFontFace:F,fontExtraProperties:I,ownerDocument:S,pdfBug:at,styleElement:L,loadingParams:{disableAutoFetch:H,enableXfa:W}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Z=u.messageHandler.sendWithPromise("GetDocRequest",V,n?[n.buffer]:null),nt;if(l)nt=new Qu(l,{disableRange:N,disableStream:G});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let ct;Ni?ct=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&wo(i)?yc:od:ct=wo(i)?yc:sd,nt=new ct({url:i,length:ut,httpHeaders:s,withCredentials:a,rangeChunkSize:c,disableRange:N,disableStream:G})}return Z.then(ct=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let ht=new vr(e,ct,u.port),Et=new md(ht,t,nt,$,j);t._transport=Et,ht.send("Ready",null)})}).catch(t._capability.reject),t}function r2(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(Ni&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function a2(r){if(Ni&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Uc(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Wg(r){return typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0}var dd=class r{static#t=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${r.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return dt(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}},xc=class{constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(let i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},fd=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},pd=class{#t=null;#e=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new oc:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new Ac,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new Co({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return dt(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:n=Ys.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:u=null,isEditing:d=!1}){this._stats?.time("Overall");let g=this._transport.getRenderingIntent(i,n,u,d),{renderingIntent:p,cacheKey:v}=g;this.#e=!1,this.#n(),o||=this._transport.getOptionalContentConfig(p);let y=this._intentStates.get(v);y||(y=Object.create(null),this._intentStates.set(v,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);let x=!!(p&on.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));let _=R=>{y.renderTasks.delete(A),(this._maybeCleanupAfterRender||x)&&(this.#e=!0),this.#i(!x),R?(A.capability.reject(R),this._abortOperatorList({intentState:y,reason:R instanceof Error?R:new Error(R)})):A.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},A=new vd({callback:_,params:{canvasContext:t,viewport:e,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:c});(y.renderTasks||=new Set).add(A);let T=A.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([R,z])=>{if(this.destroyed){_();return}if(this._stats?.time("Rendering"),!(z.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:R,optionalContentConfig:z}),A.operatorListChanged()}).catch(_),T}getOperatorList({intent:t="display",annotationMode:e=Ys.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}let a=this._transport.getRenderingIntent(t,e,i,n,!0),o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>To.textContent(i));let e=this.streamTextContent(t);return new Promise(function(i,n){function s(){a.read().then(function({value:l,done:c}){if(c){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},n)}let a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(t)}cleanup(t=!1){this.#e=!0;let e=this.#i(!1);return t&&e&&(this._stats&&=new oc),e}#i(t=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(t)return this.#t=setTimeout(()=>{this.#t=null,this.#i(!1)},Z1),!1;for(let{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(t,e){let i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){let{map:s,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:n},a).getReader(),c=this._intentStates.get(e);c.streamReader=l;let u=()=>{l.read().then(({value:d,done:g})=>{if(g){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let g of c.renderTasks)g.operatorListChanged();this.#i(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Po){let n=Q1;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new _s(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[n,s]of this._intentStates)if(s===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}},gd=class{#t=new Map;#e=Promise.resolve();postMessage(t,e){let i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(let[n]of this.#t)n.call(this,i)})}addEventListener(t,e,i=null){let n=null;if(i?.signal instanceof AbortSignal){let{signal:s}=i;if(s.aborted){ue("LoopbackPort - cannot use an `aborted` signal.");return}let a=()=>this.removeEventListener(t,e);n=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#t.set(e,n)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(let[,t]of this.#t)t?.();this.#t.clear()}},ba=class r{static#t=0;static#e=!1;static#i;static{Ni&&(this.#e=!0,yr.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i;try{if(i=new URL(t),!i.origin||i.origin==="null")return!1}catch{return!1}let n=new URL(e,i);return i.origin===n.origin},this._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}constructor({name:t=null,port:e=null,verbosity:i=w1()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(r.#i?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(r.#i||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Ni?Promise.all([Jn.promise,this._readyCapability.promise]):this._readyCapability.promise}#n(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new vr("main","worker",t),this._messageHandler.on("ready",function(){}),this.#n()}_initialize(){if(r.#e||r.#s){this._setupFakeWorker();return}let{workerSrc:t}=r;try{r._isSameOrigin(window.location.href,t)||(t=r._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),i=new vr("main","worker",e),n=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){n();return}this._messageHandler=i,this._port=e,this._webWorker=e,this.#n()}),i.on("ready",o=>{if(s.abort(),this.destroyed){n();return}try{a()}catch{this._setupFakeWorker()}});let a=()=>{let o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{zc("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){r.#e||(ue("Setting up fake worker."),r.#e=!0),r._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new gd;this._port=e;let i=`fake${r.#t++}`,n=new vr(i+"_worker",i,e);t.setup(n,e),this._messageHandler=new vr(i,i+"_worker",e),this.#n()}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),r.#i?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let e=this.#i?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new r(t)}static get workerSrc(){if(yr.workerSrc)return yr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return me(this,"_setupFakeWorkerGlobal",dt(this,null,function*(){return this.#s?this.#s:(yield import(this.workerSrc)).WorkerMessageHandler}))}},md=class{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#s=null;constructor(t,e,i,n,s){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Ac,this.fontLoader=new Fu({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#r(t,e=null){let i=this.#t.get(t);if(i)return i;let n=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,n),n}get annotationStorage(){return me(this,"annotationStorage",new Lo)}getRenderingIntent(t,e=Ys.ENABLE,i=null,n=!1,s=!1){let a=on.DISPLAY,o=Ru;switch(t){case"any":a=on.ANY;break;case"display":break;case"print":a=on.PRINT;break;default:ue(`getRenderingIntent - invalid intent: ${t}`)}let l=a&on.PRINT&&i instanceof uc?i:this.annotationStorage;switch(e){case Ys.DISABLE:a+=on.ANNOTATIONS_DISABLE;break;case Ys.ENABLE:break;case Ys.ENABLE_FORMS:a+=on.ANNOTATIONS_FORMS;break;case Ys.ENABLE_STORAGE:a+=on.ANNOTATIONS_STORAGE,o=l.serializable;break;default:ue(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(a+=on.IS_EDITING),s&&(a+=on.OPLIST);let{ids:c,hash:u}=l.modifiedIds,d=[a,o.hash,u];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ko.cleanup(),this._networkStream?.cancelAllRequests(new _s("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,n)=>{vi(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},n.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){n.close();return}vi(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{n.error(s)})},n.onCancel=s=>{this._fullReader.cancel(s),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",i=>dt(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:n,isRangeSupported:s,contentLength:a}=this._fullReader;return(!n||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=o=>{e.onProgress?.({loaded:o.loaded,total:o.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:a}})),t.on("GetRangeReader",(i,n)=>{vi(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){n.close();return}n.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){n.close();return}vi(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{s.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new fd(i,this))}),t.on("DocException",function(i){let n;switch(i.name){case"PasswordException":n=new xo(i.message,i.code);break;case"InvalidPDFException":n=new ac(i.message);break;case"MissingPDFException":n=new ws(i.message);break;case"UnexpectedResponseException":n=new va(i.message,i.status);break;case"UnknownErrorException":n=new Ao(i.message,i.details);break;default:Ue("DocException - expected a valid Error.")}e._capability.reject(n)}),t.on("PasswordRequest",i=>{if(this.#s=Promise.withResolvers(),e.onPassword){let n=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};try{e.onPassword(n,i.code)}catch(s){this.#s.reject(s)}}else this.#s.reject(new xo(i.message,i.code));return this.#s.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":let{disableFontFace:a,fontExtraProperties:o,pdfBug:l}=this._params;if("error"in s){let g=s.error;ue(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}let c=l&&globalThis.FontInspector?.enabled?(g,p)=>globalThis.FontInspector.fontAdded(g,p):null,u=new Du(s,{disableFontFace:a,inspectFont:c});this.fontLoader.bind(u).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!o&&u.data&&(u.data=null),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":let{imageRef:d}=s;vi(d,"The imageRef must be defined.");for(let g of this.#e.values())for(let[,p]of g.objs)if(p?.ref===d)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,s,a])=>{if(this.destroyed)return;let o=this.#e.get(n);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":o.objs.resolve(i,a),a?.dataLen>p1&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBuiltInCMap",i=>dt(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)})),t.on("FetchStandardFontData",i=>dt(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ue("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,i=this.#i.get(e);if(i)return i;let n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#n.set(s.refStr,t);let a=new pd(e,s,this,this._params.pdfBug);return this.#e.set(e,a),a});return this.#i.set(e,n),n}getPageIndex(t){return Wg(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#r("GetOptionalContentConfig").then(e=>new Ju(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#t.get(t);if(e)return e;let i=this.messageHandler.sendWithPromise(t,null).then(n=>({info:n[0],metadata:n[1]?new Yu(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return dt(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ko.cleanup()}})}cachedPageNumber(t){if(!Wg(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}},tc=Symbol("INITIAL_DATA"),Ac=class{#t=Object.create(null);#e(t){return this.#t[t]||=mi(pe({},Promise.withResolvers()),{data:tc})}get(t,e=null){if(e){let n=this.#e(t);return n.promise.then(()=>e(n.data)),null}let i=this.#t[t];if(!i||i.data===tc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){let e=this.#t[t];return!!e&&e.data!==tc}resolve(t,e=null){let i=this.#e(t);i.data=e,i.resolve()}clear(){for(let t in this.#t){let{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(let t in this.#t){let{data:e}=this.#t[t];e!==tc&&(yield[t,e])}}},bd=class{#t=null;constructor(t){this.#t=t,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}},vd=class r{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:g=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new bd(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(r.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:i,viewport:n,transform:s,background:a}=this.params;this.gfx=new ma(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),r.#e.delete(this._canvas),this.callback(t||new Po(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return dt(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),r.#e.delete(this._canvas),this.callback())))})}},o2="4.8.69",l2="3634dab10";function Gg(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function yo(r){return Math.max(0,Math.min(255,255*r))}var Cc=class{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=yo(t),[t,t,t]}static G_HTML([t]){let e=Gg(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(yo)}static RGB_HTML(t){return`#${t.map(Gg).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[yo(1-Math.min(1,t+n)),yo(1-Math.min(1,i+n)),yo(1-Math.min(1,e+n))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){let n=1-t,s=1-e,a=1-i,o=Math.min(n,s,a);return["CMYK",n,s,a,o]}},yd=class{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ue("Abstract method `_createSVG` called.")}},Oo=class extends yd{_createSVG(t){return document.createElementNS(vs,t)}},Pc=class{static setupStorage(t,e,i,n,s){let a=n.getValue(e,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),s==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",o=>{n.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),s==="print")break;t.addEventListener("input",o=>{n.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(let o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{let l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:s}){let{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(let[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,e,i)}static render(t){let e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:s,linkService:i});let o=s!=="richText",l=t.div;if(l.append(a),t.viewport){let d=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=d}o&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(n.children.length===0){if(n.value){let d=document.createTextNode(n.value);a.append(d),o&&To.shouldBuildText(n.name)&&c.push(d)}return{textDivs:c}}let u=[[n,-1,a]];for(;u.length>0;){let[d,g,p]=u.at(-1);if(g+1===d.children.length){u.pop();continue}let v=d.children[++u.at(-1)[1]];if(v===null)continue;let{name:y}=v;if(y==="#text"){let _=document.createTextNode(v.value);c.push(_),p.append(_);continue}let x=v?.attributes?.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y);if(p.append(x),v.attributes&&this.setAttributes({html:x,element:v,storage:e,intent:s,linkService:i}),v.children?.length>0)u.push([v,-1,x]);else if(v.value){let _=document.createTextNode(v.value);o&&To.shouldBuildText(y)&&c.push(_),x.append(_)}}for(let d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},Fo=1e3,c2=9,xr=new WeakSet;function ys(r){return{width:r[2]-r[0],height:r[3]-r[1]}}var wd=class{static create(t){switch(t.data.annotationType){case bi.LINK:return new Sc(t);case bi.TEXT:return new _d(t);case bi.WIDGET:switch(t.data.fieldType){case"Tx":return new xd(t);case"Btn":return t.data.radioButton?new Ec(t):t.data.checkBox?new Cd(t):new Pd(t);case"Ch":return new Sd(t);case"Sig":return new Ad(t)}return new xs(t);case bi.POPUP:return new No(t);case bi.FREETEXT:return new Lc(t);case bi.LINE:return new Ld(t);case bi.SQUARE:return new Md(t);case bi.CIRCLE:return new kd(t);case bi.POLYLINE:return new Mc(t);case bi.CARET:return new Od(t);case bi.INK:return new Io(t);case bi.POLYGON:return new Td(t);case bi.HIGHLIGHT:return new kc(t);case bi.UNDERLINE:return new Nd(t);case bi.SQUIGGLY:return new Id(t);case bi.STRIKEOUT:return new Rd(t);case bi.STAMP:return new Tc(t);case bi.FILEATTACHMENT:return new Fd(t);default:return new ri(t)}}},ri=class r{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return r._hasPopupData(this.data)}updateEdited(t){if(!this.container)return;this.#t||={rect:this.data.rect.slice(0)};let{rect:e}=t;e&&this.#n(e),this.#i?.popup.updateEdited(t)}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){let{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...t);let{width:c,height:u}=ys(t);e.left=`${100*(t[0]-o)/s}%`,e.top=`${100*(a-t[3]+l)/a}%`,n===0?(e.width=`${100*c/s}%`,e.height=`${100*u/a}%`):this.setRotation(n)}_createContainer(t){let{data:e,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),this instanceof xs||(s.tabIndex=Fo);let{style:a}=s;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof No){let{rotation:y}=e;return!e.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}let{width:o,height:l}=ys(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;let y=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(y>0||x>0){let A=`calc(${y}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;a.borderRadius=A}else if(this instanceof Ec){let A=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=A}switch(e.borderStyle.style){case bo.SOLID:a.borderStyle="solid";break;case bo.DASHED:a.borderStyle="dashed";break;case bo.BEVELED:ue("Unimplemented border style: beveled");break;case bo.INSET:ue("Unimplemented border style: inset");break;case bo.UNDERLINE:a.borderBottomStyle="solid";break;default:break}let _=e.borderColor||null;_?(this.#e=!0,a.borderColor=Vt.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):a.borderWidth=0}let c=Vt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:d,pageX:g,pageY:p}=n.rawDims;a.left=`${100*(c[0]-g)/u}%`,a.top=`${100*(c[1]-p)/d}%`;let{rotation:v}=e;return e.hasOwnCanvas||v===0?(a.width=`${100*o/u}%`,a.height=`${100*l/d}%`):this.setRotation(v,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:s,height:a}=ys(this.data.rect),o,l;t%180===0?(o=100*s/i,l=100*a/n):(o=100*a/i,l=100*s/n),e.style.width=`${o}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,i,n)=>{let s=n.detail[e],a=s[0],o=s.slice(1);n.target.style[i]=Cc[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:Cc[`${a}_rgb`](o)})};return me(this,"_commonActions",{display:e=>{let{display:i}=e.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){let i=this._commonActions;for(let n of Object.keys(e.detail))(t[n]||i[n])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let i=this._commonActions;for(let[n,s]of Object.entries(e)){let a=i[n];if(a){let o={detail:{[n]:s},target:t};a(o),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,i,n,s]=this.data.rect.map(y=>Math.fround(y));if(t.length===8){let[y,x,_,A]=t.subarray(2,6);if(n===y&&s===x&&e===_&&i===A)return}let{style:a}=this.container,o;if(this.#e){let{borderColor:y,borderWidth:x}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}let l=n-e,c=s-i,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);let g=u.createElement("defs");d.append(g);let p=u.createElement("clipPath"),v=`clippath_${this.data.id}`;p.setAttribute("id",v),p.setAttribute("clipPathUnits","objectBoundingBox"),g.append(p);for(let y=2,x=t.length;y<x;y+=8){let _=t[y],A=t[y+1],T=t[y+2],R=t[y+3],z=u.createElement("rect"),Y=(T-e)/l,U=(s-A)/c,F=(_-T)/l,I=(A-R)/c;z.setAttribute("x",Y),z.setAttribute("y",U),z.setAttribute("width",F),z.setAttribute("height",I),p.append(z),o?.push(`<rect vector-effect="non-scaling-stroke" x="${Y}" y="${U}" width="${F}" height="${I}"/>`)}this.#e&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(){let{data:t}=this,e=this.#i=new No({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let i=[];if(this._fieldObjects){let n=this._fieldObjects[t];if(n)for(let{page:s,id:a,exportValues:o}of n){if(s===-1||a===e)continue;let l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!xr.has(c)){ue(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:c})}return i}for(let n of document.getElementsByName(t)){let{exportValue:s}=n,a=n.getAttribute("data-element-id");a!==e&&xr.has(n)&&i.push({id:a,exportValue:s,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}},Sc=class extends ri{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action),n=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),n=!0):t.setOCGState?(this.#i(i,t.setOCGState),n=!0):t.dest?(this._bindLink(i,t.dest),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#t()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),e.description&&(t.title=e.description),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#t()}#i(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let n of Object.keys(e.actions)){let s=i.get(n);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){ue('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:n,refs:s,include:a}=e,o=[];if(n.length!==0||s.length!==0){let u=new Set(s);for(let d of n){let g=this._fieldObjects[d]||[];for(let{id:p}of g)u.add(p)}for(let d of Object.values(this._fieldObjects))for(let g of d)u.has(g.id)===a&&o.push(g)}else for(let u of Object.values(this._fieldObjects))o.push(...u);let l=this.annotationStorage,c=[];for(let u of o){let{id:d}=u;switch(c.push(d),u.type){case"text":{let p=u.defaultValue||"";l.setValue(d,{value:p});break}case"checkbox":case"radiobutton":{let p=u.defaultValue===u.exportValues;l.setValue(d,{value:p});break}case"combobox":case"listbox":{let p=u.defaultValue||"";l.setValue(d,{value:p});break}default:continue}let g=document.querySelector(`[data-element-id="${d}"]`);if(g){if(!xr.has(g)){ue(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},_d=class extends ri{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},xs=class extends ri{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ei.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(i,a=>{if(i==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(a)}})})}_setEventListeners(t,e,i,n){for(let[s,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,a,n),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Vt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||c2,s=t.style,a,o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(c/(ic*n))||1,d=c/u;a=Math.min(n,l(d/ic))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,l(c/ic))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=Vt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},xd=class extends xs{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,n){let s=this.annotationStorage;for(let a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),s.setValue(a.id,{[n]:i})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){let n=t.getValue(e,{value:this.data.fieldValue}),s=n.value||"",a=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let o=n.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));let l={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",o??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),xr.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Fo,this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",u=>{t.setValue(e,{value:u.target.value}),this.setPropertyOnSiblings(i,"value",u.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue??"";i.value=l.userValue=d,l.formattedValue=null});let c=u=>{let{formattedValue:d}=l;d!=null&&(u.target.value=d),u.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",d=>{if(l.focused)return;let{target:g}=d;l.userValue&&(g.value=l.userValue),l.lastCommittedValue=g.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);let g={value(p){l.userValue=p.detail.value??"",t.setValue(e,{value:l.userValue.toString()}),p.target.value=l.userValue},formattedValue(p){let{formattedValue:v}=p.detail;l.formattedValue=v,v!=null&&p.target!==document.activeElement&&(p.target.value=v),t.setValue(e,{formattedValue:v})},selRange(p){p.target.setSelectionRange(...p.detail.selRange)},charLimit:p=>{let{charLimit:v}=p.detail,{target:y}=p;if(v===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",v);let x=l.userValue;!x||x.length<=v||(x=x.slice(0,v),y.value=l.userValue=x,t.setValue(e,{value:x}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(g,d)}),i.addEventListener("keydown",d=>{l.commitKey=1;let g=-1;if(d.key==="Escape"?g=0:d.key==="Enter"&&!this.data.multiLine?g=2:d.key==="Tab"&&(l.commitKey=3),g===-1)return;let{value:p}=d.target;l.lastCommittedValue!==p&&(l.lastCommittedValue=p,l.userValue=p,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:p,willCommit:!0,commitKey:g,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});let u=c;c=null,i.addEventListener("blur",d=>{if(!l.focused||!d.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{value:g}=d.target;l.userValue=g,l.lastCommittedValue!==g&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:l.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}),u(d)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",d=>{l.lastCommittedValue=null;let{data:g,target:p}=d,{value:v,selectionStart:y,selectionEnd:x}=p,_=y,A=x;switch(d.inputType){case"deleteWordBackward":{let T=v.substring(0,y).match(/\w*[^\w]*$/);T&&(_-=T[0].length);break}case"deleteWordForward":{let T=v.substring(y).match(/^[^\w]*\w*/);T&&(A+=T[0].length);break}case"deleteContentBackward":y===x&&(_-=1);break;case"deleteContentForward":y===x&&(A+=1);break}d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,change:g||"",willCommit:!1,selStart:_,selEnd:A}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){let d=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},Ad=class extends xs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},Cd=class extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,i=e.id,n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return xr.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=Fo,s.addEventListener("change",a=>{let{name:o,checked:l}=a.target;for(let c of this._getElementsByName(o,i)){let u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{let o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{let o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Ec=class extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,i=e.id,n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(let a of this._getElementsByName(e.fieldName,i))t.setValue(a.id,{value:!1});let s=document.createElement("input");if(xr.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=Fo,s.addEventListener("change",a=>{let{name:o,checked:l}=a.target;for(let c of this._getElementsByName(o,i))t.setValue(c.id,{value:!1});t.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{let o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){let a=e.buttonValue;s.addEventListener("updatefromsandbox",o=>{let l={value:c=>{let u=a===c.detail.value;for(let d of this._getElementsByName(c.target.name)){let g=u&&d.id===i;d.domElement&&(d.domElement.checked=g),t.setValue(d.id,{value:g})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Pd=class extends Sc{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}},Sd=class extends xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");xr.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Fo;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue;for(let g of n.options)g.selected=g.value===d});for(let u of this.data.options){let d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,i.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),n.append(d)}let a=null;if(s){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),a=()=>{u.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}let o=u=>{let d=u?"value":"textContent",{options:g,multiple:p}=n;return p?Array.prototype.filter.call(g,v=>v.selected).map(v=>v[d]):g.selectedIndex===-1?null:g[g.selectedIndex][d]},l=o(!1),c=u=>{let d=u.target.options;return Array.prototype.map.call(d,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{let d={value(g){a?.();let p=g.detail.value,v=new Set(Array.isArray(p)?p:[p]);for(let y of n.options)y.selected=v.has(y.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(g){n.multiple=!0},remove(g){let p=n.options,v=g.detail.remove;p[v].selected=!1,n.remove(v),p.length>0&&Array.prototype.findIndex.call(p,x=>x.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:o(!0),items:c(g)}),l=o(!1)},clear(g){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(g){let{index:p,displayValue:v,exportValue:y}=g.detail.insert,x=n.children[p],_=document.createElement("option");_.textContent=v,_.value=y,x?x.before(_):n.append(_),t.setValue(e,{value:o(!0),items:c(g)}),l=o(!1)},items(g){let{items:p}=g.detail;for(;n.length!==0;)n.remove(0);for(let v of p){let{displayValue:y,exportValue:x}=v,_=document.createElement("option");_.textContent=y,_.value=x,n.append(_)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:o(!0),items:c(g)}),l=o(!1)},indices(g){let p=new Set(g.detail.indices);for(let v of g.target.options)v.selected=p.has(v.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(d,u)}),n.addEventListener("input",u=>{let d=o(!0),g=o(!1);t.setValue(e,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:g,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},No=class extends ri{constructor(t){let{data:e,elements:i}=t;super(t,{isRenderable:ri._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");let t=this.popup=new Ed({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(let i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Wd}${i}`).join(",")),this.container}},Ed=class{#t=this.#k.bind(this);#e=this.#S.bind(this);#i=this.#L.bind(this);#n=this.#C.bind(this);#s=null;#r=null;#l=null;#c=null;#h=null;#o=null;#u=null;#a=!1;#d=null;#p=null;#f=null;#g=null;#b=null;#m=null;#v=!1;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:u,open:d}){this.#r=t,this.#b=n,this.#l=a,this.#g=o,this.#o=l,this.#s=e,this.#f=c,this.#u=u,this.#h=i,this.#c=lc.toDateObject(s),this.trigger=i.flatMap(g=>g.getElementsToTriggerPopup());for(let g of this.trigger)g.addEventListener("click",this.#n),g.addEventListener("mouseenter",this.#i),g.addEventListener("mouseleave",this.#e),g.classList.add("popupTriggerArea");for(let g of i)g.container?.addEventListener("keydown",this.#t);this.#r.hidden=!0,d&&this.#C()}render(){if(this.#d)return;let t=this.#d=document.createElement("div");if(t.className="popup",this.#s){let s=t.style.outlineColor=Vt.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:t.style.backgroundColor=Vt.makeHexColor(...this.#s.map(o=>Math.floor(.7*(255-o)+o)))}let e=document.createElement("span");e.className="header";let i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=this.#b,t.append(e),this.#c){let s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),e.append(s)}let n=this.#w;if(n)Pc.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{let s=this._formatContents(this.#l);t.append(s)}this.#r.append(t)}get#w(){let t=this.#g,e=this.#l;return t?.str&&(!e?.str||e.str===t.str)&&this.#g.html||null}get#A(){return this.#w?.attributes?.style?.fontSize||0}get#_(){return this.#w?.attributes?.style?.color||null}#x(t){let e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#_,fontSize:this.#A?`calc(${this.#A}px * var(--scale-factor))`:""}};for(let s of t.split(`
`))e.push({name:"span",value:s,attributes:n});return i}_formatContents({str:t,dir:e}){let i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;let n=t.split(/(?:\r\n?|\n)/);for(let s=0,a=n.length;s<a;++s){let o=n[s];i.append(document.createTextNode(o)),s<a-1&&i.append(document.createElement("br"))}return i}#k(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#a)&&this.#C()}updateEdited({rect:t,popupContent:e}){this.#m||={contentsObj:this.#l,richText:this.#g},t&&(this.#p=null),e&&(this.#g=this.#x(e),this.#l=null),this.#d?.remove(),this.#d=null}resetEdited(){this.#m&&({contentsObj:this.#l,richText:this.#g}=this.#m,this.#m=null,this.#d?.remove(),this.#d=null,this.#p=null)}#E(){if(this.#p!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=this.#o,a=!!this.#u,o=a?this.#u:this.#f;for(let v of this.#h)if(!o||Vt.intersect(v.data.rect,o)!==null){o=v.data.rect,a=!0;break}let l=Vt.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),u=a?o[2]-o[0]+5:0,d=l[0]+u,g=l[1];this.#p=[100*(d-n)/e,100*(g-s)/i];let{style:p}=this.#r;p.left=`${this.#p[0]}%`,p.top=`${this.#p[1]}%`}#C(){this.#a=!this.#a,this.#a?(this.#L(),this.#r.addEventListener("click",this.#n),this.#r.addEventListener("keydown",this.#t)):(this.#S(),this.#r.removeEventListener("click",this.#n),this.#r.removeEventListener("keydown",this.#t))}#L(){this.#d||this.render(),this.isVisible?this.#a&&this.#r.classList.add("focused"):(this.#E(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#S(){this.#r.classList.remove("focused"),!(this.#a||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#v=this.isVisible,this.#v&&(this.#r.hidden=!0)}maybeShow(){this.#v&&(this.#d||this.#L(),this.#v=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}},Lc=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=he.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Ld=class extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let t=this.data,{width:e,height:i}=ys(t.rect),n=this.svgFactory.create(e,i,!0),s=this.#t=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Md=class extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let t=this.data,{width:e,height:i}=ys(t.rect),n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",e-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},kd=class extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let t=this.data,{width:e,height:i}=ys(t.rect),n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,a=this.#t=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),n.append(a),this.container.append(n),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Mc=class extends ri{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:i,popupRef:n}}=this;if(!e)return this.container;let{width:s,height:a}=ys(t),o=this.svgFactory.create(s,a,!0),l=[];for(let u=0,d=e.length;u<d;u+=2){let g=e[u]-t[0],p=t[3]-e[u+1];l.push(`${g},${p}`)}l=l.join(" ");let c=this.#t=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!n&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},Td=class extends Mc{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},Od=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},Io=class extends ri{#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?he.HIGHLIGHT:he.INK}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,inkLists:e,borderStyle:i,popupRef:n}}=this,{width:s,height:a}=ys(t),o=this.svgFactory.create(s,a,!0);for(let l of e){let c=[];for(let d=0,g=l.length;d<g;d+=2){let p=l[d]-t[0],v=t[3]-l[d+1];c.push(`${p},${v}`)}c=c.join(" ");let u=this.svgFactory.createElement(this.svgElementName);this.#t.push(u),u.setAttribute("points",c),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u)}return!n&&this.hasPopupData&&this._createPopup(),this.container.append(o),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},kc=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=he.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}},Nd=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}},Id=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}},Rd=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}},Tc=class extends ri{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=he.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},Fd=class extends ri{#t=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",pe({source:this},e))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;let{isMac:n}=Ei.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(n?s.metaKey:s.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},Dd=class{#t=null;#e=null;#i=new Map;#n=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:a,structTreeLayer:o}){this.div=t,this.#t=e,this.#e=i,this.#n=o||null,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return this.#i.size>0}#s(t,e){return dt(this,null,function*(){let i=t.firstChild||t,n=i.id=`${Wd}${e}`,s=yield this.#n?.getAriaAttributes(n);if(s)for(let[a,o]of s)i.setAttribute(a,o);this.div.append(t),this.#t?.moveElementInDOM(this.div,t,i,!1)})}render(t){return dt(this,null,function*(){let{annotations:e}=t,i=this.div;wr(i,this.viewport);let n=new Map,s={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Oo,annotationStorage:t.annotationStorage||new Lo,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let a of e){if(a.noHTML)continue;let o=a.annotationType===bi.POPUP;if(o){let u=n.get(a.id);if(!u)continue;s.elements=u}else{let{width:u,height:d}=ys(a.rect);if(u<=0||d<=0)continue}s.data=a;let l=wd.create(s);if(!l.isRenderable)continue;if(!o&&a.popupRef){let u=n.get(a.popupRef);u?u.push(l):n.set(a.popupRef,[l])}let c=l.render();a.hidden&&(c.style.visibility="hidden"),yield this.#s(c,a.id),l._isEditable&&(this.#i.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#r()})}update({viewport:t}){let e=this.div;this.viewport=t,wr(e,{rotation:t.rotation}),this.#r(),e.hidden=!1}#r(){if(!this.#e)return;let t=this.div;for(let[e,i]of this.#e){let n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";let{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}},ec=/\r\n?|\n/g,jd=class r extends ke{#t;#e="";#i=`${this.id}-editor`;#n=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=r.prototype,e=s=>s.isEmpty(),i=Eo.TRANSLATE_SMALL,n=Eo.TRANSLATE_BIG;return me(this,"_keyboardManager",new _r([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=he.FREETEXT;constructor(t){super(mi(pe({},t),{name:"freeTextEditor"})),this.#t=t.color||r._defaultColor||ke._defaultLineColor,this.#s=t.fontSize||r._defaultFontSize}static initialize(t,e){ke.initialize(t,e);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case te.FREETEXT_SIZE:r._defaultFontSize=e;break;case te.FREETEXT_COLOR:r._defaultColor=e;break}}updateParams(t,e){switch(t){case te.FREETEXT_SIZE:this.#r(e);break;case te.FREETEXT_COLOR:this.#l(e);break}}static get defaultPropertiesToUpdate(){return[[te.FREETEXT_SIZE,r._defaultFontSize],[te.FREETEXT_COLOR,r._defaultColor||ke._defaultLineColor]]}get propertiesToUpdate(){return[[te.FREETEXT_SIZE,this.#s],[te.FREETEXT_COLOR,this.#t]]}#r(t){let e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--scale-factor))`,this.translate(0,-(n-this.#s)*this.parentScale),this.#s=n,this.#h()},i=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(t){let e=n=>{this.#t=this.editorDiv.style.color=n},i=this.#t;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-r._internalPadding*t,-(r._internalPadding+this.#s)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(he.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;let t=this._uiManager.combinedSignal(this.#n);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#i),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#c(){let t=[];this.editorDiv.normalize();let e=null;for(let i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(r.#o(i)),e=i);return t.join(`
`)}#h(){let[t,e]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:n,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",n.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#e,e=this.#e=this.#c().trimEnd();if(t===e)return;let i=n=>{if(this.#e=n,!n){this.remove();return}this.#u(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){r._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#i),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#t,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),cc(this,this.div,["dblclick","keydown"]),this.width){let[n,s]=this.parentDimensions;if(this.annotationElementId){let{position:a}=this._initialData,[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);let[c,u]=this.pageDimensions,[d,g]=this.pageTranslation,p,v;switch(this.rotation){case 0:p=t+(a[0]-d)/c,v=e+this.height-(a[1]-g)/u;break;case 90:p=t+(a[0]-d)/c,v=e-(a[1]-g)/u,[o,l]=[l,-o];break;case 180:p=t-this.width+(a[0]-d)/c,v=e-(a[1]-g)/u,[o,l]=[-o,-l];break;case 270:p=t+(a[0]-d-this.height*u)/c,v=e+(a[1]-g-this.width*c)/u,[o,l]=[-l,o];break}this.setAt(p*n,v*s,o,l)}else this.setAt(t*n,e*s,this.width*n,this.height*s);this.#u(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#o(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ec,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let n=r.#d(e.getData("text")||"").replaceAll(ec,`
`);if(!n)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let a=s.getRangeAt(0);if(!n.includes(`
`)){a.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:o,startOffset:l}=a,c=[],u=[];if(o.nodeType===Node.TEXT_NODE){let p=o.parentElement;if(u.push(o.nodeValue.slice(l).replaceAll(ec,"")),p!==this.editorDiv){let v=c;for(let y of this.editorDiv.childNodes){if(y===p){v=u;continue}v.push(r.#o(y))}}c.push(o.nodeValue.slice(0,l).replaceAll(ec,""))}else if(o===this.editorDiv){let p=c,v=0;for(let y of this.editorDiv.childNodes)v++===l&&(p=u),p.push(r.#o(y))}this.#e=`${c.join(`
`)}${n}${u.join(`
`)}`,this.#u();let d=new Range,g=c.reduce((p,v)=>p+v.length,0);for(let{firstChild:p}of this.editorDiv.childNodes)if(p.nodeType===Node.TEXT_NODE){let v=p.nodeValue.length;if(g<=v){d.setStart(p,g),d.setEnd(p,g);break}g-=v}s.removeAllRanges(),s.addRange(d)}#u(){if(this.editorDiv.replaceChildren(),!!this.#e)for(let t of this.#e.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#a(){return this.#e.replaceAll("\xA0"," ")}static#d(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){return dt(this,null,function*(){let n=null;if(t instanceof Lc){let{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:c,id:u,popupRef:d},textContent:g,textPosition:p,parent:{page:{pageNumber:v}}}=t;if(!g||g.length===0)return null;n=t={annotationType:he.FREETEXT,color:Array.from(o),fontSize:a,value:g.join(`
`),position:p,pageIndex:v-1,rect:l.slice(0),rotation:c,id:u,deleted:!1,popupRef:d}}let s=yield aa(r,this,"deserialize").call(this,t,e,i);return s.#s=t.fontSize,s.#t=Vt.makeHexColor(...t.color),s.#e=r.#d(t.value),s.annotationElementId=t.id||null,s._initialData=n,s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=r._internalPadding*this.parentScale,i=this.getRect(e,e),n=ke._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#t),s={annotationType:he.FREETEXT,color:n,fontSize:this.#s,value:this.#a(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?s:this.annotationElementId&&!this.#p(s)?null:(s.id=this.annotationElementId,s)}#p(t){let{value:e,fontSize:i,color:n,pageIndex:s}=this._initialData;return this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((a,o)=>a!==n[o])||t.pageIndex!==s}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(this.deleted)return e;let{style:i}=e;i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#t,e.replaceChildren();for(let s of this.#e.split(`
`)){let a=document.createElement("div");a.append(s?document.createTextNode(s):document.createElement("br")),e.append(a)}let n=r._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(n,n),popupContent:this.#e}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},Oc=class{toSVGPath(){Ue("Abstract method `toSVGPath` must be implemented.")}get box(){Ue("Abstract getter `box` must be implemented.")}serialize(t,e){Ue("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Ue("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Ue("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}},Nc=class r{#t;#e=[];#i;#n;#s=[];#r=new Float64Array(18);#l;#c;#h;#o;#u;#a;#d=[];static#p=8;static#f=2;static#g=r.#p+r.#f;constructor({x:t,y:e},i,n,s,a,o=0){this.#t=i,this.#a=s*n,this.#n=a,this.#r.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=o,this.#o=r.#p*n,this.#h=r.#g*n,this.#u=n,this.#d.push(t,e)}isEmpty(){return isNaN(this.#r[8])}#b(){let t=this.#r.subarray(4,6),e=this.#r.subarray(16,18),[i,n,s,a]=this.#t;return[(this.#l+(t[0]-e[0])/2-i)/s,(this.#c+(t[1]-e[1])/2-n)/a,(this.#l+(e[0]-t[0])/2-i)/s,(this.#c+(e[1]-t[1])/2-n)/a]}add({x:t,y:e}){this.#l=t,this.#c=e;let[i,n,s,a]=this.#t,[o,l,c,u]=this.#r.subarray(8,12),d=t-c,g=e-u,p=Math.hypot(d,g);if(p<this.#h)return!1;let v=p-this.#o,y=v/p,x=y*d,_=y*g,A=o,T=l;o=c,l=u,c+=x,u+=_,this.#d?.push(t,e);let R=-_/v,z=x/v,Y=R*this.#a,U=z*this.#a;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([c+Y,u+U],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([c-Y,u-U],16),isNaN(this.#r[6])?(this.#s.length===0&&(this.#r.set([o+Y,l+U],2),this.#s.push(NaN,NaN,NaN,NaN,(o+Y-i)/s,(l+U-n)/a),this.#r.set([o-Y,l-U],14),this.#e.push(NaN,NaN,NaN,NaN,(o-Y-i)/s,(l-U-n)/a)),this.#r.set([A,T,o,l,c,u],6),!this.isEmpty()):(this.#r.set([A,T,o,l,c,u],6),Math.abs(Math.atan2(T-l,A-o)-Math.atan2(_,x))<Math.PI/2?([o,l,c,u]=this.#r.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((o+c)/2-i)/s,((l+u)/2-n)/a),[o,l,A,T]=this.#r.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((A+o)/2-i)/s,((T+l)/2-n)/a),!0):([A,T,o,l,c,u]=this.#r.subarray(0,6),this.#s.push(((A+5*o)/6-i)/s,((T+5*l)/6-n)/a,((5*o+c)/6-i)/s,((5*l+u)/6-n)/a,((o+c)/2-i)/s,((l+u)/2-n)/a),[c,u,o,l,A,T]=this.#r.subarray(12,18),this.#e.push(((A+5*o)/6-i)/s,((T+5*l)/6-n)/a,((5*o+c)/6-i)/s,((5*l+u)/6-n)/a,((o+c)/2-i)/s,((l+u)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#s,e=this.#e;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#m();let i=[];i.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);this.#w(i);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return this.#v(i),i.join(" ")}#m(){let[t,e,i,n]=this.#t,[s,a,o,l]=this.#b();return`M${(this.#r[2]-t)/i} ${(this.#r[3]-e)/n} L${(this.#r[4]-t)/i} ${(this.#r[5]-e)/n} L${s} ${a} L${o} ${l} L${(this.#r[16]-t)/i} ${(this.#r[17]-e)/n} L${(this.#r[14]-t)/i} ${(this.#r[15]-e)/n} Z`}#v(t){let e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#w(t){let[e,i,n,s]=this.#t,a=this.#r.subarray(4,6),o=this.#r.subarray(16,18),[l,c,u,d]=this.#b();t.push(`L${(a[0]-e)/n} ${(a[1]-i)/s} L${l} ${c} L${u} ${d} L${(o[0]-e)/n} ${(o[1]-i)/s}`)}newFreeDrawOutline(t,e,i,n,s,a){return new Ic(t,e,i,n,s,a)}getOutlines(){let t=this.#s,e=this.#e,i=this.#r,[n,s,a,o]=this.#t,l=new Float64Array((this.#d?.length??0)+2);for(let d=0,g=l.length-2;d<g;d+=2)l[d]=(this.#d[d]-n)/a,l[d+1]=(this.#d[d+1]-s)/o;if(l[l.length-2]=(this.#l-n)/a,l[l.length-1]=(this.#c-s)/o,isNaN(i[6])&&!this.isEmpty())return this.#A(l);let c=new Float64Array(this.#s.length+24+this.#e.length),u=t.length;for(let d=0;d<u;d+=2){if(isNaN(t[d])){c[d]=c[d+1]=NaN;continue}c[d]=t[d],c[d+1]=t[d+1]}u=this.#x(c,u);for(let d=e.length-6;d>=6;d-=6)for(let g=0;g<6;g+=2){if(isNaN(e[d+g])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[d+g],c[u+1]=e[d+g+1],u+=2}return this.#_(c,u),this.newFreeDrawOutline(c,l,this.#t,this.#u,this.#i,this.#n)}#A(t){let e=this.#r,[i,n,s,a]=this.#t,[o,l,c,u]=this.#b(),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-n)/a,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-n)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-n)/a,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-n)/a],0),this.newFreeDrawOutline(d,t,this.#t,this.#u,this.#i,this.#n)}#_(t,e){let i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){let i=this.#r.subarray(4,6),n=this.#r.subarray(16,18),[s,a,o,l]=this.#t,[c,u,d,g]=this.#b();return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,g,NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l],e),e+=24}},Ic=class extends Oc{#t;#e=null;#i;#n;#s;#r;#l;constructor(t,e,i,n,s,a){super(),this.#l=t,this.#s=e,this.#t=i,this.#r=n,this.#i=s,this.#n=a,this.#o(a);let{x:o,y:l,width:c,height:u}=this.#e;for(let d=0,g=t.length;d<g;d+=2)t[d]=(t[d]-o)/c,t[d+1]=(t[d+1]-l)/u;for(let d=0,g=e.length;d<g;d+=2)e[d]=(e[d]-o)/c,e[d+1]=(e[d+1]-l)/u}toSVGPath(){let t=[`M${this.#l[4]} ${this.#l[5]}`];for(let e=6,i=this.#l.length;e<i;e+=6){if(isNaN(this.#l[e])){t.push(`L${this.#l[e+4]} ${this.#l[e+5]}`);continue}t.push(`C${this.#l[e]} ${this.#l[e+1]} ${this.#l[e+2]} ${this.#l[e+3]} ${this.#l[e+4]} ${this.#l[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,n],s){let a=i-t,o=n-e,l,c;switch(s){case 0:l=this.#c(this.#l,t,n,a,-o),c=this.#c(this.#s,t,n,a,-o);break;case 90:l=this.#h(this.#l,t,e,a,o),c=this.#h(this.#s,t,e,a,o);break;case 180:l=this.#c(this.#l,i,e,-a,o),c=this.#c(this.#s,i,e,-a,o);break;case 270:l=this.#h(this.#l,i,n,-a,-o),c=this.#h(this.#s,i,n,-a,-o);break}return{outline:Array.from(l),points:[Array.from(c)]}}#c(t,e,i,n,s){let a=new Float64Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o]*n,a[o+1]=i+t[o+1]*s;return a}#h(t,e,i,n,s){let a=new Float64Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o+1]*n,a[o+1]=i+t[o]*s;return a}#o(t){let e=this.#l,i=e[4],n=e[5],s=i,a=n,o=i,l=n,c=i,u=n,d=t?Math.max:Math.min;for(let x=6,_=e.length;x<_;x+=6){if(isNaN(e[x]))s=Math.min(s,e[x+4]),a=Math.min(a,e[x+5]),o=Math.max(o,e[x+4]),l=Math.max(l,e[x+5]),u<e[x+5]?(c=e[x+4],u=e[x+5]):u===e[x+5]&&(c=d(c,e[x+4]));else{let A=Vt.bezierBoundingBox(i,n,...e.slice(x,x+6));s=Math.min(s,A[0]),a=Math.min(a,A[1]),o=Math.max(o,A[2]),l=Math.max(l,A[3]),u<A[3]?(c=A[2],u=A[3]):u===A[3]&&(c=d(c,A[2]))}i=e[x+4],n=e[x+5]}let g=s-this.#i,p=a-this.#i,v=o-s+2*this.#i,y=l-a+2*this.#i;this.#e={x:g,y:p,width:v,height:y,lastPoint:[c,u]}}get box(){return this.#e}newOutliner(t,e,i,n,s,a=0){return new Nc(t,e,i,n,s,a)}getNewOutline(t,e){let{x:i,y:n,width:s,height:a}=this.#e,[o,l,c,u]=this.#t,d=s*c,g=a*u,p=i*c+o,v=n*u+l,y=this.newOutliner({x:this.#s[0]*d+p,y:this.#s[1]*g+v},this.#t,this.#r,t,this.#n,e??this.#i);for(let x=2;x<this.#s.length;x+=2)y.add({x:this.#s[x]*d+p,y:this.#s[x+1]*g+v});return y.getOutlines()}get mustRemoveSelfIntersections(){return!0}},Rc=class{#t;#e=[];#i=[];constructor(t,e=0,i=0,n=!0){let s=1/0,a=-1/0,o=1/0,l=-1/0,u=10**-4;for(let{x:_,y:A,width:T,height:R}of t){let z=Math.floor((_-e)/u)*u,Y=Math.ceil((_+T+e)/u)*u,U=Math.floor((A-e)/u)*u,F=Math.ceil((A+R+e)/u)*u,I=[z,U,F,!0],W=[Y,U,F,!1];this.#e.push(I,W),s=Math.min(s,z),a=Math.max(a,Y),o=Math.min(o,U),l=Math.max(l,F)}let d=a-s+2*i,g=l-o+2*i,p=s-i,v=o-i,y=this.#e.at(n?-1:-2),x=[y[0],y[2]];for(let _ of this.#e){let[A,T,R]=_;_[0]=(A-p)/d,_[1]=(T-v)/g,_[2]=(R-v)/g}this.#t={x:p,y:v,width:d,height:g,lastPoint:x}}getOutlines(){this.#e.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);let t=[];for(let e of this.#e)e[3]?(t.push(...this.#c(e)),this.#r(e)):(this.#l(e),t.push(...this.#c(e)));return this.#n(t)}#n(t){let e=[],i=new Set;for(let a of t){let[o,l,c]=a;e.push([o,l,a],[o,c,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){let l=e[a][2],c=e[a+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}let n=[],s;for(;i.size>0;){let a=i.values().next().value,[o,l,c,u,d]=a;i.delete(a);let g=o,p=l;for(s=[o,c],n.push(s);;){let v;if(i.has(u))v=u;else if(i.has(d))v=d;else break;i.delete(v),[o,l,c,u,d]=v,g!==o&&(s.push(g,p,o,p===l?l:c),g=o),p=p===l?c:l}s.push(g,p)}return new Bd(n,this.#t)}#s(t){let e=this.#i,i=0,n=e.length-1;for(;i<=n;){let s=i+n>>1,a=e[s][0];if(a===t)return s;a<t?i=s+1:n=s-1}return n+1}#r([,t,e]){let i=this.#s(t);this.#i.splice(i,0,[t,e])}#l([,t,e]){let i=this.#s(t);for(let n=i;n<this.#i.length;n++){let[s,a]=this.#i[n];if(s!==t)break;if(s===t&&a===e){this.#i.splice(n,1);return}}for(let n=i-1;n>=0;n--){let[s,a]=this.#i[n];if(s!==t)break;if(s===t&&a===e){this.#i.splice(n,1);return}}}#c(t){let[e,i,n]=t,s=[[e,i,n]],a=this.#s(n);for(let o=0;o<a;o++){let[l,c]=this.#i[o];for(let u=0,d=s.length;u<d;u++){let[,g,p]=s[u];if(!(c<=g||p<=l)){if(g>=l){if(p>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,p>c&&s.push([e,c,p])}}}return s}},Bd=class extends Oc{#t;#e;constructor(t,e){super(),this.#e=t,this.#t=e}toSVGPath(){let t=[];for(let e of this.#e){let[i,n]=e;t.push(`M${i} ${n}`);for(let s=2;s<e.length;s+=2){let a=e[s],o=e[s+1];a===i?(t.push(`V${o}`),n=o):o===n&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],s){let a=[],o=i-t,l=n-e;for(let c of this.#e){let u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=t+c[d]*o,u[d+1]=n-c[d+1]*l;a.push(u)}return a}get box(){return this.#t}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}},Ro=class extends Nc{newFreeDrawOutline(t,e,i,n,s,a){return new zd(t,e,i,n,s,a)}get classNamesForDrawing(){return["highlight","free"]}},zd=class extends Ic{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,i,n,s,a=0){return new Ro(t,e,i,n,s,a)}},Fc=class r{#t=null;#e=null;#i;#n=null;#s=!1;#r=!1;#l=null;#c;#h=null;#o=null;#u;static#a=null;static get _keyboardManager(){return me(this,"_keyboardManager",new _r([[["Escape","mac+Escape"],r.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],r.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],r.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],r.prototype._moveToPrevious],[["Home","mac+Home"],r.prototype._moveToBeginning],[["End","mac+End"],r.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#r=!1,this.#u=te.HIGHLIGHT_COLOR,this.#l=t):(this.#r=!0,this.#u=te.HIGHLIGHT_DEFAULT_COLOR),this.#o=t?._uiManager||e,this.#c=this.#o._eventBus,this.#i=t?.color||this.#o?.highlightColors.values().next().value||"#FFFF98",r.#a||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);let e=this.#o._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#f.bind(this),{signal:e});let i=this.#e=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){let t=this.#n=this.#d();return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#d(){let t=document.createElement("div"),e=this.#o._signal;t.addEventListener("contextmenu",wn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(let[i,n]of this.#o.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",r.#a[i]);let a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=n,s.setAttribute("aria-selected",n===this.#i),s.addEventListener("click",this.#p.bind(this,n),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#f.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#c.dispatch("switchannotationeditorparams",{source:this,type:this.#u,value:t})}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}let e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#m){this.#g(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#g(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#g(t);return}this.#n.lastChild?.focus()}#f(t){r._keyboardManager.exec(this,t)}#g(t){if(this.#m){this.hideDropdown();return}if(this.#s=t.detail===0,this.#h||(this.#h=new AbortController,window.addEventListener("pointerdown",this.#b.bind(this),{signal:this.#o.combinedSignal(this.#h)})),this.#n){this.#n.classList.remove("hidden");return}let e=this.#n=this.#d();this.#t.append(e)}#b(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#h?.abort(),this.#h=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#m){this.#l?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;let e=this.#o.highlightColors.values();for(let i of this.#n.children)i.setAttribute("aria-selected",e.next().value===t)}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}},Dc=class r extends ke{#t=null;#e=0;#i;#n=null;#s=null;#r=null;#l=null;#c=0;#h=null;#o=null;#u=null;#a=!1;#d=null;#p;#f=null;#g="";#b;#m="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=he.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=r.prototype;return me(this,"_keyboardManager",new _r([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(mi(pe({},t),{name:"highlightEditor"})),this.color=t.color||r._defaultColor,this.#b=t.thickness||r._defaultThickness,this.#p=t.opacity||r._defaultOpacity,this.#i=t.boxes||null,this.#m=t.methodOfCreation||"",this.#g=t.text||"",this._isDraggable=!1,t.highlightId>-1?(this.#a=!0,this.#w(t),this.#E()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#l=t.focusNode,this.#c=t.focusOffset,this.#v(),this.#E(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#a?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#b,methodOfCreation:this.#m}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){let t=new Rc(this.#i,.001);this.#o=t.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#o.box;let e=new Rc(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=e.getOutlines();let{lastPoint:i}=this.#r.box;this.#d=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#w({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#o=t;let n=1.5;if(this.#r=t.getNewOutline(this.#b/2+n,.0025),e>=0)this.#u=e,this.#n=i,this.parent.drawLayer.finalizeLine(e,t),this.#f=this.parent.drawLayer.drawOutline(this.#r);else if(this.parent){let u=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(this.#u,t),this.parent.drawLayer.updateBox(this.#u,r.#C(this.#o.box,(u-this.rotation+360)%360)),this.parent.drawLayer.updateLine(this.#f,this.#r),this.parent.drawLayer.updateBox(this.#f,r.#C(this.#r.box,u))}let{x:s,y:a,width:o,height:l}=t.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=l;break;case 90:{let[u,d]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=l;break;case 270:{let[u,d]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*d/u,this.height=l*u/d;break}}let{lastPoint:c}=this.#r.box;this.#d=[(c[0]-s)/o,(c[1]-a)/l]}static initialize(t,e){ke.initialize(t,e),r._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case te.HIGHLIGHT_DEFAULT_COLOR:r._defaultColor=e;break;case te.HIGHLIGHT_THICKNESS:r._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#d}updateParams(t,e){switch(t){case te.HIGHLIGHT_COLOR:this.#A(e);break;case te.HIGHLIGHT_THICKNESS:this.#_(e);break}}static get defaultPropertiesToUpdate(){return[[te.HIGHLIGHT_DEFAULT_COLOR,r._defaultColor],[te.HIGHLIGHT_THICKNESS,r._defaultThickness]]}get propertiesToUpdate(){return[[te.HIGHLIGHT_COLOR,this.color||r._defaultColor],[te.HIGHLIGHT_THICKNESS,this.#b||r._defaultThickness],[te.HIGHLIGHT_FREE,this.#a]]}#A(t){let e=(s,a)=>{this.color=s,this.parent?.drawLayer.changeColor(this.#u,s),this.#s?.updateColor(s),this.#p=a,this.parent?.drawLayer.changeOpacity(this.#u,a)},i=this.color,n=this.#p;this.addCommands({cmd:e.bind(this,t,r._defaultOpacity),undo:e.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)}#_(t){let e=this.#b,i=n=>{this.#b=n,this.#x(n)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}addEditToolbar(){return dt(this,null,function*(){let t=yield aa(r.prototype,this,"addEditToolbar").call(this);return t?(this._uiManager.highlightColors&&(this.#s=new Fc({editor:this}),t.addColorPicker(this.#s)),t):null})}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#T())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#k(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#E(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#k():t&&(this.#E(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){if(!this.#a)return;this.#w({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition();let[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#k(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#E(t=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#n}=t.drawLayer.draw(this.#o,this.color,this.#p),this.#f=t.drawLayer.drawOutline(this.#r),this.#h&&(this.#h.style.clipPath=this.#n))}static#C({x:t,y:e,width:i,height:n},s){switch(s){case 90:return{x:1-e-n,y:t,width:n,height:i};case 180:return{x:1-t-i,y:1-e-n,width:i,height:n};case 270:return{x:e,y:1-t-i,width:n,height:i}}return{x:t,y:e,width:i,height:n}}rotate(t){let{drawLayer:e}=this.parent,i;this.#a?(t=(t-this.rotation+360)%360,i=r.#C(this.#o.box,t)):i=r.#C(this,t),e.rotate(this.#u,t),e.rotate(this.#f,t),e.updateBox(this.#u,i),e.updateBox(this.#f,r.#C(this.#r.box,t))}render(){if(this.div)return this.div;let t=super.render();this.#g&&(t.setAttribute("aria-label",this.#g),t.setAttribute("role","mark")),this.#a?t.classList.add("free"):this.div.addEventListener("keydown",this.#L.bind(this),{signal:this._uiManager._signal});let e=this.#h=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n;let[i,n]=this.parentDimensions;return this.setDims(this.width*i,this.height*n),cc(this,this.#h,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(this.#f,"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(this.#f,"hovered")}#L(t){r._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#S(!0);break;case 1:case 3:this.#S(!1);break}}#S(t){if(!this.#t)return;let e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#l,this.#c)}select(){super.select(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"hovered"),this.parent?.drawLayer.addClass(this.#f,"selected"))}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.removeClass(this.#f,"selected"),this.#a||this.#S(!1))}get _mustFixPosition(){return!this.#a}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(this.#u,t),this.parent.drawLayer.show(this.#f,t))}#T(){return this.#a?this.rotation:0}#N(){if(this.#a)return null;let[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,s=this.#i,a=new Float32Array(s.length*8),o=0;for(let{x:l,y:c,width:u,height:d}of s){let g=l*t+i,p=(1-c-d)*e+n;a[o]=a[o+4]=g,a[o+1]=a[o+3]=p,a[o+2]=a[o+6]=g+u*t,a[o+5]=a[o+7]=p+d*e,o+=8}return a}#P(t){return this.#o.serialize(t,this.#T())}static startHighlighting(t,e,{target:i,x:n,y:s}){let{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),g=v=>{v.preventDefault(),v.stopPropagation()},p=v=>{u.abort(),this.#M(t,v)};window.addEventListener("blur",p,{signal:d}),window.addEventListener("pointerup",p,{signal:d}),window.addEventListener("pointerdown",g,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",wn,{signal:d}),i.addEventListener("pointermove",this.#y.bind(this,t),{signal:d}),this._freeHighlight=new Ro({x:n,y:s},[a,o,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static#y(t,e){this._freeHighlight.add(e)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}static#M(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){return dt(this,null,function*(){let n=null;if(t instanceof kc){let{data:{quadPoints:v,rect:y,rotation:x,id:_,color:A,opacity:T,popupRef:R},parent:{page:{pageNumber:z}}}=t;n=t={annotationType:he.HIGHLIGHT,color:Array.from(A),opacity:T,quadPoints:v,boxes:null,pageIndex:z-1,rect:y.slice(0),rotation:x,id:_,deleted:!1,popupRef:R}}else if(t instanceof Io){let{data:{inkLists:v,rect:y,rotation:x,id:_,color:A,borderStyle:{rawWidth:T},popupRef:R},parent:{page:{pageNumber:z}}}=t;n=t={annotationType:he.HIGHLIGHT,color:Array.from(A),thickness:T,inkLists:v,boxes:null,pageIndex:z-1,rect:y.slice(0),rotation:x,id:_,deleted:!1,popupRef:R}}let{color:s,quadPoints:a,inkLists:o,opacity:l}=t,c=yield aa(r,this,"deserialize").call(this,t,e,i);c.color=Vt.makeHexColor(...s),c.#p=l||1,o&&(c.#b=t.thickness),c.annotationElementId=t.id||null,c._initialData=n;let[u,d]=c.pageDimensions,[g,p]=c.pageTranslation;if(a){let v=c.#i=[];for(let y=0;y<a.length;y+=8)v.push({x:(a[y]-g)/u,y:1-(a[y+1]-p)/d,width:(a[y+2]-a[y])/u,height:(a[y+1]-a[y+5])/d});c.#v(),c.#E(),c.rotate(c.rotation)}else if(o){c.#a=!0;let v=o[0],y={x:v[0]-g,y:d-(v[1]-p)},x=new Ro(y,[0,0,u,d],1,c.#b/2,!0,.001);for(let T=0,R=v.length;T<R;T+=2)y.x=v[T]-g,y.y=d-(v[T+1]-p),x.add(y);let{id:_,clipPathId:A}=e.drawLayer.draw(x,c.color,c._defaultOpacity,!0);c.#w({highlightOutlines:x.getOutlines(),highlightId:_,clipPathId:A}),c.#E()}return c})}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=this.getRect(0,0),i=ke._colorManager.convert(this.color),n={annotationType:he.HIGHLIGHT,color:i,opacity:this.#p,thickness:this.#b,quadPoints:this.#N(),outlines:this.#P(e),pageIndex:this.pageIndex,rect:e,rotation:this.#T(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#O(n)?null:(n.id=this.annotationElementId,n)}#O(t){let{color:e}=this._initialData;return t.color.some((i,n)=>i!==e[n])}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}},Ud=class r extends ke{#t=0;#e=0;#i=null;#n=new Path2D;#s=!1;#r=null;#l=!1;#c=!1;#h=null;#o=null;#u=0;#a=0;#d=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=he.INK;constructor(t){super(mi(pe({},t),{name:"inkEditor"})),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,e){ke.initialize(t,e)}static updateDefaultParams(t,e){switch(t){case te.INK_THICKNESS:r._defaultThickness=e;break;case te.INK_COLOR:r._defaultColor=e;break;case te.INK_OPACITY:r._defaultOpacity=e/100;break}}updateParams(t,e){switch(t){case te.INK_THICKNESS:this.#p(e);break;case te.INK_COLOR:this.#f(e);break;case te.INK_OPACITY:this.#g(e);break}}static get defaultPropertiesToUpdate(){return[[te.INK_THICKNESS,r._defaultThickness],[te.INK_COLOR,r._defaultColor||ke._defaultLineColor],[te.INK_OPACITY,Math.round(r._defaultOpacity*100)]]}get propertiesToUpdate(){return[[te.INK_THICKNESS,this.thickness||r._defaultThickness],[te.INK_COLOR,this.color||r._defaultColor||ke._defaultLineColor],[te.INK_OPACITY,Math.round(100*(this.opacity??r._defaultOpacity))]]}#p(t){let e=n=>{this.thickness=n,this.#I()},i=this.thickness;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#f(t){let e=n=>{this.color=n,this.#C()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(t){let e=n=>{this.opacity=n,this.#C()};t/=100;let i=this.opacity;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:te.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#N(),this.#P()),this.isAttachedToDOM||(this.parent.add(this),this.#y()),this.#I()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#i&&(clearTimeout(this.#i),this.#i=null),this.#h?.disconnect(),this.#h=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){let[t,e]=this.parentDimensions,i=this.width*t,n=this.height*e;this.setDimensions(i,n)}enableEditMode(){this.#s||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.#L())}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.#S())}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#b(){let{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#m(){let{ctx:t,color:e,opacity:i,thickness:n,parentScale:s,scaleFactor:a}=this;t.lineWidth=n*s/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${I1(i)}`}#v(t,e){this.canvas.addEventListener("contextmenu",wn,{signal:this._uiManager._signal}),this.#S(),this.#r=new AbortController;let i=this._uiManager.combinedSignal(this.#r);this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:i}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:i}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:i}),this.isEditing=!0,this.#c||(this.#c=!0,this.#y(),this.thickness||=r._defaultThickness,this.color||=r._defaultColor||ke._defaultLineColor,this.opacity??=r._defaultOpacity),this.currentPath.push([t,e]),this.#l=!1,this.#m(),this.#d=()=>{this.#x(),this.#d&&window.requestAnimationFrame(this.#d)},window.requestAnimationFrame(this.#d)}#w(t,e){let[i,n]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===n)return;let s=this.currentPath,a=this.#n;if(s.push([t,e]),this.#l=!0,s.length<=2){a.moveTo(...s[0]),a.lineTo(t,e);return}s.length===3&&(this.#n=a=new Path2D,a.moveTo(...s[0])),this.#k(a,...s.at(-3),...s.at(-2),t,e)}#A(){if(this.currentPath.length===0)return;let t=this.currentPath.at(-1);this.#n.lineTo(...t)}#_(t,e){this.#d=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#w(t,e),this.#A();let i;if(this.currentPath.length!==1)i=this.#E();else{let l=[t,e];i=[[l,l.slice(),l.slice(),l]]}let n=this.#n,s=this.currentPath;this.currentPath=[],this.#n=new Path2D;let a=()=>{this.allRawPaths.push(s),this.paths.push(i),this.bezierPath2D.push(n),this._uiManager.rebuild(this)},o=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#N(),this.#P()),this.#I())};this.addCommands({cmd:a,undo:o,mustExec:!0})}#x(){if(!this.#l)return;this.#l=!1;let t=Math.ceil(this.thickness*this.parentScale),e=this.currentPath.slice(-3),i=e.map(u=>u[0]),n=e.map(u=>u[1]),s=Math.min(...i)-t,a=Math.max(...i)+t,o=Math.min(...n)-t,l=Math.max(...n)+t,{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(let u of this.bezierPath2D)c.stroke(u);c.stroke(this.#n),c.restore()}#k(t,e,i,n,s,a,o){let l=(e+n)/2,c=(i+s)/2,u=(n+a)/2,d=(s+o)/2;t.bezierCurveTo(l+2*(n-l)/3,c+2*(s-c)/3,u+2*(n-u)/3,d+2*(s-d)/3,u,d)}#E(){let t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];let e=[],i,[n,s]=t[0];for(i=1;i<t.length-2;i++){let[g,p]=t[i],[v,y]=t[i+1],x=(g+v)/2,_=(p+y)/2,A=[n+2*(g-n)/3,s+2*(p-s)/3],T=[x+2*(g-x)/3,_+2*(p-_)/3];e.push([[n,s],A,T,[x,_]]),[n,s]=[x,_]}let[a,o]=t[i],[l,c]=t[i+1],u=[n+2*(a-n)/3,s+2*(o-s)/3],d=[l+2*(a-l)/3,c+2*(o-c)/3];return e.push([[n,s],u,d,[l,c]]),e}#C(){if(this.isEmpty()){this.#O();return}this.#m();let{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#O();for(let i of this.bezierPath2D)e.stroke(i)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#I(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}#L(){if(this.#o)return;this.#o=new AbortController;let t=this._uiManager.combinedSignal(this.#o);this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})}#S(){this.pointerdownAC?.abort(),this.pointerdownAC=null}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#s||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#v(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#w(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#T(t)}canvasPointerleave(t){this.#T(t)}#T(t){this.#r?.abort(),this.#r=null,this.#L(),this.#i&&clearTimeout(this.#i),this.#i=setTimeout(()=>{this.#i=null,this.canvas.removeEventListener("contextmenu",wn)},10),this.#_(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#N(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#P(){this.#h=new ResizeObserver(t=>{let e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)}),this.#h.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#h?.disconnect(),this.#h=null},{once:!0})}get isResizable(){return!this.isEmpty()&&this.#s}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");let[i,n,s,a]=this.#b();if(this.setAt(i,n,0,0),this.setDims(s,a),this.#N(),this.width){let[o,l]=this.parentDimensions;this.setAspectRatio(this.width*o,this.height*l),this.setAt(t*o,e*l,this.width*o,this.height*l),this.#c=!0,this.#y(),this.setDims(this.width*o,this.height*l),this.#C(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#P(),this.div}#y(){if(!this.#c)return;let[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#O()}setDimensions(t,e){let i=Math.round(t),n=Math.round(e);if(this.#u===i&&this.#a===n)return;this.#u=i,this.#a=n,this.canvas.style.visibility="hidden";let[s,a]=this.parentDimensions;this.width=t/s,this.height=e/a,this.fixAndSetPosition(),this.#s&&this.#M(t,e),this.#y(),this.#C(),this.canvas.style.visibility="visible",this.fixDims()}#M(t,e){let i=this.#B(),n=(t-i)/this.#e,s=(e-i)/this.#t;this.scaleFactor=Math.min(n,s)}#O(){let t=this.#B()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#D(t){let e=new Path2D;for(let i=0,n=t.length;i<n;i++){let[s,a,o,l]=t[i];i===0&&e.moveTo(...s),e.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}return e}static#U(t,e,i){let[n,s,a,o]=e;switch(i){case 0:for(let l=0,c=t.length;l<c;l+=2)t[l]+=n,t[l+1]=o-t[l+1];break;case 90:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=t[l+1]+n,t[l+1]=u+s}break;case 180:for(let l=0,c=t.length;l<c;l+=2)t[l]=a-t[l],t[l+1]+=s;break;case 270:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=a-t[l+1],t[l+1]=o-u}break;default:throw new Error("Invalid rotation")}return t}static#z(t,e,i){let[n,s,a,o]=e;switch(i){case 0:for(let l=0,c=t.length;l<c;l+=2)t[l]-=n,t[l+1]=o-t[l+1];break;case 90:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=t[l+1]-s,t[l+1]=u-n}break;case 180:for(let l=0,c=t.length;l<c;l+=2)t[l]=a-t[l],t[l+1]-=s;break;case 270:for(let l=0,c=t.length;l<c;l+=2){let u=t[l];t[l]=o-t[l+1],t[l+1]=a-u}break;default:throw new Error("Invalid rotation")}return t}#F(t,e,i,n){let s=[],a=this.thickness/2,o=t*e+a,l=t*i+a;for(let c of this.paths){let u=[],d=[];for(let g=0,p=c.length;g<p;g++){let[v,y,x,_]=c[g];if(v[0]===_[0]&&v[1]===_[1]&&p===1){let W=t*v[0]+o,S=t*v[1]+l;u.push(W,S),d.push(W,S);break}let A=t*v[0]+o,T=t*v[1]+l,R=t*y[0]+o,z=t*y[1]+l,Y=t*x[0]+o,U=t*x[1]+l,F=t*_[0]+o,I=t*_[1]+l;g===0&&(u.push(A,T),d.push(A,T)),u.push(R,z,Y,U,F,I),d.push(R,z),g===p-1&&d.push(F,I)}s.push({bezier:r.#U(u,n,this.rotation),points:r.#U(d,n,this.rotation)})}return s}#j(){let t=1/0,e=-1/0,i=1/0,n=-1/0;for(let s of this.paths)for(let[a,o,l,c]of s){let u=Vt.bezierBoundingBox(...a,...o,...l,...c);t=Math.min(t,u[0]),i=Math.min(i,u[1]),e=Math.max(e,u[2]),n=Math.max(n,u[3])}return[t,i,e,n]}#B(){return this.#s?Math.ceil(this.thickness*this.parentScale):0}#I(t=!1){if(this.isEmpty())return;if(!this.#s){this.#C();return}let e=this.#j(),i=this.#B();this.#e=Math.max(ke.MIN_SIZE,e[2]-e[0]),this.#t=Math.max(ke.MIN_SIZE,e[3]-e[1]);let n=Math.ceil(i+this.#e*this.scaleFactor),s=Math.ceil(i+this.#t*this.scaleFactor),[a,o]=this.parentDimensions;this.width=n/a,this.height=s/o,this.setAspectRatio(n,s);let l=this.translationX,c=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#y(),this.#C(),this.#u=n,this.#a=s,this.setDims(n,s);let u=t?i/this.scaleFactor/2:0;this.translate(l-this.translationX-u,c-this.translationY-u)}static deserialize(t,e,i){return dt(this,null,function*(){if(t instanceof Io)return null;let n=yield aa(r,this,"deserialize").call(this,t,e,i);n.thickness=t.thickness,n.color=Vt.makeHexColor(...t.color),n.opacity=t.opacity;let[s,a]=n.pageDimensions,o=n.width*s,l=n.height*a,c=n.parentScale,u=t.thickness/2;n.#s=!0,n.#u=Math.round(o),n.#a=Math.round(l);let{paths:d,rect:g,rotation:p}=t;for(let{bezier:y}of d){y=r.#z(y,g,p);let x=[];n.paths.push(x);let _=c*(y[0]-u),A=c*(y[1]-u);for(let R=2,z=y.length;R<z;R+=6){let Y=c*(y[R]-u),U=c*(y[R+1]-u),F=c*(y[R+2]-u),I=c*(y[R+3]-u),W=c*(y[R+4]-u),S=c*(y[R+5]-u);x.push([[_,A],[Y,U],[F,I],[W,S]]),_=W,A=S}let T=this.#D(x);n.bezierPath2D.push(T)}let v=n.#j();return n.#e=Math.max(ke.MIN_SIZE,v[2]-v[0]),n.#t=Math.max(ke.MIN_SIZE,v[3]-v[1]),n.#M(o,l),n})}serialize(){if(this.isEmpty())return null;let t=this.getRect(0,0),e=ke._colorManager.convert(this.ctx.strokeStyle);return{annotationType:he.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}},Hd=class r extends ke{#t=null;#e=null;#i=null;#n=null;#s=null;#r="";#l=null;#c=null;#h=null;#o=!1;#u=!1;static _type="stamp";static _editorType=he.STAMP;constructor(t){super(mi(pe({},t),{name:"stampEditor"})),this.#n=t.bitmapUrl,this.#s=t.bitmapFile}static initialize(t,e){ke.initialize(t,e)}static get supportedTypes(){return me(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return me(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(he.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#a(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#r=t.file.name),this.#f()}#d(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(t=null,e=!0){return dt(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:n,width:s,height:a}=t||this.copyCanvas(null,null,!0).imageData,o=yield i.guess({name:"altText",request:{data:n,width:s,height:a,channels:n.length/(s*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");let l=o.output;return yield this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#p(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#a(i,!0)).finally(()=>this.#d());return}if(this.#n){let i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(n=>this.#a(n)).finally(()=>this.#d());return}if(this.#s){let i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(n=>this.#a(n)).finally(()=>this.#d());return}let t=document.createElement("input");t.type="file",t.accept=r.supportedTypesStr;let e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",()=>dt(this,null,function*(){if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let n=yield this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#a(n)}i()}),{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#d()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#l?.remove(),this.#l=null,this.#c?.disconnect(),this.#c=null,this.#h&&(clearTimeout(this.#h),this.#h=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#p();return}super.rebuild(),this.div!==null&&(this.#e&&this.#l===null&&this.#p(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#s||this.#e)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#t?this.#f():this.#p(),this.width&&!this.annotationElementId){let[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n)}return this.div}#f(){let{div:t}=this,{width:e,height:i}=this.#t,[n,s]=this.pageDimensions,a=.75;if(this.width)e=this.width*n,i=this.height*s;else if(e>a*n||i>a*s){let u=Math.min(a*n/e,a*s/i);e*=u,i*=u}let[o,l]=this.parentDimensions;this.setDims(e*o/n,i*l/s),this._uiManager.enableWaiting(!1);let c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(e,i),this.#w(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&c.setAttribute("aria-label",this.#r)}copyCanvas(t,e,i=!1){t||(t=224);let{width:n,height:s}=this.#t,a=new So,o=this.#t,l=n,c=s,u=null;if(e){if(n>e||s>e){let Y=Math.min(e/n,e/s);l=Math.floor(n*Y),c=Math.floor(s*Y)}u=document.createElement("canvas");let g=u.width=Math.ceil(l*a.sx),p=u.height=Math.ceil(c*a.sy);this.#o||(o=this.#b(g,p));let v=u.getContext("2d");v.filter=this._uiManager.hcmFilter;let y="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",x="#42414d");let _=15,A=_*a.sx,T=_*a.sy,R=new OffscreenCanvas(A*2,T*2),z=R.getContext("2d");z.fillStyle=y,z.fillRect(0,0,A*2,T*2),z.fillStyle=x,z.fillRect(0,0,A,T),z.fillRect(A,T,A,T),v.fillStyle=v.createPattern(R,"repeat"),v.fillRect(0,0,g,p),v.drawImage(o,0,0,o.width,o.height,0,0,g,p)}let d=null;if(i){let g,p;if(a.symmetric&&o.width<t&&o.height<t)g=o.width,p=o.height;else if(o=this.#t,n>t||s>t){let x=Math.min(t/n,t/s);g=Math.floor(n*x),p=Math.floor(s*x),this.#o||(o=this.#b(g,p))}let y=new OffscreenCanvas(g,p).getContext("2d",{willReadFrequently:!0});y.drawImage(o,0,0,o.width,o.height,0,0,g,p),d={width:g,height:p,data:y.getImageData(0,0,g,p).data}}return{canvas:u,width:l,height:c,imageData:d}}#g(t,e){let[i,n]=this.parentDimensions;this.width=t/i,this.height=e/n,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#h!==null&&clearTimeout(this.#h);let s=200;this.#h=setTimeout(()=>{this.#h=null,this.#m(t,e)},s)}#b(t,e){let{width:i,height:n}=this.#t,s=i,a=n,o=this.#t;for(;s>2*t||a>2*e;){let l=s,c=a;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));let u=new OffscreenCanvas(s,a);u.getContext("2d").drawImage(o,0,0,l,c,0,0,s,a),o=u.transferToImageBitmap()}return o}#m(t,e){let i=new So,n=Math.ceil(t*i.sx),s=Math.ceil(e*i.sy),a=this.#l;if(!a||a.width===n&&a.height===s)return;a.width=n,a.height=s;let o=this.#o?this.#t:this.#b(n,s),l=a.getContext("2d");l.filter=this._uiManager.hcmFilter,l.drawImage(o,0,0,o.width,o.height,0,0,n,s)}getImageForAltText(){return this.#l}#v(t){if(t){if(this.#o){let n=this._uiManager.imageManager.getSvgUrl(this.#e);if(n)return n}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#o){let[e,i]=this.pageDimensions,n=Math.round(this.width*e*Ks.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Ks.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,s);return a.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,n,s),a.transferToImageBitmap()}return structuredClone(this.#t)}#w(){this._uiManager._signal&&(this.#c=new ResizeObserver(t=>{let e=t[0].contentRect;e.width&&e.height&&this.#g(e.width,e.height)}),this.#c.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#c?.disconnect(),this.#c=null},{once:!0}))}static deserialize(t,e,i){return dt(this,null,function*(){let n=null;if(t instanceof Tc){let{data:{rect:v,rotation:y,id:x,structParent:_,popupRef:A},container:T,parent:{page:{pageNumber:R}}}=t,z=T.querySelector("canvas"),Y=i.imageManager.getFromCanvas(T.id,z);z.remove();let U=(yield e._structTree.getAriaAttributes(`${Wd}${x}`))?.get("aria-label")||"";n=t={annotationType:he.STAMP,bitmapId:Y.id,bitmap:Y.bitmap,pageIndex:R-1,rect:v.slice(0),rotation:y,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:_,popupRef:A}}let s=yield aa(r,this,"deserialize").call(this,t,e,i),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:u,accessibilityData:d}=t;c&&i.imageManager.isValidId(c)?(s.#e=c,o&&(s.#t=o)):s.#n=l,s.#o=u;let[g,p]=s.pageDimensions;return s.width=(a[2]-a[0])/g,s.height=(a[3]-a[1])/p,s.annotationElementId=t.id||null,d&&(s.altTextData=d),s._initialData=n,s.#u=!!n,s})}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i={annotationType:he.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o,structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i;let{decorative:n,altText:s}=this.serializeAltText(!1);if(!n&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let o=this.#A(i);if(o.isSame)return null;o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,e===null)return i;e.stamps||=new Map;let a=this.#o?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:a,serialized:i}),i.bitmap=this.#v(!1);else if(this.#o){let o=e.stamps.get(this.#e);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#v(!1))}return i}#A(t){let{rect:e,pageIndex:i,accessibilityData:{altText:n}}=this._initialData,s=t.rect.every((l,c)=>Math.abs(l-e[c])<1),a=t.pageIndex===i,o=(t.accessibilityData?.alt||"")===n;return{isSame:s&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}},h2=(()=>{class r{#t;#e=!1;#i=null;#n=null;#s=null;#r=new Map;#l=!1;#c=!1;#h=!1;#o=null;#u=null;#a;static _initialized=!1;static#d=new Map([jd,Ud,Hd,Dc].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:i,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:d}){let g=[...r.#d.values()];if(!r._initialized){r._initialized=!0;for(let p of g)p.initialize(d,e)}e.registerEditorTypes(g),this.#a=e,this.pageIndex=i,this.div=n,this.#t=a,this.#i=o,this.viewport=u,this.#o=c,this.drawLayer=l,this._structTree=s,this.#a.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#a.getMode()===he.NONE}updateToolbar(e){this.#a.updateToolbar(e)}updateMode(e=this.#a.getMode()){switch(this.#m(),e){case he.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case he.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case he.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:i}=this.div;for(let n of r.#d.values())i.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#o?.div}addInkEditorIfNeeded(e){if(this.#a.getMode()!==he.INK)return;if(!e){for(let n of this.#r.values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){this.#a.setEditingState(e)}addCommands(e){this.#a.addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.div.classList.toggle("disabled",!e)}enable(){return dt(this,null,function*(){this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let n of this.#r.values())n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#a.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!this.#i)return;let i=this.#i.getEditableAnnotations();for(let n of i){if(n.hide(),this.#a.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;let s=yield this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}})}disable(){this.#h=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);let e=new Map,i=new Map;for(let s of this.#r.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else i.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#i){let s=this.#i.getEditableAnnotations();for(let a of s){let{id:o}=a.data;if(this.#a.isDeletedAnnotationElement(o))continue;let l=i.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(this.#a.addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let s of r.#d.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#h=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#a.getActive()!==e&&this.#a.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#o?.div&&!this.#u){this.#u=new AbortController;let e=this.#a.combinedSignal(this.#u);this.#o.div.addEventListener("pointerdown",this.#p.bind(this),{signal:e}),this.#o.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#o?.div&&this.#u&&(this.#u.abort(),this.#u=null,this.#o.div.classList.remove("highlighting"))}#p(e){this.#a.unselectAll();let{target:i}=e;if(i===this.#o.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#o.div.contains(i)){let{isMac:n}=Ei.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#a.showAllEditors("highlight",!0,!0),this.#o.div.classList.add("free"),this.toggleDrawing(),Dc.startHighlighting(this,this.#a.direction==="ltr",{target:this.#o.div,x:e.x,y:e.y}),this.#o.div.addEventListener("pointerup",()=>{this.#o.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#a._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;let e=this.#a.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);let{annotationElementId:i}=e;i&&this.#a.isDeletedAnnotationElement(i)&&this.#a.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#t?.removePointerInTextLayer(e.contentDiv),!this.#h&&e.annotationElementId&&this.#a.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#a.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,this.#c||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#a.addDeletedAnnotationElement(e.annotationElementId),ke.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#a.addEditor(e),this.attach(e),!e.isAttachedToDOM){let i=e.render();this.div.append(i),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#a.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:i}=document;e.div.contains(i)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#a._signal}),i.focus())},0)),e._structTreeParentId=this.#t?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let i=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getNextId(){return this.#a.getId()}get#f(){return r.#d.get(this.#a.getMode())}combinedSignal(e){return this.#a.combinedSignal(e)}#g(e){let i=this.#f;return i?new i.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#f?.canCreateNewEmptyEditor()}pasteEditor(e,i){this.#a.updateToolbar(e),this.#a.updateMode(e);let{offsetX:n,offsetY:s}=this.#b(),a=this.getNextId(),o=this.#g(pe({parent:this,id:a,x:n,y:s,uiManager:this.#a,isCentered:!0},i));o&&this.add(o)}deserialize(e){return dt(this,null,function*(){return(yield r.#d.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#a))||null})}createAndAddNewEditor(e,i,n={}){let s=this.getNextId(),a=this.#g(pe({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#a,isCentered:i},n));return a&&this.add(a),a}#b(){let{x:e,y:i,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,i),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,i+s),u=(a+l)/2-e,d=(o+c)/2-i,[g,p]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:g,offsetY:p}}addNewEditor(){this.createAndAddNewEditor(this.#b(),!0)}setSelected(e){this.#a.setSelected(e)}toggleSelected(e){this.#a.toggleSelected(e)}unselect(e){this.#a.unselect(e)}pointerup(e){let{isMac:i}=Ei.platform;if(!(e.button!==0||e.ctrlKey&&i)&&e.target===this.div&&this.#l){if(this.#l=!1,!this.#e){this.#e=!0;return}if(this.#a.getMode()===he.STAMP){this.#a.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#a.getMode()===he.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}let{isMac:i}=Ei.platform;if(e.button!==0||e.ctrlKey&&i||e.target!==this.div)return;this.#l=!0;let n=this.#a.getActive();this.#e=!n||n.isEmpty()}findNewParent(e,i,n){let s=this.#a.findParent(i,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(let e of this.#r.values())this.#t?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#a.removeLayer(this)}#m(){this.#c=!0;for(let e of this.#r.values())e.isEmpty()&&e.remove();this.#c=!1}render({viewport:e}){this.viewport=e,wr(this.div,e);for(let i of this.#a.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:e}){this.#a.commitOrRemove(),this.#m();let i=this.viewport.rotation,n=e.rotation;if(this.viewport=e,wr(this.div,{rotation:n}),i!==n)for(let s of this.#r.values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){let{pageWidth:e,pageHeight:i}=this.viewport.rawDims;return[e,i]}get scale(){return this.#a.viewParameters.realScale}}return r})(),Vd=class r{#t=null;#e=0;#i=new Map;#n=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#i.size>0)for(let e of this.#i.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return me(this,"_svgFactory",new Oo)}static#s(t,{x:e=0,y:i=0,width:n=1,height:s=1}={}){let{style:a}=t;a.top=`${100*i}%`,a.left=`${100*e}%`,a.width=`${100*n}%`,a.height=`${100*s}%`}#r(t){let e=r._svgFactory.create(1,1,!0);return this.#t.append(e),e.setAttribute("aria-hidden",!0),r.#s(e,t),e}#l(t,e){let i=r._svgFactory.createElement("clipPath");t.append(i);let n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");let s=r._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n}draw(t,e,i,n=!1){let s=this.#e++,a=this.#r(t.box);a.classList.add(...t.classNamesForDrawing);let o=r._svgFactory.createElement("defs");a.append(o);let l=r._svgFactory.createElement("path");o.append(l);let c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("d",t.toSVGPath()),n&&this.#n.set(s,l);let u=this.#l(o,c),d=r._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",e),a.setAttribute("fill-opacity",i),d.setAttribute("href",`#${c}`),this.#i.set(s,a),{id:s,clipPathId:`url(#${u})`}}drawOutline(t){let e=this.#e++,i=this.#r(t.box);i.classList.add(...t.classNamesForOutlining);let n=r._svgFactory.createElement("defs");i.append(n);let s=r._svgFactory.createElement("path");n.append(s);let a=`path_p${this.pageIndex}_${e}`;s.setAttribute("id",a),s.setAttribute("d",t.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let o;if(t.mustRemoveSelfIntersections){let u=r._svgFactory.createElement("mask");n.append(u),o=`mask_p${this.pageIndex}_${e}`,u.setAttribute("id",o),u.setAttribute("maskUnits","objectBoundingBox");let d=r._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");let g=r._svgFactory.createElement("use");u.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}let l=r._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);let c=l.cloneNode();return i.append(c),l.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.#i.set(e,i),e}finalizeLine(t,e){let i=this.#n.get(t);this.#n.delete(t),this.updateBox(t,e.box),i.setAttribute("d",e.toSVGPath())}updateLine(t,e){this.#i.get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){this.#n.get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){r.#s(this.#i.get(t),e)}show(t,e){this.#i.get(t).classList.toggle("hidden",!e)}rotate(t,e){this.#i.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#i.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#i.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#i.get(t).classList.add(e)}removeClass(t,e){this.#i.get(t).classList.remove(e)}getSVGRoot(t){return this.#i.get(t)}remove(t){this.#n.delete(t),this.#t!==null&&(this.#i.get(t).remove(),this.#i.delete(t))}destroy(){this.#t=null;for(let t of this.#i.values())t.remove();this.#i.clear(),this.#n.clear()}};var u2=se.AbortException,d2=se.AnnotationEditorLayer,f2=se.AnnotationEditorParamsType,Jd=se.AnnotationEditorType,p2=se.AnnotationEditorUIManager,g2=se.AnnotationLayer,m2=se.AnnotationMode,b2=se.ColorPicker,v2=se.DOMSVGFactory,y2=se.DrawLayer,w2=se.FeatureTest,Qd=se.GlobalWorkerOptions,_2=se.ImageKind,x2=se.InvalidPDFException,A2=se.MissingPDFException,C2=se.OPS,P2=se.OutputScale,S2=se.PDFDataRangeTransport,E2=se.PDFDateString,L2=se.PDFWorker,M2=se.PasswordResponses,k2=se.PermissionFlag,T2=se.PixelsPerInch,O2=se.RenderingCancelledException,N2=se.TextLayer,I2=se.UnexpectedResponseException,R2=se.Util,Zd=se.VerbosityLevel,F2=se.XfaLayer,D2=se.build,j2=se.createValidAbsoluteUrl,B2=se.fetchData,tf=se.getDocument,z2=se.getFilenameFromUrl,U2=se.getPdfFilenameFromUrl,H2=se.getXfaPageViewport,V2=se.isDataScheme,q2=se.isPdfFile,W2=se.noContextMenu,G2=se.normalizeUnicode,$2=se.setLayerDimensions,X2=se.shadow,Do=se.version;var Vf={};Wp(Vf,{AnnotationLayerBuilder:()=>Rv,DownloadManager:()=>Fv,EventBus:()=>Dv,FindState:()=>jv,GenericL10n:()=>jf,LinkTarget:()=>Sr,PDFFindController:()=>Bf,PDFHistory:()=>Bv,PDFLinkService:()=>zf,PDFPageView:()=>zv,PDFScriptingManager:()=>Uv,PDFSinglePageViewer:()=>Uf,PDFViewer:()=>Hf,ProgressBar:()=>Hv,RenderingStates:()=>Vv,ScrollMode:()=>qv,SimpleLinkService:()=>Wv,SpreadMode:()=>Gv,StructTreeLayerBuilder:()=>$v,TextLayerBuilder:()=>Xv,XfaLayerBuilder:()=>Yv,parseQueryString:()=>Kv});var Bo={};Bo.d=(r,t)=>{for(var e in t)Bo.o(t,e)&&!Bo.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})};Bo.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var Ge=globalThis.pdfjsViewer={};Bo.d(Ge,{AnnotationLayerBuilder:()=>th,DownloadManager:()=>pf,EventBus:()=>eh,FindState:()=>Qs,GenericL10n:()=>Aa,LinkTarget:()=>Ar,PDFFindController:()=>df,PDFHistory:()=>Pf,PDFLinkService:()=>Qc,PDFPageView:()=>oh,PDFScriptingManager:()=>If,PDFSinglePageViewer:()=>Df,PDFViewer:()=>lh,ProgressBar:()=>uf,RenderingStates:()=>Je,ScrollMode:()=>ve,SimpleLinkService:()=>Ho,SpreadMode:()=>Ii,StructTreeLayerBuilder:()=>sh,TextLayerBuilder:()=>rh,XfaLayerBuilder:()=>ah,parseQueryString:()=>ch});var Y2="auto",N0=1,t0=1.1,K2=.1,J2=10,ef=0,Q2=1.25,e0=40,i0=5,Je={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},wa={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var Qn={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2},ve={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3},Ii={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};function I0(r,t,e=!1){let i=r.offsetParent;if(!i){console.error("offsetParent is not set -- cannot scroll");return}let n=r.offsetTop+r.clientTop,s=r.offsetLeft+r.clientLeft;for(;i.clientHeight===i.scrollHeight&&i.clientWidth===i.scrollWidth||e&&(i.classList.contains("markedContent")||getComputedStyle(i).overflow==="hidden");)if(n+=i.offsetTop,s+=i.offsetLeft,i=i.offsetParent,!i)return;t&&(t.top!==void 0&&(n+=t.top),t.left!==void 0&&(s+=t.left,i.scrollLeft=s)),i.scrollTop=n}function Z2(r,t,e=void 0){let i=function(a){s||(s=window.requestAnimationFrame(function(){s=null;let l=r.scrollLeft,c=n.lastX;l!==c&&(n.right=l>c),n.lastX=l;let u=r.scrollTop,d=n.lastY;u!==d&&(n.down=u>d),n.lastY=u,t(n)}))},n={right:!0,down:!0,lastX:r.scrollLeft,lastY:r.scrollTop,_eventHandler:i},s=null;return r.addEventListener("scroll",i,{useCapture:!0,signal:e}),e?.addEventListener("abort",()=>window.cancelAnimationFrame(s),{once:!0}),n}function ch(r){let t=new Map;for(let[e,i]of new URLSearchParams(r))t.set(e.toLowerCase(),i);return t}var n0=/[\x00-\x1F]/g;function zo(r,t=!1){return n0.test(r)?t?r.replaceAll(n0,e=>e==="\0"?"":" "):r.replaceAll("\0",""):r}function Uo(r,t,e=0){let i=e,n=r.length-1;if(n<0||!t(r[n]))return r.length;if(t(r[i]))return i;for(;i<n;){let s=i+n>>1,a=r[s];t(a)?n=s:i=s+1}return i}function s0(r){if(Math.floor(r)===r)return[r,1];let t=1/r,e=8;if(t>e)return[1,e];if(Math.floor(t)===t)return[1,t];let i=r>1?t:r,n=0,s=1,a=1,o=1;for(;;){let c=n+a,u=s+o;if(u>e)break;i<=c/u?(a=c,o=u):(n=c,s=u)}let l;return i-n/s<a/o-i?l=i===r?[n,s]:[s,n]:l=i===r?[a,o]:[o,a],l}function Wc(r,t){return r-r%t}function tb(r,t,e){if(r<2)return r;let i=t[r].div,n=i.offsetTop+i.clientTop;n>=e&&(i=t[r-1].div,n=i.offsetTop+i.clientTop);for(let s=r-2;s>=0&&(i=t[s].div,!(i.offsetTop+i.clientTop+i.clientHeight<=n));--s)r=s;return r}function eb({scrollEl:r,views:t,sortByVisibility:e=!1,horizontal:i=!1,rtl:n=!1}){let s=r.scrollTop,a=s+r.clientHeight,o=r.scrollLeft,l=o+r.clientWidth;function c(A){let T=A.div;return T.offsetTop+T.clientTop+T.clientHeight>s}function u(A){let T=A.div,R=T.offsetLeft+T.clientLeft,z=R+T.clientWidth;return n?R<l:z>o}let d=[],g=new Set,p=t.length,v=Uo(t,i?u:c);v>0&&v<p&&!i&&(v=tb(v,t,s));let y=i?l:-1;for(let A=v;A<p;A++){let T=t[A],R=T.div,z=R.offsetLeft+R.clientLeft,Y=R.offsetTop+R.clientTop,U=R.clientWidth,F=R.clientHeight,I=z+U,W=Y+F;if(y===-1)W>=a&&(y=W);else if((i?z:Y)>y)break;if(W<=s||Y>=a||I<=o||z>=l)continue;let S=Math.max(0,s-Y)+Math.max(0,W-a),N=Math.max(0,o-z)+Math.max(0,I-l),G=(F-S)/F,H=(U-N)/U,at=G*H*100|0;d.push({id:T.id,x:z,y:Y,view:T,percent:at,widthPercent:H*100|0}),g.add(T.id)}let x=d[0],_=d.at(-1);return e&&d.sort(function(A,T){let R=A.percent-T.percent;return Math.abs(R)>.001?-R:A.id-T.id}),{first:x,last:_,views:d,ids:g}}function R0(r){return Number.isInteger(r)&&r%90===0}function ib(r){return Number.isInteger(r)&&Object.values(ve).includes(r)&&r!==ve.UNKNOWN}function nb(r){return Number.isInteger(r)&&Object.values(Ii).includes(r)&&r!==Ii.UNKNOWN}function r0(r){return r.width<=r.height}var jy=new Promise(function(r){window.requestAnimationFrame(r)}),sb=document.documentElement.style;function rb(r,t,e){return Math.min(Math.max(r,t),e)}var uf=class{#t=null;#e=null;#i=0;#n=null;#s=!0;constructor(t){this.#t=t.classList,this.#n=t.style}get percent(){return this.#i}set percent(t){if(this.#i=rb(t,0,100),isNaN(t)){this.#t.add("indeterminate");return}this.#t.remove("indeterminate"),this.#n.setProperty("--progressBar-percent",`${this.#i}%`)}setWidth(t){if(!t)return;let i=t.parentNode.offsetWidth-t.offsetWidth;i>0&&this.#n.setProperty("--progressBar-end-offset",`${i}px`)}setDisableAutoFetch(t=5e3){this.#i===100||isNaN(this.#i)||(this.#e&&clearTimeout(this.#e),this.show(),this.#e=setTimeout(()=>{this.#e=null,this.hide()},t))}hide(){this.#s&&(this.#s=!1,this.#t.add("hidden"))}show(){this.#s||(this.#s=!0,this.#t.remove("hidden"))}};function ab(r){let t=ve.VERTICAL,e=Ii.NONE;switch(r){case"SinglePage":t=ve.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=ve.PAGE;case"TwoColumnLeft":e=Ii.ODD;break;case"TwoPageRight":t=ve.PAGE;case"TwoColumnRight":e=Ii.EVEN;break}return{scrollMode:t,spreadMode:e}}var Gc=function(){let r=document.createElement("div");return r.style.width="round(down, calc(1.6666666666666665 * 792px), 1px)",r.style.width==="calc(1320px)"?Math.fround:t=>t}(),Nn={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};function ob(r){return r<11904}function lb(r){return(r&65408)===0}function cb(r){return r>=97&&r<=122||r>=65&&r<=90}function hb(r){return r>=48&&r<=57}function ub(r){return r===32||r===9||r===13||r===10}function db(r){return r>=13312&&r<=40959||r>=63744&&r<=64255}function fb(r){return r>=12448&&r<=12543}function pb(r){return r>=12352&&r<=12447}function gb(r){return r>=65376&&r<=65439}function mb(r){return(r&65408)===3584}function $c(r){return ob(r)?lb(r)?ub(r)?Nn.SPACE:cb(r)||hb(r)||r===95?Nn.ALPHA_LETTER:Nn.PUNCT:mb(r)?Nn.THAI_LETTER:r===160?Nn.SPACE:Nn.ALPHA_LETTER:db(r)?Nn.HAN_LETTER:fb(r)?Nn.KATAKANA_LETTER:pb(r)?Nn.HIRAGANA_LETTER:gb(r)?Nn.HALFWIDTH_KATAKANA_LETTER:Nn.ALPHA_LETTER}var a0;function bb(){return a0||="\xA0\xA8\xAA\xAF\xB2-\xB5\xB8-\xBA\xBC-\xBE\u0132-\u0133\u013F-\u0140\u0149\u017F\u01C4-\u01CC\u01F1-\u01F3\u02B0-\u02B8\u02D8-\u02DD\u02E0-\u02E4\u0374\u037A\u037E\u0384-\u0385\u0387\u03D0-\u03D6\u03F0-\u03F2\u03F4-\u03F5\u03F9\u0587\u0675-\u0678\u0958-\u095F\u09DC-\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B5C-\u0B5D\u0E33\u0EB3\u0EDC-\u0EDD\u0F0C\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u10FC\u1D2C-\u1D2E\u1D30-\u1D3A\u1D3C-\u1D4D\u1D4F-\u1D6A\u1D78\u1D9B-\u1DBF\u1E9A-\u1E9B\u1F71\u1F73\u1F75\u1F77\u1F79\u1F7B\u1F7D\u1FBB\u1FBD-\u1FC1\u1FC9\u1FCB\u1FCD-\u1FCF\u1FD3\u1FDB\u1FDD-\u1FDF\u1FE3\u1FEB\u1FED-\u1FEF\u1FF9\u1FFB\u1FFD-\u1FFE\u2000-\u200A\u2011\u2017\u2024-\u2026\u202F\u2033-\u2034\u2036-\u2037\u203C\u203E\u2047-\u2049\u2057\u205F\u2070-\u2071\u2074-\u208E\u2090-\u209C\u20A8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211D\u2120-\u2122\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213B-\u2140\u2145-\u2149\u2150-\u217F\u2189\u222C-\u222D\u222F-\u2230\u2329-\u232A\u2460-\u24EA\u2A0C\u2A74-\u2A76\u2ADC\u2C7C-\u2C7D\u2D6F\u2E9F\u2EF3\u2F00-\u2FD5\u3000\u3036\u3038-\u303A\u309B-\u309C\u309F\u30FF\u3131-\u318E\u3192-\u319F\u3200-\u321E\u3220-\u3247\u3250-\u327E\u3280-\u33FF\uA69C-\uA69D\uA770\uA7F2-\uA7F4\uA7F8-\uA7F9\uAB5C-\uAB5F\uAB69\uF900-\uFA0D\uFA10\uFA12\uFA15-\uFA1E\uFA20\uFA22\uFA25-\uFA26\uFA2A-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE10-\uFE19\uFE30-\uFE44\uFE47-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE72\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6",a0}var Qs={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3},vb=250,yb=-50,wb=-400,o0={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},l0=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),c0,_b=new RegExp("\\p{M}+","gu"),xb=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),Ab=new RegExp("([^\\p{M}])\\p{M}*$","u"),Cb=new RegExp("^\\p{M}*([^\\p{M}])","u"),Pb=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,h0=new Map,Sb="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",u0=new Map,nf=null,sf=null;function rf(r){let t=[],e;for(;(e=Pb.exec(r))!==null;){let{index:p}=e;for(let v of e[0]){let y=h0.get(v);y||(y=v.normalize("NFD").length,h0.set(v,y)),t.push([y,p++])}}let i;if(t.length===0&&nf)i=nf;else if(t.length>0&&sf)i=sf;else{let p=Object.keys(o0).join(""),v=bb(),A=`([${p}])|([${v}])|((?:\u3099|\u309A)\\n)|(\\p{M}+(?:-\\n)?)|(\\p{Ll}-\\n\\p{Lu})|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30FF])\\n)|(\\n)`;t.length===0?i=nf=new RegExp(A+"|(\\u0000)","gum"):i=sf=new RegExp(A+`|(${Sb})`,"gum")}let n=[];for(;(e=_b.exec(r))!==null;)n.push([e[0].length,e.index]);let s=r.normalize("NFD"),a=[[0,0]],o=0,l=0,c=0,u=0,d=0,g=!1;return s=s.replace(i,(p,v,y,x,_,A,T,R,z,Y,U)=>{if(U-=u,v){let F=o0[v],I=F.length;for(let W=1;W<I;W++)a.push([U-c+W,c-W]);return c-=I-1,F}if(y){let F=u0.get(y);F||(F=y.normalize("NFKC"),u0.set(y,F));let I=F.length;for(let W=1;W<I;W++)a.push([U-c+W,c-W]);return c-=I-1,F}if(x)return g=!0,U+d===n[o]?.[1]?++o:(a.push([U-1-c+1,c-1]),c-=1,u+=1),a.push([U-c+1,c]),u+=1,d+=1,x.charAt(0);if(_){let F=_.endsWith(`
`),I=F?_.length-2:_.length;g=!0;let W=I;U+d===n[o]?.[1]&&(W-=n[o][0],++o);for(let S=1;S<=W;S++)a.push([U-1-c+S,c-S]);return c-=W,u+=W,F?(U+=I-1,a.push([U-c+1,1+c]),c+=1,u+=1,d+=1,_.slice(0,I)):_}if(A)return a.push([U-c+3,1+c]),c+=1,u+=1,d+=1,A.replace(`
`,"");if(T){let F=T.length-2;return a.push([U-c+F,1+c]),c+=1,u+=1,d+=1,T.slice(0,-2)}if(R){let F=R.length-1;return a.push([U-c+F,c]),u+=1,d+=1,R.slice(0,-1)}if(z)return a.push([U-c+1,c-1]),c-=1,u+=1,d+=1," ";if(U+d===t[l]?.[1]){let F=t[l][0]-1;++l;for(let I=1;I<=F;I++)a.push([U-(c-I),c-I]);c-=F,u+=F}return Y}),a.push([s.length,c]),[s,a,g]}function Eb(r,t,e){if(!r)return[t,e];let i=t,n=t+e-1,s=Uo(r,u=>u[0]>=i);r[s][0]>i&&--s;let a=Uo(r,u=>u[0]>=n,s);r[a][0]>n&&--a;let o=i+r[s][1],c=n+r[a][1]+1-o;return[o,c]}var df=class{#t=null;#e=!0;#i=0;constructor({linkService:t,eventBus:e,updateMatchesCountOnProgress:i=!0}){this._linkService=t,this._eventBus=e,this.#e=i,this.onIsPageVisible=null,this.#s(),e._on("find",this.#n.bind(this)),e._on("findbarclose",this.#v.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#t}setDocument(t){this._pdfDocument&&this.#s(),t&&(this._pdfDocument=t,this._firstPageCapability.resolve())}#n(t){if(!t)return;let e=this._pdfDocument,{type:i}=t;(this.#t===null||this.#l(t))&&(this._dirtyMatch=!0),this.#t=t,i!=="highlightallchange"&&this.#_(Qs.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||e&&this._pdfDocument!==e)return;this.#u();let n=!this._highlightMatches,s=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),i?this._dirtyMatch?this.#p():i==="again"?(this.#p(),n&&this.#t.highlightAll&&this.#d()):i==="highlightallchange"?(s?this.#p():this._highlightMatches=!0,this.#d()):this.#p():this._findTimeout=setTimeout(()=>{this.#p(),this._findTimeout=null},vb)})}scrollMatchIntoView({element:t=null,selectedLeft:e=0,pageIndex:i=-1,matchIndex:n=-1}){if(!this._scrollMatches||!t)return;if(n===-1||n!==this._selected.matchIdx)return;if(i===-1||i!==this._selected.pageIdx)return;this._scrollMatches=!1;let s={top:yb,left:e+wb};I0(t,s,!0)}#s(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#i=0,this.#t=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=Promise.withResolvers()}get#r(){let{query:t}=this.#t;return typeof t=="string"?(t!==this._rawQuery&&(this._rawQuery=t,[this._normalizedQuery]=rf(t)),this._normalizedQuery):(t||[]).filter(e=>!!e).map(e=>rf(e)[0])}#l(t){let e=t.query,i=this.#t.query,n=typeof e;if(n!==typeof i)return!0;if(n==="string"){if(e!==i)return!0}else if(JSON.stringify(e)!==JSON.stringify(i))return!0;switch(t.type){case"again":let a=this._selected.pageIdx+1,o=this._linkService;return a>=1&&a<=o.pagesCount&&a!==o.page&&!(this.onIsPageVisible?.(a)??!0);case"highlightallchange":return!1}return!0}#c(t,e,i){let n=t.slice(0,e).match(Ab);if(n){let s=t.charCodeAt(e),a=n[1].charCodeAt(0);if($c(s)===$c(a))return!1}if(n=t.slice(e+i).match(Cb),n){let s=t.charCodeAt(e+i-1),a=n[1].charCodeAt(0);if($c(s)===$c(a))return!1}return!0}#h(t,e){let{matchDiacritics:i}=this.#t,n=!1;t=t.replaceAll(xb,(a,o,l,c,u,d)=>o?`[ ]*\\${o}[ ]*`:l?`[ ]*${l}[ ]*`:c?"[ ]+":i?u||d:u?l0.has(u.charCodeAt(0))?u:"":e?(n=!0,`${d}\\p{M}*`):d);let s="[ ]*";return t.endsWith(s)&&(t=t.slice(0,t.length-s.length)),i&&e&&(c0||=String.fromCharCode(...l0),n=!0,t=`${t}(?=[${c0}]|[^\\p{M}]|$)`),[n,t]}#o(t){let e=this.#r;if(e.length===0)return;let i=this._pageContents[t],n=this.match(e,i,t),s=this._pageMatches[t]=[],a=this._pageMatchesLength[t]=[],o=this._pageDiffs[t];n?.forEach(({index:c,length:u})=>{let[d,g]=Eb(o,c,u);g&&(s.push(d),a.push(g))}),this.#t.highlightAll&&this.#a(t),this._resumePageIdx===t&&(this._resumePageIdx=null,this.#g());let l=s.length;this._matchesCountTotal+=l,this.#e?l>0&&this.#A():++this.#i===this._linkService.pagesCount&&this.#A()}match(t,e,i){let n=this._hasDiacritics[i],s=!1;if(typeof t=="string"?[s,t]=this.#h(t,n):t=t.sort().reverse().map(d=>{let[g,p]=this.#h(d,n);return s||=g,`(${p})`}).join("|"),!t)return;let{caseSensitive:a,entireWord:o}=this.#t,l=`g${s?"u":""}${a?"":"i"}`;t=new RegExp(t,l);let c=[],u;for(;(u=t.exec(e))!==null;)o&&!this.#c(e,u.index,u[0].length)||c.push({index:u.index,length:u[0].length});return c}#u(){if(this._extractTextPromises.length>0)return;let t=Promise.resolve(),e={disableNormalization:!0};for(let i=0,n=this._linkService.pagesCount;i<n;i++){let{promise:s,resolve:a}=Promise.withResolvers();this._extractTextPromises[i]=s,t=t.then(()=>this._pdfDocument.getPage(i+1).then(o=>o.getTextContent(e)).then(o=>{let l=[];for(let c of o.items)l.push(c.str),c.hasEOL&&l.push(`
`);[this._pageContents[i],this._pageDiffs[i],this._hasDiacritics[i]]=rf(l.join("")),a()},o=>{console.error(`Unable to get text content for page ${i+1}`,o),this._pageContents[i]="",this._pageDiffs[i]=null,this._hasDiacritics[i]=!1,a()}))}}#a(t){this._scrollMatches&&this._selected.pageIdx===t&&(this._linkService.page=t+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:t})}#d(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#p(){let t=this.#t.findPrevious,e=this._linkService.page-1,i=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=e,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#i=0,this._matchesCountTotal=0,this.#d();for(let a=0;a<i;a++)this._pendingFindMatches.has(a)||(this._pendingFindMatches.add(a),this._extractTextPromises[a].then(()=>{this._pendingFindMatches.delete(a),this.#o(a)}))}if(this.#r.length===0){this.#_(Qs.FOUND);return}if(this._resumePageIdx)return;let s=this._offset;if(this._pagesToSearch=i,s.matchIdx!==null){let a=this._pageMatches[s.pageIdx].length;if(!t&&s.matchIdx+1<a||t&&s.matchIdx>0){s.matchIdx=t?s.matchIdx-1:s.matchIdx+1,this.#m(!0);return}this.#b(t)}this.#g()}#f(t){let e=this._offset,i=t.length,n=this.#t.findPrevious;return i?(e.matchIdx=n?i-1:0,this.#m(!0),!0):(this.#b(n),e.wrapped&&(e.matchIdx=null,this._pagesToSearch<0)?(this.#m(!1),!0):!1)}#g(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let t=null;do{let e=this._offset.pageIdx;if(t=this._pageMatches[e],!t){this._resumePageIdx=e;break}}while(!this.#f(t))}#b(t){let e=this._offset,i=this._linkService.pagesCount;e.pageIdx=t?e.pageIdx-1:e.pageIdx+1,e.matchIdx=null,this._pagesToSearch--,(e.pageIdx>=i||e.pageIdx<0)&&(e.pageIdx=t?i-1:0,e.wrapped=!0)}#m(t=!1){let e=Qs.NOT_FOUND,i=this._offset.wrapped;if(this._offset.wrapped=!1,t){let n=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,e=i?Qs.WRAPPED:Qs.FOUND,n!==-1&&n!==this._selected.pageIdx&&this.#a(n)}this.#_(e,this.#t.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#a(this._selected.pageIdx))}#v(t){let e=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||e&&this._pdfDocument!==e||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#_(Qs.FOUND),this._highlightMatches=!1,this.#d())})}#w(){let{pageIdx:t,matchIdx:e}=this._selected,i=0,n=this._matchesCountTotal;if(e!==-1){for(let s=0;s<t;s++)i+=this._pageMatches[s]?.length||0;i+=e+1}return(i<1||i>n)&&(i=n=0),{current:i,total:n}}#A(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#w()})}#_(t,e=!1){!this.#e&&(this.#i!==this._linkService.pagesCount||t===Qs.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:t,previous:e,entireWord:this.#t?.entireWord??null,matchesCount:this.#w(),rawQuery:this.#t?.query??null})}},Lb="noopener noreferrer nofollow",Ar={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4},Qc=class r{externalLinkEnabled=!0;constructor({eventBus:t,externalLinkTarget:e=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}={}){this.eventBus=t,this.externalLinkTarget=e,this.externalLinkRel=i,this._ignoreDestinationZoom=n,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(t,e=null){this.baseUrl=e,this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(t){this.pdfDocument&&(this.pdfViewer.currentPageNumber=t)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(t){this.pdfDocument&&(this.pdfViewer.pagesRotation=t)}get isInPresentationMode(){return this.pdfDocument?this.pdfViewer.isInPresentationMode:!1}goToDestination(t){return dt(this,null,function*(){if(!this.pdfDocument)return;let e,i,n;if(typeof t=="string"?(e=t,i=yield this.pdfDocument.getDestination(t)):(e=null,i=yield t),!Array.isArray(i)){console.error(`goToDestination: "${i}" is not a valid destination array, for dest="${t}".`);return}let[s]=i;if(s&&typeof s=="object"){if(n=this.pdfDocument.cachedPageNumber(s),!n)try{n=(yield this.pdfDocument.getPageIndex(s))+1}catch{console.error(`goToDestination: "${s}" is not a valid page reference, for dest="${t}".`);return}}else Number.isInteger(s)&&(n=s+1);if(!n||n<1||n>this.pagesCount){console.error(`goToDestination: "${n}" is not a valid page number, for dest="${t}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:e,explicitDest:i,pageNumber:n})),this.pdfViewer.scrollPageIntoView({pageNumber:n,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom})})}goToPage(t){if(!this.pdfDocument)return;let e=typeof t=="string"&&this.pdfViewer.pageLabelToPageNumber(t)||t|0;if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(e)),this.pdfViewer.scrollPageIntoView({pageNumber:e})}addLinkAttributes(t,e,i=!1){if(!e||typeof e!="string")throw new Error('A valid "url" parameter must provided.');let n=i?Ar.BLANK:this.externalLinkTarget,s=this.externalLinkRel;this.externalLinkEnabled?t.href=t.title=e:(t.href="",t.title=`Disabled: ${e}`,t.onclick=()=>!1);let a="";switch(n){case Ar.NONE:break;case Ar.SELF:a="_self";break;case Ar.BLANK:a="_blank";break;case Ar.PARENT:a="_parent";break;case Ar.TOP:a="_top";break}t.target=a,t.rel=typeof s=="string"?s:Lb}getDestinationHash(t){if(typeof t=="string"){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){let e=JSON.stringify(t);if(e.length>0)return this.getAnchorUrl("#"+escape(e))}return this.getAnchorUrl("")}getAnchorUrl(t){return this.baseUrl?this.baseUrl+t:t}setHash(t){if(!this.pdfDocument)return;let e,i;if(t.includes("=")){let n=ch(t);if(n.has("search")){let s=n.get("search").replaceAll('"',""),a=n.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:a?s:s.match(/\S+/g)})}if(n.has("page")&&(e=n.get("page")|0||1),n.has("zoom")){let s=n.get("zoom").split(","),a=s[0],o=parseFloat(a);a.includes("Fit")?a==="Fit"||a==="FitB"?i=[null,{name:a}]:a==="FitH"||a==="FitBH"||a==="FitV"||a==="FitBV"?i=[null,{name:a},s.length>1?s[1]|0:null]:a==="FitR"?s.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:a},s[1]|0,s[2]|0,s[3]|0,s[4]|0]:console.error(`PDFLinkService.setHash: "${a}" is not a valid zoom value.`):i=[null,{name:"XYZ"},s.length>1?s[1]|0:null,s.length>2?s[2]|0:null,o?o/100:a]}i?this.pdfViewer.scrollPageIntoView({pageNumber:e||this.page,destArray:i,allowNegativeOffset:!0}):e&&(this.page=e),n.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:n.get("pagemode")}),n.has("nameddest")&&this.goToDestination(n.get("nameddest"));return}i=unescape(t);try{i=JSON.parse(i),Array.isArray(i)||(i=i.toString())}catch{}if(typeof i=="string"||r.#t(i)){this.goToDestination(i);return}console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}executeNamedAction(t){if(this.pdfDocument){switch(t){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:t})}}executeSetOCGState(t){return dt(this,null,function*(){if(!this.pdfDocument)return;let e=this.pdfDocument,i=yield this.pdfViewer.optionalContentConfigPromise;e===this.pdfDocument&&(i.setOCGState(t),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(i))})}static#t(t){if(!Array.isArray(t)||t.length<2)return!1;let[e,i,...n]=t;if(!(typeof e=="object"&&Number.isInteger(e?.num)&&Number.isInteger(e?.gen))&&!Number.isInteger(e)||!(typeof i=="object"&&typeof i?.name=="string"))return!1;let s=n.length,a=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;a=!1;break;default:return!1}for(let o of n)if(!(typeof o=="number"||a&&o===null))return!1;return!0}},Ho=class extends Qc{setDocument(t,e=null){}},{AbortException:Mb,AnnotationEditorLayer:kb,AnnotationEditorParamsType:By,AnnotationEditorType:ln,AnnotationEditorUIManager:Tb,AnnotationLayer:Ob,AnnotationMode:Cs,build:zy,ColorPicker:Uy,createValidAbsoluteUrl:Nb,DOMSVGFactory:Hy,DrawLayer:Ib,FeatureTest:Vy,fetchData:d0,getDocument:qy,getFilenameFromUrl:Wy,getPdfFilenameFromUrl:Rb,getXfaPageViewport:Gy,GlobalWorkerOptions:$y,ImageKind:Xy,InvalidPDFException:Yy,isDataScheme:Ky,isPdfFile:Fb,MissingPDFException:Jy,noContextMenu:Qy,normalizeUnicode:Db,OPS:Zy,OutputScale:jb,PasswordResponses:tw,PDFDataRangeTransport:ew,PDFDateString:iw,PDFWorker:nw,PermissionFlag:Xc,PixelsPerInch:As,RenderingCancelledException:ff,setLayerDimensions:Bb,shadow:Zc,TextLayer:zb,UnexpectedResponseException:sw,Util:rw,VerbosityLevel:aw,version:f0,XfaLayer:af}=globalThis.pdfjsLib,th=class{#t=null;#e=null;constructor({pdfPage:t,linkService:e,downloadManager:i,annotationStorage:n=null,imageResourcesPath:s="",renderForms:a=!0,enableScripting:o=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:c=null,annotationCanvasMap:u=null,accessibilityManager:d=null,annotationEditorUIManager:g=null,onAppend:p=null}){this.pdfPage=t,this.linkService=e,this.downloadManager=i,this.imageResourcesPath=s,this.renderForms=a,this.annotationStorage=n,this.enableScripting=o,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=c||Promise.resolve(null),this._annotationCanvasMap=u,this._accessibilityManager=d,this._annotationEditorUIManager=g,this.#t=p,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=e.eventBus}render(t,e,i="display"){return dt(this,null,function*(){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:t.clone({dontFlip:!0})});return}let[n,s,a]=yield Promise.all([this.pdfPage.getAnnotations({intent:i}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;let o=this.div=document.createElement("div");if(o.className="annotationLayer",this.#t?.(o),n.length===0){this.hide();return}this.annotationLayer=new Ob({div:o,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,annotationEditorUIManager:this._annotationEditorUIManager,page:this.pdfPage,viewport:t.clone({dontFlip:!0}),structTreeLayer:e?.structTreeLayer||null}),yield this.annotationLayer.render({annotations:n,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:s,fieldObjects:a}),this.linkService.isInPresentationMode&&this.#i(wa.FULLSCREEN),this.#e||(this.#e=new AbortController,this._eventBus?._on("presentationmodechanged",l=>{this.#i(l.state)},{signal:this.#e.signal}))})}cancel(){this._cancelled=!0,this.#e?.abort(),this.#e=null}hide(){this.div&&(this.div.hidden=!0)}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}#i(t){if(!this.div)return;let e=!1;switch(t){case wa.FULLSCREEN:e=!0;break;case wa.NORMAL:break;default:return}for(let i of this.div.childNodes)i.hasAttribute("data-internal-link")||(i.inert=e)}};function p0(r,t){let e=document.createElement("a");if(!e.click)throw new Error('DownloadManager: "a.click()" is not supported.');e.href=r,e.target="_parent","download"in e&&(e.download=t),(document.body||document.documentElement).append(e),e.click(),e.remove()}var pf=class{#t=new WeakMap;downloadData(t,e,i){let n=URL.createObjectURL(new Blob([t],{type:i}));p0(n,e)}openOrDownloadData(t,e,i=null){let s=Fb(e)?"application/pdf":"";return this.downloadData(t,e,s),!1}download(t,e,i){let n;if(t)n=URL.createObjectURL(new Blob([t],{type:"application/pdf"}));else{if(!Nb(e,"http://example.com")){console.error(`download - not a valid URL: ${e}`);return}n=e+"#pdfjs.action=download"}p0(n,i)}},g0={EVENT:"event",TIMEOUT:"timeout"};function Ub(i){return dt(this,arguments,function*({target:r,name:t,delay:e=0}){if(typeof r!="object"||!(t&&typeof t=="string")||!(Number.isInteger(e)&&e>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");let{promise:n,resolve:s}=Promise.withResolvers(),a=new AbortController;function o(u){a.abort(),clearTimeout(c),s(u)}let l=r instanceof eh?"_on":"addEventListener";r[l](t,o.bind(null,g0.EVENT),{signal:a.signal});let c=setTimeout(o.bind(null,g0.TIMEOUT),e);return n})}var eh=class{#t=Object.create(null);on(t,e,i=null){this._on(t,e,{external:!0,once:i?.once,signal:i?.signal})}off(t,e,i=null){this._off(t,e)}dispatch(t,e){let i=this.#t[t];if(!i||i.length===0)return;let n;for(let{listener:s,external:a,once:o}of i.slice(0)){if(o&&this._off(t,s),a){(n||=[]).push(s);continue}s(e)}if(n){for(let s of n)s(e);n=null}}_on(t,e,i=null){let n=null;if(i?.signal instanceof AbortSignal){let{signal:a}=i;if(a.aborted){console.error("Cannot use an `aborted` signal.");return}let o=()=>this._off(t,e);n=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}(this.#t[t]||=[]).push({listener:e,external:i?.external===!0,once:i?.once===!0,rmAbort:n})}_off(t,e,i=null){let n=this.#t[t];if(n)for(let s=0,a=n.length;s<a;s++){let o=n[s];if(o.listener===e){o.rmAbort?.(),n.splice(s,1);return}}}};var _a=class{constructor(t){this.value=t}valueOf(){return this.value}},Qe=class extends _a{constructor(t="???"){super(t)}toString(t){return`{${this.value}}`}},In=class extends _a{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),this.value.toString(10)}}},Pr=class extends _a{constructor(t,e={}){super(t),this.opts=e}toString(t){try{return t.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(e){return t.reportError(e),new Date(this.value).toISOString()}}},m0=100,Hb="\u2068",Vb="\u2069";function qb(r,t,e){if(e===t||e instanceof In&&t instanceof In&&e.value===t.value)return!0;if(t instanceof In&&typeof e=="string"){let i=r.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value);if(e===i)return!0}return!1}function b0(r,t,e){return t[e]?xa(r,t[e].value):(r.reportError(new RangeError("No default")),new Qe)}function gf(r,t){let e=[],i=Object.create(null);for(let n of t)n.type==="narg"?i[n.name]=Vo(r,n.value):e.push(Vo(r,n));return{positional:e,named:i}}function Vo(r,t){switch(t.type){case"str":return t.value;case"num":return new In(t.value,{minimumFractionDigits:t.precision});case"var":return Wb(r,t);case"mesg":return Gb(r,t);case"term":return $b(r,t);case"func":return Xb(r,t);case"select":return Yb(r,t);default:return new Qe}}function Wb(r,{name:t}){let e;if(r.params)if(Object.prototype.hasOwnProperty.call(r.params,t))e=r.params[t];else return new Qe(`$${t}`);else if(r.args&&Object.prototype.hasOwnProperty.call(r.args,t))e=r.args[t];else return r.reportError(new ReferenceError(`Unknown variable: $${t}`)),new Qe(`$${t}`);if(e instanceof _a)return e;switch(typeof e){case"string":return e;case"number":return new In(e);case"object":if(e instanceof Date)return new Pr(e.getTime());default:return r.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof e}`)),new Qe(`$${t}`)}}function Gb(r,{name:t,attr:e}){let i=r.bundle._messages.get(t);if(!i)return r.reportError(new ReferenceError(`Unknown message: ${t}`)),new Qe(t);if(e){let n=i.attributes[e];return n?xa(r,n):(r.reportError(new ReferenceError(`Unknown attribute: ${e}`)),new Qe(`${t}.${e}`))}return i.value?xa(r,i.value):(r.reportError(new ReferenceError(`No value: ${t}`)),new Qe(t))}function $b(r,{name:t,attr:e,args:i}){let n=`-${t}`,s=r.bundle._terms.get(n);if(!s)return r.reportError(new ReferenceError(`Unknown term: ${n}`)),new Qe(n);if(e){let o=s.attributes[e];if(o){r.params=gf(r,i).named;let l=xa(r,o);return r.params=null,l}return r.reportError(new ReferenceError(`Unknown attribute: ${e}`)),new Qe(`${n}.${e}`)}r.params=gf(r,i).named;let a=xa(r,s.value);return r.params=null,a}function Xb(r,{name:t,args:e}){let i=r.bundle._functions[t];if(!i)return r.reportError(new ReferenceError(`Unknown function: ${t}()`)),new Qe(`${t}()`);if(typeof i!="function")return r.reportError(new TypeError(`Function ${t}() is not callable`)),new Qe(`${t}()`);try{let n=gf(r,e);return i(n.positional,n.named)}catch(n){return r.reportError(n),new Qe(`${t}()`)}}function Yb(r,{selector:t,variants:e,star:i}){let n=Vo(r,t);if(n instanceof Qe)return b0(r,e,i);for(let s of e){let a=Vo(r,s.key);if(qb(r,n,a))return xa(r,s.value)}return b0(r,e,i)}function F0(r,t){if(r.dirty.has(t))return r.reportError(new RangeError("Cyclic reference")),new Qe;r.dirty.add(t);let e=[],i=r.bundle._useIsolating&&t.length>1;for(let n of t){if(typeof n=="string"){e.push(r.bundle._transform(n));continue}if(r.placeables++,r.placeables>m0)throw r.dirty.delete(t),new RangeError(`Too many placeables expanded: ${r.placeables}, max allowed is ${m0}`);i&&e.push(Hb),e.push(Vo(r,n).toString(r)),i&&e.push(Vb)}return r.dirty.delete(t),e.join("")}function xa(r,t){return typeof t=="string"?r.bundle._transform(t):F0(r,t)}var mf=class{constructor(t,e,i){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=t,this.errors=e,this.args=i}reportError(t){if(!this.errors||!(t instanceof Error))throw t;this.errors.push(t)}memoizeIntlObject(t,e){let i=this.bundle._intls.get(t);i||(i={},this.bundle._intls.set(t,i));let n=JSON.stringify(e);return i[n]||(i[n]=new t(this.bundle.locales,e)),i[n]}};function ih(r,t){let e=Object.create(null);for(let[i,n]of Object.entries(r))t.includes(i)&&(e[i]=n.valueOf());return e}var v0=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function Kb(r,t){let e=r[0];if(e instanceof Qe)return new Qe(`NUMBER(${e.valueOf()})`);if(e instanceof In)return new In(e.valueOf(),pe(pe({},e.opts),ih(t,v0)));if(e instanceof Pr)return new In(e.valueOf(),pe({},ih(t,v0)));throw new TypeError("Invalid argument to NUMBER")}var y0=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function Jb(r,t){let e=r[0];if(e instanceof Qe)return new Qe(`DATETIME(${e.valueOf()})`);if(e instanceof Pr)return new Pr(e.valueOf(),pe(pe({},e.opts),ih(t,y0)));if(e instanceof In)return new Pr(e.valueOf(),pe({},ih(t,y0)));throw new TypeError("Invalid argument to DATETIME")}var w0=new Map;function Qb(r){let t=Array.isArray(r)?r.join(" "):r,e=w0.get(t);return e===void 0&&(e=new Map,w0.set(t,e)),e}var bf=class{constructor(t,{functions:e,useIsolating:i=!0,transform:n=s=>s}={}){this._terms=new Map,this._messages=new Map,this.locales=Array.isArray(t)?t:[t],this._functions=pe({NUMBER:Kb,DATETIME:Jb},e),this._useIsolating=i,this._transform=n,this._intls=Qb(t)}hasMessage(t){return this._messages.has(t)}getMessage(t){return this._messages.get(t)}addResource(t,{allowOverrides:e=!1}={}){let i=[];for(let n=0;n<t.body.length;n++){let s=t.body[n];if(s.id.startsWith("-")){if(e===!1&&this._terms.has(s.id)){i.push(new Error(`Attempt to override an existing term: "${s.id}"`));continue}this._terms.set(s.id,s)}else{if(e===!1&&this._messages.has(s.id)){i.push(new Error(`Attempt to override an existing message: "${s.id}"`));continue}this._messages.set(s.id,s)}}return i}formatPattern(t,e=null,i=null){if(typeof t=="string")return this._transform(t);let n=new mf(this,i,e);try{return F0(n,t).toString(n)}catch(s){if(n.errors&&s instanceof Error)return n.errors.push(s),new Qe().toString(n);throw s}}},of=/^(-?[a-zA-Z][\w-]*) *= */gm,_0=/\.([a-zA-Z][\w-]*) *= */y,Zb=/\*?\[/y,lf=/(-?[0-9]+(?:\.([0-9]+))?)/y,tv=/([a-zA-Z][\w-]*)/y,x0=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,ev=/^[A-Z][A-Z0-9_-]*$/,Yc=/([^{}\n\r]+)/y,iv=/([^\\"\n\r]*)/y,A0=/\\([\\"])/y,C0=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,nv=/^\n+/,P0=/ +$/,sv=/ *\r?\n/g,rv=/( *)$/,av=/{\s*/y,S0=/\s*}/y,ov=/\[\s*/y,lv=/\s*] */y,cv=/\s*\(\s*/y,hv=/\s*->\s*/y,uv=/\s*:\s*/y,dv=/\s*,?\s*/y,fv=/\s+/y,vf=class{constructor(t){this.body=[],of.lastIndex=0;let e=0;for(;;){let I=of.exec(t);if(I===null)break;e=of.lastIndex;try{this.body.push(l(I[1]))}catch(W){if(W instanceof SyntaxError)continue;throw W}}function i(I){return I.lastIndex=e,I.test(t)}function n(I,W){if(t[e]===I)return e++,!0;if(W)throw new W(`Expected ${I}`);return!1}function s(I,W){if(i(I))return e=I.lastIndex,!0;if(W)throw new W(`Expected ${I.toString()}`);return!1}function a(I){I.lastIndex=e;let W=I.exec(t);if(W===null)throw new SyntaxError(`Expected ${I.toString()}`);return e=I.lastIndex,W}function o(I){return a(I)[1]}function l(I){let W=u(),S=c();if(W===null&&Object.keys(S).length===0)throw new SyntaxError("Expected message value or attributes");return{id:I,value:W,attributes:S}}function c(){let I=Object.create(null);for(;i(_0);){let W=o(_0),S=u();if(S===null)throw new SyntaxError("Expected attribute value");I[W]=S}return I}function u(){let I;if(i(Yc)&&(I=o(Yc)),t[e]==="{"||t[e]==="}")return d(I?[I]:[],1/0);let W=Y();return W?I?d([I,W],W.length):(W.value=U(W.value,nv),d([W],W.length)):I?U(I,P0):null}function d(I=[],W){for(;;){if(i(Yc)){I.push(o(Yc));continue}if(t[e]==="{"){I.push(g());continue}if(t[e]==="}")throw new SyntaxError("Unbalanced closing brace");let H=Y();if(H){I.push(H),W=Math.min(W,H.length);continue}break}let S=I.length-1,N=I[S];typeof N=="string"&&(I[S]=U(N,P0));let G=[];for(let H of I)H instanceof nh&&(H=H.value.slice(0,H.value.length-W)),H&&G.push(H);return G}function g(){s(av,SyntaxError);let I=p();if(s(S0))return I;if(s(hv)){let W=x();return s(S0,SyntaxError),pe({type:"select",selector:I},W)}throw new SyntaxError("Unclosed placeable")}function p(){if(t[e]==="{")return g();if(i(x0)){let[,I,W,S=null]=a(x0);if(I==="$")return{type:"var",name:W};if(s(cv)){let N=v();if(I==="-")return{type:"term",name:W,attr:S,args:N};if(ev.test(W))return{type:"func",name:W,args:N};throw new SyntaxError("Function names must be all upper-case")}return I==="-"?{type:"term",name:W,attr:S,args:[]}:{type:"mesg",name:W,attr:S}}return A()}function v(){let I=[];for(;;){switch(t[e]){case")":return e++,I;case void 0:throw new SyntaxError("Unclosed argument list")}I.push(y()),s(dv)}}function y(){let I=p();return I.type!=="mesg"?I:s(uv)?{type:"narg",name:I.name,value:A()}:I}function x(){let I=[],W=0,S;for(;i(Zb);){n("*")&&(S=W);let N=_(),G=u();if(G===null)throw new SyntaxError("Expected variant value");I[W++]={key:N,value:G}}if(W===0)return null;if(S===void 0)throw new SyntaxError("Expected default variant");return{variants:I,star:S}}function _(){s(ov,SyntaxError);let I;return i(lf)?I=T():I={type:"str",value:o(tv)},s(lv,SyntaxError),I}function A(){if(i(lf))return T();if(t[e]==='"')return R();throw new SyntaxError("Invalid expression")}function T(){let[,I,W=""]=a(lf),S=W.length;return{type:"num",value:parseFloat(I),precision:S}}function R(){n('"',SyntaxError);let I="";for(;;){if(I+=o(iv),t[e]==="\\"){I+=z();continue}if(n('"'))return{type:"str",value:I};throw new SyntaxError("Unclosed string literal")}}function z(){if(i(A0))return o(A0);if(i(C0)){let[,I,W]=a(C0),S=parseInt(I||W,16);return S<=55295||57344<=S?String.fromCodePoint(S):"\uFFFD"}throw new SyntaxError("Unknown escape sequence")}function Y(){let I=e;switch(s(fv),t[e]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return F(t.slice(I,e))}return t[e-1]===" "?F(t.slice(I,e)):!1}function U(I,W){return I.replace(W,"")}function F(I){let W=I.replace(sv,`
`),S=rv.exec(I)[1].length;return new nh(W,S)}}},nh=class{constructor(t,e){this.value=t,this.length=e}},pv=/<|&#?\w+;/,gv={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},mv={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function bv(r,t){let{value:e}=t;if(typeof e=="string")if(r.localName==="title"&&r.namespaceURI==="http://www.w3.org/1999/xhtml")r.textContent=e;else if(!pv.test(e))r.textContent=e;else{let i=r.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");i.innerHTML=e,vv(i.content,r)}D0(t,r)}function vv(r,t){for(let e of r.childNodes)if(e.nodeType!==e.TEXT_NODE){if(e.hasAttribute("data-l10n-name")){let i=wv(t,e);r.replaceChild(i,e);continue}if(xv(e)){let i=_v(e);r.replaceChild(i,e);continue}console.warn(`An element of forbidden type "${e.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),r.replaceChild(yf(e),e)}t.textContent="",t.appendChild(r)}function yv(r,t){if(!r)return!1;for(let e of r)if(e.name===t)return!0;return!1}function D0(r,t){let e=t.hasAttribute("data-l10n-attrs")?t.getAttribute("data-l10n-attrs").split(",").map(i=>i.trim()):null;for(let i of Array.from(t.attributes))E0(i.name,t,e)&&!yv(r.attributes,i.name)&&t.removeAttribute(i.name);if(r.attributes)for(let i of Array.from(r.attributes))E0(i.name,t,e)&&t.getAttribute(i.name)!==i.value&&t.setAttribute(i.name,i.value)}function wv(r,t){let e=t.getAttribute("data-l10n-name"),i=r.querySelector(`[data-l10n-name="${e}"]`);if(!i)return console.warn(`An element named "${e}" wasn't found in the source.`),yf(t);if(i.localName!==t.localName)return console.warn(`An element named "${e}" was found in the translation but its type ${t.localName} didn't match the element found in the source (${i.localName}).`),yf(t);r.removeChild(i);let n=i.cloneNode(!1);return j0(t,n)}function _v(r){let t=r.ownerDocument.createElement(r.localName);return j0(r,t)}function yf(r){return r.ownerDocument.createTextNode(r.textContent)}function xv(r){let t=gv[r.namespaceURI];return t&&t.includes(r.localName)}function E0(r,t,e=null){if(e&&e.includes(r))return!0;let i=mv[t.namespaceURI];if(!i)return!1;let n=r.toLowerCase(),s=t.localName;if(i.global.includes(n))return!0;if(!i[s])return!1;if(i[s].includes(n))return!0;if(t.namespaceURI==="http://www.w3.org/1999/xhtml"&&s==="input"&&n==="value"){let a=t.type.toLowerCase();if(a==="submit"||a==="button"||a==="reset")return!0}return!1}function j0(r,t){return t.textContent=r.textContent,D0(r,t),t}var wf=class extends Array{static from(t){return t instanceof this?t:new this(t)}};var _f=class extends wf{constructor(t){if(super(),Symbol.asyncIterator in Object(t))this.iterator=t[Symbol.asyncIterator]();else if(Symbol.iterator in Object(t))this.iterator=t[Symbol.iterator]();else throw new TypeError("Argument must implement the iteration protocol.")}[Symbol.asyncIterator](){let t=this,e=0;return{next(){return dt(this,null,function*(){return t.length<=e&&t.push(t.iterator.next()),t[e++]})}}}touchNext(t=1){return dt(this,null,function*(){let e=0;for(;e++<t;){let i=this[this.length-1];if(i&&(yield i).done)break;this.push(this.iterator.next())}return this[this.length-1]})}},xf=class{constructor(t=[],e){this.resourceIds=t,this.generateBundles=e,this.onChange(!0)}addResourceIds(t,e=!1){return this.resourceIds.push(...t),this.onChange(e),this.resourceIds.length}removeResourceIds(t){return this.resourceIds=this.resourceIds.filter(e=>!t.includes(e)),this.onChange(),this.resourceIds.length}formatWithFallback(t,e){return dt(this,null,function*(){let i=[],n=!1;try{for(var s=Gp(this.bundles),a,o,l;a=!(o=yield s.next()).done;a=!1){let c=o.value;n=!0;let u=Pv(e,c,t,i);if(u.size===0)break;if(typeof console<"u"){let d=c.locales[0],g=Array.from(u).join(", ");console.warn(`[fluent] Missing translations in ${d}: ${g}`)}}}catch{l=[o]}finally{try{a&&(o=s.return)&&(yield o.call(s))}finally{if(l)throw l[0]}}return!n&&typeof console<"u"&&console.warn(`[fluent] Request for keys failed because no resource bundles got generated.
  keys: ${JSON.stringify(t)}.
  resourceIds: ${JSON.stringify(this.resourceIds)}.`),i})}formatMessages(t){return this.formatWithFallback(t,Cv)}formatValues(t){return this.formatWithFallback(t,Av)}formatValue(t,e){return dt(this,null,function*(){let[i]=yield this.formatValues([{id:t,args:e}]);return i})}handleEvent(){this.onChange()}onChange(t=!1){this.bundles=_f.from(this.generateBundles(this.resourceIds)),t&&this.bundles.touchNext(2)}};function Av(r,t,e,i){return e.value?r.formatPattern(e.value,i,t):null}function Cv(r,t,e,i){let n={value:null,attributes:null};e.value&&(n.value=r.formatPattern(e.value,i,t));let s=Object.keys(e.attributes);if(s.length>0){n.attributes=new Array(s.length);for(let[a,o]of s.entries()){let l=r.formatPattern(e.attributes[o],i,t);n.attributes[a]={name:o,value:l}}}return n}function Pv(r,t,e,i){let n=[],s=new Set;return e.forEach(({id:a,args:o},l)=>{if(i[l]!==void 0)return;let c=t.getMessage(a);if(c){if(n.length=0,i[l]=r(t,n,c,o),n.length>0&&typeof console<"u"){let u=t.locales[0],d=n.join(", ");console.warn(`[fluent][resolver] errors in ${u}/${a}: ${d}.`)}}else s.add(a)}),s}var Cr="data-l10n-id",jo="data-l10n-args",Sv=`[${Cr}]`,Af=class extends xf{constructor(t,e){super(t,e),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:[Cr,jo]}}onChange(t=!1){super.onChange(t),this.roots&&this.translateRoots()}setAttributes(t,e,i){return t.setAttribute(Cr,e),i?t.setAttribute(jo,JSON.stringify(i)):t.removeAttribute(jo),t}getAttributes(t){return{id:t.getAttribute(Cr),args:JSON.parse(t.getAttribute(jo)||null)}}connectRoot(t){for(let e of this.roots)if(e===t||e.contains(t)||t.contains(e))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==t.ownerDocument.defaultView)throw new Error(`Cannot connect a root:
          DOMLocalization already has a root from a different window.`)}else this.windowElement=t.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(e=>this.translateMutations(e));this.roots.add(t),this.mutationObserver.observe(t,this.observerConfig)}disconnectRoot(t){return this.roots.delete(t),this.pauseObserving(),this.roots.size===0?(this.mutationObserver=null,this.windowElement&&this.pendingrAF&&this.windowElement.cancelAnimationFrame(this.pendingrAF),this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){let t=Array.from(this.roots);return Promise.all(t.map(e=>this.translateFragment(e)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(let t of this.roots)this.mutationObserver.observe(t,this.observerConfig)}translateMutations(t){for(let e of t)switch(e.type){case"attributes":e.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(e.target);break;case"childList":for(let i of e.addedNodes)if(i.nodeType===i.ELEMENT_NODE)if(i.childElementCount)for(let n of this.getTranslatables(i))this.pendingElements.add(n);else i.hasAttribute(Cr)&&this.pendingElements.add(i);break}this.pendingElements.size>0&&this.pendingrAF===null&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(t){return this.translateElements(this.getTranslatables(t))}translateElements(t){return dt(this,null,function*(){if(!t.length)return;let e=t.map(this.getKeysForElement),i=yield this.formatMessages(e);return this.applyTranslations(t,i)})}applyTranslations(t,e){this.pauseObserving();for(let i=0;i<t.length;i++)e[i]!==void 0&&bv(t[i],e[i]);this.resumeObserving()}getTranslatables(t){let e=Array.from(t.querySelectorAll(Sv));return typeof t.hasAttribute=="function"&&t.hasAttribute(Cr)&&e.push(t),e}getKeysForElement(t){return{id:t.getAttribute(Cr),args:JSON.parse(t.getAttribute(jo)||null)}}},Cf=class r{#t;#e;#i;#n;constructor({lang:t,isRTL:e},i=null){this.#i=r.#s(t),this.#n=i,this.#t=e??r.#r(this.#i)?"rtl":"ltr"}_setL10n(t){this.#n=t}getLanguage(){return this.#i}getDirection(){return this.#t}get(t,e=null,i){return dt(this,null,function*(){return Array.isArray(t)?(t=t.map(a=>({id:a})),(yield this.#n.formatMessages(t)).map(a=>a.value)):(yield this.#n.formatMessages([{id:t,args:e}]))[0]?.value||i})}translate(t){return dt(this,null,function*(){(this.#e||=new Set).add(t);try{this.#n.connectRoot(t),yield this.#n.translateRoots()}catch{}})}translateOnce(t){return dt(this,null,function*(){try{yield this.#n.translateElements([t])}catch(e){console.error(`translateOnce: "${e}".`)}})}destroy(){return dt(this,null,function*(){if(this.#e){for(let t of this.#e)this.#n.disconnectRoot(t);this.#e.clear(),this.#e=null}this.#n.pauseObserving()})}pause(){this.#n.pauseObserving()}resume(){this.#n.resumeObserving()}static#s(t){return t=t?.toLowerCase()||"en-us",{en:"en-us",es:"es-es",fy:"fy-nl",ga:"ga-ie",gu:"gu-in",hi:"hi-in",hy:"hy-am",nb:"nb-no",ne:"ne-np",nn:"nn-no",pa:"pa-in",pt:"pt-pt",sv:"sv-se",zh:"zh-cn"}[t]||t}static#r(t){let e=t.split("-",1)[0];return["ar","he","fa","ps","ur"].includes(e)}};function L0(r,t){let e=new vf(t),i=new bf(r),n=i.addResource(e);return n.length&&console.error("L10n errors",n),i}var Aa=class r extends Cf{constructor(t){super({lang:t});let e=t?r.#t.bind(r,"en-us",this.getLanguage()):r.#n.bind(r,this.getLanguage());this._setL10n(new Af([],e))}static#t(t,e){return fu(this,null,function*(){let{baseURL:i,paths:n}=yield new du(this.#i()),s=[e];if(t!==e){let a=e.split("-",1)[0];a!==e&&s.push(a),s.push(t)}for(let a of s){let o=yield new du(this.#e(a,i,n));o?yield o:a==="en-us"&&(yield this.#s(a))}})}static#e(t,e,i){return dt(this,null,function*(){let n=i[t];if(!n)return null;let s=new URL(n,e),a=yield d0(s,"text");return L0(t,a)})}static#i(){return dt(this,null,function*(){try{let{href:t}=document.querySelector('link[type="application/l10n"]'),e=yield d0(t,"json");return{baseURL:t.replace(/[^/]*$/,"")||"./",paths:e}}catch{}return{baseURL:"./",paths:Object.create(null)}})}static#n(t){return fu(this,null,function*(){yield this.#s(t)})}static#s(t){return dt(this,null,function*(){return L0(t,`pdfjs-previous-button =
    .title = Previous Page
pdfjs-previous-button-label = Previous
pdfjs-next-button =
    .title = Next Page
pdfjs-next-button-label = Next
pdfjs-page-input =
    .title = Page
pdfjs-of-pages = of { $pagesCount }
pdfjs-page-of-pages = ({ $pageNumber } of { $pagesCount })
pdfjs-zoom-out-button =
    .title = Zoom Out
pdfjs-zoom-out-button-label = Zoom Out
pdfjs-zoom-in-button =
    .title = Zoom In
pdfjs-zoom-in-button-label = Zoom In
pdfjs-zoom-select =
    .title = Zoom
pdfjs-presentation-mode-button =
    .title = Switch to Presentation Mode
pdfjs-presentation-mode-button-label = Presentation Mode
pdfjs-open-file-button =
    .title = Open File
pdfjs-open-file-button-label = Open
pdfjs-print-button =
    .title = Print
pdfjs-print-button-label = Print
pdfjs-save-button =
    .title = Save
pdfjs-save-button-label = Save
pdfjs-download-button =
    .title = Download
pdfjs-download-button-label = Download
pdfjs-bookmark-button =
    .title = Current Page (View URL from Current Page)
pdfjs-bookmark-button-label = Current Page
pdfjs-tools-button =
    .title = Tools
pdfjs-tools-button-label = Tools
pdfjs-first-page-button =
    .title = Go to First Page
pdfjs-first-page-button-label = Go to First Page
pdfjs-last-page-button =
    .title = Go to Last Page
pdfjs-last-page-button-label = Go to Last Page
pdfjs-page-rotate-cw-button =
    .title = Rotate Clockwise
pdfjs-page-rotate-cw-button-label = Rotate Clockwise
pdfjs-page-rotate-ccw-button =
    .title = Rotate Counterclockwise
pdfjs-page-rotate-ccw-button-label = Rotate Counterclockwise
pdfjs-cursor-text-select-tool-button =
    .title = Enable Text Selection Tool
pdfjs-cursor-text-select-tool-button-label = Text Selection Tool
pdfjs-cursor-hand-tool-button =
    .title = Enable Hand Tool
pdfjs-cursor-hand-tool-button-label = Hand Tool
pdfjs-scroll-page-button =
    .title = Use Page Scrolling
pdfjs-scroll-page-button-label = Page Scrolling
pdfjs-scroll-vertical-button =
    .title = Use Vertical Scrolling
pdfjs-scroll-vertical-button-label = Vertical Scrolling
pdfjs-scroll-horizontal-button =
    .title = Use Horizontal Scrolling
pdfjs-scroll-horizontal-button-label = Horizontal Scrolling
pdfjs-scroll-wrapped-button =
    .title = Use Wrapped Scrolling
pdfjs-scroll-wrapped-button-label = Wrapped Scrolling
pdfjs-spread-none-button =
    .title = Do not join page spreads
pdfjs-spread-none-button-label = No Spreads
pdfjs-spread-odd-button =
    .title = Join page spreads starting with odd-numbered pages
pdfjs-spread-odd-button-label = Odd Spreads
pdfjs-spread-even-button =
    .title = Join page spreads starting with even-numbered pages
pdfjs-spread-even-button-label = Even Spreads
pdfjs-document-properties-button =
    .title = Document Properties\u2026
pdfjs-document-properties-button-label = Document Properties\u2026
pdfjs-document-properties-file-name = File name:
pdfjs-document-properties-file-size = File size:
pdfjs-document-properties-size-kb = { NUMBER($kb, maximumSignificantDigits: 3) } KB ({ $b } bytes)
pdfjs-document-properties-size-mb = { NUMBER($mb, maximumSignificantDigits: 3) } MB ({ $b } bytes)
pdfjs-document-properties-title = Title:
pdfjs-document-properties-author = Author:
pdfjs-document-properties-subject = Subject:
pdfjs-document-properties-keywords = Keywords:
pdfjs-document-properties-creation-date = Creation Date:
pdfjs-document-properties-modification-date = Modification Date:
pdfjs-document-properties-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-document-properties-creator = Creator:
pdfjs-document-properties-producer = PDF Producer:
pdfjs-document-properties-version = PDF Version:
pdfjs-document-properties-page-count = Page Count:
pdfjs-document-properties-page-size = Page Size:
pdfjs-document-properties-page-size-unit-inches = in
pdfjs-document-properties-page-size-unit-millimeters = mm
pdfjs-document-properties-page-size-orientation-portrait = portrait
pdfjs-document-properties-page-size-orientation-landscape = landscape
pdfjs-document-properties-page-size-name-a-three = A3
pdfjs-document-properties-page-size-name-a-four = A4
pdfjs-document-properties-page-size-name-letter = Letter
pdfjs-document-properties-page-size-name-legal = Legal
pdfjs-document-properties-page-size-dimension-string = { $width } \xD7 { $height } { $unit } ({ $orientation })
pdfjs-document-properties-page-size-dimension-name-string = { $width } \xD7 { $height } { $unit } ({ $name }, { $orientation })
pdfjs-document-properties-linearized = Fast Web View:
pdfjs-document-properties-linearized-yes = Yes
pdfjs-document-properties-linearized-no = No
pdfjs-document-properties-close-button = Close
pdfjs-print-progress-message = Preparing document for printing\u2026
pdfjs-print-progress-percent = { $progress }%
pdfjs-print-progress-close-button = Cancel
pdfjs-printing-not-supported = Warning: Printing is not fully supported by this browser.
pdfjs-printing-not-ready = Warning: The PDF is not fully loaded for printing.
pdfjs-toggle-sidebar-button =
    .title = Toggle Sidebar
pdfjs-toggle-sidebar-notification-button =
    .title = Toggle Sidebar (document contains outline/attachments/layers)
pdfjs-toggle-sidebar-button-label = Toggle Sidebar
pdfjs-document-outline-button =
    .title = Show Document Outline (double-click to expand/collapse all items)
pdfjs-document-outline-button-label = Document Outline
pdfjs-attachments-button =
    .title = Show Attachments
pdfjs-attachments-button-label = Attachments
pdfjs-layers-button =
    .title = Show Layers (double-click to reset all layers to the default state)
pdfjs-layers-button-label = Layers
pdfjs-thumbs-button =
    .title = Show Thumbnails
pdfjs-thumbs-button-label = Thumbnails
pdfjs-current-outline-item-button =
    .title = Find Current Outline Item
pdfjs-current-outline-item-button-label = Current Outline Item
pdfjs-findbar-button =
    .title = Find in Document
pdfjs-findbar-button-label = Find
pdfjs-additional-layers = Additional Layers
pdfjs-thumb-page-title =
    .title = Page { $page }
pdfjs-thumb-page-canvas =
    .aria-label = Thumbnail of Page { $page }
pdfjs-find-input =
    .title = Find
    .placeholder = Find in document\u2026
pdfjs-find-previous-button =
    .title = Find the previous occurrence of the phrase
pdfjs-find-previous-button-label = Previous
pdfjs-find-next-button =
    .title = Find the next occurrence of the phrase
pdfjs-find-next-button-label = Next
pdfjs-find-highlight-checkbox = Highlight All
pdfjs-find-match-case-checkbox-label = Match Case
pdfjs-find-match-diacritics-checkbox-label = Match Diacritics
pdfjs-find-entire-word-checkbox-label = Whole Words
pdfjs-find-reached-top = Reached top of document, continued from bottom
pdfjs-find-reached-bottom = Reached end of document, continued from top
pdfjs-find-match-count =
    { $total ->
        [one] { $current } of { $total } match
       *[other] { $current } of { $total } matches
    }
pdfjs-find-match-count-limit =
    { $limit ->
        [one] More than { $limit } match
       *[other] More than { $limit } matches
    }
pdfjs-find-not-found = Phrase not found
pdfjs-page-scale-width = Page Width
pdfjs-page-scale-fit = Page Fit
pdfjs-page-scale-auto = Automatic Zoom
pdfjs-page-scale-actual = Actual Size
pdfjs-page-scale-percent = { $scale }%
pdfjs-page-landmark =
    .aria-label = Page { $page }
pdfjs-loading-error = An error occurred while loading the PDF.
pdfjs-invalid-file-error = Invalid or corrupted PDF file.
pdfjs-missing-file-error = Missing PDF file.
pdfjs-unexpected-response-error = Unexpected server response.
pdfjs-rendering-error = An error occurred while rendering the page.
pdfjs-annotation-date-time-string = { DATETIME($dateObj, dateStyle: "short", timeStyle: "medium") }
pdfjs-text-annotation-type =
    .alt = [{ $type } Annotation]
pdfjs-password-label = Enter the password to open this PDF file.
pdfjs-password-invalid = Invalid password. Please try again.
pdfjs-password-ok-button = OK
pdfjs-password-cancel-button = Cancel
pdfjs-web-fonts-disabled = Web fonts are disabled: unable to use embedded PDF fonts.
pdfjs-editor-free-text-button =
    .title = Text
pdfjs-editor-free-text-button-label = Text
pdfjs-editor-ink-button =
    .title = Draw
pdfjs-editor-ink-button-label = Draw
pdfjs-editor-stamp-button =
    .title = Add or edit images
pdfjs-editor-stamp-button-label = Add or edit images
pdfjs-editor-highlight-button =
    .title = Highlight
pdfjs-editor-highlight-button-label = Highlight
pdfjs-highlight-floating-button1 =
    .title = Highlight
    .aria-label = Highlight
pdfjs-highlight-floating-button-label = Highlight
pdfjs-editor-remove-ink-button =
    .title = Remove drawing
pdfjs-editor-remove-freetext-button =
    .title = Remove text
pdfjs-editor-remove-stamp-button =
    .title = Remove image
pdfjs-editor-remove-highlight-button =
    .title = Remove highlight
pdfjs-editor-free-text-color-input = Color
pdfjs-editor-free-text-size-input = Size
pdfjs-editor-ink-color-input = Color
pdfjs-editor-ink-thickness-input = Thickness
pdfjs-editor-ink-opacity-input = Opacity
pdfjs-editor-stamp-add-image-button =
    .title = Add image
pdfjs-editor-stamp-add-image-button-label = Add image
pdfjs-editor-free-highlight-thickness-input = Thickness
pdfjs-editor-free-highlight-thickness-title =
    .title = Change thickness when highlighting items other than text
pdfjs-free-text2 =
    .aria-label = Text Editor
    .default-content = Start typing\u2026
pdfjs-ink =
    .aria-label = Draw Editor
pdfjs-ink-canvas =
    .aria-label = User-created image
pdfjs-editor-alt-text-button =
    .aria-label = Alt text
pdfjs-editor-alt-text-button-label = Alt text
pdfjs-editor-alt-text-edit-button =
    .aria-label = Edit alt text
pdfjs-editor-alt-text-dialog-label = Choose an option
pdfjs-editor-alt-text-dialog-description = Alt text (alternative text) helps when people can\u2019t see the image or when it doesn\u2019t load.
pdfjs-editor-alt-text-add-description-label = Add a description
pdfjs-editor-alt-text-add-description-description = Aim for 1-2 sentences that describe the subject, setting, or actions.
pdfjs-editor-alt-text-mark-decorative-label = Mark as decorative
pdfjs-editor-alt-text-mark-decorative-description = This is used for ornamental images, like borders or watermarks.
pdfjs-editor-alt-text-cancel-button = Cancel
pdfjs-editor-alt-text-save-button = Save
pdfjs-editor-alt-text-decorative-tooltip = Marked as decorative
pdfjs-editor-alt-text-textarea =
    .placeholder = For example, \u201CA young man sits down at a table to eat a meal\u201D
pdfjs-editor-resizer-top-left =
    .aria-label = Top left corner \u2014 resize
pdfjs-editor-resizer-top-middle =
    .aria-label = Top middle \u2014 resize
pdfjs-editor-resizer-top-right =
    .aria-label = Top right corner \u2014 resize
pdfjs-editor-resizer-middle-right =
    .aria-label = Middle right \u2014 resize
pdfjs-editor-resizer-bottom-right =
    .aria-label = Bottom right corner \u2014 resize
pdfjs-editor-resizer-bottom-middle =
    .aria-label = Bottom middle \u2014 resize
pdfjs-editor-resizer-bottom-left =
    .aria-label = Bottom left corner \u2014 resize
pdfjs-editor-resizer-middle-left =
    .aria-label = Middle left \u2014 resize
pdfjs-editor-highlight-colorpicker-label = Highlight color
pdfjs-editor-colorpicker-button =
    .title = Change color
pdfjs-editor-colorpicker-dropdown =
    .aria-label = Color choices
pdfjs-editor-colorpicker-yellow =
    .title = Yellow
pdfjs-editor-colorpicker-green =
    .title = Green
pdfjs-editor-colorpicker-blue =
    .title = Blue
pdfjs-editor-colorpicker-pink =
    .title = Pink
pdfjs-editor-colorpicker-red =
    .title = Red
pdfjs-editor-highlight-show-all-button-label = Show all
pdfjs-editor-highlight-show-all-button =
    .title = Show all
pdfjs-editor-new-alt-text-dialog-edit-label = Edit alt text (image description)
pdfjs-editor-new-alt-text-dialog-add-label = Add alt text (image description)
pdfjs-editor-new-alt-text-textarea =
    .placeholder = Write your description here\u2026
pdfjs-editor-new-alt-text-description = Short description for people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-new-alt-text-disclaimer1 = This alt text was created automatically and may be inaccurate.
pdfjs-editor-new-alt-text-disclaimer-learn-more-url = Learn more
pdfjs-editor-new-alt-text-create-automatically-button-label = Create alt text automatically
pdfjs-editor-new-alt-text-not-now-button = Not now
pdfjs-editor-new-alt-text-error-title = Couldn\u2019t create alt text automatically
pdfjs-editor-new-alt-text-error-description = Please write your own alt text or try again later.
pdfjs-editor-new-alt-text-error-close-button = Close
pdfjs-editor-new-alt-text-ai-model-downloading-progress = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
    .aria-valuetext = Downloading alt text AI model ({ $downloadedSize } of { $totalSize } MB)
pdfjs-editor-new-alt-text-added-button =
    .aria-label = Alt text added
pdfjs-editor-new-alt-text-added-button-label = Alt text added
pdfjs-editor-new-alt-text-missing-button =
    .aria-label = Missing alt text
pdfjs-editor-new-alt-text-missing-button-label = Missing alt text
pdfjs-editor-new-alt-text-to-review-button =
    .aria-label = Review alt text
pdfjs-editor-new-alt-text-to-review-button-label = Review alt text
pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer = Created automatically: { $generatedAltText }
pdfjs-image-alt-text-settings-button =
    .title = Image alt text settings
pdfjs-image-alt-text-settings-button-label = Image alt text settings
pdfjs-editor-alt-text-settings-dialog-label = Image alt text settings
pdfjs-editor-alt-text-settings-automatic-title = Automatic alt text
pdfjs-editor-alt-text-settings-create-model-button-label = Create alt text automatically
pdfjs-editor-alt-text-settings-create-model-description = Suggests descriptions to help people who can\u2019t see the image or when the image doesn\u2019t load.
pdfjs-editor-alt-text-settings-download-model-label = Alt text AI model ({ $totalSize } MB)
pdfjs-editor-alt-text-settings-ai-model-description = Runs locally on your device so your data stays private. Required for automatic alt text.
pdfjs-editor-alt-text-settings-delete-model-button = Delete
pdfjs-editor-alt-text-settings-download-model-button = Download
pdfjs-editor-alt-text-settings-downloading-model-button = Downloading\u2026
pdfjs-editor-alt-text-settings-editor-title = Alt text editor
pdfjs-editor-alt-text-settings-show-dialog-button-label = Show alt text editor right away when adding an image
pdfjs-editor-alt-text-settings-show-dialog-description = Helps you make sure all your images have alt text.
pdfjs-editor-alt-text-settings-close-button = Close`)})}},Ev=1e3,cf=50,M0=1e3;function hf(){return document.location.hash}var Pf=class{#t=null;constructor({linkService:t,eventBus:e}){this.linkService=t,this.eventBus=e,this._initialized=!1,this._fingerprint="",this.reset(),this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",i=>{this._isPagesLoaded=!!i.pagesCount},{once:!0})})}initialize({fingerprint:t,resetHistory:e=!1,updateUrl:i=!1}){if(!t||typeof t!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();let n=this._fingerprint!==""&&this._fingerprint!==t;this._fingerprint=t,this._updateUrl=i===!0,this._initialized=!0,this.#u();let s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=hf(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this.#s(s,!0)||e){let{hash:o,page:l,rotation:c}=this.#l(!0);if(!o||n||e){this.#e(null,!0);return}this.#e({hash:o,page:l,rotation:c},!0);return}let a=s.destination;this.#r(a,s.uid,!0),a.rotation!==void 0&&(this._initialRotation=a.rotation),a.dest?(this._initialBookmark=JSON.stringify(a.dest),this._destination.page=null):a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark=`page=${a.page}`)}reset(){this._initialized&&(this.#o(),this._initialized=!1,this.#a()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:t=null,explicitDest:e,pageNumber:i}){if(!this._initialized)return;if(t&&typeof t!="string"){console.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);return}else if(Array.isArray(e)){if(!this.#n(i)&&(i!==null||this._destination)){console.error(`PDFHistory.push: "${i}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${e}" is not a valid explicitDest parameter.`);return}let n=t||JSON.stringify(e);if(!n)return;let s=!1;if(this._destination&&(Lv(this._destination.hash,n)||Mv(this._destination.dest,e))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this.#e({dest:e,hash:n,page:i,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(t){if(this._initialized){if(!this.#n(t)){console.error(`PDFHistory.pushPage: "${t}" is not a valid page number.`);return}this._destination?.page!==t&&(this._popStateInProgress||(this.#e({dest:null,hash:`page=${t}`,page:t,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this.#i()}back(){if(!this._initialized||this._popStateInProgress)return;let t=window.history.state;this.#s(t)&&t.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;let t=window.history.state;this.#s(t)&&t.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}#e(t,e=!1){let i=e||!this._destination,n={fingerprint:this._fingerprint,uid:i?this._uid:this._uid+1,destination:t};this.#r(t,n.uid);let s;if(this._updateUrl&&t?.hash){let a=document.location.href.split("#",1)[0];a.startsWith("file://")||(s=`${a}#${t.hash}`)}i?window.history.replaceState(n,"",s):window.history.pushState(n,"",s)}#i(t=!1){if(!this._position)return;let e=this._position;if(t&&(e=Object.assign(Object.create(null),this._position),e.temporary=!0),!this._destination){this.#e(e);return}if(this._destination.temporary){this.#e(e,!0);return}if(this._destination.hash===e.hash||!this._destination.page&&(cf<=0||this._numPositionUpdates<=cf))return;let i=!1;if(this._destination.page>=e.first&&this._destination.page<=e.page){if(this._destination.dest!==void 0||!this._destination.first)return;i=!0}this.#e(e,i)}#n(t){return Number.isInteger(t)&&t>0&&t<=this.linkService.pagesCount}#s(t,e=!1){if(!t)return!1;if(t.fingerprint!==this._fingerprint)if(e){if(typeof t.fingerprint!="string"||t.fingerprint.length!==this._fingerprint.length)return!1;let[i]=performance.getEntriesByType("navigation");if(i?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(t.uid)||t.uid<0||t.destination===null||typeof t.destination!="object")}#r(t,e,i=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),i&&t?.temporary&&delete t.temporary,this._destination=t,this._uid=e,this._maxUid=Math.max(this._maxUid,e),this._numPositionUpdates=0}#l(t=!1){let e=unescape(hf()).substring(1),i=ch(e),n=i.get("nameddest")||"",s=i.get("page")|0;return(!this.#n(s)||t&&n.length>0)&&(s=null),{hash:e,page:s,rotation:this.linkService.rotation}}#c({location:t}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation},!this._popStateInProgress&&(cf>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,M0>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this.#i(!0),this._updateViewareaTimeout=null},M0)))}#h({state:t}){let e=hf(),i=this._currentHash!==e;if(this._currentHash=e,!t){this._uid++;let{hash:s,page:a,rotation:o}=this.#l();this.#e({hash:s,page:a,rotation:o},!0);return}if(!this.#s(t))return;this._popStateInProgress=!0,i&&(this._blockHashChange++,Ub({target:window,name:"hashchange",delay:Ev}).then(()=>{this._blockHashChange--}));let n=t.destination;this.#r(n,t.uid,!0),R0(n.rotation)&&(this.linkService.rotation=n.rotation),n.dest?this.linkService.goToDestination(n.dest):n.hash?this.linkService.setHash(n.hash):n.page&&(this.linkService.page=n.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}#o(){(!this._destination||this._destination.temporary)&&this.#i()}#u(){if(this.#t)return;this.#t=new AbortController;let{signal:t}=this.#t;this.eventBus._on("updateviewarea",this.#c.bind(this),{signal:t}),window.addEventListener("popstate",this.#h.bind(this),{signal:t}),window.addEventListener("pagehide",this.#o.bind(this),{signal:t})}#a(){this.#t?.abort(),this.#t=null}};function Lv(r,t){return typeof r!="string"||typeof t!="string"?!1:r===t||ch(r).get("nameddest")===t}function Mv(r,t){function e(i,n){if(typeof i!=typeof n||Array.isArray(i)||Array.isArray(n))return!1;if(i!==null&&typeof i=="object"&&n!==null){if(Object.keys(i).length!==Object.keys(n).length)return!1;for(let s in i)if(!e(i[s],n[s]))return!1;return!0}return i===n||Number.isNaN(i)&&Number.isNaN(n)}if(!(Array.isArray(r)&&Array.isArray(t))||r.length!==t.length)return!1;for(let i=0,n=r.length;i<n;i++)if(!e(r[i],t[i]))return!1;return!0}var Sf=class{#t=null;#e=null;#i=null;#n=null;#s=null;#r;constructor(t){this.pdfPage=t.pdfPage,this.accessibilityManager=t.accessibilityManager,this.l10n=t.l10n,this.l10n||=new Aa,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#r=t.uiManager,this.#t=t.annotationLayer||null,this.#s=t.textLayer||null,this.#e=t.drawLayer||null,this.#i=t.onAppend||null,this.#n=t.structTreeLayer||null}render(t,e="display"){return dt(this,null,function*(){if(e!=="display"||this._cancelled)return;let i=t.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:i}),this.show();return}let n=this.div=document.createElement("div");n.className="annotationEditorLayer",n.hidden=!0,n.dir=this.#r.direction,this.#i?.(n),this.annotationEditorLayer=new kb({uiManager:this.#r,div:n,structTreeLayer:this.#n,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:i,annotationLayer:this.#t,textLayer:this.#s,drawLayer:this.#e});let s={viewport:i,div:n,annotations:null,intent:e};this.annotationEditorLayer.render(s),this.show()})}cancel(){this._cancelled=!0,this.div&&this.annotationEditorLayer.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isInvisible||(this.div.hidden=!1)}};{Jc=new Map;let r=navigator.userAgent||"",t=navigator.platform||"",e=navigator.maxTouchPoints||1,i=/Android/.test(r),n=/\b(iPad|iPhone|iPod)(?=;)/.test(r)||t==="MacIntel"&&e>1;(function(){(n||i)&&Jc.set("maxCanvasPixels",5242880)})(),function(){i&&Jc.set("useSystemFonts",!1)}()}var Jc,wt={BROWSER:1,VIEWER:2,API:4,WORKER:8,EVENT_DISPATCH:16,PREFERENCE:128},Ef={BOOLEAN:1,NUMBER:2,OBJECT:4,STRING:8,UNDEFINED:16},Zn={allowedGlobalEvents:{value:null,kind:wt.BROWSER},canvasMaxAreaInBytes:{value:-1,kind:wt.BROWSER+wt.API},isInAutomation:{value:!1,kind:wt.BROWSER},localeProperties:{value:{lang:navigator.language||"en-US"},kind:wt.BROWSER},nimbusDataStr:{value:"",kind:wt.BROWSER},supportsCaretBrowsingMode:{value:!1,kind:wt.BROWSER},supportsDocumentFonts:{value:!0,kind:wt.BROWSER},supportsIntegratedFind:{value:!1,kind:wt.BROWSER},supportsMouseWheelZoomCtrlKey:{value:!0,kind:wt.BROWSER},supportsMouseWheelZoomMetaKey:{value:!0,kind:wt.BROWSER},supportsPinchToZoom:{value:!0,kind:wt.BROWSER},toolbarDensity:{value:0,kind:wt.BROWSER+wt.EVENT_DISPATCH},altTextLearnMoreUrl:{value:"",kind:wt.VIEWER+wt.PREFERENCE},annotationEditorMode:{value:0,kind:wt.VIEWER+wt.PREFERENCE},annotationMode:{value:2,kind:wt.VIEWER+wt.PREFERENCE},cursorToolOnLoad:{value:0,kind:wt.VIEWER+wt.PREFERENCE},debuggerSrc:{value:"./debugger.mjs",kind:wt.VIEWER},defaultZoomDelay:{value:400,kind:wt.VIEWER+wt.PREFERENCE},defaultZoomValue:{value:"",kind:wt.VIEWER+wt.PREFERENCE},disableHistory:{value:!1,kind:wt.VIEWER},disablePageLabels:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},enableAltText:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},enableAltTextModelDownload:{value:!0,kind:wt.VIEWER+wt.PREFERENCE+wt.EVENT_DISPATCH},enableGuessAltText:{value:!0,kind:wt.VIEWER+wt.PREFERENCE+wt.EVENT_DISPATCH},enableHighlightFloatingButton:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},enableNewAltTextWhenAddingImage:{value:!0,kind:wt.VIEWER+wt.PREFERENCE},enablePermissions:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:wt.VIEWER+wt.PREFERENCE},enableScripting:{value:!0,kind:wt.VIEWER+wt.PREFERENCE},enableUpdatedAddImage:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:wt.VIEWER},externalLinkTarget:{value:0,kind:wt.VIEWER+wt.PREFERENCE},highlightEditorColors:{value:"yellow=#FFFF98,green=#53FFBC,blue=#80EBFF,pink=#FFCBE6,red=#FF4F5F",kind:wt.VIEWER+wt.PREFERENCE},historyUpdateUrl:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},imageResourcesPath:{value:"./images/",kind:wt.VIEWER},maxCanvasPixels:{value:2**25,kind:wt.VIEWER},forcePageColors:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:wt.VIEWER+wt.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:wt.VIEWER+wt.PREFERENCE},pdfBugEnabled:{value:!1,kind:wt.VIEWER+wt.PREFERENCE},printResolution:{value:150,kind:wt.VIEWER},sidebarViewOnLoad:{value:-1,kind:wt.VIEWER+wt.PREFERENCE},scrollModeOnLoad:{value:-1,kind:wt.VIEWER+wt.PREFERENCE},spreadModeOnLoad:{value:-1,kind:wt.VIEWER+wt.PREFERENCE},textLayerMode:{value:1,kind:wt.VIEWER+wt.PREFERENCE},viewOnLoad:{value:0,kind:wt.VIEWER+wt.PREFERENCE},cMapPacked:{value:!0,kind:wt.API},cMapUrl:{value:"../web/cmaps/",kind:wt.API},disableAutoFetch:{value:!1,kind:wt.API+wt.PREFERENCE},disableFontFace:{value:!1,kind:wt.API+wt.PREFERENCE},disableRange:{value:!1,kind:wt.API+wt.PREFERENCE},disableStream:{value:!1,kind:wt.API+wt.PREFERENCE},docBaseUrl:{value:"",kind:wt.API},enableHWA:{value:!0,kind:wt.API+wt.VIEWER+wt.PREFERENCE},enableXfa:{value:!0,kind:wt.API+wt.PREFERENCE},fontExtraProperties:{value:!1,kind:wt.API},isEvalSupported:{value:!0,kind:wt.API},isOffscreenCanvasSupported:{value:!0,kind:wt.API},maxImageSize:{value:-1,kind:wt.API},pdfBug:{value:!1,kind:wt.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:wt.API},useSystemFonts:{value:void 0,kind:wt.API,type:Ef.BOOLEAN+Ef.UNDEFINED},verbosity:{value:1,kind:wt.API},workerPort:{value:null,kind:wt.WORKER},workerSrc:{value:"../build/pdf.worker.mjs",kind:wt.WORKER}};Zn.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:wt.VIEWER},Zn.sandboxBundleSrc={value:"../build/pdf.sandbox.mjs",kind:wt.VIEWER},Zn.viewerCssTheme={value:0,kind:wt.VIEWER+wt.PREFERENCE},Zn.enableFakeMLManager={value:!0,kind:wt.VIEWER};Zn.disablePreferences={value:!1,kind:wt.VIEWER};var Lf=class{static eventBus;static#t=new Map;static{for(let t in Zn)this.#t.set(t,Zn[t].value);for(let[t,e]of Jc)this.#t.set(t,e);this._hasInvokedSet=!1,this._checkDisablePreferences=()=>this.get("disablePreferences")?!0:(this._hasInvokedSet&&console.warn('The Preferences may override manually set AppOptions; please use the "disablePreferences"-option to prevent that.'),!1)}static get(t){return this.#t.get(t)}static getAll(t=null,e=!1){let i=Object.create(null);for(let n in Zn){let s=Zn[n];t&&!(t&s.kind)||(i[n]=e?s.value:this.#t.get(n))}return i}static set(t,e){this.setAll({[t]:e})}static setAll(t,e=!1){this._hasInvokedSet||=!0;let i;for(let n in t){let s=Zn[n],a=t[n];if(!s||!(typeof a==typeof s.value||Ef[(typeof a).toUpperCase()]&s.type))continue;let{kind:o}=s;e&&!(o&wt.BROWSER||o&wt.PREFERENCE)||(this.eventBus&&o&wt.EVENT_DISPATCH&&(i||=new Map).set(n,a),this.#t.set(n,a))}if(i)for(let[n,s]of i)this.eventBus.dispatch(n.toLowerCase(),{source:this,value:s})}},Mf=class{#t=null;constructor(t){this.pageIndex=t.pageIndex}render(t="display"){return dt(this,null,function*(){t!=="display"||this.#t||this._cancelled||(this.#t=new Ib({pageIndex:this.pageIndex}))})}cancel(){this._cancelled=!0,this.#t&&(this.#t.destroy(),this.#t=null)}setParent(t){this.#t?.setParent(t)}getDrawLayer(){return this.#t}},k0={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},kv=/^H(\d+)$/,sh=class{#t;#e=null;#i;#n=new Map;#s;#r=null;constructor(t,e){this.#t=t.getStructTree(),this.#s=e}render(){return dt(this,null,function*(){if(this.#i)return this.#i;let{promise:t,resolve:e,reject:i}=Promise.withResolvers();this.#i=t;try{this.#e=this.#h(yield this.#t)}catch(n){i(n)}return this.#t=null,this.#e?.classList.add("structTree"),e(this.#e),t})}getAriaAttributes(t){return dt(this,null,function*(){try{return yield this.render(),this.#n.get(t)}catch{}return null})}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#l(t,e){let{alt:i,id:n,lang:s}=t;if(i!==void 0){let a=!1,o=zo(i);for(let l of t.children)if(l.type==="annotation"){let c=this.#n.get(l.id);c||(c=new Map,this.#n.set(l.id,c)),c.set("aria-label",o),a=!0}a||e.setAttribute("aria-label",o)}n!==void 0&&e.setAttribute("aria-owns",n),s!==void 0&&e.setAttribute("lang",zo(s,!0))}#c(t,e){let{alt:i,bbox:n,children:s}=t,a=s?.[0];if(!this.#s||!i||!n||a?.type!=="content")return!1;let{id:o}=a;if(!o)return!1;e.setAttribute("aria-owns",o);let l=document.createElement("span");(this.#r||=new Map).set(o,l),l.setAttribute("role","img"),l.setAttribute("aria-label",zo(i));let{pageHeight:c,pageX:u,pageY:d}=this.#s,g="calc(var(--scale-factor)*",{style:p}=l;return p.width=`${g}${n[2]-n[0]}px)`,p.height=`${g}${n[3]-n[1]}px)`,p.left=`${g}${n[0]-u}px)`,p.top=`${g}${c-n[3]+d}px)`,!0}addElementsToTextLayer(){if(this.#r){for(let[t,e]of this.#r)document.getElementById(t)?.append(e);this.#r.clear(),this.#r=null}}#h(t){if(!t)return null;let e=document.createElement("span");if("role"in t){let{role:i}=t,n=i.match(kv);if(n?(e.setAttribute("role","heading"),e.setAttribute("aria-level",n[1])):k0[i]&&e.setAttribute("role",k0[i]),i==="Figure"&&this.#c(t,e))return e}if(this.#l(t,e),t.children)if(t.children.length===1&&"id"in t.children[0])this.#l(t.children[0],e);else for(let i of t.children)e.append(this.#h(i));return e}},kf=class r{#t=!1;#e=null;#i=new Map;#n=new Map;setTextMapping(t){this.#e=t}static#s(t,e){let i=t.getBoundingClientRect(),n=e.getBoundingClientRect();if(i.width===0&&i.height===0)return 1;if(n.width===0&&n.height===0)return-1;let s=i.y,a=i.y+i.height,o=i.y+i.height/2,l=n.y,c=n.y+n.height,u=n.y+n.height/2;if(o<=l&&u>=a)return-1;if(u<=s&&o>=c)return 1;let d=i.x+i.width/2,g=n.x+n.width/2;return d-g}enable(){if(this.#t)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#e)throw new Error("Text divs and strings have not been set.");if(this.#t=!0,this.#e=this.#e.slice(),this.#e.sort(r.#s),this.#i.size>0){let t=this.#e;for(let[e,i]of this.#i){if(!document.getElementById(e)){this.#i.delete(e);continue}this.#r(e,t[i])}}for(let[t,e]of this.#n)this.addPointerInTextLayer(t,e);this.#n.clear()}disable(){this.#t&&(this.#n.clear(),this.#e=null,this.#t=!1)}removePointerInTextLayer(t){if(!this.#t){this.#n.delete(t);return}let e=this.#e;if(!e||e.length===0)return;let{id:i}=t,n=this.#i.get(i);if(n===void 0)return;let s=e[n];this.#i.delete(i);let a=s.getAttribute("aria-owns");a?.includes(i)&&(a=a.split(" ").filter(o=>o!==i).join(" "),a?s.setAttribute("aria-owns",a):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#r(t,e){let i=e.getAttribute("aria-owns");i?.includes(t)||e.setAttribute("aria-owns",i?`${i} ${t}`:t),e.removeAttribute("role")}addPointerInTextLayer(t,e){let{id:i}=t;if(!i)return null;if(!this.#t)return this.#n.set(t,e),null;e&&this.removePointerInTextLayer(t);let n=this.#e;if(!n||n.length===0)return null;let s=Uo(n,c=>r.#s(t,c)<0),a=Math.max(0,s-1),o=n[a];this.#r(i,o),this.#i.set(i,a);let l=o.parentNode;return l?.classList.contains("markedContent")?l.id:null}moveElementInDOM(t,e,i,n){let s=this.addPointerInTextLayer(i,n);if(!t.hasChildNodes())return t.append(e),s;let a=Array.from(t.childNodes).filter(c=>c!==e);if(a.length===0)return s;let o=i||e,l=Uo(a,c=>r.#s(o,c)<0);return l===0?a[0].before(e):a[l-1].after(e),s}},Tf=class{#t=null;constructor({findController:t,eventBus:e,pageIndex:i}){this.findController=t,this.matches=[],this.eventBus=e,this.pageIdx=i,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(t,e){this.textDivs=t,this.textContentItemsStr=e}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this.#t||(this.#t=new AbortController,this.eventBus._on("updatetextlayermatches",t=>{(t.pageIndex===this.pageIdx||t.pageIndex===-1)&&this._updateMatches()},{signal:this.#t.signal})),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this.#t?.abort(),this.#t=null,this._updateMatches(!0))}_convertMatches(t,e){if(!t)return[];let{textContentItemsStr:i}=this,n=0,s=0,a=i.length-1,o=[];for(let l=0,c=t.length;l<c;l++){let u=t[l];for(;n!==a&&u>=s+i[n].length;)s+=i[n].length,n++;n===i.length&&console.error("Could not find a matching mapping");let d={begin:{divIdx:n,offset:u-s}};for(u+=e[l];n!==a&&u>s+i[n].length;)s+=i[n].length,n++;d.end={divIdx:n,offset:u-s},o.push(d)}return o}_renderMatches(t){if(t.length===0)return;let{findController:e,pageIdx:i}=this,{textContentItemsStr:n,textDivs:s}=this,a=i===e.selected.pageIdx,o=e.selected.matchIdx,l=e.state.highlightAll,c=null,u={divIdx:-1,offset:void 0};function d(_,A){let T=_.divIdx;return s[T].textContent="",g(T,0,_.offset,A)}function g(_,A,T,R){let z=s[_];if(z.nodeType===Node.TEXT_NODE){let F=document.createElement("span");z.before(F),F.append(z),s[_]=F,z=F}let Y=n[_].substring(A,T),U=document.createTextNode(Y);if(R){let F=document.createElement("span");return F.className=`${R} appended`,F.append(U),z.append(F),R.includes("selected")?F.offsetLeft:0}return z.append(U),0}let p=o,v=p+1;if(l)p=0,v=t.length;else if(!a)return;let y=-1,x=-1;for(let _=p;_<v;_++){let A=t[_],T=A.begin;if(T.divIdx===y&&T.offset===x)continue;y=T.divIdx,x=T.offset;let R=A.end,z=a&&_===o,Y=z?" selected":"",U=0;if(!c||T.divIdx!==c.divIdx?(c!==null&&g(c.divIdx,c.offset,u.offset),d(T)):g(c.divIdx,c.offset,T.offset),T.divIdx===R.divIdx)U=g(T.divIdx,T.offset,R.offset,"highlight"+Y);else{U=g(T.divIdx,T.offset,u.offset,"highlight begin"+Y);for(let F=T.divIdx+1,I=R.divIdx;F<I;F++)s[F].className="highlight middle"+Y;d(R,"highlight end"+Y)}c=R,z&&e.scrollMatchIntoView({element:s[T.divIdx],selectedLeft:U,pageIndex:i,matchIndex:o})}c&&g(c.divIdx,c.offset,u.offset)}_updateMatches(t=!1){if(!this.enabled&&!t)return;let{findController:e,matches:i,pageIdx:n}=this,{textContentItemsStr:s,textDivs:a}=this,o=-1;for(let u of i){let d=Math.max(o,u.begin.divIdx);for(let g=d,p=u.end.divIdx;g<=p;g++){let v=a[g];v.textContent=s[g],v.className=""}o=u.end.divIdx+1}if(!e?.highlightMatches||t)return;let l=e.pageMatches[n]||null,c=e.pageMatchesLength[n]||null;this.matches=this._convertMatches(l,c),this._renderMatches(this.matches)}},rh=class r{#t=!1;#e=null;#i=!1;#n=null;static#s=new Map;static#r=null;constructor({pdfPage:t,highlighter:e=null,accessibilityManager:i=null,enablePermissions:n=!1,onAppend:s=null}){this.pdfPage=t,this.highlighter=e,this.accessibilityManager=i,this.#t=n===!0,this.#e=s,this.div=document.createElement("div"),this.div.tabIndex=0,this.div.className="textLayer"}render(t,e=null){return dt(this,null,function*(){if(this.#i&&this.#n){this.#n.update({viewport:t,onBefore:this.hide.bind(this)}),this.show();return}this.cancel(),this.#n=new zb({textContentSource:this.pdfPage.streamTextContent(e||{includeMarkedContent:!0,disableNormalization:!0}),container:this.div,viewport:t});let{textDivs:i,textContentItemsStr:n}=this.#n;this.highlighter?.setTextMapping(i,n),this.accessibilityManager?.setTextMapping(i),yield this.#n.render(),this.#i=!0;let s=document.createElement("div");s.className="endOfContent",this.div.append(s),this.#l(s),this.#e?.(this.div),this.highlighter?.enable(),this.accessibilityManager?.enable()})}hide(){!this.div.hidden&&this.#i&&(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.#i&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.#n?.cancel(),this.#n=null,this.highlighter?.disable(),this.accessibilityManager?.disable(),r.#c(this.div)}#l(t){let{div:e}=this;e.addEventListener("mousedown",()=>{e.classList.add("selecting")}),e.addEventListener("copy",i=>{if(!this.#t){let n=document.getSelection();i.clipboardData.setData("text/plain",zo(Db(n.toString())))}i.preventDefault(),i.stopPropagation()}),r.#s.set(e,t),r.#h()}static#c(t){this.#s.delete(t),this.#s.size===0&&(this.#r?.abort(),this.#r=null)}static#h(){if(this.#r)return;this.#r=new AbortController;let{signal:t}=this.#r,e=(a,o)=>{o.append(a),a.style.width="",a.style.height="",o.classList.remove("selecting")},i=!1;document.addEventListener("pointerdown",()=>{i=!0},{signal:t}),document.addEventListener("pointerup",()=>{i=!1,this.#s.forEach(e)},{signal:t}),window.addEventListener("blur",()=>{i=!1,this.#s.forEach(e)},{signal:t}),document.addEventListener("keyup",()=>{i||this.#s.forEach(e)},{signal:t});var n,s;document.addEventListener("selectionchange",()=>{let a=document.getSelection();if(a.rangeCount===0){this.#s.forEach(e);return}let o=new Set;for(let p=0;p<a.rangeCount;p++){let v=a.getRangeAt(p);for(let y of this.#s.keys())!o.has(y)&&v.intersectsNode(y)&&o.add(y)}for(let[p,v]of this.#s)o.has(p)?p.classList.add("selecting"):e(v,p);if(n??=getComputedStyle(this.#s.values().next().value).getPropertyValue("-moz-user-select")==="none",n)return;let l=a.getRangeAt(0),c=s&&(l.compareBoundaryPoints(Range.END_TO_END,s)===0||l.compareBoundaryPoints(Range.START_TO_END,s)===0),u=c?l.startContainer:l.endContainer;u.nodeType===Node.TEXT_NODE&&(u=u.parentNode);let d=u.parentElement?.closest(".textLayer"),g=this.#s.get(d);g&&(g.style.width=d.style.width,g.style.height=d.style.height,u.parentElement.insertBefore(g,c?u:u.nextSibling)),s=l.cloneRange()},{signal:t})}},ah=class{constructor({pdfPage:t,annotationStorage:e=null,linkService:i,xfaHtml:n=null}){this.pdfPage=t,this.annotationStorage=e,this.linkService=i,this.xfaHtml=n,this.div=null,this._cancelled=!1}render(t,e="display"){return dt(this,null,function*(){if(e==="print"){let s={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div=document.createElement("div"),s.div=this.div,af.render(s)}let i=yield this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};let n={viewport:t.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:e};return this.div?af.update(n):(this.div=document.createElement("div"),n.div=this.div,af.render(n))})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}},Tv={annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new Ho}},Ov=new Map([["canvasWrapper",0],["textLayer",1],["annotationLayer",2],["annotationEditorLayer",3],["xfaLayer",3]]),oh=class{#t=Cs.ENABLE_FORMS;#e=!1;#i=!1;#n=!1;#s=null;#r=null;#l=null;#c=1;#h=1;#o=null;#u=Je.INITIAL;#a=Qn.ENABLE;#d={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#p=new WeakMap;#f=[null,null,null,null];constructor(t){let e=t.container,i=t.defaultViewport;this.id=t.id,this.renderingId="page"+this.id,this.#s=t.layerProperties||Tv,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=t.scale||N0,this.viewport=i,this.pdfPageRotate=i.rotation,this._optionalContentConfigPromise=t.optionalContentConfigPromise||null,this.#a=t.textLayerMode??Qn.ENABLE,this.#t=t.annotationMode??Cs.ENABLE_FORMS,this.imageResourcesPath=t.imageResourcesPath||"",this.maxCanvasPixels=t.maxCanvasPixels??Lf.get("maxCanvasPixels"),this.pageColors=t.pageColors||null,this.#e=t.enableHWA||!1,this.eventBus=t.eventBus,this.renderingQueue=t.renderingQueue,this.l10n=t.l10n,this.l10n||=new Aa,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=e,this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null,this.drawLayer=null;let n=document.createElement("div");if(n.className="page",n.setAttribute("data-page-number",this.id),n.setAttribute("role","region"),n.setAttribute("data-l10n-id","pdfjs-page-landmark"),n.setAttribute("data-l10n-args",JSON.stringify({page:this.id})),this.div=n,this.#b(),e?.append(n),this._isStandalone){e?.style.setProperty("--scale-factor",this.scale*As.PDF_TO_CSS_UNITS),this.pageColors?.background&&e?.style.setProperty("--page-bg-color",this.pageColors.background);let{optionalContentConfigPromise:s}=t;s&&s.then(a=>{s===this._optionalContentConfigPromise&&(this.#d.initialOptionalContent=a.hasInitialVisibility)}),t.l10n||this.l10n.translate(this.div)}}#g(t,e){let i=Ov.get(e),n=this.#f[i];if(this.#f[i]=t,n){n.replaceWith(t);return}for(let s=i-1;s>=0;s--){let a=this.#f[s];if(a){a.after(t);return}}this.div.prepend(t)}get renderingState(){return this.#u}set renderingState(t){if(t!==this.#u)switch(this.#u=t,this.#r&&(clearTimeout(this.#r),this.#r=null),t){case Je.PAUSED:this.div.classList.remove("loading");break;case Je.RUNNING:this.div.classList.add("loadingIcon"),this.#r=setTimeout(()=>{this.div.classList.add("loading"),this.#r=null},0);break;case Je.INITIAL:case Je.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#b(){let{viewport:t}=this;if(this.pdfPage){if(this.#l===t.rotation)return;this.#l=t.rotation}Bb(this.div,t,!0,!1)}setPdfPage(t){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&(this._container?.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),this._container?.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","Highlight"))),this.pdfPage=t,this.pdfPageRotate=t.rotate;let e=(this.rotation+this.pdfPageRotate)%360;this.viewport=t.getViewport({scale:this.scale*As.PDF_TO_CSS_UNITS,rotation:e}),this.#b(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}hasEditableAnnotations(){return!!this.annotationLayer?.hasEditableAnnotations()}get _textHighlighter(){return Zc(this,"_textHighlighter",new Tf({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#s.findController}))}#m(t,e){this.eventBus.dispatch(t,{source:this,pageNumber:this.id,error:e})}#v(){return dt(this,null,function*(){let t=null;try{yield this.annotationLayer.render(this.viewport,{structTreeLayer:this.structTreeLayer},"display")}catch(e){console.error(`#renderAnnotationLayer: "${e}".`),t=e}finally{this.#m("annotationlayerrendered",t)}})}#w(){return dt(this,null,function*(){let t=null;try{yield this.annotationEditorLayer.render(this.viewport,"display")}catch(e){console.error(`#renderAnnotationEditorLayer: "${e}".`),t=e}finally{this.#m("annotationeditorlayerrendered",t)}})}#A(){return dt(this,null,function*(){try{yield this.drawLayer.render("display")}catch(t){console.error(`#renderDrawLayer: "${t}".`)}})}#_(){return dt(this,null,function*(){let t=null;try{let e=yield this.xfaLayer.render(this.viewport,"display");e?.textDivs&&this._textHighlighter&&this.#E(e.textDivs)}catch(e){console.error(`#renderXfaLayer: "${e}".`),t=e}finally{this.xfaLayer?.div&&(this.l10n.pause(),this.#g(this.xfaLayer.div,"xfaLayer"),this.l10n.resume()),this.#m("xfalayerrendered",t)}})}#x(){return dt(this,null,function*(){if(!this.textLayer)return;let t=null;try{yield this.textLayer.render(this.viewport)}catch(e){if(e instanceof Mb)return;console.error(`#renderTextLayer: "${e}".`),t=e}this.#m("textlayerrendered",t),this.#k()})}#k(){return dt(this,null,function*(){if(!this.textLayer)return;let t=yield this.structTreeLayer?.render();t&&(this.l10n.pause(),this.structTreeLayer?.addElementsToTextLayer(),this.canvas&&t.parentNode!==this.canvas&&this.canvas.append(t),this.l10n.resume()),this.structTreeLayer?.show()})}#E(t){return dt(this,null,function*(){let e=yield this.pdfPage.getTextContent(),i=[];for(let n of e.items)i.push(n.str);this._textHighlighter.setTextMapping(t,i),this._textHighlighter.enable()})}_resetZoomLayer(t=!1){if(!this.zoomLayer)return;let e=this.zoomLayer.firstChild;this.#p.delete(e),e.width=0,e.height=0,t&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:t=!1,keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:i=!1,keepXfaLayer:n=!1,keepTextLayer:s=!1}={}){this.cancelRendering({keepAnnotationLayer:e,keepAnnotationEditorLayer:i,keepXfaLayer:n,keepTextLayer:s}),this.renderingState=Je.INITIAL;let a=this.div,o=a.childNodes,l=t&&this.zoomLayer||null,c=e&&this.annotationLayer?.div||null,u=i&&this.annotationEditorLayer?.div||null,d=n&&this.xfaLayer?.div||null,g=s&&this.textLayer?.div||null;for(let p=o.length-1;p>=0;p--){let v=o[p];switch(v){case l:case c:case u:case d:case g:continue}v.remove();let y=this.#f.indexOf(v);y>=0&&(this.#f[y]=null)}a.removeAttribute("data-loaded"),c&&this.annotationLayer.hide(),u&&this.annotationEditorLayer.hide(),d&&this.xfaLayer.hide(),g&&this.textLayer.hide(),this.structTreeLayer?.hide(),l||(this.canvas&&(this.#p.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}toggleEditingMode(t){this.hasEditableAnnotations()&&(this.#n=t,this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0}))}update({scale:t=0,rotation:e=null,optionalContentConfigPromise:i=null,drawingDelay:n=-1}){this.scale=t||this.scale,typeof e=="number"&&(this.rotation=e),i instanceof Promise&&(this._optionalContentConfigPromise=i,i.then(a=>{i===this._optionalContentConfigPromise&&(this.#d.initialOptionalContent=a.hasInitialVisibility)})),this.#d.directDrawing=!0;let s=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*As.PDF_TO_CSS_UNITS,rotation:s}),this.#b(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let a=!1;if(this.#i){if(this.maxCanvasPixels===0)a=!0;else if(this.maxCanvasPixels>0){let{width:l,height:c}=this.viewport,{sx:u,sy:d}=this.outputScale;a=(Math.floor(l)*u|0)*(Math.floor(c)*d|0)>this.maxCanvasPixels}}let o=n>=0&&n<1e3;if(o||a){if(o&&!a&&this.renderingState!==Je.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:n}),this.renderingState=Je.FINISHED,this.#d.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!o,hideTextLayer:o}),o)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#o});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:t=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1,keepTextLayer:n=!1,cancelExtraDelay:s=0}={}){this.renderTask&&(this.renderTask.cancel(s),this.renderTask=null),this.resume=null,this.textLayer&&(!n||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!t||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationEditorLayer&&(!e||!this.annotationEditorLayer.div)&&(this.drawLayer&&(this.drawLayer.cancel(),this.drawLayer=null),this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!i||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:t,redrawAnnotationLayer:e=!1,redrawAnnotationEditorLayer:i=!1,redrawXfaLayer:n=!1,redrawTextLayer:s=!1,hideTextLayer:a=!1}){if(!t.hasAttribute("zooming")){t.setAttribute("zooming",!0);let{style:l}=t;l.width=l.height=""}let o=this.#p.get(t);if(this.viewport!==o){let l=this.viewport.rotation-o.rotation,c=Math.abs(l),u=1,d=1;if(c===90||c===270){let{width:g,height:p}=this.viewport;u=p/g,d=g/p}t.style.transform=`rotate(${l}deg) scale(${u}, ${d})`}e&&this.annotationLayer&&this.#v(),i&&this.annotationEditorLayer&&(this.drawLayer&&this.#A(),this.#w()),n&&this.xfaLayer&&this.#_(),this.textLayer&&(a?(this.textLayer.hide(),this.structTreeLayer?.hide()):s&&this.#x())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(t,e){return this.viewport.convertToPdfPoint(t,e)}#C(t,e=null){return dt(this,null,function*(){if(t===this.renderTask&&(this.renderTask=null),e instanceof ff){this.#o=null;return}if(this.#o=e,this.renderingState=Je.FINISHED,this._resetZoomLayer(!0),this.#d.regularAnnotations=!t.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#o}),e)throw e})}draw(){return dt(this,null,function*(){this.renderingState!==Je.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());let{div:t,l10n:e,pageColors:i,pdfPage:n,viewport:s}=this;if(!n)throw this.renderingState=Je.FINISHED,new Error("pdfPage is not loaded");this.renderingState=Je.RUNNING;let a=document.createElement("div");if(a.classList.add("canvasWrapper"),this.#g(a,"canvasWrapper"),!this.textLayer&&this.#a!==Qn.DISABLE&&!n.isPureXfa&&(this._accessibilityManager||=new kf,this.textLayer=new rh({pdfPage:n,highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,enablePermissions:this.#a===Qn.ENABLE_PERMISSIONS,onAppend:I=>{this.l10n.pause(),this.#g(I,"textLayer"),this.l10n.resume()}})),!this.annotationLayer&&this.#t!==Cs.DISABLE){let{annotationStorage:I,annotationEditorUIManager:W,downloadManager:S,enableScripting:N,fieldObjectsPromise:G,hasJSActionsPromise:H,linkService:at}=this.#s;this._annotationCanvasMap||=new Map,this.annotationLayer=new th({pdfPage:n,annotationStorage:I,imageResourcesPath:this.imageResourcesPath,renderForms:this.#t===Cs.ENABLE_FORMS,linkService:at,downloadManager:S,enableScripting:N,hasJSActionsPromise:H,fieldObjectsPromise:G,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager,annotationEditorUIManager:W,onAppend:rt=>{this.#g(rt,"annotationLayer")}})}let o=I=>{if(g?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=Je.PAUSED,this.resume=()=>{this.renderingState=Je.RUNNING,I()};return}I()},{width:l,height:c}=s,u=document.createElement("canvas");u.setAttribute("role","presentation"),u.hidden=!0;let d=!!(i?.background&&i?.foreground),g=I=>{(!d||I)&&(u.hidden=!1,g=null)};a.append(u),this.canvas=u;let p=u.getContext("2d",{alpha:!1,willReadFrequently:!this.#e}),v=this.outputScale=new jb;if(this.maxCanvasPixels===0){let I=1/this.scale;v.sx*=I,v.sy*=I,this.#i=!0}else if(this.maxCanvasPixels>0){let I=l*c,W=Math.sqrt(this.maxCanvasPixels/I);v.sx>W||v.sy>W?(v.sx=W,v.sy=W,this.#i=!0):this.#i=!1}let y=s0(v.sx),x=s0(v.sy),_=u.width=Wc(Gc(l*v.sx),y[0]),A=u.height=Wc(Gc(c*v.sy),x[0]),T=Wc(Gc(l),y[1]),R=Wc(Gc(c),x[1]);v.sx=_/T,v.sy=A/R,this.#c!==y[1]&&(t.style.setProperty("--scale-round-x",`${y[1]}px`),this.#c=y[1]),this.#h!==x[1]&&(t.style.setProperty("--scale-round-y",`${x[1]}px`),this.#h=x[1]),this.#p.set(u,s);let z=v.scaled?[v.sx,0,0,v.sy,0,0]:null,Y={canvasContext:p,transform:z,viewport:s,annotationMode:this.#t,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:i,isEditing:this.#n},U=this.renderTask=n.render(Y);U.onContinue=o;let F=U.promise.then(()=>dt(this,null,function*(){g?.(!0),yield this.#C(U),this.structTreeLayer||=new sh(n,s.rawDims),this.#x(),this.annotationLayer&&(yield this.#v());let{annotationEditorUIManager:I}=this.#s;I&&(this.drawLayer||=new Mf({pageIndex:this.id}),yield this.#A(),this.drawLayer.setParent(a),this.annotationEditorLayer||=new Sf({uiManager:I,pdfPage:n,l10n:e,structTreeLayer:this.structTreeLayer,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer,textLayer:this.textLayer,drawLayer:this.drawLayer.getDrawLayer(),onAppend:W=>{this.#g(W,"annotationEditorLayer")}}),this.#w())}),I=>(I instanceof ff||g?.(!0),this.#C(U,I)));if(n.isPureXfa){if(!this.xfaLayer){let{annotationStorage:I,linkService:W}=this.#s;this.xfaLayer=new ah({pdfPage:n,annotationStorage:I,linkService:W})}this.#_()}return t.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),F})}setPageLabel(t){this.pageLabel=typeof t=="string"?t:null,this.div.setAttribute("data-l10n-args",JSON.stringify({page:this.pageLabel??this.id})),this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){let{directDrawing:t,initialOptionalContent:e,regularAnnotations:i}=this.#d;return t&&e&&i?this.canvas:null}};function Nv(r){return dt(this,null,function*(){let t="",e=t.split("#",1)[0],{info:i,metadata:n,contentDispositionFilename:s,contentLength:a}=yield r.getMetadata();if(!a){let{length:o}=yield r.getDownloadInfo();a=o}return mi(pe({},i),{baseURL:e,filesize:a,filename:s||Rb(t),metadata:n?.getRaw(),authors:n?.get("dc:creator"),numPages:r.numPages,URL:t})})}var Of=class{constructor(t){this._ready=new Promise((e,i)=>{import(t).then(s=>{e(s.QuickJSSandbox())}).catch(i)})}createSandbox(t){return dt(this,null,function*(){(yield this._ready).create(t)})}dispatchEventInSandbox(t){return dt(this,null,function*(){let e=yield this._ready;setTimeout(()=>e.dispatchEvent(t),0)})}destroySandbox(){return dt(this,null,function*(){(yield this._ready).nukeSandbox()})}},Nf=class{#t=null;#e=null;#i=null;#n=null;#s=null;#r=null;#l=null;#c=null;#h=!1;#o=null;#u=null;constructor({eventBus:t,externalServices:e=null,docProperties:i=null}){this.#s=t,this.#r=e,this.#i=i}setViewer(t){this.#c=t}setDocument(t){return dt(this,null,function*(){if(this.#l&&(yield this.#g()),this.#l=t,!t)return;let[e,i,n]=yield Promise.all([t.getFieldObjects(),t.getCalculationOrderIds(),t.getJSActions()]);if(!e&&!n){yield this.#g();return}if(t!==this.#l)return;try{this.#o=this.#f()}catch(o){console.error(`setDocument: "${o.message}".`),yield this.#g();return}let s=this.#s;this.#n=new AbortController;let{signal:a}=this.#n;s._on("updatefromsandbox",o=>{o?.source===window&&this.#a(o.detail)},{signal:a}),s._on("dispatcheventinsandbox",o=>{this.#o?.dispatchEventInSandbox(o.detail)},{signal:a}),s._on("pagechanging",({pageNumber:o,previous:l})=>{o!==l&&(this.#p(l),this.#d(o))},{signal:a}),s._on("pagerendered",({pageNumber:o})=>{this._pageOpenPending.has(o)&&o===this.#c.currentPageNumber&&this.#d(o)},{signal:a}),s._on("pagesdestroy",()=>dt(this,null,function*(){yield this.#p(this.#c.currentPageNumber),yield this.#o?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#t?.resolve()}),{signal:a});try{let o=yield this.#i(t);if(t!==this.#l)return;yield this.#o.createSandbox({objects:e,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:mi(pe({},o),{actions:n})}),s.dispatch("sandboxcreated",{source:this})}catch(o){console.error(`setDocument: "${o.message}".`),yield this.#g();return}yield this.#o?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield this.#d(this.#c.currentPageNumber,!0),Promise.resolve().then(()=>{t===this.#l&&(this.#h=!0)})})}dispatchWillSave(){return dt(this,null,function*(){return this.#o?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})}dispatchDidSave(){return dt(this,null,function*(){return this.#o?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})}dispatchWillPrint(){return dt(this,null,function*(){if(this.#o){yield this.#u?.promise,this.#u=Promise.withResolvers();try{yield this.#o.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(t){throw this.#u.resolve(),this.#u=null,t}yield this.#u.promise}})}dispatchDidPrint(){return dt(this,null,function*(){return this.#o?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})}get destroyPromise(){return this.#e?.promise||null}get ready(){return this.#h}get _pageOpenPending(){return Zc(this,"_pageOpenPending",new Set)}get _visitedPages(){return Zc(this,"_visitedPages",new Map)}#a(t){return dt(this,null,function*(){let e=this.#c,i=e.isInPresentationMode||e.isChangingPresentationMode,{id:n,siblings:s,command:a,value:o}=t;if(!n){switch(a){case"clear":console.clear();break;case"error":console.error(o);break;case"layout":if(!i){let c=ab(o);e.spreadMode=c.spreadMode}break;case"page-num":e.currentPageNumber=o+1;break;case"print":yield e.pagesPromise,this.#s.dispatch("print",{source:this});break;case"println":console.log(o);break;case"zoom":i||(e.currentScaleValue=o);break;case"SaveAs":this.#s.dispatch("download",{source:this});break;case"FirstPage":e.currentPageNumber=1;break;case"LastPage":e.currentPageNumber=e.pagesCount;break;case"NextPage":e.nextPage();break;case"PrevPage":e.previousPage();break;case"ZoomViewIn":i||e.increaseScale();break;case"ZoomViewOut":i||e.decreaseScale();break;case"WillPrintFinished":this.#u?.resolve(),this.#u=null;break}return}if(i&&t.focus)return;delete t.id,delete t.siblings;let l=s?[n,...s]:[n];for(let c of l){let u=document.querySelector(`[data-element-id="${c}"]`);u?u.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:t})):this.#l?.annotationStorage.setValue(c,t)}})}#d(t,e=!1){return dt(this,null,function*(){let i=this.#l,n=this._visitedPages;if(e&&(this.#t=Promise.withResolvers()),!this.#t)return;let s=this.#c.getPageView(t-1);if(s?.renderingState!==Je.FINISHED){this._pageOpenPending.add(t);return}this._pageOpenPending.delete(t);let a=dt(this,null,function*(){let o=yield n.has(t)?null:s.pdfPage?.getJSActions();i===this.#l&&(yield this.#o?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:t,actions:o}))});n.set(t,a)})}#p(t){return dt(this,null,function*(){let e=this.#l,i=this._visitedPages;if(!this.#t||this._pageOpenPending.has(t))return;let n=i.get(t);n&&(i.set(t,null),yield n,e===this.#l&&(yield this.#o?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:t})))})}#f(){if(this.#e=Promise.withResolvers(),this.#o)throw new Error("#initScripting: Scripting already exists.");return this.#r.createScripting()}#g(){return dt(this,null,function*(){if(!this.#o){this.#l=null,this.#e?.resolve();return}this.#t&&(yield Promise.race([this.#t.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(()=>{}),this.#t=null),this.#l=null;try{yield this.#o.destroySandbox()}catch{}this.#u?.reject(new Error("Scripting destroyed.")),this.#u=null,this.#n?.abort(),this.#n=null,this._pageOpenPending.clear(),this._visitedPages.clear(),this.#o=null,this.#h=!1,this.#e?.resolve()})}},If=class extends Nf{constructor(t){t.externalServices||window.addEventListener("updatefromsandbox",e=>{t.eventBus.dispatch("updatefromsandbox",{source:window,detail:e.detail})}),t.externalServices||={createScripting:()=>new Of(t.sandboxBundleSrc)},t.docProperties||=e=>Nv(e),super(t)}},Iv=3e4,Rf=class{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(t)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),Iv)))}getHighestPriority(t,e,i,n=!1){let s=t.views,a=s.length;if(a===0)return null;for(let d=0;d<a;d++){let g=s[d].view;if(!this.isViewFinished(g))return g}let o=t.first.id,l=t.last.id;if(l-o+1>a){let d=t.ids;for(let g=1,p=l-o;g<p;g++){let v=i?o+g:l-g;if(d.has(v))continue;let y=e[v-1];if(!this.isViewFinished(y))return y}}let c=i?l:o-2,u=e[c];return u&&!this.isViewFinished(u)||n&&(c+=i?1:-1,u=e[c],u&&!this.isViewFinished(u))?u:null}isViewFinished(t){return t.renderingState===Je.FINISHED}renderView(t){switch(t.renderingState){case Je.FINISHED:return!1;case Je.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case Je.RUNNING:this.highestPriorityPage=t.renderingId;break;case Je.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(e=>{e instanceof ff||console.error(`renderView: "${e}"`)});break}return!0}},T0=10,Kc={FORCE_SCROLL_MODE_PAGE:1e4,FORCE_LAZY_PAGE_INIT:5e3,PAUSE_EAGER_PAGE_INIT:250};function O0(r){return Object.values(ln).includes(r)&&r!==ln.DISABLE}var Ff=class{#t=new Set;#e=0;constructor(t){this.#e=t}push(t){let e=this.#t;e.has(t)&&e.delete(t),e.add(t),e.size>this.#e&&this.#i()}resize(t,e=null){this.#e=t;let i=this.#t;if(e){let n=i.size,s=1;for(let a of i)if(e.has(a.id)&&(i.delete(a),i.add(a)),++s>n)break}for(;i.size>this.#e;)this.#i()}has(t){return this.#t.has(t)}[Symbol.iterator](){return this.#t.keys()}#i(){let t=this.#t.keys().next().value;t?.destroy(),this.#t.delete(t)}},lh=class{#t=null;#e=null;#i=null;#n=ln.NONE;#s=null;#r=Cs.ENABLE_FORMS;#l=null;#c=!1;#h=!1;#o=!1;#u=!1;#a=!1;#d=null;#p=null;#f=null;#g=null;#b=!1;#m=null;#v=!1;#w=0;#A=new ResizeObserver(this.#j.bind(this));#_=null;#x=null;#k=Qn.ENABLE;constructor(t){let e="4.8.69";if(f0!==e)throw new Error(`The API version "${f0}" does not match the Viewer version "${e}".`);if(this.container=t.container,this.viewer=t.viewer||t.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#A.observe(this.container),this.eventBus=t.eventBus,this.linkService=t.linkService||new Ho,this.downloadManager=t.downloadManager||null,this.findController=t.findController||null,this.#e=t.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=n=>this._getVisiblePages().ids.has(n)),this._scriptingManager=t.scriptingManager||null,this.#k=t.textLayerMode??Qn.ENABLE,this.#r=t.annotationMode??Cs.ENABLE_FORMS,this.#n=t.annotationEditorMode??ln.NONE,this.#i=t.annotationEditorHighlightColors||null,this.#h=t.enableHighlightFloatingButton===!0,this.#u=t.enableUpdatedAddImage===!0,this.#a=t.enableNewAltTextWhenAddingImage===!0,this.imageResourcesPath=t.imageResourcesPath||"",this.enablePrintAutoRotate=t.enablePrintAutoRotate||!1,this.removePageBorders=t.removePageBorders||!1,this.maxCanvasPixels=t.maxCanvasPixels,this.l10n=t.l10n,this.l10n||=new Aa,this.#o=t.enablePermissions||!1,this.pageColors=t.pageColors||null,this.#p=t.mlManager||null,this.#c=t.enableHWA||!1,this.defaultRenderingQueue=!t.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new Rf,this.renderingQueue.setViewer(this)):this.renderingQueue=t.renderingQueue;let{abortSignal:i}=t;i?.addEventListener("abort",()=>{this.#A.disconnect(),this.#A=null},{once:!0}),this.scroll=Z2(this.container,this._scrollUpdate.bind(this),i),this.presentationModeState=wa.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#F(),this.eventBus._on("thumbnailrendered",({pageNumber:n,pdfPage:s})=>{let a=this._pages[n-1];this.#t.has(a)||s?.cleanup()}),t.l10n||this.l10n.translate(this.container)}get pagesCount(){return this._pages.length}getPageView(t){return this._pages[t]}getCachedPageViews(){return new Set(this.#t)}get pageViewsReady(){return this._pages.every(t=>t?.pdfPage)}get renderForms(){return this.#r===Cs.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(t){if(!Number.isInteger(t))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(t,!0)||console.error(`currentPageNumber: "${t}" is not a valid page.`))}_setCurrentPageNumber(t,e=!1){if(this._currentPageNumber===t)return e&&this.#O(),!0;if(!(0<t&&t<=this.pagesCount))return!1;let i=this._currentPageNumber;return this._currentPageNumber=t,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:t,pageLabel:this._pageLabels?.[t-1]??null,previous:i}),e&&this.#O(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(t){if(!this.pdfDocument)return;let e=t|0;if(this._pageLabels){let i=this._pageLabels.indexOf(t);i>=0&&(e=i+1)}this._setCurrentPageNumber(e,!0)||console.error(`currentPageLabel: "${t}" is not a valid page.`)}get currentScale(){return this._currentScale!==ef?this._currentScale:N0}set currentScale(t){if(isNaN(t))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#M(t,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(t){this.pdfDocument&&this.#M(t,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(t){if(!R0(t))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(t%=360,t<0&&(t+=360),this._pagesRotation===t))return;this._pagesRotation=t;let e=this._currentPageNumber;this.refresh(!0,{rotation:t}),this._currentScaleValue&&this.#M(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:t,pageNumber:e}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}get _layerProperties(){let t=this;return Zc(this,"_layerProperties",{get annotationEditorUIManager(){return t.#s},get annotationStorage(){return t.pdfDocument?.annotationStorage},get downloadManager(){return t.downloadManager},get enableScripting(){return!!t._scriptingManager},get fieldObjectsPromise(){return t.pdfDocument?.getFieldObjects()},get findController(){return t.findController},get hasJSActionsPromise(){return t.pdfDocument?.hasJSActions()},get linkService(){return t.linkService}})}#E(t){let e={annotationEditorMode:this.#n,annotationMode:this.#r,textLayerMode:this.#k};return t&&(!t.includes(Xc.COPY)&&this.#k===Qn.ENABLE&&(e.textLayerMode=Qn.ENABLE_PERMISSIONS),t.includes(Xc.MODIFY_CONTENTS)||(e.annotationEditorMode=ln.DISABLE),!t.includes(Xc.MODIFY_ANNOTATIONS)&&!t.includes(Xc.FILL_INTERACTIVE_FORMS)&&this.#r===Cs.ENABLE_FORMS&&(e.annotationMode=Cs.ENABLE)),e}#C(t){return dt(this,null,function*(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return;let e=Promise.withResolvers(),i=new AbortController;document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e.resolve()},{signal:typeof AbortSignal.any=="function"?AbortSignal.any([t,i.signal]):t}),yield Promise.race([this._onePageRenderedCapability.promise,e.promise]),i.abort()})}getAllText(){return dt(this,null,function*(){let t=[],e=[];for(let i=1,n=this.pdfDocument.numPages;i<=n;++i){if(this.#v)return null;e.length=0;let s=yield this.pdfDocument.getPage(i),{items:a}=yield s.getTextContent();for(let o of a)o.str&&e.push(o.str),o.hasEOL&&e.push(`
`);t.push(zo(e.join("")))}return t.join(`
`)})}#L(t,e){let i=document.getSelection(),{focusNode:n,anchorNode:s}=i;if(s&&n&&i.containsNode(this.#m)){if(this.#b||t===Qn.ENABLE_PERMISSIONS){e.preventDefault(),e.stopPropagation();return}this.#b=!0;let{classList:a}=this.viewer;a.add("copyAll");let o=new AbortController;window.addEventListener("keydown",l=>this.#v=l.key==="Escape",{signal:o.signal}),this.getAllText().then(l=>dt(this,null,function*(){l!==null&&(yield navigator.clipboard.writeText(l))})).catch(l=>{console.warn(`Something goes wrong when extracting the text: ${l.message}`)}).finally(()=>{this.#b=!1,this.#v=!1,o.abort(),a.remove("copyAll")}),e.preventDefault(),e.stopPropagation()}}setDocument(t){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#s?.destroy(),this.#s=null),this.pdfDocument=t,!t)return;let e=t.numPages,i=t.getPage(1),n=t.getOptionalContentConfig({intent:"display"}),s=this.#o?t.getPermissions():Promise.resolve(),{eventBus:a,pageColors:o,viewer:l}=this;this.#d=new AbortController;let{signal:c}=this.#d;if(e>Kc.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");let g=this._scrollMode=ve.PAGE;a.dispatch("scrollmodechanged",{source:this,mode:g})}this._pagesCapability.promise.then(()=>{a.dispatch("pagesloaded",{source:this,pagesCount:e})},()=>{});let u=g=>{let p=this._pages[g.pageNumber-1];p&&this.#t.push(p)};a._on("pagerender",u,{signal:c});let d=g=>{g.cssTransform||(this._onePageRenderedCapability.resolve({timestamp:g.timestamp}),a._off("pagerendered",d))};a._on("pagerendered",d,{signal:c}),Promise.all([i,s]).then(([g,p])=>{if(t!==this.pdfDocument)return;this._firstPageCapability.resolve(g),this._optionalContentConfigPromise=n;let{annotationEditorMode:v,annotationMode:y,textLayerMode:x}=this.#E(p);if(x!==Qn.DISABLE){let R=this.#m=document.createElement("div");R.id="hiddenCopyElement",l.before(R)}if(typeof AbortSignal.any=="function"&&v!==ln.DISABLE){let R=v;t.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):O0(R)?(this.#s=new Tb(this.container,l,this.#e,a,t,o,this.#i,this.#h,this.#u,this.#a,this.#p),a.dispatch("annotationeditoruimanager",{source:this,uiManager:this.#s}),R!==ln.NONE&&(R===ln.STAMP&&this.#p?.loadModel("altText"),this.#s.updateMode(R))):console.error(`Invalid AnnotationEditor mode: ${R}`)}let _=this._scrollMode===ve.PAGE?null:l,A=this.currentScale,T=g.getViewport({scale:A*As.PDF_TO_CSS_UNITS});l.style.setProperty("--scale-factor",T.scale),o?.background&&l.style.setProperty("--page-bg-color",o.background),(o?.foreground==="CanvasText"||o?.background==="Canvas")&&(l.style.setProperty("--hcm-highlight-filter",t.filterFactory.addHighlightHCMFilter("highlight","CanvasText","Canvas","HighlightText","Highlight")),l.style.setProperty("--hcm-highlight-selected-filter",t.filterFactory.addHighlightHCMFilter("highlight_selected","CanvasText","Canvas","HighlightText","ButtonText")));for(let R=1;R<=e;++R){let z=new oh({container:_,eventBus:a,id:R,scale:A,defaultViewport:T.clone(),optionalContentConfigPromise:n,renderingQueue:this.renderingQueue,textLayerMode:x,annotationMode:y,imageResourcesPath:this.imageResourcesPath,maxCanvasPixels:this.maxCanvasPixels,pageColors:o,l10n:this.l10n,layerProperties:this._layerProperties,enableHWA:this.#c});this._pages.push(z)}this._pages[0]?.setPdfPage(g),this._scrollMode===ve.PAGE?this.#S():this._spreadMode!==Ii.NONE&&this._updateSpreadMode(),this.#C(c).then(()=>dt(this,null,function*(){if(t!==this.pdfDocument)return;if(this.findController?.setDocument(t),this._scriptingManager?.setDocument(t),this.#m&&document.addEventListener("copy",this.#L.bind(this,x),{signal:c}),this.#s&&a.dispatch("annotationeditormodechanged",{source:this,mode:this.#n}),t.loadingParams.disableAutoFetch||e>Kc.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let R=e-1;if(R<=0){this._pagesCapability.resolve();return}for(let z=2;z<=e;++z){let Y=t.getPage(z).then(U=>{let F=this._pages[z-1];F.pdfPage||F.setPdfPage(U),--R===0&&this._pagesCapability.resolve()},U=>{console.error(`Unable to get page ${z} to initialize viewer`,U),--R===0&&this._pagesCapability.resolve()});z%Kc.PAUSE_EAGER_PAGE_INIT===0&&(yield Y)}})),a.dispatch("pagesinit",{source:this}),t.getMetadata().then(({info:R})=>{t===this.pdfDocument&&R.Language&&(l.lang=R.Language)}),this.defaultRenderingQueue&&this.update()}).catch(g=>{console.error("Unable to initialize viewer",g),this._pagesCapability.reject(g)})}setPageLabels(t){if(this.pdfDocument){t?Array.isArray(t)&&this.pdfDocument.numPages===t.length?this._pageLabels=t:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let e=0,i=this._pages.length;e<i;e++)this._pages[e].setPageLabel(this._pageLabels?.[e]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=ef,this._currentScaleValue=null,this._pageLabels=null,this.#t=new Ff(T0),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=Promise.withResolvers(),this._onePageRenderedCapability=Promise.withResolvers(),this._pagesCapability=Promise.withResolvers(),this._scrollMode=ve.VERTICAL,this._previousScrollMode=ve.UNKNOWN,this._spreadMode=Ii.NONE,this.#_={previousPageNumber:1,scrollDown:!0,pages:[]},this.#d?.abort(),this.#d=null,this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#m?.remove(),this.#m=null,this.#B()}#S(){if(this._scrollMode!==ve.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");let t=this._currentPageNumber,e=this.#_,i=this.viewer;if(i.textContent="",e.pages.length=0,this._spreadMode===Ii.NONE&&!this.isInPresentationMode){let n=this._pages[t-1];i.append(n.div),e.pages.push(n)}else{let n=new Set,s=this._spreadMode-1;s===-1?n.add(t-1):t%2!==s?(n.add(t-1),n.add(t)):(n.add(t-2),n.add(t-1));let a=document.createElement("div");if(a.className="spread",this.isInPresentationMode){let o=document.createElement("div");o.className="dummyPage",a.append(o)}for(let o of n){let l=this._pages[o];l&&(a.append(l.div),e.pages.push(l))}i.append(a)}e.scrollDown=t>=e.previousPageNumber,e.previousPageNumber=t}_scrollUpdate(){this.pagesCount!==0&&this.update()}#T(t,e=null){let{div:i,id:n}=t;if(this._currentPageNumber!==n&&this._setCurrentPageNumber(n),this._scrollMode===ve.PAGE&&(this.#S(),this.update()),!e&&!this.isInPresentationMode){let s=i.offsetLeft+i.clientLeft,a=s+i.clientWidth,{scrollLeft:o,clientWidth:l}=this.container;(this._scrollMode===ve.HORIZONTAL||s<o||a>o+l)&&(e={left:0,top:0})}I0(i,e),!this._currentScaleValue&&this._location&&(this._location=null)}#N(t){return t===this._currentScale||Math.abs(t-this._currentScale)<1e-15}#P(t,e,{noScroll:i=!1,preset:n=!1,drawingDelay:s=-1,origin:a=null}){if(this._currentScaleValue=e.toString(),this.#N(t)){n&&this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:e});return}this.viewer.style.setProperty("--scale-factor",t*As.PDF_TO_CSS_UNITS);let o=s>=0&&s<1e3;this.refresh(!0,{scale:t,drawingDelay:o?s:-1}),o&&(this.#x=setTimeout(()=>{this.#x=null,this.refresh()},s));let l=this._currentScale;if(this._currentScale=t,!i){let c=this._currentPageNumber,u;if(this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(c=this._location.pageNumber,u=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:c,destArray:u,allowNegativeOffset:!0}),Array.isArray(a)){let d=t/l-1,[g,p]=this.containerTopLeft;this.container.scrollLeft+=(a[0]-p)*d,this.container.scrollTop+=(a[1]-g)*d}}this.eventBus.dispatch("scalechanging",{source:this,scale:t,presetValue:n?e:void 0}),this.defaultRenderingQueue&&this.update()}get#y(){return this._spreadMode!==Ii.NONE&&this._scrollMode!==ve.HORIZONTAL?2:1}#M(t,e){let i=parseFloat(t);if(i>0)e.preset=!1,this.#P(i,t,e);else{let n=this._pages[this._currentPageNumber-1];if(!n)return;let s=e0,a=i0;this.isInPresentationMode?(s=a=4,this._spreadMode!==Ii.NONE&&(s*=2)):this.removePageBorders?s=a=0:this._scrollMode===ve.HORIZONTAL&&([s,a]=[a,s]);let o=(this.container.clientWidth-s)/n.width*n.scale/this.#y,l=(this.container.clientHeight-a)/n.height*n.scale;switch(t){case"page-actual":i=1;break;case"page-width":i=o;break;case"page-height":i=l;break;case"page-fit":i=Math.min(o,l);break;case"auto":let c=r0(n)?o:Math.min(l,o);i=Math.min(Q2,c);break;default:console.error(`#setScale: "${t}" is an unknown zoom value.`);return}e.preset=!0,this.#P(i,t,e)}}#O(){let t=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#M(this._currentScaleValue,{noScroll:!0}),this.#T(t)}pageLabelToPageNumber(t){if(!this._pageLabels)return null;let e=this._pageLabels.indexOf(t);return e<0?null:e+1}scrollPageIntoView({pageNumber:t,destArray:e=null,allowNegativeOffset:i=!1,ignoreDestinationZoom:n=!1}){if(!this.pdfDocument)return;let s=Number.isInteger(t)&&this._pages[t-1];if(!s){console.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!e){this._setCurrentPageNumber(t,!0);return}let a=0,o=0,l=0,c=0,u,d,g=s.rotation%180!==0,p=(g?s.height:s.width)/s.scale/As.PDF_TO_CSS_UNITS,v=(g?s.width:s.height)/s.scale/As.PDF_TO_CSS_UNITS,y=0;switch(e[1].name){case"XYZ":a=e[2],o=e[3],y=e[4],a=a!==null?a:0,o=o!==null?o:v;break;case"Fit":case"FitB":y="page-fit";break;case"FitH":case"FitBH":o=e[2],y="page-width",o===null&&this._location?(a=this._location.left,o=this._location.top):(typeof o!="number"||o<0)&&(o=v);break;case"FitV":case"FitBV":a=e[2],l=p,c=v,y="page-height";break;case"FitR":a=e[2],o=e[3],l=e[4]-a,c=e[5]-o;let T=e0,R=i0;this.removePageBorders&&(T=R=0),u=(this.container.clientWidth-T)/l/As.PDF_TO_CSS_UNITS,d=(this.container.clientHeight-R)/c/As.PDF_TO_CSS_UNITS,y=Math.min(Math.abs(u),Math.abs(d));break;default:console.error(`scrollPageIntoView: "${e[1].name}" is not a valid destination type.`);return}if(n||(y&&y!==this._currentScale?this.currentScaleValue=y:this._currentScale===ef&&(this.currentScaleValue=Y2)),y==="page-fit"&&!e[4]){this.#T(s);return}let x=[s.viewport.convertToViewportPoint(a,o),s.viewport.convertToViewportPoint(a+l,o+c)],_=Math.min(x[0][0],x[1][0]),A=Math.min(x[0][1],x[1][1]);i||(_=Math.max(_,0),A=Math.max(A,0)),this.#T(s,{left:_,top:A})}_updateLocation(t){let e=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===e?Math.round(e*1e4)/100:i,s=t.id,a=this._pages[s-1],o=this.container,l=a.getPagePoint(o.scrollLeft-t.x,o.scrollTop-t.y),c=Math.round(l[0]),u=Math.round(l[1]),d=`#page=${s}`;this.isInPresentationMode||(d+=`&zoom=${n},${c},${u}`),this._location={pageNumber:s,scale:n,top:u,left:c,rotation:this._pagesRotation,pdfOpenParams:d}}update(){let t=this._getVisiblePages(),e=t.views,i=e.length;if(i===0)return;let n=Math.max(T0,2*i+1);this.#t.resize(n,t.ids),this.renderingQueue.renderHighestPriority(t);let s=this._spreadMode===Ii.NONE&&(this._scrollMode===ve.PAGE||this._scrollMode===ve.VERTICAL),a=this._currentPageNumber,o=!1;for(let l of e){if(l.percent<100)break;if(l.id===a&&s){o=!0;break}}this._setCurrentPageNumber(o?a:e[0].id),this._updateLocation(t.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}#D(){let t=this._getVisiblePages(),e=[],{ids:i,views:n}=t;for(let s of n){let{view:a}=s;if(!a.hasEditableAnnotations()){i.delete(a.id);continue}e.push(s)}return e.length===0?null:(this.renderingQueue.renderHighestPriority({first:e[0],last:e.at(-1),views:e,ids:i}),i)}containsElement(t){return this.container.contains(t)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===wa.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===wa.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){let t=this._scrollMode===ve.PAGE?this.#_.pages:this._pages,e=this._scrollMode===ve.HORIZONTAL,i=e&&this._isContainerRtl;return eb({scrollEl:this.container,views:t,sortByVisibility:!0,horizontal:e,rtl:i})}cleanup(){for(let t of this._pages)t.renderingState!==Je.FINISHED&&t.reset()}_cancelRendering(){for(let t of this._pages)t.cancelRendering()}#U(t){return dt(this,null,function*(){if(t.pdfPage)return t.pdfPage;try{let e=yield this.pdfDocument.getPage(t.id);return t.pdfPage||t.setPdfPage(e),e}catch(e){return console.error("Unable to get page for page view",e),null}})}#z(t){if(t.first?.id===1)return!0;if(t.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case ve.PAGE:return this.#_.scrollDown;case ve.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(t){let e=t||this._getVisiblePages(),i=this.#z(e),n=this._spreadMode!==Ii.NONE&&this._scrollMode!==ve.HORIZONTAL,s=this.renderingQueue.getHighestPriority(e,this._pages,i,n);return s?(this.#U(s).then(()=>{this.renderingQueue.renderView(s)}),!0):!1}get hasEqualPageSizes(){let t=this._pages[0];for(let e=1,i=this._pages.length;e<i;++e){let n=this._pages[e];if(n.width!==t.width||n.height!==t.height)return!1}return!0}getPagesOverview(){let t;return this._pages.map(e=>{let i=e.pdfPage.getViewport({scale:1}),n=r0(i);if(t===void 0)t=n;else if(this.enablePrintAutoRotate&&n!==t)return{width:i.height,height:i.width,rotation:(i.rotation-90)%360};return{width:i.width,height:i.height,rotation:i.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig({intent:"display"})):Promise.resolve(null)}set optionalContentConfigPromise(t){if(!(t instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${t}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=t,this.refresh(!1,{optionalContentConfigPromise:t}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:t}))}get scrollMode(){return this._scrollMode}set scrollMode(t){if(this._scrollMode!==t){if(!ib(t))throw new Error(`Invalid scroll mode: ${t}`);this.pagesCount>Kc.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=t,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:t}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(t=null){let e=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",e===ve.HORIZONTAL),i.classList.toggle("scrollWrapped",e===ve.WRAPPED),!(!this.pdfDocument||!t)&&(e===ve.PAGE?this.#S():this._previousScrollMode===ve.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#M(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(t){if(this._spreadMode!==t){if(!nb(t))throw new Error(`Invalid spread mode: ${t}`);this._spreadMode=t,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:t}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(t=null){if(!this.pdfDocument)return;let e=this.viewer,i=this._pages;if(this._scrollMode===ve.PAGE)this.#S();else if(e.textContent="",this._spreadMode===Ii.NONE)for(let n of this._pages)e.append(n.div);else{let n=this._spreadMode-1,s=null;for(let a=0,o=i.length;a<o;++a)s===null?(s=document.createElement("div"),s.className="spread",e.append(s)):a%2===n&&(s=s.cloneNode(!1),e.append(s)),s.append(i[a].div)}t&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#M(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(t,!0),this.update())}_getPageAdvance(t,e=!1){switch(this._scrollMode){case ve.WRAPPED:{let{views:i}=this._getVisiblePages(),n=new Map;for(let{id:s,y:a,percent:o,widthPercent:l}of i){if(o===0||l<100)continue;let c=n.get(a);c||n.set(a,c||=[]),c.push(s)}for(let s of n.values()){let a=s.indexOf(t);if(a===-1)continue;let o=s.length;if(o===1)break;if(e)for(let l=a-1,c=0;l>=c;l--){let u=s[l],d=s[l+1]-1;if(u<d)return t-d}else for(let l=a+1,c=o;l<c;l++){let u=s[l],d=s[l-1]+1;if(u>d)return d-t}if(e){let l=s[0];if(l<t)return t-l+1}else{let l=s[o-1];if(l>t)return l-t+1}break}break}case ve.HORIZONTAL:break;case ve.PAGE:case ve.VERTICAL:{if(this._spreadMode===Ii.NONE)break;let i=this._spreadMode-1;if(e&&t%2!==i)break;if(!e&&t%2===i)break;let{views:n}=this._getVisiblePages(),s=e?t-1:t+1;for(let{id:a,percent:o,widthPercent:l}of n)if(a===s){if(o>0&&l===100)return 2;break}break}}return 1}nextPage(){let t=this._currentPageNumber,e=this.pagesCount;if(t>=e)return!1;let i=this._getPageAdvance(t,!1)||1;return this.currentPageNumber=Math.min(t+i,e),!0}previousPage(){let t=this._currentPageNumber;if(t<=1)return!1;let e=this._getPageAdvance(t,!0)||1;return this.currentPageNumber=Math.max(t-e,1),!0}updateScale({drawingDelay:t,scaleFactor:e=null,steps:i=null,origin:n}){if(i===null&&e===null)throw new Error("Invalid updateScale options: either `steps` or `scaleFactor` must be provided.");if(!this.pdfDocument)return;let s=this._currentScale;if(e>0&&e!==1)s=Math.round(s*e*100)/100;else if(i){let a=i>0?t0:1/t0,o=i>0?Math.ceil:Math.floor;i=Math.abs(i);do s=o((s*a).toFixed(2)*10)/10;while(--i>0)}s=Math.max(K2,Math.min(J2,s)),this.#M(s,{noScroll:!1,drawingDelay:t,origin:n})}increaseScale(t={}){this.updateScale(mi(pe({},t),{steps:t.steps??1}))}decreaseScale(t={}){this.updateScale(mi(pe({},t),{steps:-(t.steps??1)}))}#F(t=this.container.clientHeight){t!==this.#w&&(this.#w=t,sb.setProperty("--viewer-container-height",`${t}px`))}#j(t){for(let e of t)if(e.target===this.container){this.#F(Math.floor(e.borderBoxSize[0].blockSize)),this.#l=null;break}}get containerTopLeft(){return this.#l||=[this.container.offsetTop,this.container.offsetLeft]}#B(){this.#f?.abort(),this.#f=null,this.#g!==null&&(clearTimeout(this.#g),this.#g=null)}get annotationEditorMode(){return this.#s?this.#n:ln.DISABLE}set annotationEditorMode({mode:t,editId:e=null,isFromKeyboard:i=!1}){if(!this.#s)throw new Error("The AnnotationEditor is not enabled.");if(this.#n===t)return;if(!O0(t))throw new Error(`Invalid AnnotationEditor mode: ${t}`);if(!this.pdfDocument)return;t===ln.STAMP&&this.#p?.loadModel("altText");let{eventBus:n}=this,s=()=>{this.#B(),this.#n=t,this.#s.updateMode(t,e,i),n.dispatch("annotationeditormodechanged",{source:this,mode:t})};if(t===ln.NONE||this.#n===ln.NONE){let a=t!==ln.NONE;a||this.pdfDocument.annotationStorage.resetModifiedIds();for(let l of this._pages)l.toggleEditingMode(a);let o=this.#D();if(a&&o){this.#B(),this.#f=new AbortController;let l=AbortSignal.any([this.#d.signal,this.#f.signal]);n._on("pagerendered",({pageNumber:c})=>{o.delete(c),o.size===0&&(this.#g=setTimeout(s,0))},{signal:l});return}}s()}refresh(t=!1,e=Object.create(null)){if(this.pdfDocument){for(let i of this._pages)i.update(e);this.#x!==null&&(clearTimeout(this.#x),this.#x=null),t||this.update()}}},Df=class extends lh{_resetView(){super._resetView(),this._scrollMode=ve.PAGE,this._spreadMode=Ii.NONE}set scrollMode(t){}_updateScrollMode(){}set spreadMode(t){}_updateSpreadMode(){}};var Rv=Ge.AnnotationLayerBuilder,Fv=Ge.DownloadManager,Dv=Ge.EventBus,jv=Ge.FindState,jf=Ge.GenericL10n,Sr=Ge.LinkTarget,Bf=Ge.PDFFindController,Bv=Ge.PDFHistory,zf=Ge.PDFLinkService,zv=Ge.PDFPageView,Uv=Ge.PDFScriptingManager,Uf=Ge.PDFSinglePageViewer,Hf=Ge.PDFViewer,Hv=Ge.ProgressBar,Vv=Ge.RenderingStates,qv=Ge.ScrollMode,Wv=Ge.SimpleLinkService,Gv=Ge.SpreadMode,$v=Ge.StructTreeLayerBuilder,Xv=Ge.TextLayerBuilder,Yv=Ge.XfaLayerBuilder,Kv=Ge.parseQueryString;var Jv=["pdfViewerContainer"];function Qv(r,t){let e=new r.EventBus;return Zv(e,t),e}function Zv(r,t){ni(r,"documentload").pipe(qe(t)).subscribe(()=>{let e=document.createEvent("CustomEvent");e.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(e)}),ni(r,"pagerendered").pipe(qe(t)).subscribe(({pageNumber:e,cssTransform:i,source:n})=>{let s=document.createEvent("CustomEvent");s.initCustomEvent("pagerendered",!0,!0,{pageNumber:e,cssTransform:i}),n.div.dispatchEvent(s)}),ni(r,"textlayerrendered").pipe(qe(t)).subscribe(({pageNumber:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:e}),i.textLayerDiv?.dispatchEvent(n)}),ni(r,"pagechanging").pipe(qe(t)).subscribe(({pageNumber:e,source:i})=>{let n=document.createEvent("UIEvents");n.initEvent("pagechanging",!0,!0),n.pageNumber=e,i.container.dispatchEvent(n)}),ni(r,"pagesinit").pipe(qe(t)).subscribe(({source:e})=>{let i=document.createEvent("CustomEvent");i.initCustomEvent("pagesinit",!0,!0,null),e.container.dispatchEvent(i)}),ni(r,"pagesloaded").pipe(qe(t)).subscribe(({pagesCount:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("pagesloaded",!0,!0,{pagesCount:e}),i.container.dispatchEvent(n)}),ni(r,"scalechange").pipe(qe(t)).subscribe(({scale:e,presetValue:i,source:n})=>{let s=document.createEvent("UIEvents");s.initEvent("scalechange",!0,!0),s.scale=e,s.presetValue=i,n.container.dispatchEvent(s)}),ni(r,"updateviewarea").pipe(qe(t)).subscribe(({location:e,source:i})=>{let n=document.createEvent("UIEvents");n.initEvent("updateviewarea",!0,!0),n.location=e,i.container.dispatchEvent(n)}),ni(r,"find").pipe(qe(t)).subscribe(({source:e,type:i,query:n,phraseSearch:s,caseSensitive:a,highlightAll:o,findPrevious:l})=>{if(e===window)return;let c=document.createEvent("CustomEvent");c.initCustomEvent("find"+i,!0,!0,{query:n,phraseSearch:s,caseSensitive:a,highlightAll:o,findPrevious:l}),window.dispatchEvent(c)}),ni(r,"attachmentsloaded").pipe(qe(t)).subscribe(({attachmentsCount:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:e}),i.container.dispatchEvent(n)}),ni(r,"sidebarviewchanged").pipe(qe(t)).subscribe(({view:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("sidebarviewchanged",!0,!0,{view:e}),i.outerContainer.dispatchEvent(n)}),ni(r,"pagemode").pipe(qe(t)).subscribe(({mode:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("pagemode",!0,!0,{mode:e}),i.pdfViewer.container.dispatchEvent(n)}),ni(r,"namedaction").pipe(qe(t)).subscribe(({action:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("namedaction",!0,!0,{action:e}),i.pdfViewer.container.dispatchEvent(n)}),ni(r,"presentationmodechanged").pipe(qe(t)).subscribe(({active:e,switchInProgress:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("presentationmodechanged",!0,!0,{active:e,switchInProgress:i}),window.dispatchEvent(n)}),ni(r,"outlineloaded").pipe(qe(t)).subscribe(({outlineCount:e,source:i})=>{let n=document.createEvent("CustomEvent");n.initCustomEvent("outlineloaded",!0,!0,{outlineCount:e}),i.container.dispatchEvent(n)})}function qf(r,t,e){r[t]=e}function qo(){return typeof window>"u"}qo()||qf(ya,"verbosity",Zd.INFOS);typeof Promise.withResolvers>"u"&&window&&(window.Promise.withResolvers=()=>{let r,t;return{promise:new Promise((i,n)=>{r=i,t=n}),resolve:r,reject:t}});var Wf=function(r){return r[r.DISABLED=0]="DISABLED",r[r.ENABLED=1]="ENABLED",r[r.ENHANCED=2]="ENHANCED",r}(Wf||{}),B0=(()=>{class r{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof ya<"u"?`https://unpkg.com/pdfjs-dist@${Do}/cmaps/`:null;_imageResourcesPath=typeof ya<"u"?`https://unpkg.com/pdfjs-dist@${Do}/web/images/`:void 0;_renderText=!0;_renderTextMode=Wf.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new Xp;afterLoadComplete=new Hs;pageRendered=new Hs;pageInitialized=new Hs;textLayerRendered=new Hs;onError=new Hs;onProgress=new Hs;pageChange=new Hs(!0);src;set cMapsUrl(e){this._cMapsUrl=e}set page(e){e=parseInt(e,10)||1;let i=e;this._pdf&&(e=this.getValidPageNumber(e)),this._page=e,i!==e&&this.pageChange.emit(e)}set renderText(e){this._renderText=e}set renderTextMode(e){this._renderTextMode=e}set originalSize(e){this._originalSize=e}set showAll(e){this._showAll=e}set stickToPage(e){this._stickToPage=e}set zoom(e){e<=0||(this._zoom=e)}get zoom(){return this._zoom}set zoomScale(e){this._zoomScale=e}get zoomScale(){return this._zoomScale}set rotation(e){if(!(typeof e=="number"&&e%90===0)){console.warn("Invalid pages rotation angle.");return}this._rotation=e}set externalLinkTarget(e){this._externalLinkTarget=e}set autoresize(e){this._canAutoResize=!!e}set fitToPage(e){this._fitToPage=!!e}set showBorders(e){this._showBorders=!!e}static getLinkTarget(e){switch(e){case"blank":return Sr.BLANK;case"none":return Sr.NONE;case"self":return Sr.SELF;case"parent":return Sr.PARENT;case"top":return Sr.TOP}return null}constructor(e,i){if(this.element=e,this.ngZone=i,qo())return;let n,s=Do,a=window[`pdfWorkerSrc${s}`];a?n=a:window.hasOwnProperty("pdfWorkerSrc")&&typeof window.pdfWorkerSrc=="string"&&window.pdfWorkerSrc?n=window.pdfWorkerSrc:n=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${s}/legacy/build/pdf.worker.min.mjs`,qf(Qd,"workerSrc",n)}ngAfterViewChecked(){if(this.isInitialized)return;let e=this.pdfViewerContainer.nativeElement.offsetParent;if(this.isVisible===!0&&e==null){this.isVisible=!1;return}this.isVisible===!1&&e!=null&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})}))}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(e){if(!(qo()||!this.isVisible)){if("src"in e)this.loadPDF();else if(this._pdf){if(("renderText"in e||"showAll"in e)&&(this.setupViewer(),this.resetPdfDocument()),"page"in e){let{page:i}=e;if(i.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}}updateSize(){ho(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(qe(this.destroy$)).subscribe({next:e=>{let i=this._rotation+e.rotate,n=e.getViewport({scale:this._zoom,rotation:i}).width*r.CSS_UNITS,s=this._zoom,a=!0;if(!this._originalSize||this._fitToPage&&n>this.pdfViewerContainer.nativeElement.clientWidth){let o=e.getViewport({scale:1,rotation:i});s=this.getScale(o.width,o.height),a=!this._stickToPage}this.pdfViewer.currentScale=s,a&&this.pdfViewer.scrollPageIntoView({pageNumber:e.pageNumber,ignoreDestinationZoom:!0})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){let e=r.getLinkTarget(this._externalLinkTarget);return e?{externalLinkTarget:e}:{}}initEventBus(){this.eventBus=Qv(Vf,this.destroy$),ni(this.eventBus,"pagerendered").pipe(qe(this.destroy$)).subscribe(e=>{this.pageRendered.emit(e)}),ni(this.eventBus,"pagesinit").pipe(qe(this.destroy$)).subscribe(e=>{this.pageInitialized.emit(e)}),ni(this.eventBus,"pagechanging").pipe(qe(this.destroy$)).subscribe(({pageNumber:e})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=e,this.pageChange.emit(e)},100)}),ni(this.eventBus,"textlayerrendered").pipe(qe(this.destroy$)).subscribe(e=>{this.textLayerRendered.emit(e)})}initPDFServices(){this.pdfLinkService=new zf(pe({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new Bf({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:Wf.DISABLED,findController:this.pdfFindController,l10n:new jf("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:Jd.DISABLE}}setupViewer(){this.pdfViewer&&this.pdfViewer.setDocument(null),qf(ya,"disableTextLayer",!this._renderText),this.initPDFServices(),this._showAll?this.pdfViewer=new Hf(this.getPDFOptions()):this.pdfViewer=new Uf(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(e){return e<1?1:e>this._pdf.numPages?this._pdf.numPages:e}getDocumentParams(){let e=typeof this.src;if(!this._cMapsUrl)return this.src;let i={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return i.isEvalSupported=!1,e==="string"?i.url=this.src:e==="object"&&(this.src.byteLength!==void 0?i.data=this.src:Object.assign(i,this.src)),i}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src){this.update();return}this.clear(),this.setupViewer(),this.loadingTask=tf(this.getDocumentParams()),this.loadingTask.onProgress=i=>{this.onProgress.emit(i)};let e=this.src;ho(this.loadingTask.promise).pipe(qe(this.destroy$)).subscribe({next:i=>{this._pdf=i,this.lastLoaded=e,this.afterLoadComplete.emit(i),this.resetPdfDocument(),this.update()},error:i=>{this.lastLoaded=null,this.onError.emit(i)}})}update(){this.page=this._page,this.render()}render(){if(this._page=this.getValidPageNumber(this._page),(this._rotation!==0||this.pdfViewer.pagesRotation!==this._rotation)&&this.pdfViewer.firstPagePromise?.then(()=>this.pdfViewer.pagesRotation=this._rotation),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.pdfViewer._pages?.length)this.updateSize();else{let e=this.pageInitialized.subscribe(()=>{this.updateSize(),e.unsubscribe()})}}getScale(e,i){let n=this._showBorders?2*r.BORDER_WIDTH:0,s=this.pdfViewerContainer.nativeElement.clientWidth-n,a=this.pdfViewerContainer.nativeElement.clientHeight-n;if(a===0||i===0||s===0||e===0)return 1;let o=1;switch(this._zoomScale){case"page-fit":o=Math.min(a/i,s/e);break;case"page-height":o=a/i;break;case"page-width":default:o=s/e;break}return this._zoom*o/r.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){qo()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){qo()||this.ngZone.runOutsideAngular(()=>{ni(window,"resize").pipe(Jp(100),Yp(()=>this._canAutoResize&&!!this._pdf),qe(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(i){return new(i||r)(pu(ng),pu(ig))};static \u0275cmp=ca({type:r,selectors:[["pdf-viewer"]],viewQuery:function(i,n){if(i&1&&fo(Jv,5),i&2){let s;po(s=go())&&(n.pdfViewerContainer=s.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},standalone:!1,features:[eg],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(i,n){i&1&&(bt(0,"div",1,0),si(2,"div",2),vt())},styles:[`.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none;transform-origin:0 0}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .canvasWrapper canvas{width:100%}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}`]})}return r})(),z0=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=rg({type:r});static \u0275inj=tg({})}return r})();var Ri=Uint8Array,cn=Uint16Array,tp=Int32Array,hh=new Ri([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),uh=new Ri([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Kf=new Ri([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q0=function(r,t){for(var e=new cn(31),i=0;i<31;++i)e[i]=t+=1<<r[i-1];for(var n=new tp(e[30]),i=1;i<30;++i)for(var s=e[i];s<e[i+1];++s)n[s]=s-e[i]<<5|i;return{b:e,r:n}},W0=q0(hh,2),G0=W0.b,Jf=W0.r;G0[28]=258,Jf[258]=28;var $0=q0(uh,0),e5=$0.b,U0=$0.r,Qf=new cn(32768);for(Ae=0;Ae<32768;++Ae)Ps=(Ae&43690)>>1|(Ae&21845)<<1,Ps=(Ps&52428)>>2|(Ps&13107)<<2,Ps=(Ps&61680)>>4|(Ps&3855)<<4,Qf[Ae]=((Ps&65280)>>8|(Ps&255)<<8)>>1;var Ps,Ae,ts=function(r,t,e){for(var i=r.length,n=0,s=new cn(t);n<i;++n)r[n]&&++s[r[n]-1];var a=new cn(t);for(n=1;n<t;++n)a[n]=a[n-1]+s[n-1]<<1;var o;if(e){o=new cn(1<<t);var l=15-t;for(n=0;n<i;++n)if(r[n])for(var c=n<<4|r[n],u=t-r[n],d=a[r[n]-1]++<<u,g=d|(1<<u)-1;d<=g;++d)o[Qf[d]>>l]=c}else for(o=new cn(i),n=0;n<i;++n)r[n]&&(o[n]=Qf[a[r[n]-1]++]>>15-r[n]);return o},Zs=new Ri(288);for(Ae=0;Ae<144;++Ae)Zs[Ae]=8;var Ae;for(Ae=144;Ae<256;++Ae)Zs[Ae]=9;var Ae;for(Ae=256;Ae<280;++Ae)Zs[Ae]=7;var Ae;for(Ae=280;Ae<288;++Ae)Zs[Ae]=8;var Ae,$o=new Ri(32);for(Ae=0;Ae<32;++Ae)$o[Ae]=5;var Ae,i5=ts(Zs,9,0),n5=ts(Zs,9,1),s5=ts($o,5,0),r5=ts($o,5,1),$f=function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},Rn=function(r,t,e){var i=t/8|0;return(r[i]|r[i+1]<<8)>>(t&7)&e},Xf=function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},ep=function(r){return(r+7)/8|0},X0=function(r,t,e){return(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length),new Ri(r.subarray(t,e))};var a5=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fn=function(r,t,e){var i=new Error(t||a5[r]);if(i.code=r,Error.captureStackTrace&&Error.captureStackTrace(i,Fn),!e)throw i;return i},o5=function(r,t,e,i){var n=r.length,s=i?i.length:0;if(!n||t.f&&!t.l)return e||new Ri(0);var a=!e,o=a||t.i!=2,l=t.i;a&&(e=new Ri(n*3));var c=function(St){var Rt=e.length;if(St>Rt){var Ot=new Ri(Math.max(Rt*2,St));Ot.set(e),e=Ot}},u=t.f||0,d=t.p||0,g=t.b||0,p=t.l,v=t.d,y=t.m,x=t.n,_=n*8;do{if(!p){u=Rn(r,d,1);var A=Rn(r,d+1,3);if(d+=3,A)if(A==1)p=n5,v=r5,y=9,x=5;else if(A==2){var Y=Rn(r,d,31)+257,U=Rn(r,d+10,15)+4,F=Y+Rn(r,d+5,31)+1;d+=14;for(var I=new Ri(F),W=new Ri(19),S=0;S<U;++S)W[Kf[S]]=Rn(r,d+S*3,7);d+=U*3;for(var N=$f(W),G=(1<<N)-1,H=ts(W,N,1),S=0;S<F;){var at=H[Rn(r,d,G)];d+=at&15;var T=at>>4;if(T<16)I[S++]=T;else{var rt=0,it=0;for(T==16?(it=3+Rn(r,d,3),d+=2,rt=I[S-1]):T==17?(it=3+Rn(r,d,7),d+=3):T==18&&(it=11+Rn(r,d,127),d+=7);it--;)I[S++]=rt}}var Q=I.subarray(0,Y),ut=I.subarray(Y);y=$f(Q),x=$f(ut),p=ts(Q,y,1),v=ts(ut,x,1)}else Fn(1);else{var T=ep(d)+4,R=r[T-4]|r[T-3]<<8,z=T+R;if(z>n){l&&Fn(0);break}o&&c(g+R),e.set(r.subarray(T,z),g),t.b=g+=R,t.p=d=z*8,t.f=u;continue}if(d>_){l&&Fn(0);break}}o&&c(g+131072);for(var pt=(1<<y)-1,Mt=(1<<x)-1,L=d;;L=d){var rt=p[Xf(r,d)&pt],j=rt>>4;if(d+=rt&15,d>_){l&&Fn(0);break}if(rt||Fn(2),j<256)e[g++]=j;else if(j==256){L=d,p=null;break}else{var V=j-254;if(j>264){var S=j-257,$=hh[S];V=Rn(r,d,(1<<$)-1)+G0[S],d+=$}var Z=v[Xf(r,d)&Mt],nt=Z>>4;Z||Fn(3),d+=Z&15;var ut=e5[nt];if(nt>3){var $=uh[nt];ut+=Xf(r,d)&(1<<$)-1,d+=$}if(d>_){l&&Fn(0);break}o&&c(g+131072);var ct=g+V;if(g<ut){var ht=s-ut,Et=Math.min(ut,ct);for(ht+g<0&&Fn(3);g<Et;++g)e[g]=i[ht+g]}for(;g<ct;++g)e[g]=e[g-ut]}}t.l=p,t.p=L,t.b=g,t.f=u,p&&(u=1,t.m=y,t.d=v,t.n=x)}while(!u);return g!=e.length&&a?X0(e,0,g):e.subarray(0,g)},Ss=function(r,t,e){e<<=t&7;var i=t/8|0;r[i]|=e,r[i+1]|=e>>8},Wo=function(r,t,e){e<<=t&7;var i=t/8|0;r[i]|=e,r[i+1]|=e>>8,r[i+2]|=e>>16},Yf=function(r,t){for(var e=[],i=0;i<r.length;++i)r[i]&&e.push({s:i,f:r[i]});var n=e.length,s=e.slice();if(!n)return{t:K0,l:0};if(n==1){var a=new Ri(e[0].s+1);return a[e[0].s]=1,{t:a,l:1}}e.sort(function(z,Y){return z.f-Y.f}),e.push({s:-1,f:25001});var o=e[0],l=e[1],c=0,u=1,d=2;for(e[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=n-1;)o=e[e[c].f<e[d].f?c++:d++],l=e[c!=u&&e[c].f<e[d].f?c++:d++],e[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var g=s[0].s,i=1;i<n;++i)s[i].s>g&&(g=s[i].s);var p=new cn(g+1),v=Zf(e[u-1],p,0);if(v>t){var i=0,y=0,x=v-t,_=1<<x;for(s.sort(function(Y,U){return p[U.s]-p[Y.s]||Y.f-U.f});i<n;++i){var A=s[i].s;if(p[A]>t)y+=_-(1<<v-p[A]),p[A]=t;else break}for(y>>=x;y>0;){var T=s[i].s;p[T]<t?y-=1<<t-p[T]++-1:++i}for(;i>=0&&y;--i){var R=s[i].s;p[R]==t&&(--p[R],++y)}v=t}return{t:new Ri(p),l:v}},Zf=function(r,t,e){return r.s==-1?Math.max(Zf(r.l,t,e+1),Zf(r.r,t,e+1)):t[r.s]=e},H0=function(r){for(var t=r.length;t&&!r[--t];);for(var e=new cn(++t),i=0,n=r[0],s=1,a=function(l){e[i++]=l},o=1;o<=t;++o)if(r[o]==n&&o!=t)++s;else{if(!n&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(n),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(n);s=1,n=r[o]}return{c:e.subarray(0,i),n:t}},Go=function(r,t){for(var e=0,i=0;i<t.length;++i)e+=r[i]*t[i];return e},Y0=function(r,t,e){var i=e.length,n=ep(t+2);r[n]=i&255,r[n+1]=i>>8,r[n+2]=r[n]^255,r[n+3]=r[n+1]^255;for(var s=0;s<i;++s)r[n+s+4]=e[s];return(n+4+i)*8},V0=function(r,t,e,i,n,s,a,o,l,c,u){Ss(t,u++,e),++n[256];for(var d=Yf(n,15),g=d.t,p=d.l,v=Yf(s,15),y=v.t,x=v.l,_=H0(g),A=_.c,T=_.n,R=H0(y),z=R.c,Y=R.n,U=new cn(19),F=0;F<A.length;++F)++U[A[F]&31];for(var F=0;F<z.length;++F)++U[z[F]&31];for(var I=Yf(U,7),W=I.t,S=I.l,N=19;N>4&&!W[Kf[N-1]];--N);var G=c+5<<3,H=Go(n,Zs)+Go(s,$o)+a,at=Go(n,g)+Go(s,y)+a+14+3*N+Go(U,W)+2*U[16]+3*U[17]+7*U[18];if(l>=0&&G<=H&&G<=at)return Y0(t,u,r.subarray(l,l+c));var rt,it,Q,ut;if(Ss(t,u,1+(at<H)),u+=2,at<H){rt=ts(g,p,0),it=g,Q=ts(y,x,0),ut=y;var pt=ts(W,S,0);Ss(t,u,T-257),Ss(t,u+5,Y-1),Ss(t,u+10,N-4),u+=14;for(var F=0;F<N;++F)Ss(t,u+3*F,W[Kf[F]]);u+=3*N;for(var Mt=[A,z],L=0;L<2;++L)for(var j=Mt[L],F=0;F<j.length;++F){var V=j[F]&31;Ss(t,u,pt[V]),u+=W[V],V>15&&(Ss(t,u,j[F]>>5&127),u+=j[F]>>12)}}else rt=i5,it=Zs,Q=s5,ut=$o;for(var F=0;F<o;++F){var $=i[F];if($>255){var V=$>>18&31;Wo(t,u,rt[V+257]),u+=it[V+257],V>7&&(Ss(t,u,$>>23&31),u+=hh[V]);var Z=$&31;Wo(t,u,Q[Z]),u+=ut[Z],Z>3&&(Wo(t,u,$>>5&8191),u+=uh[Z])}else Wo(t,u,rt[$]),u+=it[$]}return Wo(t,u,rt[256]),u+it[256]},l5=new tp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),K0=new Ri(0),c5=function(r,t,e,i,n,s){var a=s.z||r.length,o=new Ri(i+a+5*(1+Math.ceil(a/7e3))+n),l=o.subarray(i,o.length-n),c=s.l,u=(s.r||0)&7;if(t){u&&(l[0]=s.r>>3);for(var d=l5[t-1],g=d>>13,p=d&8191,v=(1<<e)-1,y=s.p||new cn(32768),x=s.h||new cn(v+1),_=Math.ceil(e/3),A=2*_,T=function(Yt){return(r[Yt]^r[Yt+1]<<_^r[Yt+2]<<A)&v},R=new tp(25e3),z=new cn(288),Y=new cn(32),U=0,F=0,I=s.i||0,W=0,S=s.w||0,N=0;I+2<a;++I){var G=T(I),H=I&32767,at=x[G];if(y[H]=at,x[G]=H,S<=I){var rt=a-I;if((U>7e3||W>24576)&&(rt>423||!c)){u=V0(r,l,0,R,z,Y,F,W,N,I-N,u),W=U=F=0,N=I;for(var it=0;it<286;++it)z[it]=0;for(var it=0;it<30;++it)Y[it]=0}var Q=2,ut=0,pt=p,Mt=H-at&32767;if(rt>2&&G==T(I-Mt))for(var L=Math.min(g,rt)-1,j=Math.min(32767,I),V=Math.min(258,rt);Mt<=j&&--pt&&H!=at;){if(r[I+Q]==r[I+Q-Mt]){for(var $=0;$<V&&r[I+$]==r[I+$-Mt];++$);if($>Q){if(Q=$,ut=Mt,$>L)break;for(var Z=Math.min(Mt,$-2),nt=0,it=0;it<Z;++it){var ct=I-Mt+it&32767,ht=y[ct],Et=ct-ht&32767;Et>nt&&(nt=Et,at=ct)}}}H=at,at=y[H],Mt+=H-at&32767}if(ut){R[W++]=268435456|Jf[Q]<<18|U0[ut];var St=Jf[Q]&31,Rt=U0[ut]&31;F+=hh[St]+uh[Rt],++z[257+St],++Y[Rt],S=I+Q,++U}else R[W++]=r[I],++z[r[I]]}}for(I=Math.max(I,S);I<a;++I)R[W++]=r[I],++z[r[I]];u=V0(r,l,c,R,z,Y,F,W,N,I-N,u),c||(s.r=u&7|l[u/8|0]<<3,u-=7,s.h=x,s.p=y,s.i=I,s.w=S)}else{for(var I=s.w||0;I<a+c;I+=65535){var Ot=I+65535;Ot>=a&&(l[u/8|0]=c,Ot=a),u=Y0(l,u+1,r.subarray(I,Ot))}s.i=a}return X0(o,0,i+ep(u)+n)};var J0=function(){var r=1,t=0;return{p:function(e){for(var i=r,n=t,s=e.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)n+=i+=e[a];i=(i&65535)+15*(i>>16),n=(n&65535)+15*(n>>16)}r=i,t=n},d:function(){return r%=65521,t%=65521,(r&255)<<24|(r&65280)<<8|(t&255)<<8|t>>8}}},h5=function(r,t,e,i,n){if(!n&&(n={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Ri(s.length+r.length);a.set(s),a.set(r,s.length),r=a,n.w=s.length}return c5(r,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+t.mem,e,i,n)};var Q0=function(r,t,e){for(;e;++t)r[t]=e,e>>>=8};var u5=function(r,t){var e=t.level,i=e==0?0:e<6?1:e==9?3:2;if(r[0]=120,r[1]=i<<6|(t.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,t.dictionary){var n=J0();n.p(t.dictionary),Q0(r,2,n.d())}},d5=function(r,t){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Fn(6,"invalid zlib data"),(r[1]>>5&1)==+!t&&Fn(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function dh(r,t){t||(t={});var e=J0();e.p(r);var i=h5(r,t,t.dictionary?6:2,4);return u5(i,t),Q0(i,i.length-4,e.d()),i}function Z0(r,t){return o5(r.subarray(d5(r,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var f5=typeof TextDecoder<"u"&&new TextDecoder,p5=0;try{f5.decode(K0,{stream:!0}),p5=1}catch{}var Jt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ip(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var Fe={log:ip,warn:function(r){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):ip.call(null,arguments))},error:function(r){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):ip(r))}};function np(r,t,e){var i=new XMLHttpRequest;i.open("GET",r),i.responseType="blob",i.onload=function(){Er(i.response,t,e)},i.onerror=function(){Fe.error("could not download file")},i.send()}function tm(r){var t=new XMLHttpRequest;t.open("HEAD",r,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function fh(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(t)}}var Xo,lp,Er=Jt.saveAs||((typeof window>"u"?"undefined":Ne(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,t,e){var i=Jt.URL||Jt.webkitURL,n=document.createElement("a");t=t||r.name||"download",n.download=t,n.rel="noopener",typeof r=="string"?(n.href=r,n.origin!==location.origin?tm(n.href)?np(r,t,e):fh(n,n.target="_blank"):fh(n)):(n.href=i.createObjectURL(r),setTimeout(function(){i.revokeObjectURL(n.href)},4e4),setTimeout(function(){fh(n)},0))}:"msSaveOrOpenBlob"in navigator?function(r,t,e){if(t=t||r.name||"download",typeof r=="string")if(tm(r))np(r,t,e);else{var i=document.createElement("a");i.href=r,i.target="_blank",setTimeout(function(){fh(i)})}else navigator.msSaveOrOpenBlob(function(n,s){return s===void 0?s={autoBom:!1}:Ne(s)!=="object"&&(Fe.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}(r,e),t)}:function(r,t,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof r=="string")return np(r,t,e);var n=r.type==="application/octet-stream",s=/constructor/i.test(Jt.HTMLElement)||Jt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||n&&s)&&(typeof FileReader>"u"?"undefined":Ne(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var u=o.result;u=a?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=u:location=u,i=null},o.readAsDataURL(r)}else{var l=Jt.URL||Jt.webkitURL,c=l.createObjectURL(r);i?i.location=c:location.href=c,i=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function bm(r){var t;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<e.length;i++){var n=e[i].re,s=e[i].process,a=n.exec(r);a&&(t=s(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+o+l+c}}function sp(r,t){var e=r[0],i=r[1],n=r[2],s=r[3];e=Fi(e,i,n,s,t[0],7,-680876936),s=Fi(s,e,i,n,t[1],12,-389564586),n=Fi(n,s,e,i,t[2],17,606105819),i=Fi(i,n,s,e,t[3],22,-1044525330),e=Fi(e,i,n,s,t[4],7,-176418897),s=Fi(s,e,i,n,t[5],12,1200080426),n=Fi(n,s,e,i,t[6],17,-1473231341),i=Fi(i,n,s,e,t[7],22,-45705983),e=Fi(e,i,n,s,t[8],7,1770035416),s=Fi(s,e,i,n,t[9],12,-1958414417),n=Fi(n,s,e,i,t[10],17,-42063),i=Fi(i,n,s,e,t[11],22,-1990404162),e=Fi(e,i,n,s,t[12],7,1804603682),s=Fi(s,e,i,n,t[13],12,-40341101),n=Fi(n,s,e,i,t[14],17,-1502002290),e=Di(e,i=Fi(i,n,s,e,t[15],22,1236535329),n,s,t[1],5,-165796510),s=Di(s,e,i,n,t[6],9,-1069501632),n=Di(n,s,e,i,t[11],14,643717713),i=Di(i,n,s,e,t[0],20,-373897302),e=Di(e,i,n,s,t[5],5,-701558691),s=Di(s,e,i,n,t[10],9,38016083),n=Di(n,s,e,i,t[15],14,-660478335),i=Di(i,n,s,e,t[4],20,-405537848),e=Di(e,i,n,s,t[9],5,568446438),s=Di(s,e,i,n,t[14],9,-1019803690),n=Di(n,s,e,i,t[3],14,-187363961),i=Di(i,n,s,e,t[8],20,1163531501),e=Di(e,i,n,s,t[13],5,-1444681467),s=Di(s,e,i,n,t[2],9,-51403784),n=Di(n,s,e,i,t[7],14,1735328473),e=ji(e,i=Di(i,n,s,e,t[12],20,-1926607734),n,s,t[5],4,-378558),s=ji(s,e,i,n,t[8],11,-2022574463),n=ji(n,s,e,i,t[11],16,1839030562),i=ji(i,n,s,e,t[14],23,-35309556),e=ji(e,i,n,s,t[1],4,-1530992060),s=ji(s,e,i,n,t[4],11,1272893353),n=ji(n,s,e,i,t[7],16,-155497632),i=ji(i,n,s,e,t[10],23,-1094730640),e=ji(e,i,n,s,t[13],4,681279174),s=ji(s,e,i,n,t[0],11,-358537222),n=ji(n,s,e,i,t[3],16,-722521979),i=ji(i,n,s,e,t[6],23,76029189),e=ji(e,i,n,s,t[9],4,-640364487),s=ji(s,e,i,n,t[12],11,-421815835),n=ji(n,s,e,i,t[15],16,530742520),e=Bi(e,i=ji(i,n,s,e,t[2],23,-995338651),n,s,t[0],6,-198630844),s=Bi(s,e,i,n,t[7],10,1126891415),n=Bi(n,s,e,i,t[14],15,-1416354905),i=Bi(i,n,s,e,t[5],21,-57434055),e=Bi(e,i,n,s,t[12],6,1700485571),s=Bi(s,e,i,n,t[3],10,-1894986606),n=Bi(n,s,e,i,t[10],15,-1051523),i=Bi(i,n,s,e,t[1],21,-2054922799),e=Bi(e,i,n,s,t[8],6,1873313359),s=Bi(s,e,i,n,t[15],10,-30611744),n=Bi(n,s,e,i,t[6],15,-1560198380),i=Bi(i,n,s,e,t[13],21,1309151649),e=Bi(e,i,n,s,t[4],6,-145523070),s=Bi(s,e,i,n,t[11],10,-1120210379),n=Bi(n,s,e,i,t[2],15,718787259),i=Bi(i,n,s,e,t[9],21,-343485551),r[0]=er(e,r[0]),r[1]=er(i,r[1]),r[2]=er(n,r[2]),r[3]=er(s,r[3])}function Ah(r,t,e,i,n,s){return t=er(er(t,r),er(i,s)),er(t<<n|t>>>32-n,e)}function Fi(r,t,e,i,n,s,a){return Ah(t&e|~t&i,r,t,n,s,a)}function Di(r,t,e,i,n,s,a){return Ah(t&i|e&~i,r,t,n,s,a)}function ji(r,t,e,i,n,s,a){return Ah(t^e^i,r,t,n,s,a)}function Bi(r,t,e,i,n,s,a){return Ah(e^(t|~i),r,t,n,s,a)}function vm(r){var t,e=r.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=r.length;t+=64)sp(i,g5(r.substring(t-64,t)));r=r.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<r.length;t++)n[t>>2]|=r.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(sp(i,n),t=0;t<16;t++)n[t]=0;return n[14]=8*e,sp(i,n),i}function g5(r){var t,e=[];for(t=0;t<64;t+=4)e[t>>2]=r.charCodeAt(t)+(r.charCodeAt(t+1)<<8)+(r.charCodeAt(t+2)<<16)+(r.charCodeAt(t+3)<<24);return e}Xo=Jt.atob.bind(Jt),lp=Jt.btoa.bind(Jt);var em="0123456789abcdef".split("");function m5(r){for(var t="",e=0;e<4;e++)t+=em[r>>8*e+4&15]+em[r>>8*e&15];return t}function b5(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function cp(r){return vm(r).map(b5).join("")}var v5=function(r){for(var t=0;t<r.length;t++)r[t]=m5(r[t]);return r.join("")}(vm("hello"))!="5d41402abc4b2a76b9719d911017c592";function er(r,t){if(v5){var e=(65535&r)+(65535&t);return(r>>16)+(t>>16)+(e>>16)<<16|65535&e}return r+t&4294967295}function hp(r,t){var e,i,n,s;if(r!==e){for(var a=(n=r,s=1+(256/r.length>>0),new Array(s+1).join(n)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var u=o[l];c=(c+u+a.charCodeAt(l))%256,o[l]=o[c],o[c]=u}e=r,i=o}else o=i;var d=t.length,g=0,p=0,v="";for(l=0;l<d;l++)p=(p+(u=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=u,a=o[(o[g]+o[p])%256],v+=String.fromCharCode(t.charCodeAt(l)^a);return v}var im={print:4,modify:8,copy:16,"annot-forms":32};function Sa(r,t,e,i){this.v=1,this.r=2;var n=192;r.forEach(function(o){if(im.perm!==void 0)throw new Error("Invalid permission: "+o);n+=im[o]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var s=(t+this.padding).substr(0,32),a=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^n)),this.encryptionKey=cp(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=hp(this.encryptionKey,this.padding)}function Ea(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var t="",e=r.length,i=0;i<e;i++){var n=r.charCodeAt(i);n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?t+="#"+("0"+n.toString(16)).slice(-2):t+=r[i]}return t}function nm(r){if(Ne(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,i,n){if(n=n||!1,typeof e!="string"||typeof i!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var s=Math.random().toString(35);return t[e][s]=[i,!!n],s},this.unsubscribe=function(e){for(var i in t)if(t[i][e])return delete t[i][e],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(e){if(t.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),n=[];for(var s in t[e]){var a=t[e][s];try{a[0].apply(r,i)}catch(o){Jt.console&&Fe.error("jsPDF PubSub Error",o.message,o)}a[1]&&n.push(s)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _h(r){if(!(this instanceof _h))return new _h(r);var t="opacity,stroke-opacity".split(",");for(var e in r)r.hasOwnProperty(e)&&t.indexOf(e)>=0&&(this[e]=r[e]);this.id="",this.objectNumber=-1}function ym(r,t){this.gState=r,this.matrix=t,this.id="",this.objectNumber=-1}function Lr(r,t,e,i,n){if(!(this instanceof Lr))return new Lr(r,t,e,i,n);this.type=r==="axial"?2:3,this.coords=t,this.colors=e,ym.call(this,i,n)}function La(r,t,e,i,n){if(!(this instanceof La))return new La(r,t,e,i,n);this.boundingBox=r,this.xStep=t,this.yStep=e,this.stream="",this.cloneIndex=0,ym.call(this,i,n)}function $t(r){var t,e=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],n=arguments[2],s=arguments[3],a=[],o=1,l=16,c="S",u=null;Ne(r=r||{})==="object"&&(e=r.orientation,i=r.unit||i,n=r.format||n,s=r.compress||r.compressPdf||s,(u=r.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(t=r.precision),r.floatPrecision!==void 0&&(l=r.floatPrecision),c=r.defaultPathOperation||"S"),a=r.filters||(s===!0?["FlateEncode"]:a),i=i||"mm",e=(""+(e||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=nm;var v="1.3",y=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(m){v=m};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var _=p.__private__.getPageFormat=function(m){return x[m]};n=n||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},T=A.COMPAT;function R(){this.saveGraphicsState(),q(new Xt(Dt,0,0,-Dt,0,Ms()*Dt).toString()+" cm"),this.setFontSize(this.getFontSize()/Dt),c="n",T=A.ADVANCED}function z(){this.restoreGraphicsState(),c="S",T=A.COMPAT}var Y=p.__private__.combineFontStyleAndFontWeight=function(m,P){if(m=="bold"&&P=="normal"||m=="bold"&&P==400||m=="normal"&&P=="italic"||m=="bold"&&P=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return P&&(m=P==400||P==="normal"?m==="italic"?"italic":"normal":P!=700&&P!=="bold"||m!=="normal"?(P==700?"bold":P)+""+m:"bold"),m};p.advancedAPI=function(m){var P=T===A.COMPAT;return P&&R.call(this),typeof m!="function"||(m(this),P&&z.call(this)),this},p.compatAPI=function(m){var P=T===A.ADVANCED;return P&&z.call(this),typeof m!="function"||(m(this),P&&R.call(this)),this},p.isAdvancedAPI=function(){return T===A.ADVANCED};var U,F=function(m){if(T!==A.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(m,P){var B=t||P;if(isNaN(m)||isNaN(B))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(B).replace(/0+$/,"")};U=p.hpf=p.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return I(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return I(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return I(m,16)};var W=p.f2=p.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return I(m,2)},S=p.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return I(m,3)},N=p.scale=p.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return T===A.COMPAT?m*Dt:T===A.ADVANCED?m:void 0},G=function(m){return T===A.COMPAT?Ms()-m:T===A.ADVANCED?m:void 0},H=function(m){return N(G(m))};p.__private__.setPrecision=p.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(t=parseInt(m,10))};var at,rt="00000000000000000000000000000000",it=p.__private__.getFileId=function(){return rt},Q=p.__private__.setFileId=function(m){return rt=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():rt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Mi=new Sa(u.userPermissions,u.userPassword,u.ownerPassword,rt)),rt};p.setFileId=function(m){return Q(m),this},p.getFileId=function(){return it()};var ut=p.__private__.convertDateToPDFDate=function(m){var P=m.getTimezoneOffset(),B=P<0?"+":"-",X=Math.floor(Math.abs(P/60)),st=Math.abs(P%60),gt=[B,V(X),"'",V(st),"'"].join("");return["D:",m.getFullYear(),V(m.getMonth()+1),V(m.getDate()),V(m.getHours()),V(m.getMinutes()),V(m.getSeconds()),gt].join("")},pt=p.__private__.convertPDFDateToDate=function(m){var P=parseInt(m.substr(2,4),10),B=parseInt(m.substr(6,2),10)-1,X=parseInt(m.substr(8,2),10),st=parseInt(m.substr(10,2),10),gt=parseInt(m.substr(12,2),10),Ct=parseInt(m.substr(14,2),10);return new Date(P,B,X,st,gt,Ct,0)},Mt=p.__private__.setCreationDate=function(m){var P;if(m===void 0&&(m=new Date),m instanceof Date)P=ut(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");P=m}return at=P},L=p.__private__.getCreationDate=function(m){var P=at;return m==="jsDate"&&(P=pt(at)),P};p.setCreationDate=function(m){return Mt(m),this},p.getCreationDate=function(m){return L(m)};var j,V=p.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},$=p.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},Z=0,nt=[],ct=[],ht=0,Et=[],St=[],Rt=!1,Ot=ct,Yt=function(){Z=0,ht=0,ct=[],nt=[],Et=[],rs=ci(),Cn=ci()};p.__private__.setCustomOutputDestination=function(m){Rt=!0,Ot=m};var mt=function(m){Rt||(Ot=m)};p.__private__.resetCustomOutputDestination=function(){Rt=!1,Ot=ct};var q=p.__private__.out=function(m){return m=m.toString(),ht+=m.length+1,Ot.push(m),Ot},ae=p.__private__.write=function(m){return q(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Ht=p.__private__.getArrayBuffer=function(m){for(var P=m.length,B=new ArrayBuffer(P),X=new Uint8Array(B);P--;)X[P]=m.charCodeAt(P);return B},Pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Pt};var kt=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(m){return kt=T===A.ADVANCED?m/Dt:m,this};var Ft,It=p.__private__.getFontSize=p.getFontSize=function(){return T===A.COMPAT?kt:kt*Dt},qt=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(m){return qt=m,this},p.__private__.getR2L=p.getR2L=function(){return qt};var ee,ce=p.__private__.setZoomMode=function(m){var P=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))Ft=m;else if(isNaN(m)){if(P.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');Ft=m}else Ft=parseInt(m,10)};p.__private__.getZoomMode=function(){return Ft};var de,ye=p.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');ee=m};p.__private__.getPageMode=function(){return ee};var Te=p.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');de=m};p.__private__.getLayoutMode=function(){return de},p.__private__.setDisplayMode=p.setDisplayMode=function(m,P,B){return ce(m),Te(P),ye(B),this};var Qt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(m){if(Object.keys(Qt).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qt[m]},p.__private__.getDocumentProperties=function(){return Qt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(m){for(var P in Qt)Qt.hasOwnProperty(P)&&m[P]&&(Qt[P]=m[P]);return this},p.__private__.setDocumentProperty=function(m,P){if(Object.keys(Qt).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qt[m]=P};var fe,Dt,Li,_e,_n,Ie={},He={},zn=[],Ce={},sr={},$e={},xn={},ss=null,Xe=0,ie=[],Pe=new nm(p),rr=r.hotfixes||[],Ci={},Un={},Hn=[],Xt=function m(P,B,X,st,gt,Ct){if(!(this instanceof m))return new m(P,B,X,st,gt,Ct);isNaN(P)&&(P=1),isNaN(B)&&(B=0),isNaN(X)&&(X=0),isNaN(st)&&(st=1),isNaN(gt)&&(gt=0),isNaN(Ct)&&(Ct=0),this._matrix=[P,B,X,st,gt,Ct]};Object.defineProperty(Xt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Xt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Xt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Xt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Xt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Xt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Xt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(Xt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(Xt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(Xt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(Xt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(Xt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(Xt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(m)},Xt.prototype.multiply=function(m){var P=m.sx*this.sx+m.shy*this.shx,B=m.sx*this.shy+m.shy*this.sy,X=m.shx*this.sx+m.sy*this.shx,st=m.shx*this.shy+m.sy*this.sy,gt=m.tx*this.sx+m.ty*this.shx+this.tx,Ct=m.tx*this.shy+m.ty*this.sy+this.ty;return new Xt(P,B,X,st,gt,Ct)},Xt.prototype.decompose=function(){var m=this.sx,P=this.shy,B=this.shx,X=this.sy,st=this.tx,gt=this.ty,Ct=Math.sqrt(m*m+P*P),jt=(m/=Ct)*B+(P/=Ct)*X;B-=m*jt,X-=P*jt;var Wt=Math.sqrt(B*B+X*X);return jt/=Wt,m*(X/=Wt)<P*(B/=Wt)&&(m=-m,P=-P,jt=-jt,Ct=-Ct),{scale:new Xt(Ct,0,0,Wt,0,0),translate:new Xt(1,0,0,1,st,gt),rotate:new Xt(m,P,-P,m,0,0),skew:new Xt(1,0,jt,1,0,0)}},Xt.prototype.toString=function(m){return this.join(" ")},Xt.prototype.inversed=function(){var m=this.sx,P=this.shy,B=this.shx,X=this.sy,st=this.tx,gt=this.ty,Ct=1/(m*X-P*B),jt=X*Ct,Wt=-P*Ct,oe=-B*Ct,ne=m*Ct;return new Xt(jt,Wt,oe,ne,-jt*st-oe*gt,-Wt*st-ne*gt)},Xt.prototype.applyToPoint=function(m){var P=m.x*this.sx+m.y*this.shx+this.tx,B=m.x*this.shy+m.y*this.sy+this.ty;return new qr(P,B)},Xt.prototype.applyToRectangle=function(m){var P=this.applyToPoint(m),B=this.applyToPoint(new qr(m.x+m.w,m.y+m.h));return new qa(P.x,P.y,B.x-P.x,B.y-P.y)},Xt.prototype.clone=function(){var m=this.sx,P=this.shy,B=this.shx,X=this.sy,st=this.tx,gt=this.ty;return new Xt(m,P,B,X,st,gt)},p.Matrix=Xt;var An=p.matrixMult=function(m,P){return P.multiply(m)},Vn=new Xt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Vn;var Wi=function(m,P){if(!sr[m]){var B=(P instanceof Lr?"Sh":"P")+(Object.keys(Ce).length+1).toString(10);P.id=B,sr[m]=B,Ce[B]=P,Pe.publish("addPattern",P)}};p.ShadingPattern=Lr,p.TilingPattern=La,p.addShadingPattern=function(m,P){return F("addShadingPattern()"),Wi(m,P),this},p.beginTilingPattern=function(m){F("beginTilingPattern()"),ml(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},p.endTilingPattern=function(m,P){F("endTilingPattern()"),P.stream=St[j].join(`
`),Wi(m,P),Pe.publish("endTilingPattern",P),Hn.pop().restore()};var pi=p.__private__.newObject=function(){var m=ci();return tn(m,!0),m},ci=p.__private__.newObjectDeferred=function(){return Z++,nt[Z]=function(){return ht},Z},tn=function(m,P){return P=typeof P=="boolean"&&P,nt[m]=ht,P&&q(m+" 0 obj"),m},Tr=p.__private__.newAdditionalObject=function(){var m={objId:ci(),content:""};return Et.push(m),m},rs=ci(),Cn=ci(),Pn=p.__private__.decodeColorString=function(m){var P=m.split(" ");if(P.length!==2||P[1]!=="g"&&P[1]!=="G")P.length===5&&(P[4]==="k"||P[4]==="K")&&(P=[(1-P[0])*(1-P[3]),(1-P[1])*(1-P[3]),(1-P[2])*(1-P[3]),"r"]);else{var B=parseFloat(P[0]);P=[B,B,B,"r"]}for(var X="#",st=0;st<3;st++)X+=("0"+Math.floor(255*parseFloat(P[st])).toString(16)).slice(-2);return X},Sn=p.__private__.encodeColorString=function(m){var P;typeof m=="string"&&(m={ch1:m});var B=m.ch1,X=m.ch2,st=m.ch3,gt=m.ch4,Ct=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof B=="string"&&B.charAt(0)!=="#"){var jt=new bm(B);if(jt.ok)B=jt.toHex();else if(!/^\d*\.?\d*$/.test(B))throw new Error('Invalid color "'+B+'" passed to jsPDF.encodeColorString.')}if(typeof B=="string"&&/^#[0-9A-Fa-f]{3}$/.test(B)&&(B="#"+B[1]+B[1]+B[2]+B[2]+B[3]+B[3]),typeof B=="string"&&/^#[0-9A-Fa-f]{6}$/.test(B)){var Wt=parseInt(B.substr(1),16);B=Wt>>16&255,X=Wt>>8&255,st=255&Wt}if(X===void 0||gt===void 0&&B===X&&X===st)if(typeof B=="string")P=B+" "+Ct[0];else switch(m.precision){case 2:P=W(B/255)+" "+Ct[0];break;case 3:default:P=S(B/255)+" "+Ct[0]}else if(gt===void 0||Ne(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return P=["1.","1.","1.",Ct[1]].join(" ");if(typeof B=="string")P=[B,X,st,Ct[1]].join(" ");else switch(m.precision){case 2:P=[W(B/255),W(X/255),W(st/255),Ct[1]].join(" ");break;default:case 3:P=[S(B/255),S(X/255),S(st/255),Ct[1]].join(" ")}}else if(typeof B=="string")P=[B,X,st,gt,Ct[2]].join(" ");else switch(m.precision){case 2:P=[W(B),W(X),W(st),W(gt),Ct[2]].join(" ");break;case 3:default:P=[S(B),S(X),S(st),S(gt),Ct[2]].join(" ")}return P},qn=p.__private__.getFilters=function(){return a},hn=p.__private__.putStream=function(m){var P=(m=m||{}).data||"",B=m.filters||qn(),X=m.alreadyAppliedFilters||[],st=m.addLength1||!1,gt=P.length,Ct=m.objectId,jt=function(ki){return ki};if(u!==null&&Ct===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(jt=Mi.encryptor(Ct,0));var Wt={};B===!0&&(B=["FlateEncode"]);var oe=m.additionalKeyValues||[],ne=(Wt=$t.API.processDataByFilters!==void 0?$t.API.processDataByFilters(P,B):{data:P,reverseChain:[]}).reverseChain+(Array.isArray(X)?X.join(" "):X.toString());if(Wt.data.length!==0&&(oe.push({key:"Length",value:Wt.data.length}),st===!0&&oe.push({key:"Length1",value:gt})),ne.length!=0)if(ne.split("/").length-1==1)oe.push({key:"Filter",value:ne});else{oe.push({key:"Filter",value:"["+ne+"]"});for(var be=0;be<oe.length;be+=1)if(oe[be].key==="DecodeParms"){for(var Ve=[],Ye=0;Ye<Wt.reverseChain.split("/").length-1;Ye+=1)Ve.push("null");Ve.push(oe[be].value),oe[be].value="["+Ve.join(" ")+"]"}}q("<<");for(var hi=0;hi<oe.length;hi++)q("/"+oe[hi].key+" "+oe[hi].value);q(">>"),Wt.data.length!==0&&(q("stream"),q(jt(Wt.data)),q("endstream"))},Wn=p.__private__.putPage=function(m){var P=m.number,B=m.data,X=m.objId,st=m.contentsObjId;tn(X,!0),q("<</Type /Page"),q("/Parent "+m.rootDictionaryObjId+" 0 R"),q("/Resources "+m.resourceDictionaryObjId+" 0 R"),q("/MediaBox ["+parseFloat(U(m.mediaBox.bottomLeftX))+" "+parseFloat(U(m.mediaBox.bottomLeftY))+" "+U(m.mediaBox.topRightX)+" "+U(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&q("/CropBox ["+U(m.cropBox.bottomLeftX)+" "+U(m.cropBox.bottomLeftY)+" "+U(m.cropBox.topRightX)+" "+U(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&q("/BleedBox ["+U(m.bleedBox.bottomLeftX)+" "+U(m.bleedBox.bottomLeftY)+" "+U(m.bleedBox.topRightX)+" "+U(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&q("/TrimBox ["+U(m.trimBox.bottomLeftX)+" "+U(m.trimBox.bottomLeftY)+" "+U(m.trimBox.topRightX)+" "+U(m.trimBox.topRightY)+"]"),m.artBox!==null&&q("/ArtBox ["+U(m.artBox.bottomLeftX)+" "+U(m.artBox.bottomLeftY)+" "+U(m.artBox.topRightX)+" "+U(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&q("/UserUnit "+m.userUnit),Pe.publish("putPage",{objId:X,pageContext:ie[P],pageNumber:P,page:B}),q("/Contents "+st+" 0 R"),q(">>"),q("endobj");var gt=B.join(`
`);return T===A.ADVANCED&&(gt+=`
Q`),tn(st,!0),hn({data:gt,filters:qn(),objectId:st}),q("endobj"),X},ar=p.__private__.putPages=function(){var m,P,B=[];for(m=1;m<=Xe;m++)ie[m].objId=ci(),ie[m].contentsObjId=ci();for(m=1;m<=Xe;m++)B.push(Wn({number:m,data:St[m],objId:ie[m].objId,contentsObjId:ie[m].contentsObjId,mediaBox:ie[m].mediaBox,cropBox:ie[m].cropBox,bleedBox:ie[m].bleedBox,trimBox:ie[m].trimBox,artBox:ie[m].artBox,userUnit:ie[m].userUnit,rootDictionaryObjId:rs,resourceDictionaryObjId:Cn}));tn(rs,!0),q("<</Type /Pages");var X="/Kids [";for(P=0;P<Xe;P++)X+=B[P]+" 0 R ";q(X+"]"),q("/Count "+Xe),q(">>"),q("endobj"),Pe.publish("postPutPages")},Or=function(m){Pe.publish("putFont",{font:m,out:q,newObject:pi,putStream:hn}),m.isAlreadyPutted!==!0&&(m.objectNumber=pi(),q("<<"),q("/Type /Font"),q("/BaseFont /"+Ea(m.postScriptName)),q("/Subtype /Type1"),typeof m.encoding=="string"&&q("/Encoding /"+m.encoding),q("/FirstChar 32"),q("/LastChar 255"),q(">>"),q("endobj"))},Nr=function(){for(var m in Ie)Ie.hasOwnProperty(m)&&(d===!1||d===!0&&g.hasOwnProperty(m))&&Or(Ie[m])},Ir=function(m){m.objectNumber=pi();var P=[];P.push({key:"Type",value:"/XObject"}),P.push({key:"Subtype",value:"/Form"}),P.push({key:"BBox",value:"["+[U(m.x),U(m.y),U(m.x+m.width),U(m.y+m.height)].join(" ")+"]"}),P.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var B=m.pages[1].join(`
`);hn({data:B,additionalKeyValues:P,objectId:m.objectNumber}),q("endobj")},Rr=function(){for(var m in Ci)Ci.hasOwnProperty(m)&&Ir(Ci[m])},Qo=function(m,P){var B,X=[],st=1/(P-1);for(B=0;B<1;B+=st)X.push(B);if(X.push(1),m[0].offset!=0){var gt={offset:0,color:m[0].color};m.unshift(gt)}if(m[m.length-1].offset!=1){var Ct={offset:1,color:m[m.length-1].color};m.push(Ct)}for(var jt="",Wt=0,oe=0;oe<X.length;oe++){for(B=X[oe];B>m[Wt+1].offset;)Wt++;var ne=m[Wt].offset,be=(B-ne)/(m[Wt+1].offset-ne),Ve=m[Wt].color,Ye=m[Wt+1].color;jt+=$(Math.round((1-be)*Ve[0]+be*Ye[0]).toString(16))+$(Math.round((1-be)*Ve[1]+be*Ye[1]).toString(16))+$(Math.round((1-be)*Ve[2]+be*Ye[2]).toString(16))}return jt.trim()},Ch=function(m,P){P||(P=21);var B=pi(),X=Qo(m.colors,P),st=[];st.push({key:"FunctionType",value:"0"}),st.push({key:"Domain",value:"[0.0 1.0]"}),st.push({key:"Size",value:"["+P+"]"}),st.push({key:"BitsPerSample",value:"8"}),st.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hn({data:X,additionalKeyValues:st,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:B}),q("endobj"),m.objectNumber=pi(),q("<< /ShadingType "+m.type),q("/ColorSpace /DeviceRGB");var gt="/Coords ["+U(parseFloat(m.coords[0]))+" "+U(parseFloat(m.coords[1]))+" ";m.type===2?gt+=U(parseFloat(m.coords[2]))+" "+U(parseFloat(m.coords[3])):gt+=U(parseFloat(m.coords[2]))+" "+U(parseFloat(m.coords[3]))+" "+U(parseFloat(m.coords[4]))+" "+U(parseFloat(m.coords[5])),q(gt+="]"),m.matrix&&q("/Matrix ["+m.matrix.toString()+"]"),q("/Function "+B+" 0 R"),q("/Extend [true true]"),q(">>"),q("endobj")},Ph=function(m,P){var B=ci(),X=pi();P.push({resourcesOid:B,objectOid:X}),m.objectNumber=X;var st=[];st.push({key:"Type",value:"/Pattern"}),st.push({key:"PatternType",value:"1"}),st.push({key:"PaintType",value:"1"}),st.push({key:"TilingType",value:"1"}),st.push({key:"BBox",value:"["+m.boundingBox.map(U).join(" ")+"]"}),st.push({key:"XStep",value:U(m.xStep)}),st.push({key:"YStep",value:U(m.yStep)}),st.push({key:"Resources",value:B+" 0 R"}),m.matrix&&st.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),hn({data:m.stream,additionalKeyValues:st,objectId:m.objectNumber}),q("endobj")},Fr=function(m){var P;for(P in Ce)Ce.hasOwnProperty(P)&&(Ce[P]instanceof Lr?Ch(Ce[P]):Ce[P]instanceof La&&Ph(Ce[P],m))},Zo=function(m){for(var P in m.objectNumber=pi(),q("<<"),m)switch(P){case"opacity":q("/ca "+W(m[P]));break;case"stroke-opacity":q("/CA "+W(m[P]))}q(">>"),q("endobj")},Sh=function(){var m;for(m in $e)$e.hasOwnProperty(m)&&Zo($e[m])},Ia=function(){for(var m in q("/XObject <<"),Ci)Ci.hasOwnProperty(m)&&Ci[m].objectNumber>=0&&q("/"+m+" "+Ci[m].objectNumber+" 0 R");Pe.publish("putXobjectDict"),q(">>")},Eh=function(){Mi.oid=pi(),q("<<"),q("/Filter /Standard"),q("/V "+Mi.v),q("/R "+Mi.r),q("/U <"+Mi.toHexString(Mi.U)+">"),q("/O <"+Mi.toHexString(Mi.O)+">"),q("/P "+Mi.P),q(">>"),q("endobj")},tl=function(){for(var m in q("/Font <<"),Ie)Ie.hasOwnProperty(m)&&(d===!1||d===!0&&g.hasOwnProperty(m))&&q("/"+m+" "+Ie[m].objectNumber+" 0 R");q(">>")},Lh=function(){if(Object.keys(Ce).length>0){for(var m in q("/Shading <<"),Ce)Ce.hasOwnProperty(m)&&Ce[m]instanceof Lr&&Ce[m].objectNumber>=0&&q("/"+m+" "+Ce[m].objectNumber+" 0 R");Pe.publish("putShadingPatternDict"),q(">>")}},Dr=function(m){if(Object.keys(Ce).length>0){for(var P in q("/Pattern <<"),Ce)Ce.hasOwnProperty(P)&&Ce[P]instanceof p.TilingPattern&&Ce[P].objectNumber>=0&&Ce[P].objectNumber<m&&q("/"+P+" "+Ce[P].objectNumber+" 0 R");Pe.publish("putTilingPatternDict"),q(">>")}},Mh=function(){if(Object.keys($e).length>0){var m;for(m in q("/ExtGState <<"),$e)$e.hasOwnProperty(m)&&$e[m].objectNumber>=0&&q("/"+m+" "+$e[m].objectNumber+" 0 R");Pe.publish("putGStateDict"),q(">>")}},ti=function(m){tn(m.resourcesOid,!0),q("<<"),q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),tl(),Lh(),Dr(m.objectOid),Mh(),Ia(),q(">>"),q("endobj")},el=function(){var m=[];Nr(),Sh(),Rr(),Fr(m),Pe.publish("putResources"),m.forEach(ti),ti({resourcesOid:Cn,objectOid:Number.MAX_SAFE_INTEGER}),Pe.publish("postPutResources")},il=function(){Pe.publish("putAdditionalObjects");for(var m=0;m<Et.length;m++){var P=Et[m];tn(P.objId,!0),q(P.content),q("endobj")}Pe.publish("postPutAdditionalObjects")},nl=function(m){He[m.fontName]=He[m.fontName]||{},He[m.fontName][m.fontStyle]=m.id},Ra=function(m,P,B,X,st){var gt={id:"F"+(Object.keys(Ie).length+1).toString(10),postScriptName:m,fontName:P,fontStyle:B,encoding:X,isStandardFont:st||!1,metadata:{}};return Pe.publish("addFont",{font:gt,instance:this}),Ie[gt.id]=gt,nl(gt),gt.id},kh=function(m){for(var P=0,B=Pt.length;P<B;P++){var X=Ra.call(this,m[P][0],m[P][1],m[P][2],Pt[P][3],!0);d===!1&&(g[X]=!0);var st=m[P][0].split("-");nl({id:X,fontName:st[0],fontStyle:st[1]||""})}Pe.publish("addFonts",{fonts:Ie,dictionary:He})},En=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(X){var P=X.stack||"";~P.indexOf(" at ")&&(P=P.split(" at ")[1]);var B="Error in function "+P.split(`
`)[0].split("<")[0]+": "+X.message;if(!Jt.console)throw new Error(B);Jt.console.error(B,X),Jt.alert&&alert(B)}},m.foo.bar=m,m.foo},jr=function(m,P){var B,X,st,gt,Ct,jt,Wt,oe,ne;if(st=(P=P||{}).sourceEncoding||"Unicode",Ct=P.outputEncoding,(P.autoencode||Ct)&&Ie[fe].metadata&&Ie[fe].metadata[st]&&Ie[fe].metadata[st].encoding&&(gt=Ie[fe].metadata[st].encoding,!Ct&&Ie[fe].encoding&&(Ct=Ie[fe].encoding),!Ct&&gt.codePages&&(Ct=gt.codePages[0]),typeof Ct=="string"&&(Ct=gt[Ct]),Ct)){for(Wt=!1,jt=[],B=0,X=m.length;B<X;B++)(oe=Ct[m.charCodeAt(B)])?jt.push(String.fromCharCode(oe)):jt.push(m[B]),jt[B].charCodeAt(0)>>8&&(Wt=!0);m=jt.join("")}for(B=m.length;Wt===void 0&&B!==0;)m.charCodeAt(B-1)>>8&&(Wt=!0),B--;if(!Wt)return m;for(jt=P.noBOM?[]:[254,255],B=0,X=m.length;B<X;B++){if((ne=(oe=m.charCodeAt(B))>>8)>>8)throw new Error("Character at position "+B+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jt.push(ne),jt.push(oe-(ne<<8))}return String.fromCharCode.apply(void 0,jt)},Gi=p.__private__.pdfEscape=p.pdfEscape=function(m,P){return jr(m,P).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fa=p.__private__.beginPage=function(m){St[++Xe]=[],ie[Xe]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},rl(Xe),mt(St[j])},sl=function(m,P){var B,X,st;switch(e=P||e,typeof m=="string"&&(B=_(m.toLowerCase()),Array.isArray(B)&&(X=B[0],st=B[1])),Array.isArray(m)&&(X=m[0]*Dt,st=m[1]*Dt),isNaN(X)&&(X=n[0],st=n[1]),(X>14400||st>14400)&&(Fe.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),X=Math.min(14400,X),st=Math.min(14400,st)),n=[X,st],e.substr(0,1)){case"l":st>X&&(n=[st,X]);break;case"p":X>st&&(n=[st,X])}Fa(n),ul(za),q(Ln),Ha!==0&&q(Ha+" J"),Va!==0&&q(Va+" j"),Pe.publish("addPage",{pageNumber:Xe})},Th=function(m){m>0&&m<=Xe&&(St.splice(m,1),ie.splice(m,1),Xe--,j>Xe&&(j=Xe),this.setPage(j))},rl=function(m){m>0&&m<=Xe&&(j=m)},Oh=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return St.length-1},al=function(m,P,B){var X,st=void 0;return B=B||{},m=m!==void 0?m:Ie[fe].fontName,P=P!==void 0?P:Ie[fe].fontStyle,X=m.toLowerCase(),He[X]!==void 0&&He[X][P]!==void 0?st=He[X][P]:He[m]!==void 0&&He[m][P]!==void 0?st=He[m][P]:B.disableWarning===!1&&Fe.warn("Unable to look up font label for font '"+m+"', '"+P+"'. Refer to getFontList() for available fonts."),st||B.noFallback||(st=He.times[P])==null&&(st=He.times.normal),st},Nh=p.__private__.putInfo=function(){var m=pi(),P=function(X){return X};for(var B in u!==null&&(P=Mi.encryptor(m,0)),q("<<"),q("/Producer ("+Gi(P("jsPDF "+$t.version))+")"),Qt)Qt.hasOwnProperty(B)&&Qt[B]&&q("/"+B.substr(0,1).toUpperCase()+B.substr(1)+" ("+Gi(P(Qt[B]))+")");q("/CreationDate ("+Gi(P(at))+")"),q(">>"),q("endobj")},Da=p.__private__.putCatalog=function(m){var P=(m=m||{}).rootDictionaryObjId||rs;switch(pi(),q("<<"),q("/Type /Catalog"),q("/Pages "+P+" 0 R"),Ft||(Ft="fullwidth"),Ft){case"fullwidth":q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":q("/OpenAction [3 0 R /Fit]");break;case"original":q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var B=""+Ft;B.substr(B.length-1)==="%"&&(Ft=parseInt(Ft)/100),typeof Ft=="number"&&q("/OpenAction [3 0 R /XYZ null null "+W(Ft)+"]")}switch(de||(de="continuous"),de){case"continuous":q("/PageLayout /OneColumn");break;case"single":q("/PageLayout /SinglePage");break;case"two":case"twoleft":q("/PageLayout /TwoColumnLeft");break;case"tworight":q("/PageLayout /TwoColumnRight")}ee&&q("/PageMode /"+ee),Pe.publish("putCatalog"),q(">>"),q("endobj")},Ih=p.__private__.putTrailer=function(){q("trailer"),q("<<"),q("/Size "+(Z+1)),q("/Root "+Z+" 0 R"),q("/Info "+(Z-1)+" 0 R"),u!==null&&q("/Encrypt "+Mi.oid+" 0 R"),q("/ID [ <"+rt+"> <"+rt+"> ]"),q(">>")},Rh=p.__private__.putHeader=function(){q("%PDF-"+v),q("%\xBA\xDF\xAC\xE0")},Fh=p.__private__.putXRef=function(){var m="0000000000";q("xref"),q("0 "+(Z+1)),q("0000000000 65535 f ");for(var P=1;P<=Z;P++)typeof nt[P]=="function"?q((m+nt[P]()).slice(-10)+" 00000 n "):nt[P]!==void 0?q((m+nt[P]).slice(-10)+" 00000 n "):q("0000000000 00000 n ")},as=p.__private__.buildDocument=function(){Yt(),mt(ct),Pe.publish("buildDocument"),Rh(),ar(),il(),el(),u!==null&&Eh(),Nh(),Da();var m=ht;return Fh(),Ih(),q("startxref"),q(""+m),q("%%EOF"),mt(St[j]),ct.join(`
`)},Br=p.__private__.getBlob=function(m){return new Blob([Ht(m)],{type:"application/pdf"})},zr=p.output=p.__private__.output=En(function(m,P){switch(typeof(P=P||{})=="string"?P={filename:P}:P.filename=P.filename||"generated.pdf",m){case void 0:return as();case"save":p.save(P.filename);break;case"arraybuffer":return Ht(as());case"blob":return Br(as());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(Br(as()))||void 0;Fe.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var B="",X=as();try{B=lp(X)}catch{B=lp(unescape(encodeURIComponent(X)))}return"data:application/pdf;filename="+P.filename+";base64,"+B;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var st="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';P.pdfObjectUrl&&(st=P.pdfObjectUrl,gt="");var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+st+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(P)+");<\/script></body></html>",jt=Jt.open();return jt!==null&&jt.document.write(Ct),jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(P.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+P.filename+'" width="500px" height="400px" /></body></html>',oe=Jt.open();if(oe!==null){oe.document.write(Wt);var ne=this;oe.document.documentElement.querySelector("#pdfViewer").onload=function(){oe.document.title=P.filename,oe.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ne.output("bloburl"))}}return oe}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",P)+'"></iframe></body></html>',Ve=Jt.open();if(Ve!==null&&(Ve.document.write(be),Ve.document.title=P.filename),Ve||typeof safari>"u")return Ve;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",P);default:return null}}),ol=function(m){return Array.isArray(rr)===!0&&rr.indexOf(m)>-1};switch(i){case"pt":Dt=1;break;case"mm":Dt=72/25.4;break;case"cm":Dt=72/2.54;break;case"in":Dt=72;break;case"px":Dt=ol("px_scaling")==1?.75:96/72;break;case"pc":case"em":Dt=12;break;case"ex":Dt=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Dt=i}var Mi=null;Mt(),Q();var Dh=function(m){return u!==null?Mi.encryptor(m,0):function(P){return P}},ll=p.__private__.getPageInfo=p.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ie[m].objId,pageNumber:m,pageContext:ie[m]}},Zt=p.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var P in ie)if(ie[P].objId===m)break;return ll(P)},jh=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ie[j].objId,pageNumber:j,pageContext:ie[j]}};p.addPage=function(){return sl.apply(this,arguments),this},p.setPage=function(){return rl.apply(this,arguments),mt.call(this,St[j]),this},p.insertPage=function(m){return this.addPage(),this.movePage(j,m),this},p.movePage=function(m,P){var B,X;if(m>P){B=St[m],X=ie[m];for(var st=m;st>P;st--)St[st]=St[st-1],ie[st]=ie[st-1];St[P]=B,ie[P]=X,this.setPage(P)}else if(m<P){B=St[m],X=ie[m];for(var gt=m;gt<P;gt++)St[gt]=St[gt+1],ie[gt]=ie[gt+1];St[P]=B,ie[P]=X,this.setPage(P)}return this},p.deletePage=function(){return Th.apply(this,arguments),this},p.__private__.text=p.text=function(m,P,B,X,st){var gt,Ct,jt,Wt,oe,ne,be,Ve,Ye,hi=(X=X||{}).scope||this;if(typeof m=="number"&&typeof P=="number"&&(typeof B=="string"||Array.isArray(B))){var ki=B;B=P,P=m,m=ki}if(arguments[3]instanceof Xt?(F("The transform parameter of text() with a Matrix value"),Ye=st):(jt=arguments[4],Wt=arguments[5],Ne(be=arguments[3])==="object"&&be!==null||(typeof jt=="string"&&(Wt=jt,jt=null),typeof be=="string"&&(Wt=be,be=null),typeof be=="number"&&(jt=be,be=null),X={flags:be,angle:jt,align:Wt})),isNaN(P)||isNaN(B)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return hi;var yi="",Mn=!1,en=typeof X.lineHeightFactor=="number"?X.lineHeightFactor:lr,Xn=hi.internal.scaleFactor;function bl(De){return De=De.split("	").join(Array(X.TabLen||9).join(" ")),Gi(De,be)}function Xa(De){for(var je,ii=De.concat(),gi=[],us=ii.length;us--;)typeof(je=ii.shift())=="string"?gi.push(je):Array.isArray(De)&&(je.length===1||je[1]===void 0&&je[2]===void 0)?gi.push(je[0]):gi.push([je[0],je[1],je[2]]);return gi}function Ya(De,je){var ii;if(typeof De=="string")ii=je(De)[0];else if(Array.isArray(De)){for(var gi,us,no=De.concat(),ea=[],xl=no.length;xl--;)typeof(gi=no.shift())=="string"?ea.push(je(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(us=je(gi[0],gi[1],gi[2]),ea.push([us[0],us[1],us[2]]));ii=ea}return ii}var Gr=!1,Ka=!0;if(typeof m=="string")Gr=!0;else if(Array.isArray(m)){var Ja=m.concat();Ct=[];for(var $r,Pi=Ja.length;Pi--;)(typeof($r=Ja.shift())!="string"||Array.isArray($r)&&typeof $r[0]!="string")&&(Ka=!1);Gr=Ka}if(Gr===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var Xr=kt/hi.internal.scaleFactor,Yr=Xr*(en-1);switch(X.baseline){case"bottom":B-=Yr;break;case"top":B+=Xr-Yr;break;case"hanging":B+=Xr-2*Yr;break;case"middle":B+=Xr/2-Yr}if((ne=X.maxWidth||0)>0&&(typeof m=="string"?m=hi.splitTextToSize(m,ne):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(De,je){return De.concat(hi.splitTextToSize(je,ne))},[]))),gt={text:m,x:P,y:B,options:X,mutex:{pdfEscape:Gi,activeFontKey:fe,fonts:Ie,activeFontSize:kt}},Pe.publish("preProcessText",gt),m=gt.text,jt=(X=gt.options).angle,!(Ye instanceof Xt)&&jt&&typeof jt=="number"){jt*=Math.PI/180,X.rotationDirection===0&&(jt=-jt),T===A.ADVANCED&&(jt=-jt);var Kr=Math.cos(jt),Qa=Math.sin(jt);Ye=new Xt(Kr,Qa,-Qa,Kr,0,0)}else jt&&jt instanceof Xt&&(Ye=jt);T!==A.ADVANCED||Ye||(Ye=Vn),(oe=X.charSpace||Vr)!==void 0&&(yi+=U(N(oe))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ve=X.horizontalScale)!==void 0&&(yi+=U(100*Ve)+` Tz
`),X.lang;var $i=-1,Xh=X.renderingMode!==void 0?X.renderingMode:X.stroke,Za=hi.internal.getCurrentPageInfo().pageContext;switch(Xh){case 0:case!1:case"fill":$i=0;break;case 1:case!0:case"stroke":$i=1;break;case 2:case"fillThenStroke":$i=2;break;case 3:case"invisible":$i=3;break;case 4:case"fillAndAddForClipping":$i=4;break;case 5:case"strokeAndAddPathForClipping":$i=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$i=6;break;case 7:case"addToPathForClipping":$i=7}var vl=Za.usedRenderingMode!==void 0?Za.usedRenderingMode:-1;$i!==-1?yi+=$i+` Tr
`:vl!==-1&&(yi+=`0 Tr
`),$i!==-1&&(Za.usedRenderingMode=$i),Wt=X.align||"left";var un,Jr=kt*en,yl=hi.internal.pageSize.getWidth(),wl=Ie[fe];oe=X.charSpace||Vr,ne=X.maxWidth||0,be=Object.assign({autoencode:!0,noBOM:!0},X.flags);var ks=[],ur=function(De){return hi.getStringUnitWidth(De,{font:wl,charSpace:oe,fontSize:kt,doKerning:!1})*kt/Xn};if(Object.prototype.toString.call(m)==="[object Array]"){var Xi;Ct=Xa(m),Wt!=="left"&&(un=Ct.map(ur));var zi,Ts=0;if(Wt==="right"){P-=un[0],m=[],Pi=Ct.length;for(var ls=0;ls<Pi;ls++)ls===0?(zi=$n(P),Xi=os(B)):(zi=N(Ts-un[ls]),Xi=-Jr),m.push([Ct[ls],zi,Xi]),Ts=un[ls]}else if(Wt==="center"){P-=un[0]/2,m=[],Pi=Ct.length;for(var cs=0;cs<Pi;cs++)cs===0?(zi=$n(P),Xi=os(B)):(zi=N((Ts-un[cs])/2),Xi=-Jr),m.push([Ct[cs],zi,Xi]),Ts=un[cs]}else if(Wt==="left"){m=[],Pi=Ct.length;for(var Qr=0;Qr<Pi;Qr++)m.push(Ct[Qr])}else if(Wt==="justify"&&wl.encoding==="Identity-H"){m=[],Pi=Ct.length,ne=ne!==0?ne:yl;for(var hs=0,ei=0;ei<Pi;ei++)if(Xi=ei===0?os(B):-Jr,zi=ei===0?$n(P):hs,ei<Pi-1){var to=N((ne-un[ei])/(Ct[ei].split(" ").length-1)),Ui=Ct[ei].split(" ");m.push([Ui[0]+" ",zi,Xi]),hs=0;for(var dn=1;dn<Ui.length;dn++){var Zr=(ur(Ui[dn-1]+" "+Ui[dn])-ur(Ui[dn]))*Xn+to;dn==Ui.length-1?m.push([Ui[dn],Zr,0]):m.push([Ui[dn]+" ",Zr,0]),hs-=Zr}}else m.push([Ct[ei],zi,Xi]);m.push(["",hs,0])}else{if(Wt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],Pi=Ct.length,ne=ne!==0?ne:yl,ei=0;ei<Pi;ei++)Xi=ei===0?os(B):-Jr,zi=ei===0?$n(P):0,ei<Pi-1?ks.push(U(N((ne-un[ei])/(Ct[ei].split(" ").length-1)))):ks.push(0),m.push([Ct[ei],zi,Xi])}}var _l=typeof X.R2L=="boolean"?X.R2L:qt;_l===!0&&(m=Ya(m,function(De,je,ii){return[De.split("").reverse().join(""),je,ii]})),gt={text:m,x:P,y:B,options:X,mutex:{pdfEscape:Gi,activeFontKey:fe,fonts:Ie,activeFontSize:kt}},Pe.publish("postProcessText",gt),m=gt.text,Mn=gt.mutex.isHex||!1;var eo=Ie[fe].encoding;eo!=="WinAnsiEncoding"&&eo!=="StandardEncoding"||(m=Ya(m,function(De,je,ii){return[bl(De),je,ii]})),Ct=Xa(m),m=[];for(var dr,fr,Os,pr=0,ta=1,gr=Array.isArray(Ct[0])?ta:pr,Ns="",io=function(De,je,ii){var gi="";return ii instanceof Xt?(ii=typeof X.angle=="number"?An(ii,new Xt(1,0,0,1,De,je)):An(new Xt(1,0,0,1,De,je),ii),T===A.ADVANCED&&(ii=An(new Xt(1,0,0,-1,0,0),ii)),gi=ii.join(" ")+` Tm
`):gi=U(De)+" "+U(je)+` Td
`,gi},fn=0;fn<Ct.length;fn++){switch(Ns="",gr){case ta:Os=(Mn?"<":"(")+Ct[fn][0]+(Mn?">":")"),dr=parseFloat(Ct[fn][1]),fr=parseFloat(Ct[fn][2]);break;case pr:Os=(Mn?"<":"(")+Ct[fn]+(Mn?">":")"),dr=$n(P),fr=os(B)}ks!==void 0&&ks[fn]!==void 0&&(Ns=ks[fn]+` Tw
`),fn===0?m.push(Ns+io(dr,fr,Ye)+Os):gr===pr?m.push(Ns+Os):gr===ta&&m.push(Ns+io(dr,fr,Ye)+Os)}m=gr===pr?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var pn=`BT
/`;return pn+=fe+" "+kt+` Tf
`,pn+=U(kt*en)+` TL
`,pn+=cr+`
`,pn+=yi,pn+=m,q(pn+="ET"),g[fe]=!0,hi};var Bh=p.__private__.clip=p.clip=function(m){return q(m==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Bh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return q("n"),this};var Gn=p.__private__.isValidStyle=function(m){var P=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(P=!0),P};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(m){return Gn(m)&&(c=m),this};var cl=p.__private__.getStyle=p.getStyle=function(m){var P=c;switch(m){case"D":case"S":P="S";break;case"F":P="f";break;case"FD":case"DF":P="B";break;case"f":case"f*":case"B":case"B*":P=m}return P},hl=p.close=function(){return q("h"),this};p.stroke=function(){return q("S"),this},p.fill=function(m){return Ur("f",m),this},p.fillEvenOdd=function(m){return Ur("f*",m),this},p.fillStroke=function(m){return Ur("B",m),this},p.fillStrokeEvenOdd=function(m){return Ur("B*",m),this};var Ur=function(m,P){Ne(P)==="object"?Uh(P,m):q(m)},ja=function(m){m===null||T===A.ADVANCED&&m===void 0||(m=cl(m),q(m))};function zh(m,P,B,X,st){var gt=new La(P||this.boundingBox,B||this.xStep,X||this.yStep,this.gState,st||this.matrix);gt.stream=this.stream;var Ct=m+"$$"+this.cloneIndex+++"$$";return Wi(Ct,gt),gt}var Uh=function(m,P){var B=sr[m.key],X=Ce[B];if(X instanceof Lr)q("q"),q(Hh(P)),X.gState&&p.setGState(X.gState),q(m.matrix.toString()+" cm"),q("/"+B+" sh"),q("Q");else if(X instanceof La){var st=new Xt(1,0,0,-1,0,Ms());m.matrix&&(st=st.multiply(m.matrix||Vn),B=zh.call(X,m.key,m.boundingBox,m.xStep,m.yStep,st).id),q("q"),q("/Pattern cs"),q("/"+B+" scn"),X.gState&&p.setGState(X.gState),q(P),q("Q")}},Hh=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ba=p.moveTo=function(m,P){return q(U(N(m))+" "+U(H(P))+" m"),this},or=p.lineTo=function(m,P){return q(U(N(m))+" "+U(H(P))+" l"),this},Es=p.curveTo=function(m,P,B,X,st,gt){return q([U(N(m)),U(H(P)),U(N(B)),U(H(X)),U(N(st)),U(H(gt)),"c"].join(" ")),this};p.__private__.line=p.line=function(m,P,B,X,st){if(isNaN(m)||isNaN(P)||isNaN(B)||isNaN(X)||!Gn(st))throw new Error("Invalid arguments passed to jsPDF.line");return T===A.COMPAT?this.lines([[B-m,X-P]],m,P,[1,1],st||"S"):this.lines([[B-m,X-P]],m,P,[1,1]).stroke()},p.__private__.lines=p.lines=function(m,P,B,X,st,gt){var Ct,jt,Wt,oe,ne,be,Ve,Ye,hi,ki,yi,Mn;if(typeof m=="number"&&(Mn=B,B=P,P=m,m=Mn),X=X||[1,1],gt=gt||!1,isNaN(P)||isNaN(B)||!Array.isArray(m)||!Array.isArray(X)||!Gn(st)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ba(P,B),Ct=X[0],jt=X[1],oe=m.length,ki=P,yi=B,Wt=0;Wt<oe;Wt++)(ne=m[Wt]).length===2?(ki=ne[0]*Ct+ki,yi=ne[1]*jt+yi,or(ki,yi)):(be=ne[0]*Ct+ki,Ve=ne[1]*jt+yi,Ye=ne[2]*Ct+ki,hi=ne[3]*jt+yi,ki=ne[4]*Ct+ki,yi=ne[5]*jt+yi,Es(be,Ve,Ye,hi,ki,yi));return gt&&hl(),ja(st),this},p.path=function(m){for(var P=0;P<m.length;P++){var B=m[P],X=B.c;switch(B.op){case"m":Ba(X[0],X[1]);break;case"l":or(X[0],X[1]);break;case"c":Es.apply(this,X);break;case"h":hl()}}return this},p.__private__.rect=p.rect=function(m,P,B,X,st){if(isNaN(m)||isNaN(P)||isNaN(B)||isNaN(X)||!Gn(st))throw new Error("Invalid arguments passed to jsPDF.rect");return T===A.COMPAT&&(X=-X),q([U(N(m)),U(H(P)),U(N(B)),U(N(X)),"re"].join(" ")),ja(st),this},p.__private__.triangle=p.triangle=function(m,P,B,X,st,gt,Ct){if(isNaN(m)||isNaN(P)||isNaN(B)||isNaN(X)||isNaN(st)||isNaN(gt)||!Gn(Ct))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[B-m,X-P],[st-B,gt-X],[m-st,P-gt]],m,P,[1,1],Ct,!0),this},p.__private__.roundedRect=p.roundedRect=function(m,P,B,X,st,gt,Ct){if(isNaN(m)||isNaN(P)||isNaN(B)||isNaN(X)||isNaN(st)||isNaN(gt)||!Gn(Ct))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jt=4/3*(Math.SQRT2-1);return st=Math.min(st,.5*B),gt=Math.min(gt,.5*X),this.lines([[B-2*st,0],[st*jt,0,st,gt-gt*jt,st,gt],[0,X-2*gt],[0,gt*jt,-st*jt,gt,-st,gt],[2*st-B,0],[-st*jt,0,-st,-gt*jt,-st,-gt],[0,2*gt-X],[0,-gt*jt,st*jt,-gt,st,-gt]],m+st,P,[1,1],Ct,!0),this},p.__private__.ellipse=p.ellipse=function(m,P,B,X,st){if(isNaN(m)||isNaN(P)||isNaN(B)||isNaN(X)||!Gn(st))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*B,Ct=4/3*(Math.SQRT2-1)*X;return Ba(m+B,P),Es(m+B,P-Ct,m+gt,P-X,m,P-X),Es(m-gt,P-X,m-B,P-Ct,m-B,P),Es(m-B,P+Ct,m-gt,P+X,m,P+X),Es(m+gt,P+X,m+B,P+Ct,m+B,P),ja(st),this},p.__private__.circle=p.circle=function(m,P,B,X){if(isNaN(m)||isNaN(P)||isNaN(B)||!Gn(X))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,P,B,B,X)},p.setFont=function(m,P,B){return B&&(P=Y(P,B)),fe=al(m,P,{disableWarning:!1}),this};var Vh=p.__private__.getFont=p.getFont=function(){return Ie[al.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var m,P,B={};for(m in He)if(He.hasOwnProperty(m))for(P in B[m]=[],He[m])He[m].hasOwnProperty(P)&&B[m].push(P);return B},p.addFont=function(m,P,B,X,st){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?st=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(B=Y(B,X)),st=st||"Identity-H",Ra.call(this,m,P,B,st)};var lr,za=r.lineWidth||.200025,Hr=p.__private__.getLineWidth=p.getLineWidth=function(){return za},ul=p.__private__.setLineWidth=p.setLineWidth=function(m){return za=m,q(U(N(m))+" w"),this};p.__private__.setLineDash=$t.API.setLineDash=$t.API.setLineDashPattern=function(m,P){if(m=m||[],P=P||0,isNaN(P)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(B){return U(N(B))}).join(" "),P=U(N(P)),q("["+m+"] "+P+" d"),this};var dl=p.__private__.getLineHeight=p.getLineHeight=function(){return kt*lr};p.__private__.getLineHeight=p.getLineHeight=function(){return kt*lr};var fl=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(lr=m),this},pl=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return lr};fl(r.lineHeight);var $n=p.__private__.getHorizontalCoordinate=function(m){return N(m)},os=p.__private__.getVerticalCoordinate=function(m){return T===A.ADVANCED?m:ie[j].mediaBox.topRightY-ie[j].mediaBox.bottomLeftY-N(m)},qh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(m){return U($n(m))},Ls=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(m){return U(os(m))},Ln=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Pn(Ln)},p.__private__.setStrokeColor=p.setDrawColor=function(m,P,B,X){return Ln=Sn({ch1:m,ch2:P,ch3:B,ch4:X,pdfColorType:"draw",precision:2}),q(Ln),this};var Ua=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Pn(Ua)},p.__private__.setFillColor=p.setFillColor=function(m,P,B,X){return Ua=Sn({ch1:m,ch2:P,ch3:B,ch4:X,pdfColorType:"fill",precision:2}),q(Ua),this};var cr=r.textColor||"0 g",Wh=p.__private__.getTextColor=p.getTextColor=function(){return Pn(cr)};p.__private__.setTextColor=p.setTextColor=function(m,P,B,X){return cr=Sn({ch1:m,ch2:P,ch3:B,ch4:X,pdfColorType:"text",precision:3}),this};var Vr=r.charSpace,Gh=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Vr||0)};p.__private__.setCharSpace=p.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Vr=m,this};var Ha=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(m){var P=p.CapJoinStyles[m];if(P===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ha=P,q(P+" J"),this};var Va=0;p.__private__.setLineJoin=p.setLineJoin=function(m){var P=p.CapJoinStyles[m];if(P===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Va=P,q(P+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return q(U(N(m))+" M"),this},p.GState=_h,p.setGState=function(m){(m=typeof m=="string"?$e[xn[m]]:gl(null,m)).equals(ss)||(q("/"+m.id+" gs"),ss=m)};var gl=function(m,P){if(!m||!xn[m]){var B=!1;for(var X in $e)if($e.hasOwnProperty(X)&&$e[X].equals(P)){B=!0;break}if(B)P=$e[X];else{var st="GS"+(Object.keys($e).length+1).toString(10);$e[st]=P,P.id=st}return m&&(xn[m]=P.id),Pe.publish("addGState",P),P}};p.addGState=function(m,P){return gl(m,P),this},p.saveGraphicsState=function(){return q("q"),zn.push({key:fe,size:kt,color:cr}),this},p.restoreGraphicsState=function(){q("Q");var m=zn.pop();return fe=m.key,kt=m.size,cr=m.color,ss=null,this},p.setCurrentTransformationMatrix=function(m){return q(m.toString()+" cm"),this},p.comment=function(m){return q("#"+m),this};var qr=function(m,P){var B=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return B},set:function(gt){isNaN(gt)||(B=parseFloat(gt))}});var X=P||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return X},set:function(gt){isNaN(gt)||(X=parseFloat(gt))}});var st="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return st},set:function(gt){st=gt.toString()}}),this},qa=function(m,P,B,X){qr.call(this,m,P),this.type="rect";var st=B||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return st},set:function(Ct){isNaN(Ct)||(st=parseFloat(Ct))}});var gt=X||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(Ct){isNaN(Ct)||(gt=parseFloat(Ct))}}),this},Wa=function(){this.page=Xe,this.currentPage=j,this.pages=St.slice(0),this.pagesContext=ie.slice(0),this.x=Li,this.y=_e,this.matrix=_n,this.width=hr(j),this.height=Ms(j),this.outputDestination=Ot,this.id="",this.objectNumber=-1};Wa.prototype.restore=function(){Xe=this.page,j=this.currentPage,ie=this.pagesContext,St=this.pages,Li=this.x,_e=this.y,_n=this.matrix,Ga(j,this.width),$a(j,this.height),Ot=this.outputDestination};var ml=function(m,P,B,X,st){Hn.push(new Wa),Xe=j=0,St=[],Li=m,_e=P,_n=st,Fa([B,X])},$h=function(m){if(Un[m])Hn.pop().restore();else{var P=new Wa,B="Xo"+(Object.keys(Ci).length+1).toString(10);P.id=B,Un[m]=B,Ci[B]=P,Pe.publish("addFormObject",P),Hn.pop().restore()}};for(var Wr in p.beginFormObject=function(m,P,B,X,st){return ml(m,P,B,X,st),this},p.endFormObject=function(m){return $h(m),this},p.doFormObject=function(m,P){var B=Ci[Un[m]];return q("q"),q(P.toString()+" cm"),q("/"+B.id+" Do"),q("Q"),this},p.getFormObject=function(m){var P=Ci[Un[m]];return{x:P.x,y:P.y,width:P.width,height:P.height,matrix:P.matrix}},p.save=function(m,P){return m=m||"generated.pdf",(P=P||{}).returnPromise=P.returnPromise||!1,P.returnPromise===!1?(Er(Br(as()),m),typeof Er.unload=="function"&&Jt.setTimeout&&setTimeout(Er.unload,911),this):new Promise(function(B,X){try{var st=Er(Br(as()),m);typeof Er.unload=="function"&&Jt.setTimeout&&setTimeout(Er.unload,911),B(st)}catch(gt){X(gt.message)}})},$t.API)$t.API.hasOwnProperty(Wr)&&(Wr==="events"&&$t.API.events.length?function(m,P){var B,X,st;for(st=P.length-1;st!==-1;st--)B=P[st][0],X=P[st][1],m.subscribe.apply(m,[B].concat(typeof X=="function"?[X]:X))}(Pe,$t.API.events):p[Wr]=$t.API[Wr]);var hr=p.getPageWidth=function(m){return(ie[m=m||j].mediaBox.topRightX-ie[m].mediaBox.bottomLeftX)/Dt},Ga=p.setPageWidth=function(m,P){ie[m].mediaBox.topRightX=P*Dt+ie[m].mediaBox.bottomLeftX},Ms=p.getPageHeight=function(m){return(ie[m=m||j].mediaBox.topRightY-ie[m].mediaBox.bottomLeftY)/Dt},$a=p.setPageHeight=function(m,P){ie[m].mediaBox.topRightY=P*Dt+ie[m].mediaBox.bottomLeftY};return p.internal={pdfEscape:Gi,getStyle:cl,getFont:Vh,getFontSize:It,getCharSpace:Gh,getTextColor:Wh,getLineHeight:dl,getLineHeightFactor:pl,getLineWidth:Hr,write:ae,getHorizontalCoordinate:$n,getVerticalCoordinate:os,getCoordinateString:qh,getVerticalCoordinateString:Ls,collections:{},newObject:pi,newAdditionalObject:Tr,newObjectDeferred:ci,newObjectDeferredBegin:tn,getFilters:qn,putStream:hn,events:Pe,scaleFactor:Dt,pageSize:{getWidth:function(){return hr(j)},setWidth:function(m){Ga(j,m)},getHeight:function(){return Ms(j)},setHeight:function(m){$a(j,m)}},encryptionOptions:u,encryption:Mi,getEncryptor:Dh,output:zr,getNumberOfPages:Oh,pages:St,out:q,f2:W,f3:S,getPageInfo:ll,getPageInfoByObjId:Zt,getCurrentPageInfo:jh,getPDFVersion:y,Point:qr,Rectangle:qa,Matrix:Xt,hasHotfix:ol},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return hr(j)},set:function(m){Ga(j,m)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ms(j)},set:function(m){$a(j,m)},enumerable:!0,configurable:!0}),kh.call(p,Pt),fe="F1",sl(n,e),Pe.publish("initialized"),p}Sa.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},Sa.prototype.toHexString=function(r){return r.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sa.prototype.hexToBytes=function(r){for(var t=[],e=0;e<r.length;e+=2)t.push(String.fromCharCode(parseInt(r.substr(e,2),16)));return t.join("")},Sa.prototype.processOwnerPassword=function(r,t){return hp(cp(t).substr(0,5),r)},Sa.prototype.encryptor=function(r,t){var e=cp(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return hp(e,i)}},_h.prototype.equals=function(r){var t,e="id,objectNumber,equals";if(!r||Ne(r)!==Ne(this))return!1;var i=0;for(t in this)if(!(e.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!r.hasOwnProperty(t)||this[t]!==r[t])return!1;i++}for(t in r)r.hasOwnProperty(t)&&e.indexOf(t)<0&&i--;return i===0},$t.API={events:[]},$t.version="3.0.1";var Ze=$t.API,pp=1,kr=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ca=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},re=function(r){return r.toFixed(2)},tr=function(r){return r.toFixed(5)};Ze.__acroform__={};var Zi=function(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r},sm=function(r){return r*pp},es=function(r){var t=new _m,e=Ut.internal.getHeight(r)||0,i=Ut.internal.getWidth(r)||0;return t.BBox=[0,0,Number(re(i)),Number(re(e))],t},y5=Ze.__acroform__.setBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<t},w5=Ze.__acroform__.clearBit=function(r,t){if(r=r||0,t=t||0,isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<t)},_5=Ze.__acroform__.getBit=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(r&1<<t)==0?0:1},ai=Ze.__acroform__.getBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _5(r,t-1)},oi=Ze.__acroform__.setBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return y5(r,t-1)},li=Ze.__acroform__.clearBitForPdf=function(r,t){if(isNaN(r)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return w5(r,t-1)},x5=Ze.__acroform__.calculateCoordinates=function(r,t){var e=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,n=r[0],s=r[1],a=r[2],o=r[3],l={};return l.lowerLeft_X=e(n)||0,l.lowerLeft_Y=i(s+o)||0,l.upperRight_X=e(n+a)||0,l.upperRight_Y=i(s)||0,[Number(re(l.lowerLeft_X)),Number(re(l.lowerLeft_Y)),Number(re(l.upperRight_X)),Number(re(l.upperRight_Y))]},A5=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var t=[],e=r._V||r.DV,i=up(r,e),n=r.scope.internal.getFont(r.fontName,r.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(r.scope.__private__.encodeColorString(r.color)),t.push("/"+n+" "+re(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=es(r);return s.scope=r.scope,s.stream=t.join(`
`),s}},up=function(r,t){var e=r.fontSize===0?r.maxFontSize:r.fontSize,i={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=r.multiline?n.map(function(S){return S.split(`
`)}):n.map(function(S){return[S]});var s=e,a=Ut.internal.getHeight(r)||0;a=a<0?-a:a;var o=Ut.internal.getWidth(r)||0;o=o<0?-o:o;var l=function(S,N,G){if(S+1<n.length){var H=N+" "+n[S+1][0];return ph(H,r,G).width<=o-4}return!1};s++;t:for(;s>0;){t="",s--;var c,u,d=ph("3",r,s).height,g=r.multiline?a-s:(a-d)/2,p=g+=2,v=0,y=0,x=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+ph(t,r,s=12).width+", FieldWidth:"+o+`
`;break}for(var _="",A=0,T=0;T<n.length;T++)if(n.hasOwnProperty(T)){var R=!1;if(n[T].length!==1&&x!==n[T].length-1){if((d+2)*(A+2)+2>a)continue t;_+=n[T][x],R=!0,y=T,T--}else{_=(_+=n[T][x]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var z=parseInt(T),Y=l(z,_,s),U=T>=n.length-1;if(Y&&!U){_+=" ",x=0;continue}if(Y||U){if(U)y=z;else if(r.multiline&&(d+2)*(A+2)+2>a)continue t}else{if(!r.multiline||(d+2)*(A+2)+2>a)continue t;y=z}}for(var F="",I=v;I<=y;I++){var W=n[I];if(r.multiline){if(I===y){F+=W[x]+" ",x=(x+1)%W.length;continue}if(I===v){F+=W[W.length-1]+" ";continue}}F+=W[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,u=ph(F,r,s).width,r.textAlign){case"right":c=o-u-2;break;case"center":c=(o-u)/2;break;case"left":default:c=2}t+=re(c)+" "+re(p)+` Td
`,t+="("+kr(F)+`) Tj
`,t+=-re(c)+` 0 Td
`,p=-(s+2),u=0,v=R?y:y+1,A++,_=""}break}return i.text=t,i.fontSize=s,i},ph=function(r,t,e){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(r,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:n}},C5={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},P5=function(r,t){var e={type:"reference",object:r};t.internal.getPageInfo(r.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})===void 0&&t.internal.getPageInfo(r.page).pageContext.annotations.push(e)},S5=function(r,t){for(var e in r)if(r.hasOwnProperty(e)){var i=e,n=r[e];t.internal.newObjectDeferredBegin(n.objId,!0),Ne(n)==="object"&&typeof n.putStream=="function"&&n.putStream(),delete r[i]}},E5=function(r,t){if(t.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(jn.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(C5)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pp=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new xm,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(e){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in i)if(i.hasOwnProperty(n)){var s=i[n];s.objId=void 0,s.hasAnnotation&&P5(s,e)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(e){if(e.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(e){(function(i,n){var s=!i;for(var a in i||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var o=i[a],l=[],c=o.Rect;if(o.Rect&&(o.Rect=x5(o.Rect,n)),n.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Ut.createDefaultAppearanceStream(o),Ne(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=c,o.hasAppearanceStream&&!o.appearanceStreamContent){var u=A5(o);l.push({key:"AP",value:"<</N "+u+">>"}),n.internal.acroformPlugin.xForms.push(u)}if(o.appearanceStreamContent){var d="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(d+="/"+g+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var v=p[a];typeof v=="function"&&(v=v.call(n,o)),d+="/"+a+" "+v+" ",n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(n,o)),d+="/"+a+" "+v,n.internal.acroformPlugin.xForms.indexOf(v)>=0||n.internal.acroformPlugin.xForms.push(v);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}n.internal.putStream({additionalKeyValues:l,objectId:o.objId}),n.internal.out("endobj")}s&&S5(n.internal.acroformPlugin.xForms,n)})(e,r)}),r.internal.acroformPlugin.isInitialized=!0}},wm=Ze.__acroform__.arrayToPdfArray=function(r,t,e){var i=function(a){return a};if(Array.isArray(r)){for(var n="[",s=0;s<r.length;s++)switch(s!==0&&(n+=" "),Ne(r[s])){case"boolean":case"number":case"object":n+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(t!==void 0&&e&&(i=e.internal.getEncryptor(t)),n+="("+kr(i(r[s].toString()))+")"):n+=r[s].toString()}return n+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},rp=function(r,t,e){var i=function(n){return n};return t!==void 0&&e&&(i=e.internal.getEncryptor(t)),(r=r||"").toString(),r="("+kr(i(r))+")"},is=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};is.prototype.toString=function(){return this.objId+" 0 R"},is.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},is.prototype.getKeyValueListForStream=function(){var r=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var e in t)if(Object.getOwnPropertyDescriptor(this,t[e]).configurable===!1){var i=t[e],n=this[i];n&&(Array.isArray(n)?r.push({key:i,value:wm(n,this.objId,this.scope)}):n instanceof is?(n.scope=this.scope,r.push({key:i,value:n.objId+" 0 R"})):typeof n!="function"&&r.push({key:i,value:n}))}return r};var _m=function(){is.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){r=e.trim()},get:function(){return r||null}})};Zi(_m,is);var xm=function(){is.call(this);var r,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+kr(e(r))+")"}},set:function(e){r=e}})};Zi(xm,is);var jn=function r(){is.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ai(t,3)},set:function(_){_?this.F=oi(t,3):this.F=li(t,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');e=_}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(_){i=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(_){i[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(_){i[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(_){i[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(_){i[3]=_}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof xh)return;s="FieldObject"+r.FieldNum++}var _=function(A){return A};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+kr(_(s))+")"},set:function(_){s=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(_){s=_}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(_){a=_}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/pp:c},set:function(_){c=_}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof xh||this instanceof Mr))return rp(d,this.objId,this.scope)},set:function(_){_=_.toString(),d=_}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ai?g:rp(g,this.objId,this.scope)},set:function(_){_=_.toString(),g=this instanceof Ai?_:_.substr(0,1)==="("?Ca(_.substr(1,_.length-2)):Ca(_)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ai?Ca(g.substr(1,g.length-1)):g},set:function(_){_=_.toString(),g=this instanceof Ai?"/"+_:_}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ai?p:rp(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=this instanceof Ai?_:_.substr(0,1)==="("?Ca(_.substr(1,_.length-2)):Ca(_)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ai?Ca(p.substr(1,p.length-1)):p},set:function(_){_=_.toString(),p=this instanceof Ai?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(_){_=!!_,y=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(_){v=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,1)},set:function(_){_?this.Ff=oi(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,2)},set:function(_){_?this.Ff=oi(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,3)},set:function(_){_?this.Ff=oi(this.Ff,3):this.Ff=li(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');x=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(x){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};Zi(jn,is);var Ma=function(){jn.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){r=e}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return wm(t,this.objId,this.scope)},set:function(e){var i,n;n=[],typeof(i=e)=="string"&&(n=function(s,a,o){o||(o=1);for(var l,c=[];l=a.exec(s);)c.push(l[o]);return c}(i,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();t.indexOf(e)!==-1&&(t.splice(t.indexOf(e),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,18)},set:function(e){e?this.Ff=oi(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,19)},set:function(e){this.combo===!0&&(e?this.Ff=oi(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,20)},set:function(e){e?(this.Ff=oi(this.Ff,20),t.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,22)},set:function(e){e?this.Ff=oi(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(e){e?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,27)},set:function(e){e?this.Ff=oi(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};Zi(Ma,jn);var ka=function(){Ma.call(this),this.fontName="helvetica",this.combo=!1};Zi(ka,Ma);var Ta=function(){ka.call(this),this.combo=!0};Zi(Ta,ka);var bh=function(){Ta.call(this),this.edit=!0};Zi(bh,Ta);var Ai=function(){jn.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,15)},set:function(e){e?this.Ff=oi(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,16)},set:function(e){e?this.Ff=oi(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,17)},set:function(e){e?this.Ff=oi(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(e){e?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var r,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(s){return s};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,n=[];for(i in n.push("<<"),t)n.push("/"+i+" ("+kr(e(t[i]))+")");return n.push(">>"),n.join(`
`)}},set:function(e){Ne(e)==="object"&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){typeof e=="string"&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}})};Zi(Ai,jn);var vh=function(){Ai.call(this),this.pushButton=!0};Zi(vh,Ai);var Oa=function(){Ai.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t!==void 0?t:[]}})};Zi(Oa,Ai);var xh=function(){var r,t;jn.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),i)a.push("/"+s+" ("+kr(n(i[s]))+")");return a.push(">>"),a.join(`
`)},set:function(n){Ne(n)==="object"&&(i=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(n){typeof n=="string"&&(i.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ut.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Zi(xh,jn),Oa.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var e=this.Kids[t];e.appearanceStreamContent=r.createAppearanceStream(e.optionName),e.caption=r.getCA()}},Oa.prototype.createOption=function(r){var t=new xh;return t.Parent=this,t.optionName=r,this.Kids.push(t),L5.call(this.scope,t),t};var yh=function(){Ai.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ut.CheckBox.createAppearanceStream()};Zi(yh,Ai);var Mr=function(){jn.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,13)},set:function(t){t?this.Ff=oi(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,21)},set:function(t){t?this.Ff=oi(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,23)},set:function(t){t?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,24)},set:function(t){t?this.Ff=oi(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,25)},set:function(t){t?this.Ff=oi(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,26)},set:function(t){t?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){Number.isInteger(t)&&(r=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Zi(Mr,jn);var wh=function(){Mr.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ai(this.Ff,14)},set:function(r){r?this.Ff=oi(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};Zi(wh,Mr);var Ut={CheckBox:{createAppearanceStream:function(){return{N:{On:Ut.CheckBox.YesNormal},D:{On:Ut.CheckBox.YesPushDown,Off:Ut.CheckBox.OffPushDown}}},YesPushDown:function(r){var t=es(r);t.scope=r.scope;var e=[],i=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),s=up(r,r.caption);return e.push("0.749023 g"),e.push("0 0 "+re(Ut.internal.getWidth(r))+" "+re(Ut.internal.getHeight(r))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+re(s.fontSize)+" Tf "+n),e.push("BT"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC"),t.stream=e.join(`
`),t},YesNormal:function(r){var t=es(r);t.scope=r.scope;var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),n=[],s=Ut.internal.getHeight(r),a=Ut.internal.getWidth(r),o=up(r,r.caption);return n.push("1 g"),n.push("0 0 "+re(a)+" "+re(s)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+re(a-1)+" "+re(s-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+e+" "+re(o.fontSize)+" Tf "+i),n.push(o.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(r){var t=es(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+re(Ut.internal.getWidth(r))+" "+re(Ut.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(r){var t={D:{Off:Ut.RadioButton.Circle.OffPushDown},N:{}};return t.N[r]=Ut.RadioButton.Circle.YesNormal,t.D[r]=Ut.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(r){var t=es(r);t.scope=r.scope;var e=[],i=Ut.internal.getWidth(r)<=Ut.internal.getHeight(r)?Ut.internal.getWidth(r)/4:Ut.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var n=Ut.internal.Bezier_C,s=Number((i*n).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+tr(Ut.internal.getWidth(r)/2)+" "+tr(Ut.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=es(r);t.scope=r.scope;var e=[],i=Ut.internal.getWidth(r)<=Ut.internal.getHeight(r)?Ut.internal.getWidth(r)/4:Ut.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),s=Number((n*Ut.internal.Bezier_C).toFixed(5)),a=Number((i*Ut.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+tr(Ut.internal.getWidth(r)/2)+" "+tr(Ut.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+tr(Ut.internal.getWidth(r)/2)+" "+tr(Ut.internal.getHeight(r)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),e.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),e.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),e.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(r){var t=es(r);t.scope=r.scope;var e=[],i=Ut.internal.getWidth(r)<=Ut.internal.getHeight(r)?Ut.internal.getWidth(r)/4:Ut.internal.getHeight(r)/4;i=Number((.9*i).toFixed(5));var n=Number((2*i).toFixed(5)),s=Number((n*Ut.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+tr(Ut.internal.getWidth(r)/2)+" "+tr(Ut.internal.getHeight(r)/2)+" cm"),e.push(n+" 0 m"),e.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),e.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),e.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),e.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),e.push("f"),e.push("Q"),t.stream=e.join(`
`),t}},Cross:{createAppearanceStream:function(r){var t={D:{Off:Ut.RadioButton.Cross.OffPushDown},N:{}};return t.N[r]=Ut.RadioButton.Cross.YesNormal,t.D[r]=Ut.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(r){var t=es(r);t.scope=r.scope;var e=[],i=Ut.internal.calculateCross(r);return e.push("q"),e.push("1 1 "+re(Ut.internal.getWidth(r)-2)+" "+re(Ut.internal.getHeight(r)-2)+" re"),e.push("W"),e.push("n"),e.push(re(i.x1.x)+" "+re(i.x1.y)+" m"),e.push(re(i.x2.x)+" "+re(i.x2.y)+" l"),e.push(re(i.x4.x)+" "+re(i.x4.y)+" m"),e.push(re(i.x3.x)+" "+re(i.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},YesPushDown:function(r){var t=es(r);t.scope=r.scope;var e=Ut.internal.calculateCross(r),i=[];return i.push("0.749023 g"),i.push("0 0 "+re(Ut.internal.getWidth(r))+" "+re(Ut.internal.getHeight(r))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+re(Ut.internal.getWidth(r)-2)+" "+re(Ut.internal.getHeight(r)-2)+" re"),i.push("W"),i.push("n"),i.push(re(e.x1.x)+" "+re(e.x1.y)+" m"),i.push(re(e.x2.x)+" "+re(e.x2.y)+" l"),i.push(re(e.x4.x)+" "+re(e.x4.y)+" m"),i.push(re(e.x3.x)+" "+re(e.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(r){var t=es(r);t.scope=r.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+re(Ut.internal.getWidth(r))+" "+re(Ut.internal.getHeight(r))+" re"),e.push("f"),t.stream=e.join(`
`),t}}},createDefaultAppearanceStream:function(r){var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,e=r.scope.__private__.encodeColorString(r.color);return"/"+t+" "+r.fontSize+" Tf "+e}};Ut.internal={Bezier_C:.551915024494,calculateCross:function(r){var t=Ut.internal.getWidth(r),e=Ut.internal.getHeight(r),i=Math.min(t,e);return{x1:{x:(t-i)/2,y:(e-i)/2+i},x2:{x:(t-i)/2+i,y:(e-i)/2},x3:{x:(t-i)/2,y:(e-i)/2},x4:{x:(t-i)/2+i,y:(e-i)/2+i}}}},Ut.internal.getWidth=function(r){var t=0;return Ne(r)==="object"&&(t=sm(r.Rect[2])),t},Ut.internal.getHeight=function(r){var t=0;return Ne(r)==="object"&&(t=sm(r.Rect[3])),t};var L5=Ze.addField=function(r){if(E5(this,r),!(r instanceof jn))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=r).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Ze.AcroFormChoiceField=Ma,Ze.AcroFormListBox=ka,Ze.AcroFormComboBox=Ta,Ze.AcroFormEditBox=bh,Ze.AcroFormButton=Ai,Ze.AcroFormPushButton=vh,Ze.AcroFormRadioButton=Oa,Ze.AcroFormCheckBox=yh,Ze.AcroFormTextField=Mr,Ze.AcroFormPasswordField=wh,Ze.AcroFormAppearance=Ut,Ze.AcroForm={ChoiceField:Ma,ListBox:ka,ComboBox:Ta,EditBox:bh,Button:Ai,PushButton:vh,RadioButton:Oa,CheckBox:yh,TextField:Mr,PasswordField:wh,Appearance:Ut},$t.AcroForm={ChoiceField:Ma,ListBox:ka,ComboBox:Ta,EditBox:bh,Button:Ai,PushButton:vh,RadioButton:Oa,CheckBox:yh,TextField:Mr,PasswordField:wh,Appearance:Ut};var _w=$t.AcroForm;function Am(r){return r.reduce(function(t,e,i){return t[e]=i,t},{})}(function(r){r.__addimage__={};var t="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=r.__addimage__.getImageFileTypeByImageData=function(S,N){var G,H,at,rt,it,Q=t;if((N=N||t)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(Y(S))for(it in e)for(at=e[it],G=0;G<at.length;G+=1){for(rt=!0,H=0;H<at[G].length;H+=1)if(at[G][H]!==void 0&&at[G][H]!==S[H]){rt=!1;break}if(rt===!0){Q=it;break}}else for(it in e)for(at=e[it],G=0;G<at.length;G+=1){for(rt=!0,H=0;H<at[G].length;H+=1)if(at[G][H]!==void 0&&at[G][H]!==S.charCodeAt(H)){rt=!1;break}if(rt===!0){Q=it;break}}return Q===t&&N!==t&&(Q=N),Q},n=function S(N){for(var G=this.internal.write,H=this.internal.putStream,at=(0,this.internal.getFilters)();at.indexOf("FlateEncode")!==-1;)at.splice(at.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var rt=[];if(rt.push({key:"Type",value:"/XObject"}),rt.push({key:"Subtype",value:"/Image"}),rt.push({key:"Width",value:N.width}),rt.push({key:"Height",value:N.height}),N.colorSpace===x.INDEXED?rt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(rt.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===x.DEVICE_CMYK&&rt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),rt.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&rt.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var it="",Q=0,ut=N.transparency.length;Q<ut;Q++)it+=N.transparency[Q]+" "+N.transparency[Q]+" ";rt.push({key:"Mask",value:"["+it+"]"})}N.sMask!==void 0&&rt.push({key:"SMask",value:N.objectId+1+" 0 R"});var pt=N.filter!==void 0?["/"+N.filter]:void 0;if(H({data:N.data,additionalKeyValues:rt,alreadyAppliedFilters:pt,objectId:N.objectId}),G("endobj"),"sMask"in N&&N.sMask!==void 0){var Mt="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,L={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:Mt,data:N.sMask};"filter"in N&&(L.filter=N.filter),S.call(this,L)}if(N.colorSpace===x.INDEXED){var j=this.internal.newObject();H({data:F(new Uint8Array(N.palette)),objectId:j}),G("endobj")}},s=function(){var S=this.internal.collections.addImage_images;for(var N in S)n.call(this,S[N])},a=function(){var S,N=this.internal.collections.addImage_images,G=this.internal.write;for(var H in N)G("/I"+(S=N[H]).index,S.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},l=function(){var S=this.internal.collections.addImage_images;return o.call(this),S},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(S){return typeof r["process"+S.toUpperCase()]=="function"},d=function(S){return Ne(S)==="object"&&S.nodeType===1},g=function(S,N){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var G=""+S.getAttribute("src");if(G.indexOf("data:image/")===0)return Xo(unescape(G).split("base64,").pop());var H=r.loadFile(G,!0);if(H!==void 0)return H}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var at;switch(N){case"PNG":at="image/png";break;case"WEBP":at="image/webp";break;case"JPEG":case"JPG":default:at="image/jpeg"}return Xo(S.toDataURL(at,1).split("base64,").pop())}},p=function(S){var N=this.internal.collections.addImage_images;if(N){for(var G in N)if(S===N[G].alias)return N[G]}},v=function(S,N,G){return S||N||(S=-96,N=-96),S<0&&(S=-1*G.width*72/S/this.internal.scaleFactor),N<0&&(N=-1*G.height*72/N/this.internal.scaleFactor),S===0&&(S=N*G.width/G.height),N===0&&(N=S*G.height/G.width),[S,N]},y=function(S,N,G,H,at,rt){var it=v.call(this,G,H,at),Q=this.internal.getCoordinateString,ut=this.internal.getVerticalCoordinateString,pt=l.call(this);if(G=it[0],H=it[1],pt[at.index]=at,rt){rt*=Math.PI/180;var Mt=Math.cos(rt),L=Math.sin(rt),j=function($){return $.toFixed(4)},V=[j(Mt),j(L),j(-1*L),j(Mt),0,0,"cm"]}this.internal.write("q"),rt?(this.internal.write([1,"0","0",1,Q(S),ut(N+H),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([Q(G),"0","0",Q(H),"0","0","cm"].join(" "))):this.internal.write([Q(G),"0","0",Q(H),Q(S),ut(N+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+at.index+" Do"),this.internal.write("Q")},x=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var _=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=r.__addimage__.sHashCode=function(S){var N,G,H=0;if(typeof S=="string")for(G=S.length,N=0;N<G;N++)H=(H<<5)-H+S.charCodeAt(N),H|=0;else if(Y(S))for(G=S.byteLength/2,N=0;N<G;N++)H=(H<<5)-H+S[N],H|=0;return H},T=r.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var N=!0;return S.length===0&&(N=!1),S.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(N=!1),N},R=r.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var N=S.indexOf(",");return N<0?null:S.substring(0,N).trim().endsWith("base64")?S.substring(N+1):null},z=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(S){return z()&&S instanceof ArrayBuffer};var Y=r.__addimage__.isArrayBufferView=function(S){return z()&&typeof Uint32Array<"u"&&(S instanceof Int8Array||S instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array)},U=r.__addimage__.binaryStringToUint8Array=function(S){for(var N=S.length,G=new Uint8Array(N),H=0;H<N;H++)G[H]=S.charCodeAt(H);return G},F=r.__addimage__.arrayBufferToBinaryString=function(S){for(var N="",G=Y(S)?S:new Uint8Array(S),H=0;H<G.length;H+=8192)N+=String.fromCharCode.apply(null,G.subarray(H,H+8192));return N};r.addImage=function(){var S,N,G,H,at,rt,it,Q,ut;if(typeof arguments[1]=="number"?(N=t,G=arguments[1],H=arguments[2],at=arguments[3],rt=arguments[4],it=arguments[5],Q=arguments[6],ut=arguments[7]):(N=arguments[1],G=arguments[2],H=arguments[3],at=arguments[4],rt=arguments[5],it=arguments[6],Q=arguments[7],ut=arguments[8]),Ne(S=arguments[0])==="object"&&!d(S)&&"imageData"in S){var pt=S;S=pt.imageData,N=pt.format||N||t,G=pt.x||G||0,H=pt.y||H||0,at=pt.w||pt.width||at,rt=pt.h||pt.height||rt,it=pt.alias||it,Q=pt.compression||Q,ut=pt.rotation||pt.angle||ut}var Mt=this.internal.getFilters();if(Q===void 0&&Mt.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(G)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var L=I.call(this,S,N,it,Q);return y.call(this,G,H,at,rt,L,ut),this};var I=function(S,N,G,H){var at,rt,it;if(typeof S=="string"&&i(S)===t){S=unescape(S);var Q=W(S,!1);(Q!==""||(Q=r.loadFile(S,!0))!==void 0)&&(S=Q)}if(d(S)&&(S=g(S,N)),N=i(S,N),!u(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((it=G)==null||it.length===0)&&(G=function(ut){return typeof ut=="string"||Y(ut)?A(ut):Y(ut.data)?A(ut.data):null}(S)),(at=p.call(this,G))||(z()&&(S instanceof Uint8Array||N==="RGBA"||(rt=S,S=U(S))),at=this["process"+N.toUpperCase()](S,c.call(this),G,function(ut){return ut&&typeof ut=="string"&&(ut=ut.toUpperCase()),ut in r.image_compression?ut:_.NONE}(H),rt)),!at)throw new Error("An unknown error occurred whilst processing the image.");return at},W=r.__addimage__.convertBase64ToBinaryString=function(S,N){N=typeof N!="boolean"||N;var G,H="";if(typeof S=="string"){var at;G=(at=R(S))!==null&&at!==void 0?at:S;try{H=Xo(G)}catch(rt){if(N)throw T(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+rt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};r.getImageProperties=function(S){var N,G,H="";if(d(S)&&(S=g(S)),typeof S=="string"&&i(S)===t&&((H=W(S,!1))===""&&(H=r.loadFile(S)||""),S=H),G=i(S),!u(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!z()||S instanceof Uint8Array||(S=U(S)),!(N=this["process"+G.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=G,N}})($t.API),function(r){var t=function(e){if(e!==void 0&&e!="")return!0};$t.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(e){for(var i,n,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(e.objId),c=e.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((i=c[d]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var g=0;g<c.length;g++){i=c[g];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(y.objId),A=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(n="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+p(_(i.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(_(A))+") >>",y.content=s;var T=y.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+a(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+T,i.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(y.objId,"0 R",x.objId,"0 R");break;case"freetext":n="/Rect ["+a(i.bounds.x)+" "+o(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var R=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+p(v(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var z=this.annotations._nameMap[i.options.name];i.options.pageNumber=z.page,i.options.top=z.y}else i.options.top||(i.options.top=0);if(n="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var Y=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+Y+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},r.link=function(e,i,n,s,a){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(e),y:c(i),w:l(e+n),h:c(i+s)},options:a,type:"link"})},r.textWithLink=function(e,i,n,s){var a,o,l=this.getTextWidth(e),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var u=this.splitTextToSize(e,o).length;a=Math.ceil(c*u)}else o=l,a=c;return this.text(e,i,n,s),n+=.2*c,s.align==="center"&&(i-=l/2),s.align==="right"&&(i-=l),this.link(i,n-c,o,a,s),l},r.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor}}($t.API),function(r){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},a=r.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=r.__arabicParser__.isArabicEndLetter=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length<=2},l=r.__arabicParser__.isArabicAlfLetter=function(y){return a(y)&&n.indexOf(y.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length>=1};var c=r.__arabicParser__.arabicLetterHasFinalForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length>=3};var u=r.__arabicParser__.arabicLetterHasMedialForm=function(y){return a(y)&&s(y)&&t[y.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(y){var x=0,_=e,A="",T=0;for(x=0;x<y.length;x+=1)_[y.charCodeAt(x)]!==void 0?(T++,typeof(_=_[y.charCodeAt(x)])=="number"&&(A+=String.fromCharCode(_),_=e,T=0),x===y.length-1&&(_=e,A+=y.charAt(x-(T-1)),x-=T-1,T=0)):(_=e,A+=y.charAt(x-T),x-=T,T=0);return A};r.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&i[y.charCodeAt(0)]!==void 0};var g=r.__arabicParser__.getCorrectForm=function(y,x,_){return a(y)?s(y)===!1?-1:!c(y)||!a(x)&&!a(_)||!a(_)&&o(x)||o(y)&&!a(x)||o(y)&&l(x)||o(y)&&o(x)?0:u(y)&&a(x)&&!o(x)&&a(_)&&c(_)?3:o(y)||!a(_)?1:2:-1},p=function(y){var x=0,_=0,A=0,T="",R="",z="",Y=(y=y||"").split("\\s+"),U=[];for(x=0;x<Y.length;x+=1){for(U.push(""),_=0;_<Y[x].length;_+=1)T=Y[x][_],R=Y[x][_-1],z=Y[x][_+1],a(T)?(A=g(T,R,z),U[x]+=A!==-1?String.fromCharCode(t[T.charCodeAt(0)][A]):T):U[x]+=T;U[x]=d(U[x])}return U.join(" ")},v=r.__arabicParser__.processArabic=r.processArabic=function(){var y,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(x)){var A=0;for(_=[],A=0;A<x.length;A+=1)Array.isArray(x[A])?_.push([p(x[A][0]),x[A][1],x[A][2]]):_.push([p(x[A])]);y=_}else y=p(x);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};r.events.push(["preProcessText",v])}($t.API),$t.API.autoPrint=function(r){var t;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(r){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(o){e=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,i){var n;if((e=e||"2d")!=="2d")return null;for(n in i)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=i[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}($t.API),function(r){var t={left:0,top:0,bottom:0,right:0},e=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(y){p=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(l){return i.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},r.getTextDimensions=function(l,c){i.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),g=c.scaleFactor||this.internal.scaleFactor,p=0,v=0,y=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var _=c.maxWidth;_>0?typeof l=="string"?l=this.splitTextToSize(l,_):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,R){return T.concat(x.splitTextToSize(R,_))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)p<(y=this.getStringUnitWidth(l[A],{font:d})*u)&&(p=y);return p!==0&&(v=l.length),{w:p/=g,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/g,0)}},r.cellAddPage=function(){i.call(this),this.addPage();var l=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=r.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&g&&(this.printHeaderRow(l.lineNumber,!0),l.y+=g[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,e===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};r.table=function(l,c,u,d,g){if(i.call(this),!u)throw new Error("No data for PDF table.");var p,v,y,x,_=[],A=[],T=[],R={},z={},Y=[],U=[],F=(g=g||{}).autoSize||!1,I=g.printHeaders!==!1,W=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,S=g.margins||Object.assign({width:this.getPageWidth()},t),N=typeof g.padding=="number"?g.padding:3,G=g.headerBackgroundColor||"#c8c8c8",H=g.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=W,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=H,this.setFontSize(W),d==null)A=_=Object.keys(u[0]),T=_.map(function(){return"left"});else if(Array.isArray(d)&&Ne(d[0])==="object")for(_=d.map(function(pt){return pt.name}),A=d.map(function(pt){return pt.prompt||pt.name||""}),T=d.map(function(pt){return pt.align||"left"}),p=0;p<d.length;p+=1)z[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(A=_=d,T=_.map(function(){return"left"}));if(F||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<_.length;p+=1){for(R[x=_[p]]=u.map(function(pt){return pt[x]}),this.setFont(void 0,"bold"),Y.push(this.getTextDimensions(A[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=R[x],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)Y.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[x]=Math.max.apply(null,Y)+N+N,Y=[]}if(I){var at={};for(p=0;p<_.length;p+=1)at[_[p]]={},at[_[p]].text=A[p],at[_[p]].align=T[p];var rt=o.call(this,at,z);U=_.map(function(pt){return new s(l,c,z[pt],rt,at[pt].text,void 0,at[pt].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var it=d.reduce(function(pt,Mt){return pt[Mt.name]=Mt.align,pt},{});for(p=0;p<u.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:u[p]},this);var Q=o.call(this,u[p],z);for(y=0;y<_.length;y+=1){var ut=u[p][_[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:y,data:ut},this),a.call(this,new s(l,c,z[_[y]],Q,ut,p+2,it[_[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var o=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(l).map(function(p){var v=l[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/g+u+u},this).reduce(function(p,v){return Math.max(p,v)},0)};r.setTableHeaderRow=function(l){i.call(this),this.internal.__cell__.tableHeaderRow=l},r.printHeaderRow=function(l,c){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(e=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,g.push(u)),u.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,u),this.setTextColor(v)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),e=!1}}($t.API);var Cm={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Pm=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],dp=Am(Pm),Sm=[100,200,300,400,500,600,700,800,900],M5=Am(Sm);function fp(r){var t=r.family.replace(/"|'/g,"").toLowerCase(),e=function(s){return Cm[s=s||"normal"]?s:"normal"}(r.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(r.weight),n=function(s){return typeof dp[s=s||"normal"]=="number"?s:"normal"}(r.stretch);return{family:t,style:e,weight:i,stretch:n,src:r.src||[],ref:r.ref||{name:t,style:[n,e,i].join(" ")}}}function rm(r,t,e,i){var n;for(n=e;n>=0&&n<t.length;n+=i)if(r[t[n]])return r[t[n]];for(n=e;n>=0&&n<t.length;n-=i)if(r[t[n]])return r[t[n]]}var k5={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},am={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function om(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function T5(r,t,e){for(var i=(e=e||{}).defaultFontFamily||"times",n=Object.assign({},k5,e.genericFontFamilies||{}),s=null,a=null,o=0;o<t.length;++o)if(n[(s=fp(t[o])).family]&&(s.family=n[s.family]),r.hasOwnProperty(s.family)){a=r[s.family];break}if(!(a=a||r[i]))throw new Error("Could not find a font-family for the rule '"+om(s)+"' and default family '"+i+"'.");if(a=function(l,c){if(c[l])return c[l];var u=dp[l],d=u<=dp.normal?-1:1,g=rm(c,Pm,u,d);if(!g)throw new Error("Could not find a matching font-stretch value for "+l);return g}(s.stretch,a),a=function(l,c){if(c[l])return c[l];for(var u=Cm[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,a),!(a=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=M5[l],d=rm(c,Sm,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+om(s)+"'.");return a}function lm(r){return r.trimLeft()}function O5(r,t){for(var e=0;e<r.length;){if(r.charAt(e)===t)return[r.substring(0,e),r.substring(e+1)];e+=1}return null}function N5(r){var t=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],r.substring(t[0].length)]}var gh,cm,hm,ap=["times"];(function(r){var t,e,i,n,s,a,o,l,c,u=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new l,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new a,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new a,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=L;Object.defineProperty(this,"pdf",{get:function(){return j}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(mt){V=!!mt}});var $=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $},set:function(mt){$=!!mt}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(mt){isNaN(mt)||(Z=mt)}});var nt=0;Object.defineProperty(this,"posY",{get:function(){return nt},set:function(mt){isNaN(mt)||(nt=mt)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(mt){var q;typeof mt=="number"?q=[mt,mt,mt,mt]:((q=new Array(4))[0]=mt[0],q[1]=mt.length>=2?mt[1]:q[0],q[2]=mt.length>=3?mt[2]:q[0],q[3]=mt.length>=4?mt[3]:q[1]),c.margin=q}});var ct=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ct},set:function(mt){ct=mt}});var ht=0;Object.defineProperty(this,"lastBreak",{get:function(){return ht},set:function(mt){ht=mt}});var Et=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Et},set:function(mt){Et=mt}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(mt){mt instanceof u&&(c=mt)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(mt){c.path=mt}});var St=[];Object.defineProperty(this,"ctxStack",{get:function(){return St},set:function(mt){St=mt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(mt){var q;q=g(mt),this.ctx.fillStyle=q.style,this.ctx.isFillTransparent=q.a===0,this.ctx.fillOpacity=q.a,this.pdf.setFillColor(q.r,q.g,q.b,{a:q.a}),this.pdf.setTextColor(q.r,q.g,q.b,{a:q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(mt){var q=g(mt);this.ctx.strokeStyle=q.style,this.ctx.isStrokeTransparent=q.a===0,this.ctx.strokeOpacity=q.a,q.a===0?this.pdf.setDrawColor(255,255,255):(q.a,this.pdf.setDrawColor(q.r,q.g,q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(mt){["butt","round","square"].indexOf(mt)!==-1&&(this.ctx.lineCap=mt,this.pdf.setLineCap(mt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(mt){isNaN(mt)||(this.ctx.lineWidth=mt,this.pdf.setLineWidth(mt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(mt){["bevel","round","miter"].indexOf(mt)!==-1&&(this.ctx.lineJoin=mt,this.pdf.setLineJoin(mt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(mt){isNaN(mt)||(this.ctx.miterLimit=mt,this.pdf.setMiterLimit(mt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(mt){this.ctx.textBaseline=mt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(mt){["right","end","center","left","start"].indexOf(mt)!==-1&&(this.ctx.textAlign=mt)}});var Rt=null;function Ot(mt,q){if(Rt===null){var ae=function(Ht){var Pt=[];return Object.keys(Ht).forEach(function(kt){Ht[kt].forEach(function(Ft){var It=null;switch(Ft){case"bold":It={family:kt,weight:"bold"};break;case"italic":It={family:kt,style:"italic"};break;case"bolditalic":It={family:kt,weight:"bold",style:"italic"};break;case"":case"normal":It={family:kt}}It!==null&&(It.ref={name:kt,style:Ft},Pt.push(It))})}),Pt}(mt.getFontList());Rt=function(Ht){for(var Pt={},kt=0;kt<Ht.length;++kt){var Ft=fp(Ht[kt]),It=Ft.family,qt=Ft.stretch,ee=Ft.style,ce=Ft.weight;Pt[It]=Pt[It]||{},Pt[It][qt]=Pt[It][qt]||{},Pt[It][qt][ee]=Pt[It][qt][ee]||{},Pt[It][qt][ee][ce]=Ft}return Pt}(ae.concat(q))}return Rt}var Yt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Yt},set:function(mt){Rt=null,Yt=mt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(mt){var q;if(this.ctx.font=mt,(q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(mt))!==null){var ae=q[1];q[2];var Ht=q[3],Pt=q[4];q[5];var kt=q[6],Ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pt)[2];Pt=Math.floor(Ft==="px"?parseFloat(Pt)*this.pdf.internal.scaleFactor:Ft==="em"?parseFloat(Pt)*this.pdf.getFontSize():parseFloat(Pt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pt);var It=function(Qt){var fe,Dt,Li=[],_e=Qt.trim();if(_e==="")return ap;if(_e in am)return[am[_e]];for(;_e!=="";){switch(Dt=null,fe=(_e=lm(_e)).charAt(0)){case'"':case"'":Dt=O5(_e.substring(1),fe);break;default:Dt=N5(_e)}if(Dt===null||(Li.push(Dt[0]),(_e=lm(Dt[1]))!==""&&_e.charAt(0)!==","))return ap;_e=_e.replace(/^,/,"")}return Li}(kt);if(this.fontFaces){var qt=T5(Ot(this.pdf,this.fontFaces),It.map(function(Qt){return{family:Qt,stretch:"normal",weight:Ht,style:ae}}));this.pdf.setFont(qt.ref.name,qt.ref.style)}else{var ee="";(Ht==="bold"||parseInt(Ht,10)>=700||ae==="bold")&&(ee="bold"),ae==="italic"&&(ee+="italic"),ee.length===0&&(ee="normal");for(var ce="",de={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ye=0;ye<It.length;ye++){if(this.pdf.internal.getFont(It[ye],ee,{noFallback:!0,disableWarning:!0})!==void 0){ce=It[ye];break}if(ee==="bolditalic"&&this.pdf.internal.getFont(It[ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ce=It[ye],ee="bold";else if(this.pdf.internal.getFont(It[ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ce=It[ye],ee="normal";break}}if(ce===""){for(var Te=0;Te<It.length;Te++)if(de[It[Te]]){ce=de[It[Te]];break}}ce=ce===""?"Times":ce,this.pdf.setFont(ce,ee)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(mt){this.ctx.globalCompositeOperation=mt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(mt){this.ctx.globalAlpha=mt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(mt){this.ctx.lineDashOffset=mt,Mt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(mt){this.ctx.lineDash=mt,Mt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(mt){this.ctx.ignoreClearRect=!!mt}})};d.prototype.setLineDash=function(L){this.lineDash=L},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){R.call(this,"fill",!1)},d.prototype.stroke=function(){R.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(L,j){if(isNaN(L)||isNaN(j))throw Fe.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new a(L,j));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(L,j)},d.prototype.closePath=function(){var L=new a(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Ne(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){L=new a(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(L.x,L.y)},d.prototype.lineTo=function(L,j){if(isNaN(L)||isNaN(j))throw Fe.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new a(L,j));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(V.x,V.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},d.prototype.quadraticCurveTo=function(L,j,V,$){if(isNaN(V)||isNaN($)||isNaN(L)||isNaN(j))throw Fe.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new a(V,$)),nt=this.ctx.transform.applyToPoint(new a(L,j));this.path.push({type:"qct",x1:nt.x,y1:nt.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new a(Z.x,Z.y)},d.prototype.bezierCurveTo=function(L,j,V,$,Z,nt){if(isNaN(Z)||isNaN(nt)||isNaN(L)||isNaN(j)||isNaN(V)||isNaN($))throw Fe.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ct=this.ctx.transform.applyToPoint(new a(Z,nt)),ht=this.ctx.transform.applyToPoint(new a(L,j)),Et=this.ctx.transform.applyToPoint(new a(V,$));this.path.push({type:"bct",x1:ht.x,y1:ht.y,x2:Et.x,y2:Et.y,x:ct.x,y:ct.y}),this.ctx.lastPoint=new a(ct.x,ct.y)},d.prototype.arc=function(L,j,V,$,Z,nt){if(isNaN(L)||isNaN(j)||isNaN(V)||isNaN($)||isNaN(Z))throw Fe.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(nt=!!nt,!this.ctx.transform.isIdentity){var ct=this.ctx.transform.applyToPoint(new a(L,j));L=ct.x,j=ct.y;var ht=this.ctx.transform.applyToPoint(new a(0,V)),Et=this.ctx.transform.applyToPoint(new a(0,0));V=Math.sqrt(Math.pow(ht.x-Et.x,2)+Math.pow(ht.y-Et.y,2))}Math.abs(Z-$)>=2*Math.PI&&($=0,Z=2*Math.PI),this.path.push({type:"arc",x:L,y:j,radius:V,startAngle:$,endAngle:Z,counterclockwise:nt})},d.prototype.arcTo=function(L,j,V,$,Z){throw new Error("arcTo not implemented.")},d.prototype.rect=function(L,j,V,$){if(isNaN(L)||isNaN(j)||isNaN(V)||isNaN($))throw Fe.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,j),this.lineTo(L+V,j),this.lineTo(L+V,j+$),this.lineTo(L,j+$),this.lineTo(L,j),this.lineTo(L+V,j),this.lineTo(L,j)},d.prototype.fillRect=function(L,j,V,$){if(isNaN(L)||isNaN(j)||isNaN(V)||isNaN($))throw Fe.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,j,V,$),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},d.prototype.strokeRect=function(L,j,V,$){if(isNaN(L)||isNaN(j)||isNaN(V)||isNaN($))throw Fe.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(L,j,V,$),this.stroke())},d.prototype.clearRect=function(L,j,V,$){if(isNaN(L)||isNaN(j)||isNaN(V)||isNaN($))throw Fe.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,j,V,$))},d.prototype.save=function(L){L=typeof L!="boolean"||L;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var $=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$}},d.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(j),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(L){var j,V,$,Z;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))j=0,V=0,$=0,Z=0;else{var nt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(nt!==null)j=parseInt(nt[1]),V=parseInt(nt[2]),$=parseInt(nt[3]),Z=1;else if((nt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)j=parseInt(nt[1]),V=parseInt(nt[2]),$=parseInt(nt[3]),Z=parseFloat(nt[4]);else{if(Z=1,typeof L=="string"&&L.charAt(0)!=="#"){var ct=new bm(L);L=ct.ok?ct.toHex():"#000000"}L.length===4?(j=L.substring(1,2),j+=j,V=L.substring(2,3),V+=V,$=L.substring(3,4),$+=$):(j=L.substring(1,3),V=L.substring(3,5),$=L.substring(5,7)),j=parseInt(j,16),V=parseInt(V,16),$=parseInt($,16)}}return{r:j,g:V,b:$,a:Z,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(L,j,V,$){if(isNaN(j)||isNaN(V)||typeof L!="string")throw Fe.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($=isNaN($)?void 0:$,!p.call(this)){var Z=Q(this.ctx.transform.rotation),nt=this.ctx.transform.scaleX;N.call(this,{text:L,x:j,y:V,scale:nt,angle:Z,align:this.textAlign,maxWidth:$})}},d.prototype.strokeText=function(L,j,V,$){if(isNaN(j)||isNaN(V)||typeof L!="string")throw Fe.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){$=isNaN($)?void 0:$;var Z=Q(this.ctx.transform.rotation),nt=this.ctx.transform.scaleX;N.call(this,{text:L,x:j,y:V,scale:nt,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:$})}},d.prototype.measureText=function(L){if(typeof L!="string")throw Fe.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,V=this.pdf.internal.scaleFactor,$=j.internal.getFontSize(),Z=j.getStringUnitWidth(L)*$/j.internal.scaleFactor,nt=function(ct){var ht=(ct=ct||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ht}}),this};return new nt({width:Z*=Math.round(96*V/72*1e4)/1e4})},d.prototype.scale=function(L,j){if(isNaN(L)||isNaN(j))throw Fe.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new l(L,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.rotate=function(L){if(isNaN(L))throw Fe.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},d.prototype.translate=function(L,j){if(isNaN(L)||isNaN(j))throw Fe.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new l(1,0,0,1,L,j);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.transform=function(L,j,V,$,Z,nt){if(isNaN(L)||isNaN(j)||isNaN(V)||isNaN($)||isNaN(Z)||isNaN(nt))throw Fe.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ct=new l(L,j,V,$,Z,nt);this.ctx.transform=this.ctx.transform.multiply(ct)},d.prototype.setTransform=function(L,j,V,$,Z,nt){L=isNaN(L)?1:L,j=isNaN(j)?0:j,V=isNaN(V)?0:V,$=isNaN($)?1:$,Z=isNaN(Z)?0:Z,nt=isNaN(nt)?0:nt,this.ctx.transform=new l(L,j,V,$,Z,nt)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(L,j,V,$,Z,nt,ct,ht,Et){var St=this.pdf.getImageProperties(L),Rt=1,Ot=1,Yt=1,mt=1;$!==void 0&&ht!==void 0&&(Yt=ht/$,mt=Et/Z,Rt=St.width/$*ht/$,Ot=St.height/Z*Et/Z),nt===void 0&&(nt=j,ct=V,j=0,V=0),$!==void 0&&ht===void 0&&(ht=$,Et=Z),$===void 0&&ht===void 0&&(ht=St.width,Et=St.height);for(var q,ae=this.ctx.transform.decompose(),Ht=Q(ae.rotate.shx),Pt=new l,kt=(Pt=(Pt=(Pt=Pt.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale)).applyToRectangle(new o(nt-j*Yt,ct-V*mt,$*Rt,Z*Ot)),Ft=x.call(this,kt),It=[],qt=0;qt<Ft.length;qt+=1)It.indexOf(Ft[qt])===-1&&It.push(Ft[qt]);if(T(It),this.autoPaging)for(var ee=It[0],ce=It[It.length-1],de=ee;de<ce+1;de++){this.pdf.setPage(de);var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Te=de===1?this.posY+this.margin[0]:this.margin[0],Qt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Dt=de===1?0:Qt+(de-2)*fe;if(this.ctx.clip_path.length!==0){var Li=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(q,this.posX+this.margin[3],-Dt+Te+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Li}var _e=JSON.parse(JSON.stringify(kt));_e=A([_e],this.posX+this.margin[3],-Dt+Te+this.ctx.prevPageLastElemOffset)[0];var _n=(de>ee||de<ce)&&y.call(this);_n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,fe,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",_e.x,_e.y,_e.w,_e.h,null,null,Ht),_n&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",kt.x,kt.y,kt.w,kt.h,null,null,Ht)};var x=function(L,j,V){var $=[];j=j||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":$.push(Math.floor((L.y+Z)/V)+1);break;case"arc":$.push(Math.floor((L.y+Z-L.radius)/V)+1),$.push(Math.floor((L.y+Z+L.radius)/V)+1);break;case"qct":var nt=ut(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);$.push(Math.floor((nt.y+Z)/V)+1),$.push(Math.floor((nt.y+nt.h+Z)/V)+1);break;case"bct":var ct=pt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);$.push(Math.floor((ct.y+Z)/V)+1),$.push(Math.floor((ct.y+ct.h+Z)/V)+1);break;case"rect":$.push(Math.floor((L.y+Z)/V)+1),$.push(Math.floor((L.y+L.h+Z)/V)+1)}for(var ht=0;ht<$.length;ht+=1)for(;this.pdf.internal.getNumberOfPages()<$[ht];)_.call(this);return $},_=function(){var L=this.fillStyle,j=this.strokeStyle,V=this.font,$=this.lineCap,Z=this.lineWidth,nt=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=j,this.font=V,this.lineCap=$,this.lineWidth=Z,this.lineJoin=nt},A=function(L,j,V){for(var $=0;$<L.length;$++)switch(L[$].type){case"bct":L[$].x2+=j,L[$].y2+=V;case"qct":L[$].x1+=j,L[$].y1+=V;case"mt":case"lt":case"arc":default:L[$].x+=j,L[$].y+=V}return L},T=function(L){return L.sort(function(j,V){return j-V})},R=function(L,j){for(var V,$,Z=this.fillStyle,nt=this.strokeStyle,ct=this.lineCap,ht=this.lineWidth,Et=Math.abs(ht*this.ctx.transform.scaleX),St=this.lineJoin,Rt=JSON.parse(JSON.stringify(this.path)),Ot=JSON.parse(JSON.stringify(this.path)),Yt=[],mt=0;mt<Ot.length;mt++)if(Ot[mt].x!==void 0)for(var q=x.call(this,Ot[mt]),ae=0;ae<q.length;ae+=1)Yt.indexOf(q[ae])===-1&&Yt.push(q[ae]);for(var Ht=0;Ht<Yt.length;Ht++)for(;this.pdf.internal.getNumberOfPages()<Yt[Ht];)_.call(this);if(T(Yt),this.autoPaging)for(var Pt=Yt[0],kt=Yt[Yt.length-1],Ft=Pt;Ft<kt+1;Ft++){this.pdf.setPage(Ft),this.fillStyle=Z,this.strokeStyle=nt,this.lineCap=ct,this.lineWidth=Et,this.lineJoin=St;var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Ft===1?this.posY+this.margin[0]:this.margin[0],ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ce=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],de=Ft===1?0:ee+(Ft-2)*ce;if(this.ctx.clip_path.length!==0){var ye=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(V,this.posX+this.margin[3],-de+qt+this.ctx.prevPageLastElemOffset),z.call(this,L,!0),this.path=ye}if($=JSON.parse(JSON.stringify(Rt)),this.path=A($,this.posX+this.margin[3],-de+qt+this.ctx.prevPageLastElemOffset),j===!1||Ft===0){var Te=(Ft>Pt||Ft<kt)&&y.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,ce,null).clip().discardPath()),z.call(this,L,j),Te&&this.pdf.restoreGraphicsState()}this.lineWidth=ht}else this.lineWidth=Et,z.call(this,L,j),this.lineWidth=ht;this.path=Rt},z=function(L,j){if((L!=="stroke"||j||!v.call(this))&&(L==="stroke"||j||!p.call(this))){for(var V,$,Z=[],nt=this.path,ct=0;ct<nt.length;ct++){var ht=nt[ct];switch(ht.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ht,deltas:[],abs:[]});break;case"lt":var Et=Z.length;if(nt[ct-1]&&!isNaN(nt[ct-1].x)&&(V=[ht.x-nt[ct-1].x,ht.y-nt[ct-1].y],Et>0)){for(;Et>=0;Et--)if(Z[Et-1].close!==!0&&Z[Et-1].begin!==!0){Z[Et-1].deltas.push(V),Z[Et-1].abs.push(ht);break}}break;case"bct":V=[ht.x1-nt[ct-1].x,ht.y1-nt[ct-1].y,ht.x2-nt[ct-1].x,ht.y2-nt[ct-1].y,ht.x-nt[ct-1].x,ht.y-nt[ct-1].y],Z[Z.length-1].deltas.push(V);break;case"qct":var St=nt[ct-1].x+2/3*(ht.x1-nt[ct-1].x),Rt=nt[ct-1].y+2/3*(ht.y1-nt[ct-1].y),Ot=ht.x+2/3*(ht.x1-ht.x),Yt=ht.y+2/3*(ht.y1-ht.y),mt=ht.x,q=ht.y;V=[St-nt[ct-1].x,Rt-nt[ct-1].y,Ot-nt[ct-1].x,Yt-nt[ct-1].y,mt-nt[ct-1].x,q-nt[ct-1].y],Z[Z.length-1].deltas.push(V);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ht)}}$=j?null:L==="stroke"?"stroke":"fill";for(var ae=!1,Ht=0;Ht<Z.length;Ht++)if(Z[Ht].arc)for(var Pt=Z[Ht].abs,kt=0;kt<Pt.length;kt++){var Ft=Pt[kt];Ft.type==="arc"?F.call(this,Ft.x,Ft.y,Ft.radius,Ft.startAngle,Ft.endAngle,Ft.counterclockwise,void 0,j,!ae):G.call(this,Ft.x,Ft.y),ae=!0}else if(Z[Ht].close===!0)this.pdf.internal.out("h"),ae=!1;else if(Z[Ht].begin!==!0){var It=Z[Ht].start.x,qt=Z[Ht].start.y;H.call(this,Z[Ht].deltas,It,qt),ae=!0}$&&I.call(this,$),j&&W.call(this)}},Y=function(L){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-V;case"top":return L+j-V;case"hanging":return L+j-2*V;case"middle":return L+j/2-V;case"ideographic":return L;case"alphabetic":default:return L}},U=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(j,V){this.colorStops.push([j,V])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(L,j,V,$,Z,nt,ct,ht,Et){for(var St=rt.call(this,V,$,Z,nt),Rt=0;Rt<St.length;Rt++){var Ot=St[Rt];Rt===0&&(Et?S.call(this,Ot.x1+L,Ot.y1+j):G.call(this,Ot.x1+L,Ot.y1+j)),at.call(this,L,j,Ot.x2,Ot.y2,Ot.x3,Ot.y3,Ot.x4,Ot.y4)}ht?W.call(this):I.call(this,ct)},I=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},W=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(L,j){this.pdf.internal.out(e(L)+" "+i(j)+" m")},N=function(L){var j;switch(L.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var V=this.pdf.getTextDimensions(L.text),$=Y.call(this,L.y),Z=U.call(this,$)-V.h,nt=this.ctx.transform.applyToPoint(new a(L.x,$)),ct=this.ctx.transform.decompose(),ht=new l;ht=(ht=(ht=ht.multiply(ct.translate)).multiply(ct.skew)).multiply(ct.scale);for(var Et,St,Rt,Ot=this.ctx.transform.applyToRectangle(new o(L.x,$,V.w,V.h)),Yt=ht.applyToRectangle(new o(L.x,Z,V.w,V.h)),mt=x.call(this,Yt),q=[],ae=0;ae<mt.length;ae+=1)q.indexOf(mt[ae])===-1&&q.push(mt[ae]);if(T(q),this.autoPaging)for(var Ht=q[0],Pt=q[q.length-1],kt=Ht;kt<Pt+1;kt++){this.pdf.setPage(kt);var Ft=kt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[2],ee=qt-this.margin[0],ce=this.pdf.internal.pageSize.width-this.margin[1],de=ce-this.margin[3],ye=kt===1?0:It+(kt-2)*ee;if(this.ctx.clip_path.length!==0){var Te=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Et,this.posX+this.margin[3],-1*ye+Ft),z.call(this,"fill",!0),this.path=Te}var Qt=A([JSON.parse(JSON.stringify(Yt))],this.posX+this.margin[3],-ye+Ft+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(St=this.pdf.internal.getFontSize(),this.pdf.setFontSize(St*L.scale),Rt=this.lineWidth,this.lineWidth=Rt*L.scale);var fe=this.autoPaging!=="text";if(fe||Qt.y+Qt.h<=qt){if(fe||Qt.y>=Ft&&Qt.x<=ce){var Dt=fe?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||ce-Qt.x)[0],Li=A([JSON.parse(JSON.stringify(Ot))],this.posX+this.margin[3],-ye+Ft+this.ctx.prevPageLastElemOffset)[0],_e=fe&&(kt>Ht||kt<Pt)&&y.call(this);_e&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],de,ee,null).clip().discardPath()),this.pdf.text(Dt,Li.x,Li.y,{angle:L.angle,align:j,renderingMode:L.renderingMode}),_e&&this.pdf.restoreGraphicsState()}}else Qt.y<qt&&(this.ctx.prevPageLastElemOffset+=qt-Qt.y);L.scale>=.01&&(this.pdf.setFontSize(St),this.lineWidth=Rt)}else L.scale>=.01&&(St=this.pdf.internal.getFontSize(),this.pdf.setFontSize(St*L.scale),Rt=this.lineWidth,this.lineWidth=Rt*L.scale),this.pdf.text(L.text,nt.x+this.posX,nt.y+this.posY,{angle:L.angle,align:j,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(St),this.lineWidth=Rt)},G=function(L,j,V,$){V=V||0,$=$||0,this.pdf.internal.out(e(L+V)+" "+i(j+$)+" l")},H=function(L,j,V){return this.pdf.lines(L,j,V,null,null)},at=function(L,j,V,$,Z,nt,ct,ht){this.pdf.internal.out([t(n(V+L)),t(s($+j)),t(n(Z+L)),t(s(nt+j)),t(n(ct+L)),t(s(ht+j)),"c"].join(" "))},rt=function(L,j,V,$){for(var Z=2*Math.PI,nt=Math.PI/2;j>V;)j-=Z;var ct=Math.abs(V-j);ct<Z&&$&&(ct=Z-ct);for(var ht=[],Et=$?-1:1,St=j;ct>1e-5;){var Rt=St+Et*Math.min(ct,nt);ht.push(it.call(this,L,St,Rt)),ct-=Math.abs(Rt-St),St=Rt}return ht},it=function(L,j,V){var $=(V-j)/2,Z=L*Math.cos($),nt=L*Math.sin($),ct=Z,ht=-nt,Et=ct*ct+ht*ht,St=Et+ct*Z+ht*nt,Rt=4/3*(Math.sqrt(2*Et*St)-St)/(ct*nt-ht*Z),Ot=ct-Rt*ht,Yt=ht+Rt*ct,mt=Ot,q=-Yt,ae=$+j,Ht=Math.cos(ae),Pt=Math.sin(ae);return{x1:L*Math.cos(j),y1:L*Math.sin(j),x2:Ot*Ht-Yt*Pt,y2:Ot*Pt+Yt*Ht,x3:mt*Ht-q*Pt,y3:mt*Pt+q*Ht,x4:L*Math.cos(V),y4:L*Math.sin(V)}},Q=function(L){return 180*L/Math.PI},ut=function(L,j,V,$,Z,nt){var ct=L+.5*(V-L),ht=j+.5*($-j),Et=Z+.5*(V-Z),St=nt+.5*($-nt),Rt=Math.min(L,Z,ct,Et),Ot=Math.max(L,Z,ct,Et),Yt=Math.min(j,nt,ht,St),mt=Math.max(j,nt,ht,St);return new o(Rt,Yt,Ot-Rt,mt-Yt)},pt=function(L,j,V,$,Z,nt,ct,ht){var Et,St,Rt,Ot,Yt,mt,q,ae,Ht,Pt,kt,Ft,It,qt,ee=V-L,ce=$-j,de=Z-V,ye=nt-$,Te=ct-Z,Qt=ht-nt;for(St=0;St<41;St++)Ht=(q=(Rt=L+(Et=St/40)*ee)+Et*((Yt=V+Et*de)-Rt))+Et*(Yt+Et*(Z+Et*Te-Yt)-q),Pt=(ae=(Ot=j+Et*ce)+Et*((mt=$+Et*ye)-Ot))+Et*(mt+Et*(nt+Et*Qt-mt)-ae),St==0?(kt=Ht,Ft=Pt,It=Ht,qt=Pt):(kt=Math.min(kt,Ht),Ft=Math.min(Ft,Pt),It=Math.max(It,Ht),qt=Math.max(qt,Pt));return new o(Math.round(kt),Math.round(Ft),Math.round(It-kt),Math.round(qt-Ft))},Mt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,j,V=(L=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:j}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})($t.API),function(r){var t=function(s){var a,o,l,c,u,d,g,p,v,y;for(/[^\x00-\xFF]/.test(s),o=[],l=0,c=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(y=u%85))/85)-(v=u%85))/85)-(p=u%85))/85)-(g=u%85))/85)%85,o.push(d+33,g+33,p+33,v+33,y+33)):o.push(122);return function(x,_){for(var A=_;A>0;A--)x.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},e=function(s){var a,o,l,c,u,d=String,g="length",p=255,v="charCodeAt",y="slice",x="replace";for(s[y](-2),s=s[y](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],c=0,u=(s+=a="uuuuu"[y](s[g]%5||5))[g];u>c;c+=5)o=52200625*(s[v](c)-33)+614125*(s[v](c+1)-33)+7225*(s[v](c+2)-33)+85*(s[v](c+3)-33)+(s[v](c+4)-33),l.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(_,A){for(var T=A;T>0;T--)_.pop()}(l,a[g]),d.fromCharCode.apply(d,l)},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",l=0;l<s.length;l+=2)o+=String.fromCharCode("0x"+(s[l]+s[l+1]));return o},n=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=dh(a)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};r.processDataByFilters=function(s,a){var o=0,l=s||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":l=e(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=n(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}($t.API),function(r){r.loadFile=function(t,e,i){return function(n,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(l,c,u){var d=new XMLHttpRequest,g=0,p=function(v){var y=v.length,x=[],_=String.fromCharCode;for(g=0;g<y;g+=1)x.push(_(255&v.charCodeAt(g)));return x.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(n,s,a)}catch{}return o}(t,e,i)},r.loadImageFile=r.loadFile}($t.API),function(r){function t(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):import("./chunk-ML5NEP2G.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function e(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):import("./chunk-4SDJLVZT.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var i=function(a){var o=Ne(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},n=function(a,o){var l=document.createElement(a);for(var c in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[c]=o.style[c];return l},s=function a(o){var l=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(l){switch(i(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(e).then(function(l){return this.set({src:n("div",{innerHTML:a,dompurify:l})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),g=c.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(l(g,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(o){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var g=0;g<c.length;++g){var p=c[g],v=p.src.find(function(y){return y.format==="truetype"});v&&l.addFont(v.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(i(a)!=="object")return this;var o=Object.keys(a||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=a[l]};switch(l){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[l]=a[l]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var l=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(l):l})},s.prototype.setMargin=function(a){return this.then(function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(a=a||$t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,l,c){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,l,c){return this.setProgress(a?this.progress.val+a:null,o||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(a,o){var l=this;return this.thenCore(a,o,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(a,o,l){l=l||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,a,o);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(l){o=o.thenCore(l)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,$t.getPageSize=function(a,o,l){if(Ne(a)==="object"){var c=a;a=c.orientation,o=c.unit||o,l=c.format||l}o=o||"mm",l=l||"a4",a=(""+(a||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+o}var p,v=0,y=0;if(g.hasOwnProperty(d))v=g[d][1]/u,y=g[d][0]/u;else try{v=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(a==="p"||a==="portrait")a="p",y>v&&(p=y,y=v,v=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",v>y&&(p=y,y=v,v=p)}return{width:y,height:v,unit:o,k:u,orientation:a}},r.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(fp):null;var l=new s(o);return o.worker?l:l.from(a).doCallback()}}($t.API),$t.API.addJS=function(r){return hm=r,this.internal.events.subscribe("postPutResources",function(){gh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),cm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+hm+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gh!==void 0&&cm!==void 0&&this.internal.out("/Names <</JavaScript "+gh+" 0 R>>")}),this},function(r){var t;r.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=e.outline.render().split(/\r\n/),s=0;s<n.length;s++){var a=n[s],o=i.exec(a);if(o!=null){var l=o[1];e.internal.newObjectDeferredBegin(l,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=e.internal.newObject();u.push(d);var g=e.internal.getPageInfo(s+1);e.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=e.internal.newObject();for(e.internal.write("<< /Names [ "),s=0;s<u.length;s++)e.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+p+" 0 R"),e.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),r.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,n,s){var a={title:n,options:s,children:[]};return i==null&&(i=this.root),i.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var n=0;n<i.children.length;n++)this.genIds_r(i.children[n])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var a=i.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var l=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var c=0;c<i.children.length;c++)this.renderItems(i.children[c])},e.outline.line=function(i){this.ctx.val+=i+`\r
`},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},e.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},e.outline.count_r=function(i,n){for(var s=0;s<n.children.length;s++)i.count++,this.count_r(i,n.children[s]);return i.count}}])}($t.API),function(r){var t=[192,193,194,195,196,197,198,199];r.processJPEG=function(e,i,n,s,a,o){var l,c=this.decode.DCT_DECODE,u=null;if(typeof e=="string"||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(l=function(d){for(var g,p=256*d.charCodeAt(4)+d.charCodeAt(5),v=d.length,y={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=p,t.indexOf(d.charCodeAt(x+1))!==-1){g=256*d.charCodeAt(x+5)+d.charCodeAt(x+6),y={width:256*d.charCodeAt(x+7)+d.charCodeAt(x+8),height:g,numcomponents:d.charCodeAt(x+9)};break}p=256*d.charCodeAt(x+2)+d.charCodeAt(x+3)}return y}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}u={data:e,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:c,index:i,alias:n}}return u}}($t.API);var Pa,mh,um,dm,fm,I5=function(){var r,t,e;function i(s){var a,o,l,c,u,d,g,p,v,y,x,_,A,T;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),v=function(){var R,z;for(z=[],R=0;R<4;++R)z.push(String.fromCharCode(this.data[this.pos++]));return z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,a-=4),s=d?.data||this.imgData,_=0;0<=a?_<a:_>a;0<=a?++_:--_)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(A=0;0<=y?A<y:A>y;0<=y?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(x=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,x.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,x.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(d,g,p,v){var y,x,_,A,T,R,z,Y,U,F,I,W,S,N,G,H,at,rt,it,Q,ut,pt=Math.ceil((c.width-d)/p),Mt=Math.ceil((c.height-g)/v),L=c.width==pt&&c.height==Mt;for(N=a*pt,W=L?o:new Uint8Array(N*Mt),R=s.length,S=0,x=0;S<Mt&&l<R;){switch(s[l++]){case 0:for(A=at=0;at<N;A=at+=1)W[x++]=s[l++];break;case 1:for(A=rt=0;rt<N;A=rt+=1)y=s[l++],T=A<a?0:W[x-a],W[x++]=(y+T)%256;break;case 2:for(A=it=0;it<N;A=it+=1)y=s[l++],_=(A-A%a)/a,G=S&&W[(S-1)*N+_*a+A%a],W[x++]=(G+y)%256;break;case 3:for(A=Q=0;Q<N;A=Q+=1)y=s[l++],_=(A-A%a)/a,T=A<a?0:W[x-a],G=S&&W[(S-1)*N+_*a+A%a],W[x++]=(y+Math.floor((T+G)/2))%256;break;case 4:for(A=ut=0;ut<N;A=ut+=1)y=s[l++],_=(A-A%a)/a,T=A<a?0:W[x-a],S===0?G=H=0:(G=W[(S-1)*N+_*a+A%a],H=_&&W[(S-1)*N+(_-1)*a+A%a]),z=T+G-H,Y=Math.abs(z-T),F=Math.abs(z-G),I=Math.abs(z-H),U=Y<=F&&Y<=I?T:F<=I?G:H,W[x++]=(y+U)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!L){var j=((g+S*v)*c.width+d)*a,V=S*N;for(A=0;A<pt;A+=1){for(var $=0;$<a;$+=1)o[j++]=W[V++];j+=(p-1)*a}}S++}}return s=Z0(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),o},i.prototype.decodePalette=function(){var s,a,o,l,c,u,d,g,p;for(o=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+o.length),l=0,s=0,a=d=0,g=o.length;d<g;a=d+=3)c[l++]=o[a],c[l++]=o[a+1],c[l++]=o[a+2],c[l++]=(p=u[s++])!=null?p:255;return c},i.prototype.copyToImageData=function(s,a){var o,l,c,u,d,g,p,v,y,x,_;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),l=4,o=!0),v=(c=s.data||s).length,d=y||a,u=g=0,l===1)for(;u<v;)p=y?4*a[u/4]:g,x=d[p++],c[u++]=x,c[u++]=x,c[u++]=x,c[u++]=o?d[p++]:255,g=p;else for(;u<v;)p=y?4*a[u/4]:g,c[u++]=d[p++],c[u++]=d[p++],c[u++]=d[p++],c[u++]=o?d[p++]:255,g=p},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var n=function(){if(Object.prototype.toString.call(Jt)==="[object Window]"){try{t=Jt.document.createElement("canvas"),e=t.getContext("2d")}catch{return!1}return!0}return!1};return n(),r=function(s){var a;if(n()===!0)return e.width=s.width,e.height=s.height,e.clearRect(0,0,s.width,s.height),e.putImageData(s,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var a,o,l,c,u,d,g,p;if(this.animation){for(p=[],o=u=0,d=(g=this.animation.frames).length;u<d;o=++u)a=g[o],l=s.createImageData(a.width,a.height),c=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(l,c),a.imageData=l,p.push(a.image=r(l));return p}},i.prototype.renderFrame=function(s,a){var o,l,c;return o=(l=this.animation.frames)[a],c=l[a-1],a===0&&s.clearRect(0,0,this.width,this.height),c?.disposeOp===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):c?.disposeOp===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(s){var a,o,l,c,u,d,g=this;return o=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(a=function(){var p,v;if(p=o++%c,v=l[p],g.renderFrame(s,p),c>1&&o/c<u)return g.animation._timeout=setTimeout(a,v.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},i}();function R5(r){var t=0;if(r[t++]!==71||r[t++]!==73||r[t++]!==70||r[t++]!==56||(r[t++]+1&253)!=56||r[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var e=r[t++]|r[t++]<<8,i=r[t++]|r[t++]<<8,n=r[t++],s=n>>7,a=1<<(7&n)+1;r[t++],r[t++];var o=null,l=null;s&&(o=t,l=a,t+=3*a);var c=!0,u=[],d=0,g=null,p=0,v=null;for(this.width=e,this.height=i;c&&t<r.length;)switch(r[t++]){case 33:switch(r[t++]){case 255:if(r[t]!==11||r[t+1]==78&&r[t+2]==69&&r[t+3]==84&&r[t+4]==83&&r[t+5]==67&&r[t+6]==65&&r[t+7]==80&&r[t+8]==69&&r[t+9]==50&&r[t+10]==46&&r[t+11]==48&&r[t+12]==3&&r[t+13]==1&&r[t+16]==0)t+=14,v=r[t++]|r[t++]<<8,t++;else for(t+=12;;){if(!((S=r[t++])>=0))throw Error("Invalid block size");if(S===0)break;t+=S}break;case 249:if(r[t++]!==4||r[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=r[t++];d=r[t++]|r[t++]<<8,g=r[t++],(1&y)==0&&(g=null),p=y>>2&7,t++;break;case 254:for(;;){if(!((S=r[t++])>=0))throw Error("Invalid block size");if(S===0)break;t+=S}break;default:throw new Error("Unknown graphic control label: 0x"+r[t-1].toString(16))}break;case 44:var x=r[t++]|r[t++]<<8,_=r[t++]|r[t++]<<8,A=r[t++]|r[t++]<<8,T=r[t++]|r[t++]<<8,R=r[t++],z=R>>6&1,Y=1<<(7&R)+1,U=o,F=l,I=!1;R>>7&&(I=!0,U=t,F=Y,t+=3*Y);var W=t;for(t++;;){var S;if(!((S=r[t++])>=0))throw Error("Invalid block size");if(S===0)break;t+=S}u.push({x,y:_,width:A,height:T,has_local_palette:I,palette_offset:U,palette_size:F,data_offset:W,data_length:t-W,transparent_index:g,interlaced:!!z,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+r[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(N){if(N<0||N>=u.length)throw new Error("Frame index out of range.");return u[N]},this.decodeAndBlitFrameBGRA=function(N,G){var H=this.frameInfo(N),at=H.width*H.height,rt=new Uint8Array(at);pm(r,H.data_offset,rt,at);var it=H.palette_offset,Q=H.transparent_index;Q===null&&(Q=256);var ut=H.width,pt=e-ut,Mt=ut,L=4*(H.y*e+H.x),j=4*((H.y+H.height)*e+H.x),V=L,$=4*pt;H.interlaced===!0&&($+=4*e*7);for(var Z=8,nt=0,ct=rt.length;nt<ct;++nt){var ht=rt[nt];if(Mt===0&&(Mt=ut,(V+=$)>=j&&($=4*pt+4*e*(Z-1),V=L+(ut+pt)*(Z<<1),Z>>=1)),ht===Q)V+=4;else{var Et=r[it+3*ht],St=r[it+3*ht+1],Rt=r[it+3*ht+2];G[V++]=Rt,G[V++]=St,G[V++]=Et,G[V++]=255}--Mt}},this.decodeAndBlitFrameRGBA=function(N,G){var H=this.frameInfo(N),at=H.width*H.height,rt=new Uint8Array(at);pm(r,H.data_offset,rt,at);var it=H.palette_offset,Q=H.transparent_index;Q===null&&(Q=256);var ut=H.width,pt=e-ut,Mt=ut,L=4*(H.y*e+H.x),j=4*((H.y+H.height)*e+H.x),V=L,$=4*pt;H.interlaced===!0&&($+=4*e*7);for(var Z=8,nt=0,ct=rt.length;nt<ct;++nt){var ht=rt[nt];if(Mt===0&&(Mt=ut,(V+=$)>=j&&($=4*pt+4*e*(Z-1),V=L+(ut+pt)*(Z<<1),Z>>=1)),ht===Q)V+=4;else{var Et=r[it+3*ht],St=r[it+3*ht+1],Rt=r[it+3*ht+2];G[V++]=Et,G[V++]=St,G[V++]=Rt,G[V++]=255}--Mt}}}function pm(r,t,e,i){for(var n=r[t++],s=1<<n,a=s+1,o=a+1,l=n+1,c=(1<<l)-1,u=0,d=0,g=0,p=r[t++],v=new Int32Array(4096),y=null;;){for(;u<16&&p!==0;)d|=r[t++]<<u,u+=8,p===1?p=r[t++]:--p;if(u<l)break;var x=d&c;if(d>>=l,u-=l,x!==s){if(x===a)break;for(var _=x<o?x:y,A=0,T=_;T>s;)T=v[T]>>8,++A;var R=T;if(g+A+(_!==x?1:0)>i)return void Fe.log("Warning, gif stream longer than expected.");e[g++]=R;var z=g+=A;for(_!==x&&(e[g++]=R),T=_;A--;)T=v[T],e[--z]=255&T,T>>=8;y!==null&&o<4096&&(v[o++]=y<<8|R,o>=c+1&&l<12&&(++l,c=c<<1|1)),y=x}else o=a+1,c=(1<<(l=n+1))-1,y=null}return g!==i&&Fe.log("Warning, gif stream shorter than expected."),e}function op(r){var t,e,i,n,s,a=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),g=new Array(65535),p=new Array(64),v=new Array(64),y=[],x=0,_=7,A=new Array(64),T=new Array(64),R=new Array(64),z=new Array(256),Y=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],at=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function rt(L,j){for(var V=0,$=0,Z=new Array,nt=1;nt<=16;nt++){for(var ct=1;ct<=L[nt];ct++)Z[j[$]]=[],Z[j[$]][0]=V,Z[j[$]][1]=nt,$++,V++;V*=2}return Z}function it(L){for(var j=L[0],V=L[1]-1;V>=0;)j&1<<V&&(x|=1<<_),V--,--_<0&&(x==255?(Q(255),Q(0)):Q(x),_=7,x=0)}function Q(L){y.push(L)}function ut(L){Q(L>>8&255),Q(255&L)}function pt(L,j,V,$,Z){for(var nt,ct=Z[0],ht=Z[240],Et=function(Pt,kt){var Ft,It,qt,ee,ce,de,ye,Te,Qt,fe,Dt=0;for(Qt=0;Qt<8;++Qt){Ft=Pt[Dt],It=Pt[Dt+1],qt=Pt[Dt+2],ee=Pt[Dt+3],ce=Pt[Dt+4],de=Pt[Dt+5],ye=Pt[Dt+6];var Li=Ft+(Te=Pt[Dt+7]),_e=Ft-Te,_n=It+ye,Ie=It-ye,He=qt+de,zn=qt-de,Ce=ee+ce,sr=ee-ce,$e=Li+Ce,xn=Li-Ce,ss=_n+He,Xe=_n-He;Pt[Dt]=$e+ss,Pt[Dt+4]=$e-ss;var ie=.707106781*(Xe+xn);Pt[Dt+2]=xn+ie,Pt[Dt+6]=xn-ie;var Pe=.382683433*(($e=sr+zn)-(Xe=Ie+_e)),rr=.5411961*$e+Pe,Ci=1.306562965*Xe+Pe,Un=.707106781*(ss=zn+Ie),Hn=_e+Un,Xt=_e-Un;Pt[Dt+5]=Xt+rr,Pt[Dt+3]=Xt-rr,Pt[Dt+1]=Hn+Ci,Pt[Dt+7]=Hn-Ci,Dt+=8}for(Dt=0,Qt=0;Qt<8;++Qt){Ft=Pt[Dt],It=Pt[Dt+8],qt=Pt[Dt+16],ee=Pt[Dt+24],ce=Pt[Dt+32],de=Pt[Dt+40],ye=Pt[Dt+48];var An=Ft+(Te=Pt[Dt+56]),Vn=Ft-Te,Wi=It+ye,pi=It-ye,ci=qt+de,tn=qt-de,Tr=ee+ce,rs=ee-ce,Cn=An+Tr,Pn=An-Tr,Sn=Wi+ci,qn=Wi-ci;Pt[Dt]=Cn+Sn,Pt[Dt+32]=Cn-Sn;var hn=.707106781*(qn+Pn);Pt[Dt+16]=Pn+hn,Pt[Dt+48]=Pn-hn;var Wn=.382683433*((Cn=rs+tn)-(qn=pi+Vn)),ar=.5411961*Cn+Wn,Or=1.306562965*qn+Wn,Nr=.707106781*(Sn=tn+pi),Ir=Vn+Nr,Rr=Vn-Nr;Pt[Dt+40]=Rr+ar,Pt[Dt+24]=Rr-ar,Pt[Dt+8]=Ir+Or,Pt[Dt+56]=Ir-Or,Dt++}for(Qt=0;Qt<64;++Qt)fe=Pt[Qt]*kt[Qt],p[Qt]=fe>0?fe+.5|0:fe-.5|0;return p}(L,j),St=0;St<64;++St)v[U[St]]=Et[St];var Rt=v[0]-V;V=v[0],Rt==0?it($[0]):(it($[g[nt=32767+Rt]]),it(d[nt]));for(var Ot=63;Ot>0&&v[Ot]==0;)Ot--;if(Ot==0)return it(ct),V;for(var Yt,mt=1;mt<=Ot;){for(var q=mt;v[mt]==0&&mt<=Ot;)++mt;var ae=mt-q;if(ae>=16){Yt=ae>>4;for(var Ht=1;Ht<=Yt;++Ht)it(ht);ae&=15}nt=32767+v[mt],it(Z[(ae<<4)+g[nt]]),it(d[nt]),mt++}return Ot!=63&&it(ct),V}function Mt(L){L=Math.min(Math.max(L,1),100),s!=L&&(function(j){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var Z=a((V[$]*j+50)/100);Z=Math.min(Math.max(Z,1),255),o[U[$]]=Z}for(var nt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ct=0;ct<64;ct++){var ht=a((nt[ct]*j+50)/100);ht=Math.min(Math.max(ht,1),255),l[U[ct]]=ht}for(var Et=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],St=0,Rt=0;Rt<8;Rt++)for(var Ot=0;Ot<8;Ot++)c[St]=1/(o[U[St]]*Et[Rt]*Et[Ot]*8),u[St]=1/(l[U[St]]*Et[Rt]*Et[Ot]*8),St++}(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),s=L)}this.encode=function(L,j){j&&Mt(j),y=new Array,x=0,_=7,ut(65496),ut(65504),ut(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),ut(1),ut(1),Q(0),Q(0),function(){ut(65499),ut(132),Q(0);for(var It=0;It<64;It++)Q(o[It]);Q(1);for(var qt=0;qt<64;qt++)Q(l[qt])}(),function(It,qt){ut(65472),ut(17),Q(8),ut(qt),ut(It),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(L.width,L.height),function(){ut(65476),ut(418),Q(0);for(var It=0;It<16;It++)Q(F[It+1]);for(var qt=0;qt<=11;qt++)Q(I[qt]);Q(16);for(var ee=0;ee<16;ee++)Q(W[ee+1]);for(var ce=0;ce<=161;ce++)Q(S[ce]);Q(1);for(var de=0;de<16;de++)Q(N[de+1]);for(var ye=0;ye<=11;ye++)Q(G[ye]);Q(17);for(var Te=0;Te<16;Te++)Q(H[Te+1]);for(var Qt=0;Qt<=161;Qt++)Q(at[Qt])}(),ut(65498),ut(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var V=0,$=0,Z=0;x=0,_=7,this.encode.displayName="_encode_";for(var nt,ct,ht,Et,St,Rt,Ot,Yt,mt,q=L.data,ae=L.width,Ht=L.height,Pt=4*ae,kt=0;kt<Ht;){for(nt=0;nt<Pt;){for(St=Pt*kt+nt,Ot=-1,Yt=0,mt=0;mt<64;mt++)Rt=St+(Yt=mt>>3)*Pt+(Ot=4*(7&mt)),kt+Yt>=Ht&&(Rt-=Pt*(kt+1+Yt-Ht)),nt+Ot>=Pt&&(Rt-=nt+Ot-Pt+4),ct=q[Rt++],ht=q[Rt++],Et=q[Rt++],A[mt]=(Y[ct]+Y[ht+256>>0]+Y[Et+512>>0]>>16)-128,T[mt]=(Y[ct+768>>0]+Y[ht+1024>>0]+Y[Et+1280>>0]>>16)-128,R[mt]=(Y[ct+1280>>0]+Y[ht+1536>>0]+Y[Et+1792>>0]>>16)-128;V=pt(A,c,V,t,i),$=pt(T,u,$,e,n),Z=pt(R,u,Z,e,n),nt+=32}kt+=8}if(_>=0){var Ft=[];Ft[1]=_+1,Ft[0]=(1<<_+1)-1,it(Ft)}return ut(65497),new Uint8Array(y)},r=r||50,function(){for(var L=String.fromCharCode,j=0;j<256;j++)z[j]=L(j)}(),t=rt(F,I),e=rt(N,G),i=rt(W,S),n=rt(H,at),function(){for(var L=1,j=2,V=1;V<=15;V++){for(var $=L;$<j;$++)g[32767+$]=V,d[32767+$]=[],d[32767+$][1]=V,d[32767+$][0]=$;for(var Z=-(j-1);Z<=-L;Z++)g[32767+Z]=V,d[32767+Z]=[],d[32767+Z][1]=V,d[32767+Z][0]=j-1+Z;L<<=1,j<<=1}}(),function(){for(var L=0;L<256;L++)Y[L]=19595*L,Y[L+256>>0]=38470*L,Y[L+512>>0]=7471*L+32768,Y[L+768>>0]=-11059*L,Y[L+1024>>0]=-21709*L,Y[L+1280>>0]=32768*L+8421375,Y[L+1536>>0]=-27439*L,Y[L+1792>>0]=-5329*L}(),Mt(r)}function Dn(r,t){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function gm(r){function t(F){if(!F)throw Error("assert :P")}function e(F,I,W){for(var S=0;4>S;S++)if(F[I+S]!=W.charCodeAt(S))return!0;return!1}function i(F,I,W,S,N){for(var G=0;G<N;G++)F[I+G]=W[S+G]}function n(F,I,W,S){for(var N=0;N<S;N++)F[I+N]=W}function s(F){return new Int32Array(F)}function a(F,I){for(var W=[],S=0;S<F;S++)W.push(new I);return W}function o(F,I){var W=[];return function S(N,G,H){for(var at=H[G],rt=0;rt<at&&(N.push(H.length>G+1?[]:new I),!(H.length<G+1));rt++)S(N[rt],G+1,H)}(W,0,F),W}var l=function(){var F=this;function I(h,f){for(var b=1<<f-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function W(h,f,b,w,C){t(!(w%b));do h[f+(w-=b)]=C;while(0<w)}function S(h,f,b,w,C){if(t(2328>=C),512>=C)var E=s(512);else if((E=s(C))==null)return 0;return function(M,k,O,D,K,ot){var lt,et,xt=k,ft=1<<O,J=s(16),tt=s(16);for(t(K!=0),t(D!=null),t(M!=null),t(0<O),et=0;et<K;++et){if(15<D[et])return 0;++J[D[et]]}if(J[0]==K)return 0;for(tt[1]=0,lt=1;15>lt;++lt){if(J[lt]>1<<lt)return 0;tt[lt+1]=tt[lt]+J[lt]}for(et=0;et<K;++et)lt=D[et],0<D[et]&&(ot[tt[lt]++]=et);if(tt[15]==1)return(D=new N).g=0,D.value=ot[0],W(M,xt,1,ft,D),ft;var yt,At=-1,_t=ft-1,Bt=0,Tt=1,Gt=1,Nt=1<<O;for(et=0,lt=1,K=2;lt<=O;++lt,K<<=1){if(Tt+=Gt<<=1,0>(Gt-=J[lt]))return 0;for(;0<J[lt];--J[lt])(D=new N).g=lt,D.value=ot[et++],W(M,xt+Bt,K,Nt,D),Bt=I(Bt,lt)}for(lt=O+1,K=2;15>=lt;++lt,K<<=1){if(Tt+=Gt<<=1,0>(Gt-=J[lt]))return 0;for(;0<J[lt];--J[lt]){if(D=new N,(Bt&_t)!=At){for(xt+=Nt,yt=1<<(At=lt)-O;15>At&&!(0>=(yt-=J[At]));)++At,yt<<=1;ft+=Nt=1<<(yt=At-O),M[k+(At=Bt&_t)].g=yt+O,M[k+At].value=xt-k-At}D.g=lt-O,D.value=ot[et++],W(M,xt+(Bt>>O),K,Nt,D),Bt=I(Bt,lt)}}return Tt!=2*tt[15]-1?0:ft}(h,f,b,w,C,E)}function N(){this.value=this.g=0}function G(){this.value=this.g=0}function H(){this.G=a(5,N),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Pi,G)}function at(h,f,b,w){t(h!=null),t(f!=null),t(2147483648>w),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=f,h.pa=b,h.Jd=f,h.Yc=b+w,h.Zc=4<=w?b+w-4+1:b,nt(h)}function rt(h,f){for(var b=0;0<f--;)b|=ht(h,128)<<f;return b}function it(h,f){var b=rt(h,f);return ct(h)?-b:b}function Q(h,f,b,w){var C,E=0;for(t(h!=null),t(f!=null),t(4294967288>w),h.Sb=w,h.Ra=0,h.u=0,h.h=0,4<w&&(w=4),C=0;C<w;++C)E+=f[b+C]<<8*C;h.Ra=E,h.bb=w,h.oa=f,h.pa=b}function ut(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Kr-8>>>0,++h.bb,h.u-=8;V(h)&&(h.h=1,h.u=0)}function pt(h,f){if(t(0<=f),!h.h&&f<=Yr){var b=j(h)&Xr[f];return h.u+=f,ut(h),b}return h.h=1,h.u=0}function Mt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function L(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(h){return h.Ra>>>(h.u&Kr-1)>>>0}function V(h){return t(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Kr}function $(h,f){h.u=f,h.h=V(h)}function Z(h){h.u>=Qa&&(t(h.u>=Qa),ut(h))}function nt(h){t(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(t(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function ct(h){return rt(h,1)}function ht(h,f){var b=h.Ca;0>h.b&&nt(h);var w=h.b,C=b*f>>>8,E=(h.I>>>w>C)+0;for(E?(b-=C,h.I-=C+1<<w>>>0):b=C+1,w=b,C=0;256<=w;)C+=8,w>>=8;return w=7^C+$i[w],h.b-=w,h.Ca=(b<<w)-1,E}function Et(h,f,b){h[f+0]=b>>24&255,h[f+1]=b>>16&255,h[f+2]=b>>8&255,h[f+3]=b>>0&255}function St(h,f){return h[f+0]<<0|h[f+1]<<8}function Rt(h,f){return St(h,f)|h[f+2]<<16}function Ot(h,f){return St(h,f)|St(h,f+2)<<16}function Yt(h,f){var b=1<<f;return t(h!=null),t(0<f),h.X=s(b),h.X==null?0:(h.Mb=32-f,h.Xa=f,1)}function mt(h,f){t(h!=null),t(f!=null),t(h.Xa==f.Xa),i(f.X,0,h.X,0,1<<f.Xa)}function q(){this.X=[],this.Xa=this.Mb=0}function ae(h,f,b,w){t(b!=null),t(w!=null);var C=b[0],E=w[0];return C==0&&(C=(h*E+f/2)/f),E==0&&(E=(f*C+h/2)/h),0>=C||0>=E?0:(b[0]=C,w[0]=E,1)}function Ht(h,f){return h+(1<<f)-1>>>f}function Pt(h,f){return((4278255360&h)+(4278255360&f)>>>0&4278255360)+((16711935&h)+(16711935&f)>>>0&16711935)>>>0}function kt(h,f){F[f]=function(b,w,C,E,M,k,O){var D;for(D=0;D<M;++D){var K=F[h](k[O+D-1],C,E+D);k[O+D]=Pt(b[w+D],K)}}}function Ft(){this.ud=this.hd=this.jd=0}function It(h,f){return((4278124286&(h^f))>>>1)+(h&f)>>>0}function qt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function ee(h,f){return qt(h+(h-f+.5>>1))}function ce(h,f,b){return Math.abs(f-b)-Math.abs(h-b)}function de(h,f,b,w,C,E,M){for(w=E[M-1],b=0;b<C;++b)E[M+b]=w=Pt(h[f+b],w)}function ye(h,f,b,w,C){var E;for(E=0;E<b;++E){var M=h[f+E],k=M>>8&255,O=16711935&(O=(O=16711935&M)+((k<<16)+k));w[C+E]=(4278255360&M)+O>>>0}}function Te(h,f){f.jd=h>>0&255,f.hd=h>>8&255,f.ud=h>>16&255}function Qt(h,f,b,w,C,E){var M;for(M=0;M<w;++M){var k=f[b+M],O=k>>>8,D=k,K=255&(K=(K=k>>>16)+((h.jd<<24>>24)*(O<<24>>24)>>>5));D=255&(D=(D=D+((h.hd<<24>>24)*(O<<24>>24)>>>5))+((h.ud<<24>>24)*(K<<24>>24)>>>5)),C[E+M]=(4278255360&k)+(K<<16)+D}}function fe(h,f,b,w,C){F[f]=function(E,M,k,O,D,K,ot,lt,et){for(O=ot;O<lt;++O)for(ot=0;ot<et;++ot)D[K++]=C(k[w(E[M++])])},F[h]=function(E,M,k,O,D,K,ot){var lt=8>>E.b,et=E.Ea,xt=E.K[0],ft=E.w;if(8>lt)for(E=(1<<E.b)-1,ft=(1<<lt)-1;M<k;++M){var J,tt=0;for(J=0;J<et;++J)J&E||(tt=w(O[D++])),K[ot++]=C(xt[tt&ft]),tt>>=lt}else F["VP8LMapColor"+b](O,D,xt,ft,K,ot,M,k,et)}}function Dt(h,f,b,w,C){for(b=f+b;f<b;){var E=h[f++];w[C++]=E>>16&255,w[C++]=E>>8&255,w[C++]=E>>0&255}}function Li(h,f,b,w,C){for(b=f+b;f<b;){var E=h[f++];w[C++]=E>>16&255,w[C++]=E>>8&255,w[C++]=E>>0&255,w[C++]=E>>24&255}}function _e(h,f,b,w,C){for(b=f+b;f<b;){var E=(M=h[f++])>>16&240|M>>12&15,M=M>>0&240|M>>28&15;w[C++]=E,w[C++]=M}}function _n(h,f,b,w,C){for(b=f+b;f<b;){var E=(M=h[f++])>>16&248|M>>13&7,M=M>>5&224|M>>3&31;w[C++]=E,w[C++]=M}}function Ie(h,f,b,w,C){for(b=f+b;f<b;){var E=h[f++];w[C++]=E>>0&255,w[C++]=E>>8&255,w[C++]=E>>16&255}}function He(h,f,b,w,C,E){if(E==0)for(b=f+b;f<b;)Et(w,((E=h[f++])[0]>>24|E[1]>>8&65280|E[2]<<8&16711680|E[3]<<24)>>>0),C+=32;else i(w,C,h,f,b)}function zn(h,f){F[f][0]=F[h+"0"],F[f][1]=F[h+"1"],F[f][2]=F[h+"2"],F[f][3]=F[h+"3"],F[f][4]=F[h+"4"],F[f][5]=F[h+"5"],F[f][6]=F[h+"6"],F[f][7]=F[h+"7"],F[f][8]=F[h+"8"],F[f][9]=F[h+"9"],F[f][10]=F[h+"10"],F[f][11]=F[h+"11"],F[f][12]=F[h+"12"],F[f][13]=F[h+"13"],F[f][14]=F[h+"0"],F[f][15]=F[h+"0"]}function Ce(h){return h==Jh||h==Qh||h==Ll||h==Zh}function sr(){this.eb=[],this.size=this.A=this.fb=0}function $e(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function xn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new sr,this.f.kb=new $e,this.sd=null}function ss(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Xe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ie(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Pe(h,f){var b=h.T,w=f.ba.f.RGBA,C=w.eb,E=w.fb+h.ka*w.A,M=mn[f.ba.S],k=h.y,O=h.O,D=h.f,K=h.N,ot=h.ea,lt=h.W,et=f.cc,xt=f.dc,ft=f.Mc,J=f.Nc,tt=h.ka,yt=h.ka+h.T,At=h.U,_t=At+1>>1;for(tt==0?M(k,O,null,null,D,K,ot,lt,D,K,ot,lt,C,E,null,null,At):(M(f.ec,f.fc,k,O,et,xt,ft,J,D,K,ot,lt,C,E-w.A,C,E,At),++b);tt+2<yt;tt+=2)et=D,xt=K,ft=ot,J=lt,K+=h.Rc,lt+=h.Rc,E+=2*w.A,M(k,(O+=2*h.fa)-h.fa,k,O,et,xt,ft,J,D,K,ot,lt,C,E-w.A,C,E,At);return O+=h.fa,h.j+yt<h.o?(i(f.ec,f.fc,k,O,At),i(f.cc,f.dc,D,K,_t),i(f.Mc,f.Nc,ot,lt,_t),b--):1&yt||M(k,O,null,null,D,K,ot,lt,D,K,ot,lt,C,E+w.A,null,null,At),b}function rr(h,f,b){var w=h.F,C=[h.J];if(w!=null){var E=h.U,M=f.ba.S,k=M==El||M==Ll;f=f.ba.f.RGBA;var O=[0],D=h.ka;O[0]=h.T,h.Kb&&(D==0?--O[0]:(--D,C[0]-=h.width),h.j+h.ka+h.T==h.o&&(O[0]=h.o-h.j-D));var K=f.eb;D=f.fb+D*f.A,h=je(w,C[0],h.width,E,O,K,D+(k?0:3),f.A),t(b==O),h&&Ce(M)&&pn(K,D,k,E,O,f.A)}return 0}function Ci(h){var f=h.ma,b=f.ba.S,w=11>b,C=b==Pl||b==Sl||b==El||b==Kh||b==12||Ce(b);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!Ka(f.Oa,h,C?11:12))return 0;if(C&&Ce(b)&&Ct(),h.da)alert("todo:use_scaling");else{if(w){if(f.Ib=ie,h.Kb){if(b=h.U+1>>1,f.memory=s(h.U+2*b),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+h.U,f.Mc=f.cc,f.Nc=f.dc+b,f.Ib=Pe,Ct()}}else alert("todo:EmitYUV");C&&(f.Jb=rr,w&&st())}if(w&&!Ep){for(h=0;256>h;++h)Xm[h]=89858*(h-128)+kl>>Ml,Jm[h]=-22014*(h-128)+kl,Km[h]=-45773*(h-128),Ym[h]=113618*(h-128)+kl>>Ml;for(h=ro;h<iu;++h)f=76283*(h-16)+kl>>Ml,Qm[h-ro]=en(f,255),Zm[h-ro]=en(f+8>>4,15);Ep=1}return 1}function Un(h){var f=h.ma,b=h.U,w=h.T;return t(!(1&h.ka)),0>=b||0>=w?0:(b=f.Ib(h,f),f.Jb!=null&&f.Jb(h,f,b),f.Dc+=b,1)}function Hn(h){h.ma.memory=null}function Xt(h,f,b,w){return pt(h,8)!=47?0:(f[0]=pt(h,14)+1,b[0]=pt(h,14)+1,w[0]=pt(h,1),pt(h,3)!=0?0:!h.h)}function An(h,f){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+pt(f,b)+1}function Vn(h,f){return 120<f?f-120:1<=(b=((b=Im[f-1])>>4)*h+(8-(15&b)))?b:1;var b}function Wi(h,f,b){var w=j(b),C=h[f+=255&w].g-8;return 0<C&&($(b,b.u+8),w=j(b),f+=h[f].value,f+=w&(1<<C)-1),$(b,b.u+h[f].g),h[f].value}function pi(h,f,b){return b.g+=h.g,b.value+=h.value<<f>>>0,t(8>=b.g),h.g}function ci(h,f,b){var w=h.xc;return t((f=w==0?0:h.vc[h.md*(b>>w)+(f>>w)])<h.Wb),h.Ya[f]}function tn(h,f,b,w){var C=h.ab,E=h.c*f,M=h.C;f=M+f;var k=b,O=w;for(w=h.Ta,b=h.Ua;0<C--;){var D=h.gc[C],K=M,ot=f,lt=k,et=O,xt=(O=w,k=b,D.Ea);switch(t(K<ot),t(ot<=D.nc),D.hc){case 2:vl(lt,et,(ot-K)*xt,O,k);break;case 0:var ft=K,J=ot,tt=O,yt=k,At=(Nt=D).Ea;ft==0&&(Xh(lt,et,null,null,1,tt,yt),de(lt,et+1,0,0,At-1,tt,yt+1),et+=At,yt+=At,++ft);for(var _t=1<<Nt.b,Bt=_t-1,Tt=Ht(At,Nt.b),Gt=Nt.K,Nt=Nt.w+(ft>>Nt.b)*Tt;ft<J;){var xe=Gt,Se=Nt,we=1;for(Za(lt,et,tt,yt-At,1,tt,yt);we<At;){var ge=(we&~Bt)+_t;ge>At&&(ge=At),(0,ks[xe[Se++]>>8&15])(lt,et+ +we,tt,yt+we-At,ge-we,tt,yt+we),we=ge}et+=At,yt+=At,++ft&Bt||(Nt+=Tt)}ot!=D.nc&&i(O,k-xt,O,k+(ot-K-1)*xt,xt);break;case 1:for(xt=lt,J=et,At=(lt=D.Ea)-(yt=lt&~(tt=(et=1<<D.b)-1)),ft=Ht(lt,D.b),_t=D.K,D=D.w+(K>>D.b)*ft;K<ot;){for(Bt=_t,Tt=D,Gt=new Ft,Nt=J+yt,xe=J+lt;J<Nt;)Te(Bt[Tt++],Gt),ur(Gt,xt,J,et,O,k),J+=et,k+=et;J<xe&&(Te(Bt[Tt++],Gt),ur(Gt,xt,J,At,O,k),J+=At,k+=At),++K&tt||(D+=ft)}break;case 3:if(lt==O&&et==k&&0<D.b){for(J=O,lt=xt=k+(ot-K)*xt-(yt=(ot-K)*Ht(D.Ea,D.b)),et=O,tt=k,ft=[],yt=(At=yt)-1;0<=yt;--yt)ft[yt]=et[tt+yt];for(yt=At-1;0<=yt;--yt)J[lt+yt]=ft[yt];un(D,K,ot,O,xt,O,k)}else un(D,K,ot,lt,et,O,k)}k=w,O=b}O!=b&&i(w,b,k,O,E)}function Tr(h,f){var b=h.V,w=h.Ba+h.c*h.C,C=f-h.C;if(t(f<=h.l.o),t(16>=C),0<C){var E=h.l,M=h.Ta,k=h.Ua,O=E.width;if(tn(h,C,b,w),C=k=[k],t((b=h.C)<(w=f)),t(E.v<E.va),w>E.o&&(w=E.o),b<E.j){var D=E.j-b;b=E.j,C[0]+=D*O}if(b>=w?b=0:(C[0]+=4*E.v,E.ka=b-E.j,E.U=E.va-E.v,E.T=w-b,b=1),b){if(k=k[0],11>(b=h.ca).S){var K=b.f.RGBA,ot=(w=b.S,C=E.U,E=E.T,D=K.eb,K.A),lt=E;for(K=K.fb+h.Ma*K.A;0<lt--;){var et=M,xt=k,ft=C,J=D,tt=K;switch(w){case Cl:Xi(et,xt,ft,J,tt);break;case Pl:zi(et,xt,ft,J,tt);break;case Jh:zi(et,xt,ft,J,tt),pn(J,tt,0,ft,1,0);break;case bp:cs(et,xt,ft,J,tt);break;case Sl:He(et,xt,ft,J,tt,1);break;case Qh:He(et,xt,ft,J,tt,1),pn(J,tt,0,ft,1,0);break;case El:He(et,xt,ft,J,tt,0);break;case Ll:He(et,xt,ft,J,tt,0),pn(J,tt,1,ft,1,0);break;case Kh:Ts(et,xt,ft,J,tt);break;case Zh:Ts(et,xt,ft,J,tt),De(J,tt,ft,1,0);break;case vp:ls(et,xt,ft,J,tt);break;default:t(0)}k+=O,K+=ot}h.Ma+=E}else alert("todo:EmitRescaledRowsYUVA");t(h.Ma<=b.height)}}h.C=f,t(h.C<=h.i)}function rs(h){var f;if(0<h.ua)return 0;for(f=0;f<h.Wb;++f){var b=h.Ya[f].G,w=h.Ya[f].H;if(0<b[1][w[1]+0].g||0<b[2][w[2]+0].g||0<b[3][w[3]+0].g)return 0}return 1}function Cn(h,f,b,w,C,E){if(h.Z!=0){var M=h.qd,k=h.rd;for(t(Rs[h.Z]!=null);f<b;++f)Rs[h.Z](M,k,w,C,w,C,E),M=w,k=C,C+=E;h.qd=M,h.rd=k}}function Pn(h,f){var b=h.l.ma,w=b.Z==0||b.Z==1?h.l.j:h.C;if(w=h.C<w?w:h.C,t(f<=h.l.o),f>w){var C=h.l.width,E=b.ca,M=b.tb+C*w,k=h.V,O=h.Ba+h.c*w,D=h.gc;t(h.ab==1),t(D[0].hc==3),yl(D[0],w,f,k,O,E,M),Cn(b,w,f,E,M,C)}h.C=h.Ma=f}function Sn(h,f,b,w,C,E,M){var k=h.$/w,O=h.$%w,D=h.m,K=h.s,ot=b+h.$,lt=ot;C=b+w*C;var et=b+w*E,xt=280+K.ua,ft=h.Pb?k:16777216,J=0<K.ua?K.Wa:null,tt=K.wc,yt=ot<et?ci(K,O,k):null;t(h.C<E),t(et<=C);var At=!1;t:for(;;){for(;At||ot<et;){var _t=0;if(k>=ft){var Bt=ot-b;t((ft=h).Pb),ft.wd=ft.m,ft.xd=Bt,0<ft.s.ua&&mt(ft.s.Wa,ft.s.vb),ft=k+Fm}if(O&tt||(yt=ci(K,O,k)),t(yt!=null),yt.Qb&&(f[ot]=yt.qb,At=!0),!At)if(Z(D),yt.jc){_t=D,Bt=f;var Tt=ot,Gt=yt.pd[j(_t)&Pi-1];t(yt.jc),256>Gt.g?($(_t,_t.u+Gt.g),Bt[Tt]=Gt.value,_t=0):($(_t,_t.u+Gt.g-256),t(256<=Gt.value),_t=Gt.value),_t==0&&(At=!0)}else _t=Wi(yt.G[0],yt.H[0],D);if(D.h)break;if(At||256>_t){if(!At)if(yt.nd)f[ot]=(yt.qb|_t<<8)>>>0;else{if(Z(D),At=Wi(yt.G[1],yt.H[1],D),Z(D),Bt=Wi(yt.G[2],yt.H[2],D),Tt=Wi(yt.G[3],yt.H[3],D),D.h)break;f[ot]=(Tt<<24|At<<16|_t<<8|Bt)>>>0}if(At=!1,++ot,++O>=w&&(O=0,++k,M!=null&&k<=E&&!(k%16)&&M(h,k),J!=null))for(;lt<ot;)_t=f[lt++],J.X[(506832829*_t&4294967295)>>>J.Mb]=_t}else if(280>_t){if(_t=An(_t-256,D),Bt=Wi(yt.G[4],yt.H[4],D),Z(D),Bt=Vn(w,Bt=An(Bt,D)),D.h)break;if(ot-b<Bt||C-ot<_t)break t;for(Tt=0;Tt<_t;++Tt)f[ot+Tt]=f[ot+Tt-Bt];for(ot+=_t,O+=_t;O>=w;)O-=w,++k,M!=null&&k<=E&&!(k%16)&&M(h,k);if(t(ot<=C),O&tt&&(yt=ci(K,O,k)),J!=null)for(;lt<ot;)_t=f[lt++],J.X[(506832829*_t&4294967295)>>>J.Mb]=_t}else{if(!(_t<xt))break t;for(At=_t-280,t(J!=null);lt<ot;)_t=f[lt++],J.X[(506832829*_t&4294967295)>>>J.Mb]=_t;_t=ot,t(!(At>>>(Bt=J).Xa)),f[_t]=Bt.X[At],At=!0}At||t(D.h==V(D))}if(h.Pb&&D.h&&ot<C)t(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&mt(h.s.vb,h.s.Wa);else{if(D.h)break t;M?.(h,k>E?E:k),h.a=0,h.$=ot-b}return 1}return h.a=3,0}function qn(h){t(h!=null),h.vc=null,h.yc=null,h.Ya=null;var f=h.Wa;f!=null&&(f.X=null),h.vb=null,t(h!=null)}function hn(){var h=new $h;return h==null?null:(h.a=0,h.xb=_p,zn("Predictor","VP8LPredictors"),zn("Predictor","VP8LPredictors_C"),zn("PredictorAdd","VP8LPredictorsAdd"),zn("PredictorAdd","VP8LPredictorsAdd_C"),vl=ye,ur=Qt,Xi=Dt,zi=Li,Ts=_e,ls=_n,cs=Ie,F.VP8LMapColor32b=Jr,F.VP8LMapColor8b=wl,h)}function Wn(h,f,b,w,C){var E=1,M=[h],k=[f],O=w.m,D=w.s,K=null,ot=0;t:for(;;){if(b)for(;E&&pt(O,1);){var lt=M,et=k,xt=w,ft=1,J=xt.m,tt=xt.gc[xt.ab],yt=pt(J,2);if(xt.Oc&1<<yt)E=0;else{switch(xt.Oc|=1<<yt,tt.hc=yt,tt.Ea=lt[0],tt.nc=et[0],tt.K=[null],++xt.ab,t(4>=xt.ab),yt){case 0:case 1:tt.b=pt(J,3)+2,ft=Wn(Ht(tt.Ea,tt.b),Ht(tt.nc,tt.b),0,xt,tt.K),tt.K=tt.K[0];break;case 3:var At,_t=pt(J,8)+1,Bt=16<_t?0:4<_t?1:2<_t?2:3;if(lt[0]=Ht(tt.Ea,Bt),tt.b=Bt,At=ft=Wn(_t,1,0,xt,tt.K)){var Tt,Gt=_t,Nt=tt,xe=1<<(8>>Nt.b),Se=s(xe);if(Se==null)At=0;else{var we=Nt.K[0],ge=Nt.w;for(Se[0]=Nt.K[0][0],Tt=1;Tt<1*Gt;++Tt)Se[Tt]=Pt(we[ge+Tt],Se[Tt-1]);for(;Tt<4*xe;++Tt)Se[Tt]=0;Nt.K[0]=null,Nt.K[0]=Se,At=1}}ft=At;break;case 2:break;default:t(0)}E=ft}}if(M=M[0],k=k[0],E&&pt(O,1)&&!(E=1<=(ot=pt(O,4))&&11>=ot)){w.a=3;break t}var Re;if(Re=E)e:{var Oe,le,ui,Yi=w,di=M,Ki=k,Ee=ot,sn=b,rn=Yi.m,wi=Yi.s,Si=[null],Hi=1,bn=0,Yn=Rm[Ee];i:for(;;){if(sn&&pt(rn,1)){var _i=pt(rn,3)+2,fs=Ht(di,_i),mr=Ht(Ki,_i),ia=fs*mr;if(!Wn(fs,mr,0,Yi,Si))break i;for(Si=Si[0],wi.xc=_i,Oe=0;Oe<ia;++Oe){var Fs=Si[Oe]>>8&65535;Si[Oe]=Fs,Fs>=Hi&&(Hi=Fs+1)}}if(rn.h)break i;for(le=0;5>le;++le){var Ke=yp[le];!le&&0<Ee&&(Ke+=1<<Ee),bn<Ke&&(bn=Ke)}var nu=a(Hi*Yn,N),kp=Hi,Tp=a(kp,H);if(Tp==null)var Ol=null;else t(65536>=kp),Ol=Tp;var ao=s(bn);if(Ol==null||ao==null||nu==null){Yi.a=1;break i}var Nl=nu;for(Oe=ui=0;Oe<Hi;++Oe){var Tn=Ol[Oe],na=Tn.G,sa=Tn.H,Op=0,Il=1,Np=0;for(le=0;5>le;++le){Ke=yp[le],na[le]=Nl,sa[le]=ui,!le&&0<Ee&&(Ke+=1<<Ee);s:{var Rl,su=Ke,Fl=Yi,oo=ao,i1=Nl,n1=ui,ru=0,Ds=Fl.m,s1=pt(Ds,1);if(n(oo,0,0,su),s1){var r1=pt(Ds,1)+1,a1=pt(Ds,1),Ip=pt(Ds,a1==0?1:8);oo[Ip]=1,r1==2&&(oo[Ip=pt(Ds,8)]=1);var Dl=1}else{var Rp=s(19),Fp=pt(Ds,4)+4;if(19<Fp){Fl.a=3;var jl=0;break s}for(Rl=0;Rl<Fp;++Rl)Rp[Nm[Rl]]=pt(Ds,3);var au=void 0,lo=void 0,Dp=Fl,o1=Rp,Bl=su,jp=oo,ou=0,js=Dp.m,Bp=8,zp=a(128,N);n:for(;S(zp,0,7,o1,19);){if(pt(js,1)){var l1=2+2*pt(js,3);if((au=2+pt(js,l1))>Bl)break n}else au=Bl;for(lo=0;lo<Bl&&au--;){Z(js);var Up=zp[0+(127&j(js))];$(js,js.u+Up.g);var ra=Up.value;if(16>ra)jp[lo++]=ra,ra!=0&&(Bp=ra);else{var c1=ra==16,Hp=ra-16,h1=Tm[Hp],Vp=pt(js,km[Hp])+h1;if(lo+Vp>Bl)break n;for(var u1=c1?Bp:0;0<Vp--;)jp[lo++]=u1}}ou=1;break n}ou||(Dp.a=3),Dl=ou}(Dl=Dl&&!Ds.h)&&(ru=S(i1,n1,8,oo,su)),Dl&&ru!=0?jl=ru:(Fl.a=3,jl=0)}if(jl==0)break i;if(Il&&Om[le]==1&&(Il=Nl[ui].g==0),Op+=Nl[ui].g,ui+=jl,3>=le){var co,lu=ao[0];for(co=1;co<Ke;++co)ao[co]>lu&&(lu=ao[co]);Np+=lu}}if(Tn.nd=Il,Tn.Qb=0,Il&&(Tn.qb=(na[3][sa[3]+0].value<<24|na[1][sa[1]+0].value<<16|na[2][sa[2]+0].value)>>>0,Op==0&&256>na[0][sa[0]+0].value&&(Tn.Qb=1,Tn.qb+=na[0][sa[0]+0].value<<8)),Tn.jc=!Tn.Qb&&6>Np,Tn.jc){var zl,ps=Tn;for(zl=0;zl<Pi;++zl){var Bs=zl,zs=ps.pd[Bs],Ul=ps.G[0][ps.H[0]+Bs];256<=Ul.value?(zs.g=Ul.g+256,zs.value=Ul.value):(zs.g=0,zs.value=0,Bs>>=pi(Ul,8,zs),Bs>>=pi(ps.G[1][ps.H[1]+Bs],16,zs),Bs>>=pi(ps.G[2][ps.H[2]+Bs],0,zs),pi(ps.G[3][ps.H[3]+Bs],24,zs))}}}wi.vc=Si,wi.Wb=Hi,wi.Ya=Ol,wi.yc=nu,Re=1;break e}Re=0}if(!(E=Re)){w.a=3;break t}if(0<ot){if(D.ua=1<<ot,!Yt(D.Wa,ot)){w.a=1,E=0;break t}}else D.ua=0;var cu=w,qp=M,d1=k,hu=cu.s,uu=hu.xc;if(cu.c=qp,cu.i=d1,hu.md=Ht(qp,uu),hu.wc=uu==0?-1:(1<<uu)-1,b){w.xb=Vm;break t}if((K=s(M*k))==null){w.a=1,E=0;break t}E=(E=Sn(w,K,0,M,k,k,null))&&!O.h;break t}return E?(C!=null?C[0]=K:(t(K==null),t(b)),w.$=0,b||qn(D)):qn(D),E}function ar(h,f){var b=h.c*h.i,w=b+f+16*f;return t(h.c<=f),h.V=s(w),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+f,1)}function Or(h,f){var b=h.C,w=f-b,C=h.V,E=h.Ba+h.c*b;for(t(f<=h.l.o);0<w;){var M=16<w?16:w,k=h.l.ma,O=h.l.width,D=O*M,K=k.ca,ot=k.tb+O*b,lt=h.Ta,et=h.Ua;tn(h,M,C,E),ii(lt,et,K,ot,D),Cn(k,b,b+M,K,ot,O),w-=M,C+=M*h.c,b+=M}t(b==f),h.C=h.Ma=f}function Nr(){this.ub=this.yd=this.td=this.Rb=0}function Ir(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Qo(){this.Yb=function(){var h=[];return function f(b,w,C){for(var E=C[w],M=0;M<E&&(b.push(C.length>w+1?[]:0),!(C.length<w+1));M++)f(b[M],w+1,C)}(h,0,[3,11]),h}()}function Ch(){this.jb=s(3),this.Wc=o([4,8],Qo),this.Xc=o([4,17],Qo)}function Ph(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Fr(){this.ld=this.La=this.dd=this.tc=0}function Zo(){this.Na=this.la=0}function Sh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ia(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Eh(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fr),this.Y=0,this.ya=Array(new Ia),this.aa=0,this.l=new Dr}function tl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Lh(){this.cb=this.a=0,this.sc="",this.m=new Mt,this.Od=new Nr,this.Kc=new Ir,this.ed=new Ph,this.Qa=new Rr,this.Ic=this.$c=this.Aa=0,this.D=new Eh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Mt),this.ia=0,this.pb=a(4,Sh),this.Pa=new Ch,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new tl),this.Hd=0,this.rb=Array(new Zo),this.sb=0,this.wa=Array(new Fr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ia),this.L=this.aa=0,this.gd=o([4,2],Fr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Dr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mh(){var h=new Lh;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,so||(so=nl)),h}function ti(h,f,b){return h.a==0&&(h.a=f,h.sc=b,h.cb=0),0}function el(h,f,b){return 3<=b&&h[f+0]==157&&h[f+1]==1&&h[f+2]==42}function il(h,f){if(h==null)return 0;if(h.a=0,h.sc="OK",f==null)return ti(h,2,"null VP8Io passed to VP8GetHeaders()");var b=f.data,w=f.w,C=f.ha;if(4>C)return ti(h,7,"Truncated header.");var E=b[w+0]|b[w+1]<<8|b[w+2]<<16,M=h.Od;if(M.Rb=!(1&E),M.td=E>>1&7,M.yd=E>>4&1,M.ub=E>>5,3<M.td)return ti(h,3,"Incorrect keyframe parameters.");if(!M.yd)return ti(h,4,"Frame not displayable.");w+=3,C-=3;var k=h.Kc;if(M.Rb){if(7>C)return ti(h,7,"cannot parse picture header");if(!el(b,w,C))return ti(h,3,"Bad code word");k.c=16383&(b[w+4]<<8|b[w+3]),k.Td=b[w+4]>>6,k.i=16383&(b[w+6]<<8|b[w+5]),k.Ud=b[w+6]>>6,w+=7,C-=7,h.za=k.c+15>>4,h.Ub=k.i+15>>4,f.width=k.c,f.height=k.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,n((E=h.Pa).jb,0,255,E.jb.length),t((E=h.Qa)!=null),E.Cb=0,E.Bb=0,E.Fb=1,n(E.Zb,0,0,E.Zb.length),n(E.Lb,0,0,E.Lb)}if(M.ub>C)return ti(h,7,"bad partition length");at(E=h.m,b,w,M.ub),w+=M.ub,C-=M.ub,M.Rb&&(k.Ld=ct(E),k.Kd=ct(E)),k=h.Qa;var O,D=h.Pa;if(t(E!=null),t(k!=null),k.Cb=ct(E),k.Cb){if(k.Bb=ct(E),ct(E)){for(k.Fb=ct(E),O=0;4>O;++O)k.Zb[O]=ct(E)?it(E,7):0;for(O=0;4>O;++O)k.Lb[O]=ct(E)?it(E,6):0}if(k.Bb)for(O=0;3>O;++O)D.jb[O]=ct(E)?rt(E,8):255}else k.Bb=0;if(E.Ka)return ti(h,3,"cannot parse segment header");if((k=h.ed).zd=ct(E),k.Tb=rt(E,6),k.wb=rt(E,3),k.Pc=ct(E),k.Pc&&ct(E)){for(D=0;4>D;++D)ct(E)&&(k.vd[D]=it(E,6));for(D=0;4>D;++D)ct(E)&&(k.od[D]=it(E,6))}if(h.L=k.Tb==0?0:k.zd?1:2,E.Ka)return ti(h,3,"cannot parse filter header");var K=C;if(C=O=w,w=O+K,k=K,h.Xb=(1<<rt(h.m,2))-1,K<3*(D=h.Xb))b=7;else{for(O+=3*D,k-=3*D,K=0;K<D;++K){var ot=b[C+0]|b[C+1]<<8|b[C+2]<<16;ot>k&&(ot=k),at(h.Jc[+K],b,O,ot),O+=ot,k-=ot,C+=3}at(h.Jc[+D],b,O,k),b=O<w?0:5}if(b!=0)return ti(h,b,"cannot parse partitions");for(b=rt(O=h.m,7),C=ct(O)?it(O,4):0,w=ct(O)?it(O,4):0,k=ct(O)?it(O,4):0,D=ct(O)?it(O,4):0,O=ct(O)?it(O,4):0,K=h.Qa,ot=0;4>ot;++ot){if(K.Cb){var lt=K.Zb[ot];K.Fb||(lt+=b)}else{if(0<ot){h.pb[ot]=h.pb[0];continue}lt=b}var et=h.pb[ot];et.Sc[0]=tu[en(lt+C,127)],et.Sc[1]=eu[en(lt+0,127)],et.Eb[0]=2*tu[en(lt+w,127)],et.Eb[1]=101581*eu[en(lt+k,127)]>>16,8>et.Eb[1]&&(et.Eb[1]=8),et.Qc[0]=tu[en(lt+D,117)],et.Qc[1]=eu[en(lt+O,127)],et.lc=lt+O}if(!M.Rb)return ti(h,4,"Not a key frame.");for(ct(E),M=h.Pa,b=0;4>b;++b){for(C=0;8>C;++C)for(w=0;3>w;++w)for(k=0;11>k;++k)D=ht(E,Um[b][C][w][k])?rt(E,8):Bm[b][C][w][k],M.Wc[b][C].Yb[w][k]=D;for(C=0;17>C;++C)M.Xc[b][C]=M.Wc[b][Hm[C]]}return h.kc=ct(E),h.kc&&(h.Bd=rt(E,8)),h.cb=1}function nl(h,f,b,w,C,E,M){var k=f[C].Yb[b];for(b=0;16>C;++C){if(!ht(h,k[b+0]))return C;for(;!ht(h,k[b+1]);)if(k=f[++C].Yb[0],b=0,C==16)return 16;var O=f[C+1].Yb;if(ht(h,k[b+2])){var D=h,K=0;if(ht(D,(lt=k)[(ot=b)+3]))if(ht(D,lt[ot+6])){for(k=0,ot=2*(K=ht(D,lt[ot+8]))+(lt=ht(D,lt[ot+9+K])),K=0,lt=Dm[ot];lt[k];++k)K+=K+ht(D,lt[k]);K+=3+(8<<ot)}else ht(D,lt[ot+7])?(K=7+2*ht(D,165),K+=ht(D,145)):K=5+ht(D,159);else K=ht(D,lt[ot+4])?3+ht(D,lt[ot+5]):2;k=O[2]}else K=1,k=O[1];O=M+jm[C],0>(D=h).b&&nt(D);var ot,lt=D.b,et=(ot=D.Ca>>1)-(D.I>>lt)>>31;--D.b,D.Ca+=et,D.Ca|=1,D.I-=(ot+1&et)<<lt,E[O]=((K^et)-et)*w[(0<C)+0]}return 16}function Ra(h){var f=h.rb[h.sb-1];f.la=0,f.Na=0,n(h.zc,0,0,h.zc.length),h.ja=0}function kh(h,f){if(h==null)return 0;if(f==null)return ti(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!il(h,f))return 0;if(t(h.cb),f.ac==null||f.ac(f)){f.ob&&(h.L=0);var b=Tl[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=f.v-b>>4,h.zb=f.j-b>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=f.o+15+b>>4,h.Hb=f.va+15+b>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var w=h.ed;for(b=0;4>b;++b){var C;if(h.Qa.Cb){var E=h.Qa.Lb[b];h.Qa.Fb||(E+=w.Tb)}else E=w.Tb;for(C=0;1>=C;++C){var M=h.gd[b][C],k=E;if(w.Pc&&(k+=w.vd[0],C&&(k+=w.od[0])),0<(k=0>k?0:63<k?63:k)){var O=k;0<w.wb&&(O=4<w.wb?O>>2:O>>1)>9-w.wb&&(O=9-w.wb),1>O&&(O=1),M.dd=O,M.tc=2*k+O,M.ld=40<=k?2:15<=k?1:0}else M.tc=0;M.La=C}}}b=0}else ti(h,6,"Frame setup failed"),b=h.a;if(b=b==0){if(b){h.$c=0,0<h.Aa||(h.Ic=e1);t:{b=h.Ic,w=4*(O=h.za);var D=32*O,K=O+1,ot=0<h.L?O*(0<h.Aa?2:1):0,lt=(h.Aa==2?2:1)*O;if((M=w+832+(C=3*(16*b+Tl[h.L])/2*D)+(E=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=M)b=0;else{if(M>h.Vb){if(h.Vb=0,h.Ec=s(M),h.Fc=0,h.Ec==null){b=ti(h,1,"no memory during frame initialization.");break t}h.Vb=M}M=h.Ec,k=h.Fc,h.Ac=M,h.Bc=k,k+=w,h.Gd=a(D,tl),h.Hd=0,h.rb=a(K+1,Zo),h.sb=1,h.wa=ot?a(ot,Fr):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=O),t(!0),h.oc=M,h.pc=k,k+=832,h.ya=a(lt,Ia),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=O),h.R=16*O,h.B=8*O,O=(D=Tl[h.L])*h.R,D=D/2*h.B,h.sa=M,h.ta=k+O,h.qa=h.sa,h.ra=h.ta+16*b*h.R+D,h.Ha=h.qa,h.Ia=h.ra+8*b*h.B+D,h.$c=0,k+=C,h.mb=E?M:null,h.nb=E?k:null,t(k+E<=h.Fc+h.Vb),Ra(h),n(h.Ac,h.Bc,0,w),b=1}}if(b){if(f.ka=0,f.y=h.sa,f.O=h.ta,f.f=h.qa,f.N=h.ra,f.ea=h.Ha,f.Vd=h.Ia,f.fa=h.R,f.Rc=h.B,f.F=null,f.J=0,!xl){for(b=-255;255>=b;++b)gi[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)us[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)no[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)ea[255+b]=0>b?0:255<b?255:b;xl=1}Qr=Nh,hs=Th,to=rl,Ui=Oh,dn=al,ei=sl,Zr=Ua,_l=cr,eo=Gh,dr=Ha,fr=Wh,Os=Vr,pr=Va,ta=gl,gr=pl,Ns=$n,io=os,fn=qh,kn[0]=Gn,kn[1]=Ih,kn[2]=jh,kn[3]=Bh,kn[4]=cl,kn[5]=Ur,kn[6]=hl,kn[7]=ja,kn[8]=Uh,kn[9]=zh,Is[0]=ol,Is[1]=Fh,Is[2]=as,Is[3]=Br,Is[4]=Mi,Is[5]=Dh,Is[6]=ll,ds[0]=Es,ds[1]=Rh,ds[2]=Hh,ds[3]=Ba,ds[4]=lr,ds[5]=Vh,ds[6]=za,b=1}else b=0}b&&(b=function(et,xt){for(et.M=0;et.M<et.Va;++et.M){var ft,J=et.Jc[et.M&et.Xb],tt=et.m,yt=et;for(ft=0;ft<yt.za;++ft){var At=tt,_t=yt,Bt=_t.Ac,Tt=_t.Bc+4*ft,Gt=_t.zc,Nt=_t.ya[_t.aa+ft];if(_t.Qa.Bb?Nt.$b=ht(At,_t.Pa.jb[0])?2+ht(At,_t.Pa.jb[2]):ht(At,_t.Pa.jb[1]):Nt.$b=0,_t.kc&&(Nt.Ad=ht(At,_t.Bd)),Nt.Za=!ht(At,145)+0,Nt.Za){var xe=Nt.Ob,Se=0;for(_t=0;4>_t;++_t){var we,ge=Gt[0+_t];for(we=0;4>we;++we){ge=zm[Bt[Tt+we]][ge];for(var Re=wp[ht(At,ge[0])];0<Re;)Re=wp[2*Re+ht(At,ge[Re])];ge=-Re,Bt[Tt+we]=ge}i(xe,Se,Bt,Tt,4),Se+=4,Gt[0+_t]=ge}}else ge=ht(At,156)?ht(At,128)?1:3:ht(At,163)?2:0,Nt.Ob[0]=ge,n(Bt,Tt,ge,4),n(Gt,0,ge,4);Nt.Dd=ht(At,142)?ht(At,114)?ht(At,183)?1:3:2:0}if(yt.m.Ka)return ti(et,7,"Premature end-of-partition0 encountered.");for(;et.ja<et.za;++et.ja){if(yt=J,At=(tt=et).rb[tt.sb-1],Bt=tt.rb[tt.sb+tt.ja],ft=tt.ya[tt.aa+tt.ja],Tt=tt.kc?ft.Ad:0)At.la=Bt.la=0,ft.Za||(At.Na=Bt.Na=0),ft.Hc=0,ft.Gc=0,ft.ia=0;else{var Oe,le;if(At=Bt,Bt=yt,Tt=tt.Pa.Xc,Gt=tt.ya[tt.aa+tt.ja],Nt=tt.pb[Gt.$b],_t=Gt.ad,xe=0,Se=tt.rb[tt.sb-1],ge=we=0,n(_t,xe,0,384),Gt.Za)var ui=0,Yi=Tt[3];else{Re=s(16);var di=At.Na+Se.Na;if(di=so(Bt,Tt[1],di,Nt.Eb,0,Re,0),At.Na=Se.Na=(0<di)+0,1<di)Qr(Re,0,_t,xe);else{var Ki=Re[0]+3>>3;for(Re=0;256>Re;Re+=16)_t[xe+Re]=Ki}ui=1,Yi=Tt[0]}var Ee=15&At.la,sn=15&Se.la;for(Re=0;4>Re;++Re){var rn=1&sn;for(Ki=le=0;4>Ki;++Ki)Ee=Ee>>1|(rn=(di=so(Bt,Yi,di=rn+(1&Ee),Nt.Sc,ui,_t,xe))>ui)<<7,le=le<<2|(3<di?3:1<di?2:_t[xe+0]!=0),xe+=16;Ee>>=4,sn=sn>>1|rn<<7,we=(we<<8|le)>>>0}for(Yi=Ee,ui=sn>>4,Oe=0;4>Oe;Oe+=2){for(le=0,Ee=At.la>>4+Oe,sn=Se.la>>4+Oe,Re=0;2>Re;++Re){for(rn=1&sn,Ki=0;2>Ki;++Ki)di=rn+(1&Ee),Ee=Ee>>1|(rn=0<(di=so(Bt,Tt[2],di,Nt.Qc,0,_t,xe)))<<3,le=le<<2|(3<di?3:1<di?2:_t[xe+0]!=0),xe+=16;Ee>>=2,sn=sn>>1|rn<<5}ge|=le<<4*Oe,Yi|=Ee<<4<<Oe,ui|=(240&sn)<<Oe}At.la=Yi,Se.la=ui,Gt.Hc=we,Gt.Gc=ge,Gt.ia=43690&ge?0:Nt.ia,Tt=!(we|ge)}if(0<tt.L&&(tt.wa[tt.Y+tt.ja]=tt.gd[ft.$b][ft.Za],tt.wa[tt.Y+tt.ja].La|=!Tt),yt.Ka)return ti(et,7,"Premature end-of-file encountered.")}if(Ra(et),tt=xt,yt=1,ft=(J=et).D,At=0<J.L&&J.M>=J.zb&&J.M<=J.Va,J.Aa==0)t:{if(ft.M=J.M,ft.uc=At,Ya(J,ft),yt=1,ft=(le=J.D).Nb,At=(ge=Tl[J.L])*J.R,Bt=ge/2*J.B,Re=16*ft*J.R,Ki=8*ft*J.B,Tt=J.sa,Gt=J.ta-At+Re,Nt=J.qa,_t=J.ra-Bt+Ki,xe=J.Ha,Se=J.Ia-Bt+Ki,sn=(Ee=le.M)==0,we=Ee>=J.Va-1,J.Aa==2&&Ya(J,le),le.uc)for(rn=(di=J).D.M,t(di.D.uc),le=di.yb;le<di.Hb;++le){ui=le,Yi=rn;var wi=(Si=(Ke=di).D).Nb;Oe=Ke.R;var Si=Si.wa[Si.Y+ui],Hi=Ke.sa,bn=Ke.ta+16*wi*Oe+16*ui,Yn=Si.dd,_i=Si.tc;if(_i!=0)if(t(3<=_i),Ke.L==1)0<ui&&Ns(Hi,bn,Oe,_i+4),Si.La&&fn(Hi,bn,Oe,_i),0<Yi&&gr(Hi,bn,Oe,_i+4),Si.La&&io(Hi,bn,Oe,_i);else{var fs=Ke.B,mr=Ke.qa,ia=Ke.ra+8*wi*fs+8*ui,Fs=Ke.Ha,Ke=Ke.Ia+8*wi*fs+8*ui;wi=Si.ld,0<ui&&(_l(Hi,bn,Oe,_i+4,Yn,wi),dr(mr,ia,Fs,Ke,fs,_i+4,Yn,wi)),Si.La&&(Os(Hi,bn,Oe,_i,Yn,wi),ta(mr,ia,Fs,Ke,fs,_i,Yn,wi)),0<Yi&&(Zr(Hi,bn,Oe,_i+4,Yn,wi),eo(mr,ia,Fs,Ke,fs,_i+4,Yn,wi)),Si.La&&(fr(Hi,bn,Oe,_i,Yn,wi),pr(mr,ia,Fs,Ke,fs,_i,Yn,wi))}}if(J.ia&&alert("todo:DitherRow"),tt.put!=null){if(le=16*Ee,Ee=16*(Ee+1),sn?(tt.y=J.sa,tt.O=J.ta+Re,tt.f=J.qa,tt.N=J.ra+Ki,tt.ea=J.Ha,tt.W=J.Ia+Ki):(le-=ge,tt.y=Tt,tt.O=Gt,tt.f=Nt,tt.N=_t,tt.ea=xe,tt.W=Se),we||(Ee-=ge),Ee>tt.o&&(Ee=tt.o),tt.F=null,tt.J=null,J.Fa!=null&&0<J.Fa.length&&le<Ee&&(tt.J=$a(J,tt,le,Ee-le),tt.F=J.mb,tt.F==null&&tt.F.length==0)){yt=ti(J,3,"Could not decode alpha data.");break t}le<tt.j&&(ge=tt.j-le,le=tt.j,t(!(1&ge)),tt.O+=J.R*ge,tt.N+=J.B*(ge>>1),tt.W+=J.B*(ge>>1),tt.F!=null&&(tt.J+=tt.width*ge)),le<Ee&&(tt.O+=tt.v,tt.N+=tt.v>>1,tt.W+=tt.v>>1,tt.F!=null&&(tt.J+=tt.v),tt.ka=le-tt.j,tt.U=tt.va-tt.v,tt.T=Ee-le,yt=tt.put(tt))}ft+1!=J.Ic||we||(i(J.sa,J.ta-At,Tt,Gt+16*J.R,At),i(J.qa,J.ra-Bt,Nt,_t+8*J.B,Bt),i(J.Ha,J.Ia-Bt,xe,Se+8*J.B,Bt))}if(!yt)return ti(et,6,"Output aborted.")}return 1}(h,f)),f.bc!=null&&f.bc(f),b&=1}return b?(h.cb=0,b):0}function En(h,f,b,w,C){C=h[f+b+32*w]+(C>>3),h[f+b+32*w]=-256&C?0>C?0:255:C}function jr(h,f,b,w,C,E){En(h,f,0,b,w+C),En(h,f,1,b,w+E),En(h,f,2,b,w-E),En(h,f,3,b,w-C)}function Gi(h){return(20091*h>>16)+h}function Fa(h,f,b,w){var C,E=0,M=s(16);for(C=0;4>C;++C){var k=h[f+0]+h[f+8],O=h[f+0]-h[f+8],D=(35468*h[f+4]>>16)-Gi(h[f+12]),K=Gi(h[f+4])+(35468*h[f+12]>>16);M[E+0]=k+K,M[E+1]=O+D,M[E+2]=O-D,M[E+3]=k-K,E+=4,f++}for(C=E=0;4>C;++C)k=(h=M[E+0]+4)+M[E+8],O=h-M[E+8],D=(35468*M[E+4]>>16)-Gi(M[E+12]),En(b,w,0,0,k+(K=Gi(M[E+4])+(35468*M[E+12]>>16))),En(b,w,1,0,O+D),En(b,w,2,0,O-D),En(b,w,3,0,k-K),E++,w+=32}function sl(h,f,b,w){var C=h[f+0]+4,E=35468*h[f+4]>>16,M=Gi(h[f+4]),k=35468*h[f+1]>>16;jr(b,w,0,C+M,h=Gi(h[f+1]),k),jr(b,w,1,C+E,h,k),jr(b,w,2,C-E,h,k),jr(b,w,3,C-M,h,k)}function Th(h,f,b,w,C){Fa(h,f,b,w),C&&Fa(h,f+16,b,w+4)}function rl(h,f,b,w){hs(h,f+0,b,w,1),hs(h,f+32,b,w+128,1)}function Oh(h,f,b,w){var C;for(h=h[f+0]+4,C=0;4>C;++C)for(f=0;4>f;++f)En(b,w,f,C,h)}function al(h,f,b,w){h[f+0]&&Ui(h,f+0,b,w),h[f+16]&&Ui(h,f+16,b,w+4),h[f+32]&&Ui(h,f+32,b,w+128),h[f+48]&&Ui(h,f+48,b,w+128+4)}function Nh(h,f,b,w){var C,E=s(16);for(C=0;4>C;++C){var M=h[f+0+C]+h[f+12+C],k=h[f+4+C]+h[f+8+C],O=h[f+4+C]-h[f+8+C],D=h[f+0+C]-h[f+12+C];E[0+C]=M+k,E[8+C]=M-k,E[4+C]=D+O,E[12+C]=D-O}for(C=0;4>C;++C)M=(h=E[0+4*C]+3)+E[3+4*C],k=E[1+4*C]+E[2+4*C],O=E[1+4*C]-E[2+4*C],D=h-E[3+4*C],b[w+0]=M+k>>3,b[w+16]=D+O>>3,b[w+32]=M-k>>3,b[w+48]=D-O>>3,w+=64}function Da(h,f,b){var w,C=f-32,E=nn,M=255-h[C-1];for(w=0;w<b;++w){var k,O=E,D=M+h[f-1];for(k=0;k<b;++k)h[f+k]=O[D+h[C+k]];f+=32}}function Ih(h,f){Da(h,f,4)}function Rh(h,f){Da(h,f,8)}function Fh(h,f){Da(h,f,16)}function as(h,f){var b;for(b=0;16>b;++b)i(h,f+32*b,h,f-32,16)}function Br(h,f){var b;for(b=16;0<b;--b)n(h,f,h[f-1],16),f+=32}function zr(h,f,b){var w;for(w=0;16>w;++w)n(f,b+32*w,h,16)}function ol(h,f){var b,w=16;for(b=0;16>b;++b)w+=h[f-1+32*b]+h[f+b-32];zr(w>>5,h,f)}function Mi(h,f){var b,w=8;for(b=0;16>b;++b)w+=h[f-1+32*b];zr(w>>4,h,f)}function Dh(h,f){var b,w=8;for(b=0;16>b;++b)w+=h[f+b-32];zr(w>>4,h,f)}function ll(h,f){zr(128,h,f)}function Zt(h,f,b){return h+2*f+b+2>>2}function jh(h,f){var b,w=f-32;for(w=new Uint8Array([Zt(h[w-1],h[w+0],h[w+1]),Zt(h[w+0],h[w+1],h[w+2]),Zt(h[w+1],h[w+2],h[w+3]),Zt(h[w+2],h[w+3],h[w+4])]),b=0;4>b;++b)i(h,f+32*b,w,0,w.length)}function Bh(h,f){var b=h[f-1],w=h[f-1+32],C=h[f-1+64],E=h[f-1+96];Et(h,f+0,16843009*Zt(h[f-1-32],b,w)),Et(h,f+32,16843009*Zt(b,w,C)),Et(h,f+64,16843009*Zt(w,C,E)),Et(h,f+96,16843009*Zt(C,E,E))}function Gn(h,f){var b,w=4;for(b=0;4>b;++b)w+=h[f+b-32]+h[f-1+32*b];for(w>>=3,b=0;4>b;++b)n(h,f+32*b,w,4)}function cl(h,f){var b=h[f-1+0],w=h[f-1+32],C=h[f-1+64],E=h[f-1-32],M=h[f+0-32],k=h[f+1-32],O=h[f+2-32],D=h[f+3-32];h[f+0+96]=Zt(w,C,h[f-1+96]),h[f+1+96]=h[f+0+64]=Zt(b,w,C),h[f+2+96]=h[f+1+64]=h[f+0+32]=Zt(E,b,w),h[f+3+96]=h[f+2+64]=h[f+1+32]=h[f+0+0]=Zt(M,E,b),h[f+3+64]=h[f+2+32]=h[f+1+0]=Zt(k,M,E),h[f+3+32]=h[f+2+0]=Zt(O,k,M),h[f+3+0]=Zt(D,O,k)}function hl(h,f){var b=h[f+1-32],w=h[f+2-32],C=h[f+3-32],E=h[f+4-32],M=h[f+5-32],k=h[f+6-32],O=h[f+7-32];h[f+0+0]=Zt(h[f+0-32],b,w),h[f+1+0]=h[f+0+32]=Zt(b,w,C),h[f+2+0]=h[f+1+32]=h[f+0+64]=Zt(w,C,E),h[f+3+0]=h[f+2+32]=h[f+1+64]=h[f+0+96]=Zt(C,E,M),h[f+3+32]=h[f+2+64]=h[f+1+96]=Zt(E,M,k),h[f+3+64]=h[f+2+96]=Zt(M,k,O),h[f+3+96]=Zt(k,O,O)}function Ur(h,f){var b=h[f-1+0],w=h[f-1+32],C=h[f-1+64],E=h[f-1-32],M=h[f+0-32],k=h[f+1-32],O=h[f+2-32],D=h[f+3-32];h[f+0+0]=h[f+1+64]=E+M+1>>1,h[f+1+0]=h[f+2+64]=M+k+1>>1,h[f+2+0]=h[f+3+64]=k+O+1>>1,h[f+3+0]=O+D+1>>1,h[f+0+96]=Zt(C,w,b),h[f+0+64]=Zt(w,b,E),h[f+0+32]=h[f+1+96]=Zt(b,E,M),h[f+1+32]=h[f+2+96]=Zt(E,M,k),h[f+2+32]=h[f+3+96]=Zt(M,k,O),h[f+3+32]=Zt(k,O,D)}function ja(h,f){var b=h[f+0-32],w=h[f+1-32],C=h[f+2-32],E=h[f+3-32],M=h[f+4-32],k=h[f+5-32],O=h[f+6-32],D=h[f+7-32];h[f+0+0]=b+w+1>>1,h[f+1+0]=h[f+0+64]=w+C+1>>1,h[f+2+0]=h[f+1+64]=C+E+1>>1,h[f+3+0]=h[f+2+64]=E+M+1>>1,h[f+0+32]=Zt(b,w,C),h[f+1+32]=h[f+0+96]=Zt(w,C,E),h[f+2+32]=h[f+1+96]=Zt(C,E,M),h[f+3+32]=h[f+2+96]=Zt(E,M,k),h[f+3+64]=Zt(M,k,O),h[f+3+96]=Zt(k,O,D)}function zh(h,f){var b=h[f-1+0],w=h[f-1+32],C=h[f-1+64],E=h[f-1+96];h[f+0+0]=b+w+1>>1,h[f+2+0]=h[f+0+32]=w+C+1>>1,h[f+2+32]=h[f+0+64]=C+E+1>>1,h[f+1+0]=Zt(b,w,C),h[f+3+0]=h[f+1+32]=Zt(w,C,E),h[f+3+32]=h[f+1+64]=Zt(C,E,E),h[f+3+64]=h[f+2+64]=h[f+0+96]=h[f+1+96]=h[f+2+96]=h[f+3+96]=E}function Uh(h,f){var b=h[f-1+0],w=h[f-1+32],C=h[f-1+64],E=h[f-1+96],M=h[f-1-32],k=h[f+0-32],O=h[f+1-32],D=h[f+2-32];h[f+0+0]=h[f+2+32]=b+M+1>>1,h[f+0+32]=h[f+2+64]=w+b+1>>1,h[f+0+64]=h[f+2+96]=C+w+1>>1,h[f+0+96]=E+C+1>>1,h[f+3+0]=Zt(k,O,D),h[f+2+0]=Zt(M,k,O),h[f+1+0]=h[f+3+32]=Zt(b,M,k),h[f+1+32]=h[f+3+64]=Zt(w,b,M),h[f+1+64]=h[f+3+96]=Zt(C,w,b),h[f+1+96]=Zt(E,C,w)}function Hh(h,f){var b;for(b=0;8>b;++b)i(h,f+32*b,h,f-32,8)}function Ba(h,f){var b;for(b=0;8>b;++b)n(h,f,h[f-1],8),f+=32}function or(h,f,b){var w;for(w=0;8>w;++w)n(f,b+32*w,h,8)}function Es(h,f){var b,w=8;for(b=0;8>b;++b)w+=h[f+b-32]+h[f-1+32*b];or(w>>4,h,f)}function Vh(h,f){var b,w=4;for(b=0;8>b;++b)w+=h[f+b-32];or(w>>3,h,f)}function lr(h,f){var b,w=4;for(b=0;8>b;++b)w+=h[f-1+32*b];or(w>>3,h,f)}function za(h,f){or(128,h,f)}function Hr(h,f,b){var w=h[f-b],C=h[f+0],E=3*(C-w)+Yh[1020+h[f-2*b]-h[f+b]],M=Al[112+(E+4>>3)];h[f-b]=nn[255+w+Al[112+(E+3>>3)]],h[f+0]=nn[255+C-M]}function ul(h,f,b,w){var C=h[f+0],E=h[f+b];return gn[255+h[f-2*b]-h[f-b]]>w||gn[255+E-C]>w}function dl(h,f,b,w){return 4*gn[255+h[f-b]-h[f+0]]+gn[255+h[f-2*b]-h[f+b]]<=w}function fl(h,f,b,w,C){var E=h[f-3*b],M=h[f-2*b],k=h[f-b],O=h[f+0],D=h[f+b],K=h[f+2*b],ot=h[f+3*b];return 4*gn[255+k-O]+gn[255+M-D]>w?0:gn[255+h[f-4*b]-E]<=C&&gn[255+E-M]<=C&&gn[255+M-k]<=C&&gn[255+ot-K]<=C&&gn[255+K-D]<=C&&gn[255+D-O]<=C}function pl(h,f,b,w){var C=2*w+1;for(w=0;16>w;++w)dl(h,f+w,b,C)&&Hr(h,f+w,b)}function $n(h,f,b,w){var C=2*w+1;for(w=0;16>w;++w)dl(h,f+w*b,1,C)&&Hr(h,f+w*b,1)}function os(h,f,b,w){var C;for(C=3;0<C;--C)pl(h,f+=4*b,b,w)}function qh(h,f,b,w){var C;for(C=3;0<C;--C)$n(h,f+=4,b,w)}function Ls(h,f,b,w,C,E,M,k){for(E=2*E+1;0<C--;){if(fl(h,f,b,E,M))if(ul(h,f,b,k))Hr(h,f,b);else{var O=h,D=f,K=b,ot=O[D-2*K],lt=O[D-K],et=O[D+0],xt=O[D+K],ft=O[D+2*K],J=27*(yt=Yh[1020+3*(et-lt)+Yh[1020+ot-xt]])+63>>7,tt=18*yt+63>>7,yt=9*yt+63>>7;O[D-3*K]=nn[255+O[D-3*K]+yt],O[D-2*K]=nn[255+ot+tt],O[D-K]=nn[255+lt+J],O[D+0]=nn[255+et-J],O[D+K]=nn[255+xt-tt],O[D+2*K]=nn[255+ft-yt]}f+=w}}function Ln(h,f,b,w,C,E,M,k){for(E=2*E+1;0<C--;){if(fl(h,f,b,E,M))if(ul(h,f,b,k))Hr(h,f,b);else{var O=h,D=f,K=b,ot=O[D-K],lt=O[D+0],et=O[D+K],xt=Al[112+((ft=3*(lt-ot))+4>>3)],ft=Al[112+(ft+3>>3)],J=xt+1>>1;O[D-2*K]=nn[255+O[D-2*K]+J],O[D-K]=nn[255+ot+ft],O[D+0]=nn[255+lt-xt],O[D+K]=nn[255+et-J]}f+=w}}function Ua(h,f,b,w,C,E){Ls(h,f,b,1,16,w,C,E)}function cr(h,f,b,w,C,E){Ls(h,f,1,b,16,w,C,E)}function Wh(h,f,b,w,C,E){var M;for(M=3;0<M;--M)Ln(h,f+=4*b,b,1,16,w,C,E)}function Vr(h,f,b,w,C,E){var M;for(M=3;0<M;--M)Ln(h,f+=4,1,b,16,w,C,E)}function Gh(h,f,b,w,C,E,M,k){Ls(h,f,C,1,8,E,M,k),Ls(b,w,C,1,8,E,M,k)}function Ha(h,f,b,w,C,E,M,k){Ls(h,f,1,C,8,E,M,k),Ls(b,w,1,C,8,E,M,k)}function Va(h,f,b,w,C,E,M,k){Ln(h,f+4*C,C,1,8,E,M,k),Ln(b,w+4*C,C,1,8,E,M,k)}function gl(h,f,b,w,C,E,M,k){Ln(h,f+4,1,C,8,E,M,k),Ln(b,w+4,1,C,8,E,M,k)}function qr(){this.ba=new xn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Xe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function qa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Wa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ml(){this.ua=0,this.Wa=new q,this.vb=new q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new N}function $h(){this.xb=this.a=0,this.l=new Dr,this.ca=new xn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new L,this.Pb=0,this.wd=new L,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ml,this.ab=0,this.gc=a(4,Wa),this.Oc=0}function Wr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Dr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hr(h,f,b,w,C,E,M){for(h=h==null?0:h[f+0],f=0;f<M;++f)C[E+f]=h+b[w+f]&255,h=C[E+f]}function Ga(h,f,b,w,C,E,M){var k;if(h==null)hr(null,null,b,w,C,E,M);else for(k=0;k<M;++k)C[E+k]=h[f+k]+b[w+k]&255}function Ms(h,f,b,w,C,E,M){if(h==null)hr(null,null,b,w,C,E,M);else{var k,O=h[f+0],D=O,K=O;for(k=0;k<M;++k)D=K+(O=h[f+k])-D,K=b[w+k]+(-256&D?0>D?0:255:D)&255,D=O,C[E+k]=K}}function $a(h,f,b,w){var C=f.width,E=f.o;if(t(h!=null&&f!=null),0>b||0>=w||b+w>E)return null;if(!h.Cc){if(h.ga==null){var M;if(h.ga=new Wr,(M=h.ga==null)||(M=f.width*f.o,t(h.Gb.length==0),h.Gb=s(M),h.Uc=0,h.Gb==null?M=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,M=1),M=!M),!M){M=h.ga;var k=h.Fa,O=h.P,D=h.qc,K=h.mb,ot=h.nb,lt=O+1,et=D-1,xt=M.l;if(t(k!=null&&K!=null&&f!=null),Rs[0]=null,Rs[1]=hr,Rs[2]=Ga,Rs[3]=Ms,M.ca=K,M.tb=ot,M.c=f.width,M.i=f.height,t(0<M.c&&0<M.i),1>=D)f=0;else if(M.$a=k[O+0]>>0&3,M.Z=k[O+0]>>2&3,M.Lc=k[O+0]>>4&3,O=k[O+0]>>6&3,0>M.$a||1<M.$a||4<=M.Z||1<M.Lc||O)f=0;else if(xt.put=Un,xt.ac=Ci,xt.bc=Hn,xt.ma=M,xt.width=f.width,xt.height=f.height,xt.Da=f.Da,xt.v=f.v,xt.va=f.va,xt.j=f.j,xt.o=f.o,M.$a)t:{t(M.$a==1),f=hn();e:for(;;){if(f==null){f=0;break t}if(t(M!=null),M.mc=f,f.c=M.c,f.i=M.i,f.l=M.l,f.l.ma=M,f.l.width=M.c,f.l.height=M.i,f.a=0,Q(f.m,k,lt,et),!Wn(M.c,M.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&rs(f.s)?(M.ic=1,k=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(k),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(M.ic=0,f=ar(f,M.c)),!f))break e;f=1;break t}M.mc=null,f=0}else f=et>=M.c*M.i;M=!f}if(M)return null;h.ga.Lc!=1?h.Ga=0:w=E-b}t(h.ga!=null),t(b+w<=E);t:{if(f=(k=h.ga).c,E=k.l.o,k.$a==0){if(lt=h.rc,et=h.Vc,xt=h.Fa,O=h.P+1+b*f,D=h.mb,K=h.nb+b*f,t(O<=h.P+h.qc),k.Z!=0)for(t(Rs[k.Z]!=null),M=0;M<w;++M)Rs[k.Z](lt,et,xt,O,D,K,f),lt=D,et=K,K+=f,O+=f;else for(M=0;M<w;++M)i(D,K,xt,O,f),lt=D,et=K,K+=f,O+=f;h.rc=lt,h.Vc=et}else{if(t(k.mc!=null),f=b+w,t((M=k.mc)!=null),t(f<=M.i),M.C>=f)f=1;else if(k.ic||st(),k.ic){k=M.V,lt=M.Ba,et=M.c;var ft=M.i,J=(xt=1,O=M.$/et,D=M.$%et,K=M.m,ot=M.s,M.$),tt=et*ft,yt=et*f,At=ot.wc,_t=J<yt?ci(ot,D,O):null;t(J<=tt),t(f<=ft),t(rs(ot));e:for(;;){for(;!K.h&&J<yt;){if(D&At||(_t=ci(ot,D,O)),t(_t!=null),Z(K),256>(ft=Wi(_t.G[0],_t.H[0],K)))k[lt+J]=ft,++J,++D>=et&&(D=0,++O<=f&&!(O%16)&&Pn(M,O));else{if(!(280>ft)){xt=0;break e}ft=An(ft-256,K);var Bt,Tt=Wi(_t.G[4],_t.H[4],K);if(Z(K),!(J>=(Tt=Vn(et,Tt=An(Tt,K)))&&tt-J>=ft)){xt=0;break e}for(Bt=0;Bt<ft;++Bt)k[lt+J+Bt]=k[lt+J+Bt-Tt];for(J+=ft,D+=ft;D>=et;)D-=et,++O<=f&&!(O%16)&&Pn(M,O);J<yt&&D&At&&(_t=ci(ot,D,O))}t(K.h==V(K))}Pn(M,O>f?f:O);break e}!xt||K.h&&J<tt?(xt=0,M.a=K.h?5:3):M.$=J,f=xt}else f=Sn(M,M.V,M.Ba,M.c,M.i,f,Or);if(!f){w=0;break t}}b+w>=E&&(h.Cc=1),w=1}if(!w)return null;if(h.Cc&&((w=h.ga)!=null&&(w.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*C}function m(h,f,b,w,C,E){for(;0<C--;){var M,k=h,O=f+(b?1:0),D=h,K=f+(b?0:3);for(M=0;M<w;++M){var ot=D[K+4*M];ot!=255&&(ot*=32897,k[O+4*M+0]=k[O+4*M+0]*ot>>23,k[O+4*M+1]=k[O+4*M+1]*ot>>23,k[O+4*M+2]=k[O+4*M+2]*ot>>23)}f+=E}}function P(h,f,b,w,C){for(;0<w--;){var E;for(E=0;E<b;++E){var M=h[f+2*E+0],k=15&(D=h[f+2*E+1]),O=4369*k,D=(240&D|D>>4)*O>>16;h[f+2*E+0]=(240&M|M>>4)*O>>16&240|(15&M|M<<4)*O>>16>>4&15,h[f+2*E+1]=240&D|k}f+=C}}function B(h,f,b,w,C,E,M,k){var O,D,K=255;for(D=0;D<C;++D){for(O=0;O<w;++O){var ot=h[f+O];E[M+4*O]=ot,K&=ot}f+=b,M+=k}return K!=255}function X(h,f,b,w,C){var E;for(E=0;E<C;++E)b[w+E]=h[f+E]>>8}function st(){pn=m,De=P,je=B,ii=X}function gt(h,f,b){F[h]=function(w,C,E,M,k,O,D,K,ot,lt,et,xt,ft,J,tt,yt,At){var _t,Bt=At-1>>1,Tt=k[O+0]|D[K+0]<<16,Gt=ot[lt+0]|et[xt+0]<<16;t(w!=null);var Nt=3*Tt+Gt+131074>>2;for(f(w[C+0],255&Nt,Nt>>16,ft,J),E!=null&&(Nt=3*Gt+Tt+131074>>2,f(E[M+0],255&Nt,Nt>>16,tt,yt)),_t=1;_t<=Bt;++_t){var xe=k[O+_t]|D[K+_t]<<16,Se=ot[lt+_t]|et[xt+_t]<<16,we=Tt+xe+Gt+Se+524296,ge=we+2*(xe+Gt)>>3;Nt=ge+Tt>>1,Tt=(we=we+2*(Tt+Se)>>3)+xe>>1,f(w[C+2*_t-1],255&Nt,Nt>>16,ft,J+(2*_t-1)*b),f(w[C+2*_t-0],255&Tt,Tt>>16,ft,J+(2*_t-0)*b),E!=null&&(Nt=we+Gt>>1,Tt=ge+Se>>1,f(E[M+2*_t-1],255&Nt,Nt>>16,tt,yt+(2*_t-1)*b),f(E[M+2*_t+0],255&Tt,Tt>>16,tt,yt+(2*_t+0)*b)),Tt=xe,Gt=Se}1&At||(Nt=3*Tt+Gt+131074>>2,f(w[C+At-1],255&Nt,Nt>>16,ft,J+(At-1)*b),E!=null&&(Nt=3*Gt+Tt+131074>>2,f(E[M+At-1],255&Nt,Nt>>16,tt,yt+(At-1)*b)))}}function Ct(){mn[Cl]=qm,mn[Pl]=xp,mn[bp]=Wm,mn[Sl]=Ap,mn[El]=Cp,mn[Kh]=Pp,mn[vp]=Gm,mn[Jh]=xp,mn[Qh]=Ap,mn[Ll]=Cp,mn[Zh]=Pp}function jt(h){return h&~$m?0>h?0:255:h>>Sp}function Wt(h,f){return jt((19077*h>>8)+(26149*f>>8)-14234)}function oe(h,f,b){return jt((19077*h>>8)-(6419*f>>8)-(13320*b>>8)+8708)}function ne(h,f){return jt((19077*h>>8)+(33050*f>>8)-17685)}function be(h,f,b,w,C){w[C+0]=Wt(h,b),w[C+1]=oe(h,f,b),w[C+2]=ne(h,f)}function Ve(h,f,b,w,C){w[C+0]=ne(h,f),w[C+1]=oe(h,f,b),w[C+2]=Wt(h,b)}function Ye(h,f,b,w,C){var E=oe(h,f,b);f=E<<3&224|ne(h,f)>>3,w[C+0]=248&Wt(h,b)|E>>5,w[C+1]=f}function hi(h,f,b,w,C){var E=240&ne(h,f)|15;w[C+0]=240&Wt(h,b)|oe(h,f,b)>>4,w[C+1]=E}function ki(h,f,b,w,C){w[C+0]=255,be(h,f,b,w,C+1)}function yi(h,f,b,w,C){Ve(h,f,b,w,C),w[C+3]=255}function Mn(h,f,b,w,C){be(h,f,b,w,C),w[C+3]=255}function en(h,f){return 0>h?0:h>f?f:h}function Xn(h,f,b){F[h]=function(w,C,E,M,k,O,D,K,ot){for(var lt=K+(-2&ot)*b;K!=lt;)f(w[C+0],E[M+0],k[O+0],D,K),f(w[C+1],E[M+0],k[O+0],D,K+b),C+=2,++M,++O,K+=2*b;1&ot&&f(w[C+0],E[M+0],k[O+0],D,K)}}function bl(h,f,b){return b==0?h==0?f==0?6:5:f==0?4:0:b}function Xa(h,f,b,w,C){switch(h>>>30){case 3:hs(f,b,w,C,0);break;case 2:ei(f,b,w,C);break;case 1:Ui(f,b,w,C)}}function Ya(h,f){var b,w,C=f.M,E=f.Nb,M=h.oc,k=h.pc+40,O=h.oc,D=h.pc+584,K=h.oc,ot=h.pc+600;for(b=0;16>b;++b)M[k+32*b-1]=129;for(b=0;8>b;++b)O[D+32*b-1]=129,K[ot+32*b-1]=129;for(0<C?M[k-1-32]=O[D-1-32]=K[ot-1-32]=129:(n(M,k-32-1,127,21),n(O,D-32-1,127,9),n(K,ot-32-1,127,9)),w=0;w<h.za;++w){var lt=f.ya[f.aa+w];if(0<w){for(b=-1;16>b;++b)i(M,k+32*b-4,M,k+32*b+12,4);for(b=-1;8>b;++b)i(O,D+32*b-4,O,D+32*b+4,4),i(K,ot+32*b-4,K,ot+32*b+4,4)}var et=h.Gd,xt=h.Hd+w,ft=lt.ad,J=lt.Hc;if(0<C&&(i(M,k-32,et[xt].y,0,16),i(O,D-32,et[xt].f,0,8),i(K,ot-32,et[xt].ea,0,8)),lt.Za){var tt=M,yt=k-32+16;for(0<C&&(w>=h.za-1?n(tt,yt,et[xt].y[15],4):i(tt,yt,et[xt+1].y,0,4)),b=0;4>b;b++)tt[yt+128+b]=tt[yt+256+b]=tt[yt+384+b]=tt[yt+0+b];for(b=0;16>b;++b,J<<=2)tt=M,yt=k+Lp[b],kn[lt.Ob[b]](tt,yt),Xa(J,ft,16*+b,tt,yt)}else if(tt=bl(w,C,lt.Ob[0]),Is[tt](M,k),J!=0)for(b=0;16>b;++b,J<<=2)Xa(J,ft,16*+b,M,k+Lp[b]);for(b=lt.Gc,tt=bl(w,C,lt.Dd),ds[tt](O,D),ds[tt](K,ot),J=ft,tt=O,yt=D,255&(lt=b>>0)&&(170&lt?to(J,256,tt,yt):dn(J,256,tt,yt)),lt=K,J=ot,255&(b>>=8)&&(170&b?to(ft,320,lt,J):dn(ft,320,lt,J)),C<h.Ub-1&&(i(et[xt].y,0,M,k+480,16),i(et[xt].f,0,O,D+224,8),i(et[xt].ea,0,K,ot+224,8)),b=8*E*h.B,et=h.sa,xt=h.ta+16*w+16*E*h.R,ft=h.qa,lt=h.ra+8*w+b,J=h.Ha,tt=h.Ia+8*w+b,b=0;16>b;++b)i(et,xt+b*h.R,M,k+32*b,16);for(b=0;8>b;++b)i(ft,lt+b*h.B,O,D+32*b,8),i(J,tt+b*h.B,K,ot+32*b,8)}}function Gr(h,f,b,w,C,E,M,k,O){var D=[0],K=[0],ot=0,lt=O!=null?O.kd:0,et=O??new qa;if(h==null||12>b)return 7;et.data=h,et.w=f,et.ha=b,f=[f],b=[b],et.gb=[et.gb];t:{var xt=f,ft=b,J=et.gb;if(t(h!=null),t(ft!=null),t(J!=null),J[0]=0,12<=ft[0]&&!e(h,xt[0],"RIFF")){if(e(h,xt[0]+8,"WEBP")){J=3;break t}var tt=Ot(h,xt[0]+4);if(12>tt||4294967286<tt){J=3;break t}if(lt&&tt>ft[0]-8){J=7;break t}J[0]=tt,xt[0]+=12,ft[0]-=12}J=0}if(J!=0)return J;for(tt=0<et.gb[0],b=b[0];;){t:{var yt=h;ft=f,J=b;var At=D,_t=K,Bt=xt=[0];if((Nt=ot=[ot])[0]=0,8>J[0])J=7;else{if(!e(yt,ft[0],"VP8X")){if(Ot(yt,ft[0]+4)!=10){J=3;break t}if(18>J[0]){J=7;break t}var Tt=Ot(yt,ft[0]+8),Gt=1+Rt(yt,ft[0]+12);if(2147483648<=Gt*(yt=1+Rt(yt,ft[0]+15))){J=3;break t}Bt!=null&&(Bt[0]=Tt),At!=null&&(At[0]=Gt),_t!=null&&(_t[0]=yt),ft[0]+=18,J[0]-=18,Nt[0]=1}J=0}}if(ot=ot[0],xt=xt[0],J!=0)return J;if(ft=!!(2&xt),!tt&&ot)return 3;if(E!=null&&(E[0]=!!(16&xt)),M!=null&&(M[0]=ft),k!=null&&(k[0]=0),M=D[0],xt=K[0],ot&&ft&&O==null){J=0;break}if(4>b){J=7;break}if(tt&&ot||!tt&&!ot&&!e(h,f[0],"ALPH")){b=[b],et.na=[et.na],et.P=[et.P],et.Sa=[et.Sa];t:{Tt=h,J=f,tt=b;var Nt=et.gb;At=et.na,_t=et.P,Bt=et.Sa,Gt=22,t(Tt!=null),t(tt!=null),yt=J[0];var xe=tt[0];for(t(At!=null),t(Bt!=null),At[0]=null,_t[0]=null,Bt[0]=0;;){if(J[0]=yt,tt[0]=xe,8>xe){J=7;break t}var Se=Ot(Tt,yt+4);if(4294967286<Se){J=3;break t}var we=8+Se+1&-2;if(Gt+=we,0<Nt&&Gt>Nt){J=3;break t}if(!e(Tt,yt,"VP8 ")||!e(Tt,yt,"VP8L")){J=0;break t}if(xe[0]<we){J=7;break t}e(Tt,yt,"ALPH")||(At[0]=Tt,_t[0]=yt+8,Bt[0]=Se),yt+=we,xe-=we}}if(b=b[0],et.na=et.na[0],et.P=et.P[0],et.Sa=et.Sa[0],J!=0)break}b=[b],et.Ja=[et.Ja],et.xa=[et.xa];t:if(Nt=h,J=f,tt=b,At=et.gb[0],_t=et.Ja,Bt=et.xa,Tt=J[0],yt=!e(Nt,Tt,"VP8 "),Gt=!e(Nt,Tt,"VP8L"),t(Nt!=null),t(tt!=null),t(_t!=null),t(Bt!=null),8>tt[0])J=7;else{if(yt||Gt){if(Nt=Ot(Nt,Tt+4),12<=At&&Nt>At-12){J=3;break t}if(lt&&Nt>tt[0]-8){J=7;break t}_t[0]=Nt,J[0]+=8,tt[0]-=8,Bt[0]=Gt}else Bt[0]=5<=tt[0]&&Nt[Tt+0]==47&&!(Nt[Tt+4]>>5),_t[0]=tt[0];J=0}if(b=b[0],et.Ja=et.Ja[0],et.xa=et.xa[0],f=f[0],J!=0)break;if(4294967286<et.Ja)return 3;if(k==null||ft||(k[0]=et.xa?2:1),M=[M],xt=[xt],et.xa){if(5>b){J=7;break}k=M,lt=xt,ft=E,h==null||5>b?h=0:5<=b&&h[f+0]==47&&!(h[f+4]>>5)?(tt=[0],Nt=[0],At=[0],Q(_t=new L,h,f,b),Xt(_t,tt,Nt,At)?(k!=null&&(k[0]=tt[0]),lt!=null&&(lt[0]=Nt[0]),ft!=null&&(ft[0]=At[0]),h=1):h=0):h=0}else{if(10>b){J=7;break}k=xt,h==null||10>b||!el(h,f+3,b-3)?h=0:(lt=h[f+0]|h[f+1]<<8|h[f+2]<<16,ft=16383&(h[f+7]<<8|h[f+6]),h=16383&(h[f+9]<<8|h[f+8]),1&lt||3<(lt>>1&7)||!(lt>>4&1)||lt>>5>=et.Ja||!ft||!h?h=0:(M&&(M[0]=ft),k&&(k[0]=h),h=1))}if(!h||(M=M[0],xt=xt[0],ot&&(D[0]!=M||K[0]!=xt)))return 3;O!=null&&(O[0]=et,O.offset=f-O.w,t(4294967286>f-O.w),t(O.offset==O.ha-b));break}return J==0||J==7&&ot&&O==null?(E!=null&&(E[0]|=et.na!=null&&0<et.na.length),w!=null&&(w[0]=M),C!=null&&(C[0]=xt),0):J}function Ka(h,f,b){var w=f.width,C=f.height,E=0,M=0,k=w,O=C;if(f.Da=h!=null&&0<h.Da,f.Da&&(k=h.cd,O=h.bd,E=h.v,M=h.j,11>b||(E&=-2,M&=-2),0>E||0>M||0>=k||0>=O||E+k>w||M+O>C))return 0;if(f.v=E,f.j=M,f.va=E+k,f.o=M+O,f.U=k,f.T=O,f.da=h!=null&&0<h.da,f.da){if(!ae(k,O,b=[h.ib],E=[h.hb]))return 0;f.ib=b[0],f.hb=E[0]}return f.ob=h!=null&&h.ob,f.Kb=h==null||!h.Sd,f.da&&(f.ob=f.ib<3*w/4&&f.hb<3*C/4,f.Kb=0),1}function Ja(h){if(h==null)return 2;if(11>h.S){var f=h.f.RGBA;f.fb+=(h.height-1)*f.A,f.A=-f.A}else f=h.f.kb,h=h.height,f.O+=(h-1)*f.fa,f.fa=-f.fa,f.N+=(h-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(h-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(h-1)*f.lb,f.lb=-f.lb);return 0}function $r(h,f,b,w){if(w==null||0>=h||0>=f)return 2;if(b!=null){if(b.Da){var C=b.cd,E=b.bd,M=-2&b.v,k=-2&b.j;if(0>M||0>k||0>=C||0>=E||M+C>h||k+E>f)return 2;h=C,f=E}if(b.da){if(!ae(h,f,C=[b.ib],E=[b.hb]))return 2;h=C[0],f=E[0]}}w.width=h,w.height=f;t:{var O=w.width,D=w.height;if(h=w.S,0>=O||0>=D||!(h>=Cl&&13>h))h=2;else{if(0>=w.Rd&&w.sd==null){M=E=C=f=0;var K=(k=O*Mp[h])*D;if(11>h||(E=(D+1)/2*(f=(O+1)/2),h==12&&(M=(C=O)*D)),(D=s(K+2*E+M))==null){h=1;break t}w.sd=D,11>h?((O=w.f.RGBA).eb=D,O.fb=0,O.A=k,O.size=K):((O=w.f.kb).y=D,O.O=0,O.fa=k,O.Fd=K,O.f=D,O.N=0+K,O.Ab=f,O.Cd=E,O.ea=D,O.W=0+K+E,O.Db=f,O.Ed=E,h==12&&(O.F=D,O.J=0+K+2*E),O.Tc=M,O.lb=C)}if(f=1,C=w.S,E=w.width,M=w.height,C>=Cl&&13>C)if(11>C)h=w.f.RGBA,f&=(k=Math.abs(h.A))*(M-1)+E<=h.size,f&=k>=E*Mp[C],f&=h.eb!=null;else{h=w.f.kb,k=(E+1)/2,K=(M+1)/2,O=Math.abs(h.fa),D=Math.abs(h.Ab);var ot=Math.abs(h.Db),lt=Math.abs(h.lb),et=lt*(M-1)+E;f&=O*(M-1)+E<=h.Fd,f&=D*(K-1)+k<=h.Cd,f=(f&=ot*(K-1)+k<=h.Ed)&O>=E&D>=k&ot>=k,f&=h.y!=null,f&=h.f!=null,f&=h.ea!=null,C==12&&(f&=lt>=E,f&=et<=h.Tc,f&=h.F!=null)}else f=0;h=f?0:2}}return h!=0||b!=null&&b.fd&&(h=Ja(w)),h}var Pi=64,Xr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Yr=24,Kr=32,Qa=8,$i=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kt("Predictor0","PredictorAdd0"),F.Predictor0=function(){return 4278190080},F.Predictor1=function(h){return h},F.Predictor2=function(h,f,b){return f[b+0]},F.Predictor3=function(h,f,b){return f[b+1]},F.Predictor4=function(h,f,b){return f[b-1]},F.Predictor5=function(h,f,b){return It(It(h,f[b+1]),f[b+0])},F.Predictor6=function(h,f,b){return It(h,f[b-1])},F.Predictor7=function(h,f,b){return It(h,f[b+0])},F.Predictor8=function(h,f,b){return It(f[b-1],f[b+0])},F.Predictor9=function(h,f,b){return It(f[b+0],f[b+1])},F.Predictor10=function(h,f,b){return It(It(h,f[b-1]),It(f[b+0],f[b+1]))},F.Predictor11=function(h,f,b){var w=f[b+0];return 0>=ce(w>>24&255,h>>24&255,(f=f[b-1])>>24&255)+ce(w>>16&255,h>>16&255,f>>16&255)+ce(w>>8&255,h>>8&255,f>>8&255)+ce(255&w,255&h,255&f)?w:h},F.Predictor12=function(h,f,b){var w=f[b+0];return(qt((h>>24&255)+(w>>24&255)-((f=f[b-1])>>24&255))<<24|qt((h>>16&255)+(w>>16&255)-(f>>16&255))<<16|qt((h>>8&255)+(w>>8&255)-(f>>8&255))<<8|qt((255&h)+(255&w)-(255&f)))>>>0},F.Predictor13=function(h,f,b){var w=f[b-1];return(ee((h=It(h,f[b+0]))>>24&255,w>>24&255)<<24|ee(h>>16&255,w>>16&255)<<16|ee(h>>8&255,w>>8&255)<<8|ee(h>>0&255,w>>0&255))>>>0};var Xh=F.PredictorAdd0;F.PredictorAdd1=de,kt("Predictor2","PredictorAdd2"),kt("Predictor3","PredictorAdd3"),kt("Predictor4","PredictorAdd4"),kt("Predictor5","PredictorAdd5"),kt("Predictor6","PredictorAdd6"),kt("Predictor7","PredictorAdd7"),kt("Predictor8","PredictorAdd8"),kt("Predictor9","PredictorAdd9"),kt("Predictor10","PredictorAdd10"),kt("Predictor11","PredictorAdd11"),kt("Predictor12","PredictorAdd12"),kt("Predictor13","PredictorAdd13");var Za=F.PredictorAdd2;fe("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),fe("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var vl,un=F.ColorIndexInverseTransform,Jr=F.MapARGB,yl=F.VP8LColorIndexInverseTransformAlpha,wl=F.MapAlpha,ks=F.VP8LPredictorsAdd=[];ks.length=16,(F.VP8LPredictors=[]).length=16,(F.VP8LPredictorsAdd_C=[]).length=16,(F.VP8LPredictors_C=[]).length=16;var ur,Xi,zi,Ts,ls,cs,Qr,hs,ei,to,Ui,dn,Zr,_l,eo,dr,fr,Os,pr,ta,gr,Ns,io,fn,pn,De,je,ii,gi=s(511),us=s(2041),no=s(225),ea=s(767),xl=0,Yh=us,Al=no,nn=ea,gn=gi,Cl=0,Pl=1,bp=2,Sl=3,El=4,Kh=5,vp=6,Jh=7,Qh=8,Ll=9,Zh=10,km=[2,3,7],Tm=[3,3,11],yp=[280,256,256,256,40],Om=[0,1,1,1,0],Nm=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Im=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Rm=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Fm=8,tu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],eu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],so=null,Dm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Bm=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Um=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Hm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Is=[],kn=[],ds=[],Vm=1,_p=2,Rs=[],mn=[];gt("UpsampleRgbLinePair",be,3),gt("UpsampleBgrLinePair",Ve,3),gt("UpsampleRgbaLinePair",Mn,4),gt("UpsampleBgraLinePair",yi,4),gt("UpsampleArgbLinePair",ki,4),gt("UpsampleRgba4444LinePair",hi,2),gt("UpsampleRgb565LinePair",Ye,2);var qm=F.UpsampleRgbLinePair,Wm=F.UpsampleBgrLinePair,xp=F.UpsampleRgbaLinePair,Ap=F.UpsampleBgraLinePair,Cp=F.UpsampleArgbLinePair,Pp=F.UpsampleRgba4444LinePair,Gm=F.UpsampleRgb565LinePair,Ml=16,kl=1<<Ml-1,ro=-227,iu=482,Sp=6,$m=(256<<Sp)-1,Ep=0,Xm=s(256),Ym=s(256),Km=s(256),Jm=s(256),Qm=s(iu-ro),Zm=s(iu-ro);Xn("YuvToRgbRow",be,3),Xn("YuvToBgrRow",Ve,3),Xn("YuvToRgbaRow",Mn,4),Xn("YuvToBgraRow",yi,4),Xn("YuvToArgbRow",ki,4),Xn("YuvToRgba4444Row",hi,2),Xn("YuvToRgb565Row",Ye,2);var Lp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tl=[0,2,8],t1=[8,7,6,4,4,2,2,2,1,1,1,1],e1=1;this.WebPDecodeRGBA=function(h,f,b,w,C){var E=Pl,M=new qr,k=new xn;M.ba=k,k.S=E,k.width=[k.width],k.height=[k.height];var O=k.width,D=k.height,K=new ss;if(K==null||h==null)var ot=2;else t(K!=null),ot=Gr(h,f,b,K.width,K.height,K.Pd,K.Qd,K.format,null);if(ot!=0?O=0:(O!=null&&(O[0]=K.width[0]),D!=null&&(D[0]=K.height[0]),O=1),O){k.width=k.width[0],k.height=k.height[0],w!=null&&(w[0]=k.width),C!=null&&(C[0]=k.height);t:{if(w=new Dr,(C=new qa).data=h,C.w=f,C.ha=b,C.kd=1,f=[0],t(C!=null),((h=Gr(C.data,C.w,C.ha,null,null,null,f,null,C))==0||h==7)&&f[0]&&(h=4),(f=h)==0){if(t(M!=null),w.data=C.data,w.w=C.w+C.offset,w.ha=C.ha-C.offset,w.put=Un,w.ac=Ci,w.bc=Hn,w.ma=M,C.xa){if((h=hn())==null){M=1;break t}if(function(lt,et){var xt=[0],ft=[0],J=[0];e:for(;;){if(lt==null)return 0;if(et==null)return lt.a=2,0;if(lt.l=et,lt.a=0,Q(lt.m,et.data,et.w,et.ha),!Xt(lt.m,xt,ft,J)){lt.a=3;break e}if(lt.xb=_p,et.width=xt[0],et.height=ft[0],!Wn(xt[0],ft[0],1,lt,null))break e;return 1}return t(lt.a!=0),0}(h,w)){if(w=(f=$r(w.width,w.height,M.Oa,M.ba))==0){e:{w=h;i:for(;;){if(w==null){w=0;break e}if(t(w.s.yc!=null),t(w.s.Ya!=null),t(0<w.s.Wb),t((b=w.l)!=null),t((C=b.ma)!=null),w.xb!=0){if(w.ca=C.ba,w.tb=C.tb,t(w.ca!=null),!Ka(C.Oa,b,Sl)){w.a=2;break i}if(!ar(w,b.width)||b.da)break i;if((b.da||Ce(w.ca.S))&&st(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&st()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!Yt(w.s.vb,w.s.Wa.Xa)){w.a=1;break i}w.xb=0}if(!Sn(w,w.V,w.Ba,w.c,w.i,b.o,Tr))break i;C.Dc=w.Ma,w=1;break e}t(w.a!=0),w=0}w=!w}w&&(f=h.a)}else f=h.a}else{if((h=new Mh)==null){M=1;break t}if(h.Fa=C.na,h.P=C.P,h.qc=C.Sa,il(h,w)){if((f=$r(w.width,w.height,M.Oa,M.ba))==0){if(h.Aa=0,b=M.Oa,t((C=h)!=null),b!=null){if(0<(O=0>(O=b.Md)?0:100<O?255:255*O/100)){for(D=K=0;4>D;++D)12>(ot=C.pb[D]).lc&&(ot.ia=O*t1[0>ot.lc?0:ot.lc]>>3),K|=ot.ia;K&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=b.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}kh(h,w)||(f=h.a)}}else f=h.a}f==0&&M.Oa!=null&&M.Oa.fd&&(f=Ja(M.ba))}M=f}E=M!=0?null:11>E?k.f.RGBA.eb:k.f.kb.y}else E=null;return E};var Mp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(F,I){for(var W="",S=0;S<4;S++)W+=String.fromCharCode(F[I++]);return W}function u(F,I){return(F[I+0]<<0|F[I+1]<<8|F[I+2]<<16)>>>0}function d(F,I){return(F[I+0]<<0|F[I+1]<<8|F[I+2]<<16|F[I+3]<<24)>>>0}new l;var g=[0],p=[0],v=[],y=new l,x=r,_=function(F,I){var W={},S=0,N=!1,G=0,H=0;if(W.frames=[],!function(j,V,$,Z){for(var nt=0;nt<Z;nt++)if(j[V+nt]!=$.charCodeAt(nt))return!0;return!1}(F,I,"RIFF",4)){for(d(F,I+=4),I+=8;I<F.length;){var at=c(F,I),rt=d(F,I+=4);I+=4;var it=rt+(1&rt);switch(at){case"VP8 ":case"VP8L":W.frames[S]===void 0&&(W.frames[S]={}),(pt=W.frames[S]).src_off=N?H:I-8,pt.src_size=G+rt+8,S++,N&&(N=!1,G=0,H=0);break;case"VP8X":(pt=W.header={}).feature_flags=F[I];var Q=I+4;pt.canvas_width=1+u(F,Q),Q+=3,pt.canvas_height=1+u(F,Q),Q+=3;break;case"ALPH":N=!0,G=it+8,H=I-8;break;case"ANIM":(pt=W.header).bgcolor=d(F,I),Q=I+4,pt.loop_count=(Mt=F)[(L=Q)+0]<<0|Mt[L+1]<<8,Q+=2;break;case"ANMF":var ut,pt;(pt=W.frames[S]={}).offset_x=2*u(F,I),I+=3,pt.offset_y=2*u(F,I),I+=3,pt.width=1+u(F,I),I+=3,pt.height=1+u(F,I),I+=3,pt.duration=u(F,I),I+=3,ut=F[I++],pt.dispose=1&ut,pt.blend=ut>>1&1}at!="ANMF"&&(I+=it)}var Mt,L;return W}}(x,0);_.response=x,_.rgbaoutput=!0,_.dataurl=!1;var A=_.header?_.header:null,T=_.frames?_.frames:null;if(A){A.loop_counter=A.loop_count,g=[A.canvas_height],p=[A.canvas_width];for(var R=0;R<T.length&&T[R].blend!=0;R++);}var z=T[0],Y=y.WebPDecodeRGBA(x,z.src_off,z.src_size,p,g);z.rgba=Y,z.imgwidth=p[0],z.imgheight=g[0];for(var U=0;U<p[0]*g[0]*4;U++)v[U]=Y[U];return this.width=p,this.height=g,this.data=v,this}(function(r){var t=function(){return typeof dh=="function"},e=function(g,p,v,y){var x=4,_=a;switch(y){case r.image_compression.FAST:x=1,_=s;break;case r.image_compression.MEDIUM:x=6,_=o;break;case r.image_compression.SLOW:x=9,_=l}g=i(g,p,v,_);var A=dh(g,{level:x});return r.__addimage__.arrayBufferToBinaryString(A)},i=function(g,p,v,y){for(var x,_,A,T=g.length/p,R=new Uint8Array(g.length+T),z=u(),Y=0;Y<T;Y+=1){if(A=Y*p,x=g.subarray(A,A+p),y)R.set(y(x,v,_),A+Y);else{for(var U,F=z.length,I=[];U<F;U+=1)I[U]=z[U](x,v,_);var W=d(I.concat());R.set(I[W],A+Y)}_=x}return R},n=function(g){var p=Array.apply([],g);return p.unshift(0),p},s=function(g,p){var v,y=[],x=g.length;y[0]=1;for(var _=0;_<x;_+=1)v=g[_-p]||0,y[_+1]=g[_]-v+256&255;return y},a=function(g,p,v){var y,x=[],_=g.length;x[0]=2;for(var A=0;A<_;A+=1)y=v&&v[A]||0,x[A+1]=g[A]-y+256&255;return x},o=function(g,p,v){var y,x,_=[],A=g.length;_[0]=3;for(var T=0;T<A;T+=1)y=g[T-p]||0,x=v&&v[T]||0,_[T+1]=g[T]+256-(y+x>>>1)&255;return _},l=function(g,p,v){var y,x,_,A,T=[],R=g.length;T[0]=4;for(var z=0;z<R;z+=1)y=g[z-p]||0,x=v&&v[z]||0,_=v&&v[z-p]||0,A=c(y,x,_),T[z+1]=g[z]-A+256&255;return T},c=function(g,p,v){if(g===p&&p===v)return g;var y=Math.abs(p-v),x=Math.abs(g-v),_=Math.abs(g+p-v-v);return y<=x&&y<=_?g:x<=_?p:v},u=function(){return[n,s,a,o,l]},d=function(g){var p=g.map(function(v){return v.reduce(function(y,x){return y+Math.abs(x)},0)});return p.indexOf(Math.min.apply(null,p))};r.processPNG=function(g,p,v,y){var x,_,A,T,R,z,Y,U,F,I,W,S,N,G,H,at=this.decode.FLATE_DECODE,rt="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(A=new I5(g)).imgData,_=A.bits,x=A.colorSpace,R=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){F=(U=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,W=new Uint8Array(F*A.colors),I=new Uint8Array(F);var it,Q=A.pixelBitlength-A.bits;for(G=0,H=0;G<F;G++){for(N=U[G],it=0;it<Q;)W[H++]=N>>>it&255,it+=A.bits;I[G]=N>>>it&255}}if(A.bits===16){F=(U=new Uint32Array(A.decodePixels().buffer)).length,W=new Uint8Array(F*(32/A.pixelBitlength)*A.colors),I=new Uint8Array(F*(32/A.pixelBitlength)),S=A.colors>1,G=0,H=0;for(var ut=0;G<F;)N=U[G++],W[H++]=N>>>0&255,S&&(W[H++]=N>>>16&255,N=U[G++],W[H++]=N>>>0&255),I[ut++]=N>>>16&255;_=8}y!==r.image_compression.NONE&&t()?(g=e(W,A.width*A.colors,A.colors,y),Y=e(I,A.width,1,y)):(g=W,Y=I,at=void 0)}if(A.colorType===3&&(x=this.color_spaces.INDEXED,z=A.palette,A.transparency.indexed)){var pt=A.transparency.indexed,Mt=0;for(G=0,F=pt.length;G<F;++G)Mt+=pt[G];if((Mt/=255)===F-1&&pt.indexOf(0)!==-1)T=[pt.indexOf(0)];else if(Mt!==F){for(U=A.decodePixels(),I=new Uint8Array(U.length),G=0,F=U.length;G<F;G++)I[G]=pt[U[G]];Y=e(I,A.width,1)}}var L=function(j){var V;switch(j){case r.image_compression.FAST:V=11;break;case r.image_compression.MEDIUM:V=13;break;case r.image_compression.SLOW:V=14;break;default:V=12}return V}(y);return at===this.decode.FLATE_DECODE&&(rt="/Predictor "+L+" "),rt+="/Colors "+R+" /BitsPerComponent "+_+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(Y&&this.__addimage__.isArrayBuffer(Y)||this.__addimage__.isArrayBufferView(Y))&&(Y=this.__addimage__.arrayBufferToBinaryString(Y)),{alias:v,data:g,index:p,filter:at,decodeParameters:rt,transparency:T,palette:z,sMask:Y,predictor:L,width:A.width,height:A.height,bitsPerComponent:_,colorSpace:x}}}})($t.API),function(r){r.processGIF89A=function(t,e,i,n){var s=new R5(t),a=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:a,height:o},u=new op(100).encode(c,100);return r.processJPEG.call(this,u,e,i,n)},r.processGIF87A=r.processGIF89A}($t.API),Dn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var t=0;t<r;t++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:i,blue:e,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Dn.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[r]()}catch(e){Fe.log("bit decode error:"+e)}},Dn.prototype.bit1=function(){var r,t=Math.ceil(this.width/8),e=t%4;for(r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,n=0;n<t;n++)for(var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*n*4,o=0;o<8&&8*n+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[a+4*o]=l.blue,this.data[a+4*o+1]=l.green,this.data[a+4*o+2]=l.red,this.data[a+4*o+3]=255}e!==0&&(this.pos+=4-e)}},Dn.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),t=r%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<r;n++){var s=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*n*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[a]=c.blue,this.data[a+1]=c.green,this.data[a+2]=c.red,this.data[a+3]=255,2*n+1>=this.width)break;c=this.palette[l],this.data[a+4]=c.blue,this.data[a+4+1]=c.green,this.data[a+4+2]=c.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Dn.prototype.bit8=function(){for(var r=this.width%4,t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var n=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;if(n<this.palette.length){var a=this.palette[n];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},Dn.prototype.bit15=function(){for(var r=this.width%3,t=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,u=i*this.width*4+4*n;this.data[u]=l,this.data[u+1]=o,this.data[u+2]=a,this.data[u+3]=c}this.pos+=r}},Dn.prototype.bit16=function(){for(var r=this.width%3,t=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&e)/e*255|0,c=(a>>11)/t*255|0,u=n*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=255}this.pos+=r}},Dn.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*e;this.data[a]=s,this.data[a+1]=n,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},Dn.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var t=this.bottom_up?r:this.height-1-r,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*e;this.data[o]=s,this.data[o+1]=n,this.data[o+2]=i,this.data[o+3]=a}},Dn.prototype.getData=function(){return this.data},function(r){r.processBMP=function(t,e,i,n){var s=new Dn(t,!1),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new op(100).encode(l,100);return r.processJPEG.call(this,c,e,i,n)}}($t.API),gm.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(t,e,i,n){var s=new gm(t),a=s.width,o=s.height,l={data:s.getData(),width:a,height:o},c=new op(100).encode(l,100);return r.processJPEG.call(this,c,e,i,n)}}($t.API),$t.API.processRGBA=function(r,t,e){for(var i=r.data,n=i.length,s=new Uint8Array(n/4*3),a=new Uint8Array(n/4),o=0,l=0,c=0;c<n;c+=4){var u=i[c],d=i[c+1],g=i[c+2],p=i[c+3];s[o++]=u,s[o++]=d,s[o++]=g,a[l++]=p}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:v,index:t,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},$t.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pa=$t.API,mh=Pa.getCharWidthsArray=function(r,t){var e,i,n=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:n.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:n.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=t.doKerning!==!1,g=0,p=r.length,v=0,y=o[0]||l,x=[];for(e=0;e<p;e++)i=r.charCodeAt(e),typeof n.metadata.widthOfString=="function"?x.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(i))+a*(1e3/s)||0)/1e3):(g=d&&Ne(c[i])==="object"&&!isNaN(parseInt(c[i][v],10))?c[i][v]/u:0,x.push((o[i]||y)/l+g)),v=i;return x},um=Pa.getStringUnitWidth=function(r,t){var e=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return Pa.processArabic&&(r=Pa.processArabic(r)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(r,e,n)/e:mh.apply(this,arguments).reduce(function(s,a){return s+a},0)},dm=function(r,t,e,i){for(var n=[],s=0,a=r.length,o=0;s!==a&&o+t[s]<e;)o+=t[s],s++;n.push(r.slice(0,s));var l=s;for(o=0;s!==a;)o+t[s]>i&&(n.push(r.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&n.push(r.slice(l,s)),n},fm=function(r,t,e){e||(e={});var i,n,s,a,o,l,c,u=[],d=[u],g=e.textIndent||0,p=0,v=0,y=r.split(" "),x=mh.apply(this,[" ",e])[0];if(l=e.lineIndent===-1?y[0].length+2:e.lineIndent||0){var _=Array(l).join(" "),A=[];y.map(function(R){(R=R.split(/\s*\n/)).length>1?A=A.concat(R.map(function(z,Y){return(Y&&z.length?`
`:"")+z})):A.push(R[0])}),y=A,l=um.apply(this,[_,e])}for(s=0,a=y.length;s<a;s++){var T=0;if(i=y[s],l&&i[0]==`
`&&(i=i.substr(1),T=1),g+p+(v=(n=mh.apply(this,[i,e])).reduce(function(R,z){return R+z},0))>t||T){if(v>t){for(o=dm.apply(this,[i,n,t-(g+p),t]),u.push(o.shift()),u=[o.pop()];o.length;)d.push([o.shift()]);v=n.slice(i.length-(u[0]?u[0].length:0)).reduce(function(R,z){return R+z},0)}else u=[i];d.push(u),g=v+l,p=x}else u.push(i),g+=p+v,p=x}return c=l?function(R,z){return(z?_:"")+R.join(" ")}:function(R){return R.join(" ")},d.map(c)},Pa.splitTextToSize=function(r,t,e){var i,n=(e=e||{}).fontSize||this.internal.getFontSize(),s=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);i=Array.isArray(r)?r:String(r).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/n;s.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/n:0,s.lineIndent=e.lineIndent;var o,l,c=[];for(o=0,l=i.length;o<l;o++)c=c.concat(fm.apply(this,[i[o],a,s]));return c},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",e={},i={},n=0;n<t.length;n++)e[t[n]]="0123456789abcdef"[n],i["0123456789abcdef"[n]]=t[n];var s=function(d){return"0x"+parseInt(d,10).toString(16)},a=r.__fontmetrics__.compress=function(d){var g,p,v,y,x=["{"];for(var _ in d){if(g=d[_],isNaN(parseInt(_,10))?p="'"+_+"'":(_=parseInt(_,10),p=(p=s(_).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof g=="number")g<0?(v=s(g).slice(3),y="-"):(v=s(g).slice(2),y=""),v=y+v.slice(0,-1)+i[v.slice(-1)];else{if(Ne(g)!=="object")throw new Error("Don't know what to do with value type "+Ne(g)+".");v=a(g)}x.push(p+v)}return x.push("}"),x.join("")},o=r.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,v,y,x={},_=1,A=x,T=[],R="",z="",Y=d.length-1,U=1;U<Y;U+=1)(y=d[U])=="'"?g?(v=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(T.push([A,v]),A={},v=void 0):y=="}"?((p=T.pop())[0][p[1]]=A,v=void 0,A=p[0]):y=="-"?_=-1:v===void 0?e.hasOwnProperty(y)?(R+=e[y],v=parseInt(R,16)*_,_=1,R=""):R+=y:e.hasOwnProperty(y)?(z+=e[y],A[v]=parseInt(z,16)*_,_=1,v=void 0,z=""):z+=y;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(d){var g=d.font,p=u.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var v=c.Unicode[g.postScriptName];v&&(g.metadata.Unicode.encoding=v,g.encoding=v.codePages[0])}])}($t.API),function(r){var t=function(e){for(var i=e.length,n=new Uint8Array(i),s=0;s<i;s++)n[s]=e.charCodeAt(s);return n};r.API.events.push(["addFont",function(e){var i=void 0,n=e.font,s=e.instance;if(!n.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(i=s.existsFileInVFS(n.postScriptName)===!1?s.loadFile(n.postScriptName):s.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Xo(o)),a.metadata=r.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(n,i)}}])}($t),function(r){function t(){return(Jt.canvg?Promise.resolve(Jt.canvg):import("./chunk-V7366JRD.js")).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}$t.API.addSvgAsImage=function(e,i,n,s,a,o,l,c){if(isNaN(i)||isNaN(n))throw Fe.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Fe.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=a;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(d,e,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(g)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),i,n,s,a,l,c)})}}(),$t.API.putTotalPages=function(r){var t,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(r,"g"),e=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var n=0;n<this.internal.pages[i].length;n++)this.internal.pages[i][n]=this.internal.pages[i][n].replace(t,e);return this},$t.API.viewerPreferences=function(r,t){var e;r=r||{},t=t||!1;var i,n,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),l=[],c=0,u=0,d=0;function g(v,y){var x,_=!1;for(x=0;x<v.length;x+=1)v[x]===y&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,r==="reset"||t===!0){var p=o.length;for(d=0;d<p;d+=1)e[o[d]].value=e[o[d]].defaultValue,e[o[d]].explicitSet=!1}if(Ne(r)==="object"){for(n in r)if(s=r[n],g(o,n)&&s!==void 0){if(e[n].type==="boolean"&&typeof s=="boolean")e[n].value=s;else if(e[n].type==="name"&&g(e[n].valueSet,s))e[n].value=s;else if(e[n].type==="integer"&&Number.isInteger(s))e[n].value=s;else if(e[n].type==="array"){for(c=0;c<s.length;c+=1)if(i=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(i=!1);i===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}e[n].value="["+l.join(" ")+"]"}else e[n].value=e[n].defaultValue;e[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in e)e[v].explicitSet===!0&&(e[v].type==="name"?y.push("/"+v+" /"+e[v].value):y.push("/"+v+" "+e[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},function(r){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+a.length+o.length+n.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(n+s+a+o+l),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(i,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",t)),this}}($t.API),function(r){var t=r.API,e=t.pdfEscape16=function(s,a){for(var o,l=a.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,g=s.length;d<g;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return u.join("");o=o.toString(16),u.push(c[4-o.length],o)}return u.join("")},i=function(s){var a,o,l,c,u,d,g;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,g=(o=Object.keys(s).sort(function(p,v){return p-v})).length;d<g;d++)a=o[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(c=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),l.push("<"+a+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",v=0;v<g.length;v++)p+=String.fromCharCode(g[v]);var y=c();u({data:p,addLength1:!0,objectId:y}),l("endobj");var x=c();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var _=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ea(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var A=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ea(o.fontName)),l("/FontDescriptor "+_+" 0 R"),l("/W "+r.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+Ea(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(a){var o=a.font,l=a.out,c=a.newObject,u=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,g="",p=0;p<d.length;p++)g+=String.fromCharCode(d[p]);var v=c();u({data:g,addLength1:!0,objectId:v}),l("endobj");var y=c();u({data:i(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var x=c();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+Ea(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=c();for(var _=0;_<o.metadata.hmtx.widths.length;_++)o.metadata.hmtx.widths[_]=parseInt(o.metadata.hmtx.widths[_]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Ea(o.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(s)}]);var n=function(s){var a,o=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},g=d.pdfEscape,p=d.activeFontKey,v=d.fonts,y=p,x="",_=0,A="",T=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:o,x:l,y:c,options:u,mutex:d};for(A=o,y=p,Array.isArray(o)&&(A=o[0]),_=0;_<A.length;_+=1)v[y].metadata.hasOwnProperty("cmap")&&(a=v[y].metadata.cmap.unicode.codeMap[A[_].charCodeAt(0)]),a||A[_].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?x+=A[_]:x+="";var R="";return parseInt(y.slice(1))<14||T==="WinAnsiEncoding"?R=g(x,y).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(R=e(x,v[y])),d.isHex=!0,{text:R,x:l,y:c,options:u,mutex:d}};t.events.push(["postProcessText",function(s){var a=s.text||"",o=[],l={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var c=0;for(c=0;c<a.length;c+=1)Array.isArray(a[c])&&a[c].length===3?o.push([n(Object.assign({},l,{text:a[c][0]})).text,a[c][1],a[c][2]]):o.push(n(Object.assign({},l,{text:a[c]})).text);s.text=o}else s.text=n(Object.assign({},l,{text:a})).text}])}($t),function(r){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0},r.addFileToVFS=function(e,i){return t.call(this),this.internal.vFS[e]=i,this},r.getFileFromVFS=function(e){return t.call(this),this.internal.vFS[e]!==void 0?this.internal.vFS[e]:null}}($t.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(i){var n,s,a,o,l,c,u,d=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,T=0;this.__bidiEngine__={};var R=function(S){var N=S.charCodeAt(),G=N>>8,H=y[G];return H!==void 0?d[256*H+(255&N)]:G===252||G===253?"AL":_.test(G)?"L":G===8?"R":"N"},z=function(S){for(var N,G=0;G<S.length;G++){if((N=R(S.charAt(G)))==="L")return!1;if(N==="R")return!0}return!1},Y=function(S,N,G,H){var at,rt,it,Q,ut=N[H];switch(ut){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(ut="AN");break;case"AL":A=!0,ut="R";break;case"WS":ut="N";break;case"CS":H<1||H+1>=N.length||(at=G[H-1])!=="EN"&&at!=="AN"||(rt=N[H+1])!=="EN"&&rt!=="AN"?ut="N":A&&(rt="AN"),ut=rt===at?rt:"N";break;case"ES":ut=(at=H>0?G[H-1]:"B")==="EN"&&H+1<N.length&&N[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&G[H-1]==="EN"){ut="EN";break}if(A){ut="N";break}for(it=H+1,Q=N.length;it<Q&&N[it]==="ET";)it++;ut=it<Q&&N[it]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(Q=N.length,it=H+1;it<Q&&N[it]==="NSM";)it++;if(it<Q){var pt=S[H],Mt=pt>=1425&&pt<=2303||pt===64286;if(at=N[it],Mt&&(at==="R"||at==="AL")){ut="R";break}}}ut=H<1||(at=N[H-1])==="B"?"N":G[H-1];break;case"B":A=!1,n=!0,ut=T;break;case"S":s=!0,ut="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":ut="N"}return ut},U=function(S,N,G){var H=S.split("");return G&&F(H,G,{hiLevel:T}),H.reverse(),N&&N.reverse(),H.join("")},F=function(S,N,G){var H,at,rt,it,Q,ut=-1,pt=S.length,Mt=0,L=[],j=T?p:g,V=[];for(A=!1,n=!1,s=!1,at=0;at<pt;at++)V[at]=R(S[at]);for(rt=0;rt<pt;rt++){if(Q=Mt,L[rt]=Y(S,V,L,rt),H=240&(Mt=j[Q][v[L[rt]]]),Mt&=15,N[rt]=it=j[Mt][5],H>0)if(H===16){for(at=ut;at<rt;at++)N[at]=1;ut=-1}else ut=-1;if(j[Mt][6])ut===-1&&(ut=rt);else if(ut>-1){for(at=ut;at<rt;at++)N[at]=it;ut=-1}V[rt]==="B"&&(N[rt]=0),G.hiLevel|=it}s&&function($,Z,nt){for(var ct=0;ct<nt;ct++)if($[ct]==="S"){Z[ct]=T;for(var ht=ct-1;ht>=0&&$[ht]==="WS";ht--)Z[ht]=T}}(V,N,pt)},I=function(S,N,G,H,at){if(!(at.hiLevel<S)){if(S===1&&T===1&&!n)return N.reverse(),void(G&&G.reverse());for(var rt,it,Q,ut,pt=N.length,Mt=0;Mt<pt;){if(H[Mt]>=S){for(Q=Mt+1;Q<pt&&H[Q]>=S;)Q++;for(ut=Mt,it=Q-1;ut<it;ut++,it--)rt=N[ut],N[ut]=N[it],N[it]=rt,G&&(rt=G[ut],G[ut]=G[it],G[it]=rt);Mt=Q}Mt++}}},W=function(S,N,G){var H=S.split(""),at={hiLevel:T};return G||(G=[]),F(H,G,at),function(rt,it,Q){if(Q.hiLevel!==0&&u)for(var ut,pt=0;pt<rt.length;pt++)it[pt]===1&&(ut=x.indexOf(rt[pt]))>=0&&(rt[pt]=x[ut+1])}(H,G,at),I(2,H,N,G,at),I(1,H,N,G,at),H.join("")};return this.__bidiEngine__.doBidiReorder=function(S,N,G){if(function(at,rt){if(rt)for(var it=0;it<at.length;it++)rt[it]=it;o===void 0&&(o=z(at)),c===void 0&&(c=z(at))}(S,N),a||!l||c)if(a&&l&&o^c)T=o?1:0,S=U(S,N,G);else if(!a&&l&&c)T=o?1:0,S=W(S,N,G),S=U(S,N);else if(!a||o||l||c){if(a&&!l&&o^c)S=U(S,N),o?(T=0,S=W(S,N,G)):(T=1,S=W(S,N,G),S=U(S,N));else if(a&&o&&!l&&c)T=1,S=W(S,N,G),S=U(S,N);else if(!a&&!l&&o^c){var H=u;o?(T=1,S=W(S,N,G),T=0,u=!1,S=W(S,N,G),u=H):(T=0,S=W(S,N,G),S=U(S,N),T=1,u=!1,S=W(S,N,G),u=H,S=U(S,N))}}else T=0,S=W(S,N,G);else T=o?1:0,S=W(S,N,G);return S},this.__bidiEngine__.setOptions=function(S){S&&(a=S.isInputVisual,l=S.isOutputVisual,o=S.isInputRtl,c=S.isOutputRtl,u=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(i){var n=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var a=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,e.setOptions(s),Object.prototype.toString.call(n)==="[object Array]"){var o=0;for(a=[],o=0;o<n.length;o+=1)Object.prototype.toString.call(n[o])==="[object Array]"?a.push([e.doBidiReorder(n[o][0]),n[o][1],n[o][2]]):a.push([e.doBidiReorder(n[o])]);i.text=a}else i.text=e.doBidiReorder(n);e.setOptions({isInputVisual:!0})}])}($t),$t.API.TTFFont=function(){function r(t){var e;if(this.rawData=t,e=this.contents=new ir(t),this.contents.pos=4,e.readString(4)==="ttcf")throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new K5(this),this.registerTTF()}return r.open=function(t){return new r(t)},r.prototype.parse=function(){return this.directory=new F5(this.contents),this.head=new j5(this),this.name=new V5(this),this.cmap=new Em(this),this.toUnicode={},this.hhea=new B5(this),this.maxp=new q5(this),this.hmtx=new W5(this),this.post=new U5(this),this.os2=new z5(this),this.loca=new Y5(this),this.glyf=new G5(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var t,e,i,n,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,o,l,c;for(c=[],a=0,o=(l=this.bbox).length;a<o;a++)t=l[a],c.push(Math.round(t*this.scaleFactor));return c}.call(this),this.stemV=0,this.post.exists?(i=255&(n=this.post.italic_angle),(32768&(e=n>>16))!=0&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(t){var e;return((e=this.cmap.unicode)!=null?e.codeMap[t]:void 0)||0},r.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},r.prototype.widthOfString=function(t,e,i){var n,s,a,o;for(a=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)n=t.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(n))+i*(1e3/e)||0;return a*(e/1e3)},r.prototype.lineHeight=function(t,e){var i;return e==null&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},r}();var Bn,ir=function(){function r(t){this.data=t??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(t){return this.data[this.pos++]=t},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},r.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},r.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},r.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},r.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},r.prototype.writeString=function(t){var e,i,n;for(n=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)n.push(this.writeByte(t.charCodeAt(e)));return n},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(t){return this.writeInt16(t)},r.prototype.readLongLong=function(){var t,e,i,n,s,a,o,l;return t=this.readByte(),e=this.readByte(),i=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^n)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^l)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*n+16777216*s+65536*a+256*o+l},r.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(t){return this.writeInt32(t)},r.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},r.prototype.write=function(t){var e,i,n,s;for(s=[],i=0,n=t.length;i<n;i++)e=t[i],s.push(this.writeByte(e));return s},r}(),F5=function(){var r;function t(e){var i,n,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,s=this.tableCount;0<=s?n<s:n>s;n=0<=s?++n:--n)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(e){var i,n,s,a,o,l,c,u,d,g,p,v,y;for(y in p=Object.keys(e).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),a=Math.floor(d/l),u=16*p-d,(n=new ir).writeInt(this.scalarType),n.writeShort(p),n.writeShort(d),n.writeShort(a),n.writeShort(u),s=16*p,c=n.pos+s,o=null,v=[],e)for(g=e[y],n.writeString(y),n.writeInt(r(g)),n.writeInt(c),n.writeInt(g.length),v=v.concat(g),y==="head"&&(o=c),c+=g.length;c%4;)v.push(0),c++;return n.write(v),i=2981146554-r(n.data),n.pos=o+8,n.writeUInt32(i),n.data},r=function(e){var i,n,s,a;for(e=Lm.call(e);e.length%4;)e.push(0);for(s=new ir(e),n=0,i=0,a=e.length;i<a;i=i+=4)n+=s.readUInt32();return 4294967295&n},t}(),D5={}.hasOwnProperty,ns=function(r,t){for(var e in t)D5.call(t,e)&&(r[e]=t[e]);function i(){this.constructor=r}return i.prototype=t.prototype,r.prototype=new i,r.__super__=t.prototype,r};Bn=function(){function r(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var j5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var i;return(i=new ir).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},t}(),mm=function(){function r(t,e){var i,n,s,a,o,l,c,u,d,g,p,v,y,x,_,A,T;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=t.readByte();break;case 4:for(p=t.readUInt16(),g=p/2,t.pos+=6,s=function(){var R,z;for(z=[],l=R=0;0<=g?R<g:R>g;l=0<=g?++R:--R)z.push(t.readUInt16());return z}(),t.pos+=2,y=function(){var R,z;for(z=[],l=R=0;0<=g?R<g:R>g;l=0<=g?++R:--R)z.push(t.readUInt16());return z}(),c=function(){var R,z;for(z=[],l=R=0;0<=g?R<g:R>g;l=0<=g?++R:--R)z.push(t.readUInt16());return z}(),u=function(){var R,z;for(z=[],l=R=0;0<=g?R<g:R>g;l=0<=g?++R:--R)z.push(t.readUInt16());return z}(),n=(this.length-t.pos+this.offset)/2,o=function(){var R,z;for(z=[],l=R=0;0<=n?R<n:R>n;l=0<=n?++R:--R)z.push(t.readUInt16());return z}(),l=_=0,T=s.length;_<T;l=++_)for(x=s[l],i=A=v=y[l];v<=x?A<=x:A>=x;i=v<=x?++A:--A)u[l]===0?a=i+c[l]:(a=o[u[l]/2+(i-v)-(g-l)]||0)!==0&&(a+=c[l]),this.codeMap[i]=65535&a}t.pos=d}return r.encode=function(t,e){var i,n,s,a,o,l,c,u,d,g,p,v,y,x,_,A,T,R,z,Y,U,F,I,W,S,N,G,H,at,rt,it,Q,ut,pt,Mt,L,j,V,$,Z,nt,ct,ht,Et,St,Rt;switch(H=new ir,a=Object.keys(t).sort(function(Ot,Yt){return Ot-Yt}),e){case"macroman":for(y=0,x=function(){var Ot=[];for(v=0;v<256;++v)Ot.push(0);return Ot}(),A={0:0},s={},at=0,ut=a.length;at<ut;at++)A[ht=t[n=a[at]]]==null&&(A[ht]=++y),s[n]={old:t[n],new:A[t[n]]},x[n]=A[t[n]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(x),{charMap:s,subtable:H.data,maxGlyphID:y+1};case"unicode":for(N=[],d=[],T=0,A={},i={},_=c=null,rt=0,pt=a.length;rt<pt;rt++)A[z=t[n=a[rt]]]==null&&(A[z]=++T),i[n]={old:z,new:A[z]},o=A[z]-n,_!=null&&o===c||(_&&d.push(_),N.push(n),c=o),_=n;for(_&&d.push(_),d.push(65535),N.push(65535),W=2*(I=N.length),F=2*Math.pow(Math.log(I)/Math.LN2,2),g=Math.log(F/2)/Math.LN2,U=2*I-F,l=[],Y=[],p=[],v=it=0,Mt=N.length;it<Mt;v=++it){if(S=N[v],u=d[v],S===65535){l.push(0),Y.push(0);break}if(S-(G=i[S].new)>=32768)for(l.push(0),Y.push(2*(p.length+I-v)),n=Q=S;S<=u?Q<=u:Q>=u;n=S<=u?++Q:--Q)p.push(i[n].new);else l.push(G-S),Y.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*I+2*p.length),H.writeUInt16(0),H.writeUInt16(W),H.writeUInt16(F),H.writeUInt16(g),H.writeUInt16(U),nt=0,L=d.length;nt<L;nt++)n=d[nt],H.writeUInt16(n);for(H.writeUInt16(0),ct=0,j=N.length;ct<j;ct++)n=N[ct],H.writeUInt16(n);for(Et=0,V=l.length;Et<V;Et++)o=l[Et],H.writeUInt16(o);for(St=0,$=Y.length;St<$;St++)R=Y[St],H.writeUInt16(R);for(Rt=0,Z=p.length;Rt<Z;Rt++)y=p[Rt],H.writeUInt16(y);return{charMap:i,subtable:H.data,maxGlyphID:T+1}}},r}(),Em=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="cmap",t.prototype.parse=function(e){var i,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)i=new mm(e,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(e,i){var n,s;return i==null&&(i="macroman"),n=mm.encode(e,i),(s=new ir).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),B5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),z5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,n;for(n=[],i=0;i<10;++i)n.push(e.readByte());return n}(),this.charRange=function(){var i,n;for(n=[],i=0;i<4;++i)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,n;for(n=[],i=0;i<2;i=++i)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),U5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="post",t.prototype.parse=function(e){var i,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:break;case 131072:var a;for(n=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)i=e.readByte(),s.push(this.names.push(e.readString(i)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 196608:break;case 262144:return this.map=function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(e.readUInt32());return c}.call(this)}},t}(),H5=function(r,t){this.raw=r,this.length=r.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},V5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="name",t.prototype.parse=function(e){var i,n,s,a,o,l,c,u,d,g,p;for(e.pos=this.offset,e.readShort(),i=e.readShort(),l=e.readShort(),n=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},a=d=0,g=n.length;d<g;a=++d)s=n[a],e.pos=s.offset,u=e.readString(s.length),o=new H5(u,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t}(),q5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),W5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="hmtx",t.prototype.parse=function(e){var i,n,s,a,o,l,c;for(e.pos=this.offset,this.metrics=[],i=0,l=this.file.hhea.numberOfMetrics;0<=l?i<l:i>l;i=0<=l?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],i=u=0;0<=s?u<s:u>s;i=0<=s?++u:--u)d.push(e.readInt16());return d}(),this.widths=function(){var u,d,g,p;for(p=[],u=0,d=(g=this.metrics).length;u<d;u++)a=g[u],p.push(a.advance);return p}.call(this),n=this.widths[this.widths.length-1],c=[],i=o=0;0<=s?o<s:o>s;i=0<=s?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),Lm=[].slice,G5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var i,n,s,a,o,l,c,u,d,g;return e in this.cache?this.cache[e]:(a=this.file.loca,i=this.file.contents,n=a.indexOf(e),(s=a.lengthOf(e))===0?this.cache[e]=null:(i.pos=this.offset+n,o=(l=new ir(i.read(s))).readShort(),u=l.readShort(),g=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[e]=o===-1?new X5(l,u,g,c,d):new $5(l,o,u,g,c,d),this.cache[e]))},t.prototype.encode=function(e,i,n){var s,a,o,l,c;for(o=[],a=[],l=0,c=i.length;l<c;l++)s=e[i[l]],a.push(o.length),s&&(o=o.concat(s.encode(n)));return a.push(o.length),{table:o,offsets:a}},t}(),$5=function(){function r(t,e,i,n,s,a){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),X5=function(){function r(t,e,i,n,s){var a,o;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=n,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return r.prototype.encode=function(){var t,e,i;for(e=new ir(Lm.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},r}(),Y5=function(r){function t(){return t.__super__.constructor.apply(this,arguments)}return ns(t,Bn),t.prototype.tag="loca",t.prototype.parse=function(e){var i,n;return e.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=2)a.push(2*e.readUInt16());return a}.call(this):function(){var s,a;for(a=[],n=0,s=this.length;n<s;n+=4)a.push(e.readUInt32());return a}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,i){for(var n=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<n.length;++o)if(n[o]=s,a<i.length&&i[a]==o){++a,n[o]=s;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(s+=c)}for(var u=new Array(4*n.length),d=0;d<n.length;++d)u[4*d+3]=255&n[d],u[4*d+2]=(65280&n[d])>>8,u[4*d+1]=(16711680&n[d])>>16,u[4*d]=(4278190080&n[d])>>24;return u},t}(),K5=function(){function r(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var t,e,i,n,s;for(e in n=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[e],t[e]=n[i];return t},r.prototype.glyphsFor=function(t){var e,i,n,s,a,o,l;for(n={},a=0,o=t.length;a<o;a++)n[s=t[a]]=this.font.glyf.glyphFor(s);for(s in e=[],n)(i=n[s])!=null&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(s in l=this.glyphsFor(e))i=l[s],n[s]=i;return n},r.prototype.encode=function(t,e){var i,n,s,a,o,l,c,u,d,g,p,v,y,x,_;for(n in i=Em.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),p={0:0},_=i.charMap)p[(l=_[n]).old]=l.new;for(v in g=i.maxGlyphID,a)v in p||(p[v]=g++);return u=function(A){var T,R;for(T in R={},A)R[A[T]]=T;return R}(p),d=Object.keys(u).sort(function(A,T){return A-T}),y=function(){var A,T,R;for(R=[],A=0,T=d.length;A<T;A++)o=d[A],R.push(u[o]);return R}(),s=this.font.glyf.encode(a,y,p),c=this.font.loca.encode(s.offsets,y),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},r}();$t.API.PDFObject=function(){var r;function t(){}return r=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},t.convert=function(e){var i,n,s,a;if(Array.isArray(e))return"["+function(){var o,l,c;for(c=[],o=0,l=e.length;o<l;o++)i=e[o],c.push(t.convert(i));return c}().join(" ")+"]";if(typeof e=="string")return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+r(e.getUTCFullYear(),4)+r(e.getUTCMonth(),2)+r(e.getUTCDate(),2)+r(e.getUTCHours(),2)+r(e.getUTCMinutes(),2)+r(e.getUTCSeconds(),2)+"Z)";if({}.toString.call(e)==="[object Object]"){for(n in s=["<<"],e)a=e[n],s.push("/"+n+" "+t.convert(a));return s.push(">>"),s.join(`
`)}return""+e},t}();var nr=function(r){return r.Prompt="PROMPT",r.Camera="CAMERA",r.Photos="PHOTOS",r}(nr||{}),Yo=function(r){return r.Rear="REAR",r.Front="FRONT",r}(Yo||{}),gp=function(r){return r.Uri="uri",r.Base64="base64",r.DataUrl="dataUrl",r}(gp||{});var Ko=class extends _g{getPhoto(t){return dt(this,null,function*(){return new Promise((e,i)=>dt(this,null,function*(){if(t.webUseInput||t.source===nr.Photos)this.fileInputExperience(t,e,i);else if(t.source===nr.Prompt){let n=document.querySelector("pwa-action-sheet");n||(n=document.createElement("pwa-action-sheet"),document.body.appendChild(n)),n.header=t.promptLabelHeader||"Photo",n.cancelable=!1,n.options=[{title:t.promptLabelPhoto||"From Photos"},{title:t.promptLabelPicture||"Take Picture"}],n.addEventListener("onSelection",s=>dt(this,null,function*(){s.detail===0?this.fileInputExperience(t,e,i):this.cameraExperience(t,e,i)}))}else this.cameraExperience(t,e,i)}))})}pickImages(t){return dt(this,null,function*(){return new Promise((e,i)=>dt(this,null,function*(){this.multipleFileInputExperience(e,i)}))})}cameraExperience(t,e,i){return dt(this,null,function*(){if(customElements.get("pwa-camera-modal")){let n=document.createElement("pwa-camera-modal");n.facingMode=t.direction===Yo.Front?"user":"environment",document.body.appendChild(n);try{yield n.componentOnReady(),n.addEventListener("onPhoto",s=>dt(this,null,function*(){let a=s.detail;a===null?i(new ql("User cancelled photos app")):a instanceof Error?i(a):e(yield this._getCameraPhoto(a,t)),n.dismiss(),document.body.removeChild(n)})),n.present()}catch{this.fileInputExperience(t,e,i)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(t,e,i)})}fileInputExperience(t,e,i){let n=document.querySelector("#_capacitor-camera-input"),s=()=>{var a;(a=n.parentNode)===null||a===void 0||a.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input",n.type="file",n.hidden=!0,document.body.appendChild(n),n.addEventListener("change",a=>{let o=n.files[0],l="jpeg";if(o.type==="image/png"?l="png":o.type==="image/gif"&&(l="gif"),t.resultType==="dataUrl"||t.resultType==="base64"){let c=new FileReader;c.addEventListener("load",()=>{if(t.resultType==="dataUrl")e({dataUrl:c.result,format:l});else if(t.resultType==="base64"){let u=c.result.split(",")[1];e({base64String:u,format:l})}s()}),c.readAsDataURL(o)}else e({webPath:URL.createObjectURL(o),format:l}),s()}),n.addEventListener("cancel",a=>{i(new ql("User cancelled photos app")),s()})),n.accept="image/*",n.capture=!0,t.source===nr.Photos||t.source===nr.Prompt?n.removeAttribute("capture"):t.direction===Yo.Front?n.capture="user":t.direction===Yo.Rear&&(n.capture="environment"),n.click()}multipleFileInputExperience(t,e){let i=document.querySelector("#_capacitor-camera-input-multiple"),n=()=>{var s;(s=i.parentNode)===null||s===void 0||s.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input-multiple",i.type="file",i.hidden=!0,i.multiple=!0,document.body.appendChild(i),i.addEventListener("change",s=>{let a=[];for(let o=0;o<i.files.length;o++){let l=i.files[o],c="jpeg";l.type==="image/png"?c="png":l.type==="image/gif"&&(c="gif"),a.push({webPath:URL.createObjectURL(l),format:c})}t({photos:a}),n()}),i.addEventListener("cancel",s=>{e(new ql("User cancelled photos app")),n()})),i.accept="image/*",i.click()}_getCameraPhoto(t,e){return new Promise((i,n)=>{let s=new FileReader,a=t.type.split("/")[1];e.resultType==="uri"?i({webPath:URL.createObjectURL(t),format:a,saved:!1}):(s.readAsDataURL(t),s.onloadend=()=>{let o=s.result;e.resultType==="dataUrl"?i({dataUrl:o,format:a,saved:!1}):i({base64String:o.split(",")[1],format:a,saved:!1})},s.onerror=o=>{n(o)})})}checkPermissions(){return dt(this,null,function*(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}})}requestPermissions(){return dt(this,null,function*(){throw this.unimplemented("Not implemented on web.")})}pickLimitedLibraryPhotos(){return dt(this,null,function*(){throw this.unavailable("Not implemented on web.")})}getLimitedLibraryPhotos(){return dt(this,null,function*(){throw this.unavailable("Not implemented on web.")})}},Sw=new Ko;var mp=Wl("Camera",{web:()=>new Ko});var Jo=(()=>{class r{addPhoto(e){throw new Error("Method not implemented.")}_photos=new oa([]);_reports=new oa([]);_draftReport=new oa(null);photos$=this._photos.asObservable();reports$=this._reports.asObservable();draftReport$=this._draftReport.asObservable();PHOTOS_STORAGE_KEY="camera_photos";REPORTS_STORAGE_KEY="maintenance_reports";DRAFT_REPORT_KEY="draft_report";constructor(){this.loadPhotosFromStorage(),this.loadReportsFromStorage(),this.loadDraftReportFromStorage()}takePicture(){return dt(this,null,function*(){try{if(!Xs.isPluginAvailable("Camera"))throw new Error("Camera is not available on this device");yield mp.requestPermissions();let e=yield mp.getPhoto({quality:90,allowEditing:!1,resultType:gp.DataUrl,source:nr.Camera});if(!e.dataUrl)throw new Error("Failed to capture image");let i={url:e.dataUrl,timestamp:new Date},n=this._photos.value,s=[i,...n];return this._photos.next(s),this.savePhotosToStorage(),e.dataUrl}catch(e){throw console.error("Error taking picture:",e),e}})}deletePhoto(e){let i=this._photos.value;if(e>=0&&e<i.length){let n=[...i];n.splice(e,1),this._photos.next(n),this.savePhotosToStorage()}}addReport(e){let i=this._reports.value,n=[e,...i];this._reports.next(n),this.saveReportsToStorage(),this._draftReport.next(null),localStorage.removeItem(this.DRAFT_REPORT_KEY)}updateReport(e,i){let n=this._reports.value;if(e>=0&&e<n.length){let s=[...n];s[e]=i,this._reports.next(s),this.saveReportsToStorage()}}deleteReport(e){let i=this._reports.value;if(e>=0&&e<i.length){let n=[...i];n.splice(e,1),this._reports.next(n),this.saveReportsToStorage()}}saveDraftReport(e){this._draftReport.next(e),localStorage.setItem(this.DRAFT_REPORT_KEY,JSON.stringify(e))}getTechnicianName(){return"T\xE9cnico de Mantenimiento"}savePhotosToStorage(){try{let e=this._photos.value;localStorage.setItem(this.PHOTOS_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Error saving photos to storage:",e)}}loadPhotosFromStorage(){try{let e=localStorage.getItem(this.PHOTOS_STORAGE_KEY);if(e){let n=JSON.parse(e).map(s=>mi(pe({},s),{timestamp:new Date(s.timestamp)}));this._photos.next(n)}}catch(e){console.error("Error loading photos from storage:",e),this._photos.next([])}}saveReportsToStorage(){try{let e=this._reports.value;localStorage.setItem(this.REPORTS_STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Error saving reports to storage:",e)}}loadReportsFromStorage(){try{let e=localStorage.getItem(this.REPORTS_STORAGE_KEY);if(e){let n=JSON.parse(e).map(s=>mi(pe({},s),{timestamp:new Date(s.timestamp)}));this._reports.next(n)}}catch(e){console.error("Error loading reports from storage:",e),this._reports.next([])}}loadDraftReportFromStorage(){try{let e=localStorage.getItem(this.DRAFT_REPORT_KEY);if(e){let i=JSON.parse(e),n=mi(pe({},i),{timestamp:new Date(i.timestamp)});this._draftReport.next(n)}}catch(e){console.error("Error loading draft report from storage:",e),this._draftReport.next(null)}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=Zp({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Q5=(r,t,e,i)=>({"status-active":r,"status-review":t,"status-resolved":e,"status-pending":i}),Z5=(r,t)=>t.id;function ty(r,t){if(r&1&&si(0,"img",5),r&2){let e=Kt(2);Vi("src",e.imgUrl,Vs)}}function ey(r,t){r&1&&(bt(0,"div",6)(1,"span",27),Lt(2,"\u{1F4F7}"),vt(),bt(3,"span",28),Lt(4,"No hay imagen seleccionada"),vt()())}function iy(r,t){r&1&&(bt(0,"div",10),Lt(1,"\u231B Cargando..."),vt())}function ny(r,t){if(r&1&&(bt(0,"div",11),Lt(1),vt()),r&2){let e=Kt(2);zt(),qs(" ",e.errorMessage," ")}}function sy(r,t){if(r&1){let e=vn();bt(0,"div",29)(1,"div",30),si(2,"img",31),vt(),bt(3,"div",32)(4,"div",33)(5,"span",34),Lt(6),da(7,"date"),vt(),bt(8,"span",35),Lt(9),vt()(),bt(10,"div",36)(11,"span",37),Lt(12,"\u{1F468}\u200D\u{1F527}"),vt(),Lt(13),vt(),bt(14,"div",38),Lt(15),vt(),bt(16,"div",39),Lt(17),vt(),bt(18,"div",40)(19,"button",41),ze("click",function(){let n=Le(e).$implicit,s=Kt(3);return Me(s.viewReportDetails(n))}),Lt(20,"Ver Detalles"),vt(),bt(21,"button",42),ze("click",function(){let n=Le(e).$index,s=Kt(3);return Me(s.deleteReport(n))}),Lt(22,"Eliminar"),vt()()()()}if(r&2){let e=t.$implicit,i=t.$index;zt(2),uo("alt","Reporte ",i+1,""),Vi("src",e.imageUrl,Vs),zt(4),Ti(mo(7,9,e.timestamp,"dd/MM/yyyy HH:mm")),zt(3),Ti(e.id),zt(4),qs(" ",e.technician," "),zt(),Vi("ngClass",lg(12,Q5,e.status==="Activo",e.status==="En Revisi\xF3n",e.status==="Resuelto",e.status==="Pendiente")),zt(),qs(" ",e.status," "),zt(2),Ti(e.description)}}function ry(r,t){if(r&1&&(bt(0,"div",25),ha(1,sy,23,17,"div",29,Z5),vt()),r&2){let e=Kt(2);zt(),ua(e.reports)}}function ay(r,t){r&1&&(bt(0,"div",26),Lt(1," No hay reportes disponibles. "),vt())}function oy(r,t){if(r&1){let e=vn();bt(0,"div",3)(1,"div",4),xi(2,ty,1,1,"img",5)(3,ey,5,0,"div",6),vt(),bt(4,"div",7)(5,"button",8),ze("click",function(){Le(e);let n=Kt();return Me(n.takePicture())}),bt(6,"span",9),Lt(7,"\u{1F4F7}"),vt(),Lt(8," Tomar Foto "),vt()(),xi(9,iy,2,0,"div",10)(10,ny,2,1,"div",11),vt(),bt(11,"div",12)(12,"h2"),Lt(13,"Crear Nuevo Reporte"),vt(),bt(14,"div",13)(15,"label",14),Lt(16,"ID del Equipo"),vt(),bt(17,"input",15),$s("ngModelChange",function(n){Le(e);let s=Kt();return Gs(s.currentReport.id,n)||(s.currentReport.id=n),Me(n)}),vt()(),bt(18,"div",13)(19,"label",16),Lt(20,"Descripci\xF3n del Problema"),vt(),bt(21,"textarea",17),$s("ngModelChange",function(n){Le(e);let s=Kt();return Gs(s.currentReport.description,n)||(s.currentReport.description=n),Me(n)}),vt()(),bt(22,"div",13)(23,"label"),Lt(24,"Estado"),vt(),bt(25,"select",18),$s("ngModelChange",function(n){Le(e);let s=Kt();return Gs(s.currentReport.status,n)||(s.currentReport.status=n),Me(n)}),bt(26,"option",19),Lt(27,"Activo"),vt(),bt(28,"option",20),Lt(29,"En Revisi\xF3n"),vt(),bt(30,"option",21),Lt(31,"Resuelto"),vt(),bt(32,"option",22),Lt(33,"Pendiente"),vt()()(),bt(34,"button",23),ze("click",function(){Le(e);let n=Kt();return Me(n.saveReport())}),Lt(35," Guardar Reporte "),vt()(),bt(36,"div",24)(37,"h2"),Lt(38,"Lista de Reportes"),vt(),xi(39,ry,3,0,"div",25)(40,ay,2,0,"div",26),vt()}if(r&2){let e=Kt();zt(2),Be(e.imgUrl?2:3),zt(3),Vi("disabled",e.loading),zt(4),Be(e.loading?9:-1),zt(),Be(e.errorMessage?10:-1),zt(7),Ws("ngModel",e.currentReport.id),zt(4),Ws("ngModel",e.currentReport.description),zt(4),Ws("ngModel",e.currentReport.status),zt(9),Vi("disabled",!e.imgUrl),zt(5),Be(e.reports.length>0?39:40)}}function ly(r,t){if(r&1){let e=vn();bt(0,"div",2)(1,"div",43)(2,"button",44),ze("click",function(){Le(e);let n=Kt();return Me(n.closeDetailView())}),Lt(3,"\u2190 Volver"),vt(),bt(4,"h2"),Lt(5,"Detalles del Reporte"),vt()(),bt(6,"div",45)(7,"div",46),si(8,"img",47),vt(),bt(9,"div",48)(10,"div",49)(11,"span",50),Lt(12,"ID:"),vt(),bt(13,"span",51),Lt(14),vt()(),bt(15,"div",49)(16,"span",50),Lt(17,"Fecha:"),vt(),bt(18,"span",51),Lt(19),da(20,"date"),vt()(),bt(21,"div",49)(22,"span",50),Lt(23,"T\xE9cnico:"),vt(),bt(24,"span",51),Lt(25),vt()(),bt(26,"div",49)(27,"span",50),Lt(28,"Estado:"),vt(),bt(29,"div",52)(30,"select",53),$s("ngModelChange",function(n){Le(e);let s=Kt();return Gs(s.selectedReport.status,n)||(s.selectedReport.status=n),Me(n)}),ze("change",function(){Le(e);let n=Kt();return Me(n.updateReportStatus(n.selectedReport,n.selectedReport.status))}),bt(31,"option",19),Lt(32,"Activo"),vt(),bt(33,"option",20),Lt(34,"En Revisi\xF3n"),vt(),bt(35,"option",21),Lt(36,"Resuelto"),vt(),bt(37,"option",22),Lt(38,"Pendiente"),vt()()()(),bt(39,"div",54)(40,"span",50),Lt(41,"Descripci\xF3n:"),vt(),bt(42,"div",55),Lt(43),vt()()()()()}if(r&2){let e=Kt();zt(8),Vi("src",e.selectedReport.imageUrl,Vs),zt(6),Ti(e.selectedReport.id),zt(5),Ti(mo(20,6,e.selectedReport.timestamp,"dd/MM/yyyy HH:mm")),zt(6),Ti(e.selectedReport.technician),zt(5),Ws("ngModel",e.selectedReport.status),zt(13),Ti(e.selectedReport.description)}}var Mm=(()=>{class r{switchTab(e){throw new Error("Method not implemented.")}imageGallery;stopCamera(){throw new Error("Method not implemented.")}isGalleryEmpty(){throw new Error("Method not implemented.")}cameraService=gs(Jo);imgUrl="";errorMessage="";loading=!1;currentReport=this.getEmptyReport();reports=[];selectedReport=null;showDetailView=!1;subscriptions=[];ngOnInit(){this.subscriptions.push(this.cameraService.reports$.subscribe(e=>{this.reports=e})),this.subscriptions.push(this.cameraService.draftReport$.subscribe(e=>{e&&(this.currentReport=pe({},e))}))}ngOnDestroy(){this.saveDraftReport(),this.subscriptions.forEach(e=>e.unsubscribe())}takePicture(){return dt(this,null,function*(){this.errorMessage="";try{this.loading=!0;try{let e=yield this.cameraService.takePicture();this.currentReport.imageUrl=e,this.imgUrl=e,this.saveDraftReport()}catch(e){throw String(e).includes("Not implemented on web")?new Error("Esta funci\xF3n no est\xE1 disponible en navegadores web. Por favor, usa la aplicaci\xF3n m\xF3vil."):e}if(!this.imgUrl)throw new Error("No se obtuvo una imagen v\xE1lida");this.loading=!1}catch(e){console.error("Error al capturar imagen:",e),this.errorMessage=String(e),this.loading=!1}})}saveReport(){if(!this.currentReport.id){let e=(this.reports.length+1).toString().padStart(3,"0");this.currentReport.id="EQ-2024-"+e}this.currentReport.timestamp=new Date,this.currentReport.technician=this.cameraService.getTechnicianName(),this.currentReport.status||(this.currentReport.status="Activo"),this.currentReport.description||(this.currentReport.description="Filtro de aire obstruido, necesita limpieza inmediata para evitar sobrecalentamiento."),this.cameraService.addReport(pe({},this.currentReport)),this.currentReport=this.getEmptyReport(),this.imgUrl=""}viewReportDetails(e){this.selectedReport=pe({},e),this.showDetailView=!0,this.imgUrl=e.imageUrl,console.log("Viewing report details:",e)}closeDetailView(){this.selectedReport=null,this.showDetailView=!1}deleteReport(e){this.selectedReport&&this.selectedReport.id===this.reports[e].id&&this.closeDetailView(),this.cameraService.deleteReport(e)}saveDraftReport(){(this.currentReport.id||this.currentReport.imageUrl||this.currentReport.description)&&this.cameraService.saveDraftReport(pe({},this.currentReport))}getEmptyReport(){return{id:"",imageUrl:"",timestamp:new Date,technician:"",status:"Activo",description:""}}updateReportStatus(e,i){let n=this.reports.findIndex(s=>s.id===e.id);if(n!==-1){let s=mi(pe({},e),{status:i});this.cameraService.updateReport(n,s),this.selectedReport&&this.selectedReport.id===e.id&&(this.selectedReport=s)}}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=ca({type:r,selectors:[["app-camera"]],decls:4,vars:2,consts:[[1,"camera-page"],[1,"main-view"],[1,"report-detail-view"],[1,"camera-container"],[1,"main-image-container"],["alt","Foto capturada",1,"captured-image",3,"src"],[1,"placeholder"],[1,"action-buttons"],[1,"button","take-picture-button",3,"click","disabled"],[1,"button-icon"],[1,"loading-spinner"],[1,"error-message"],[1,"report-form"],[1,"form-group"],["for","reportId"],["type","text","id","reportId","placeholder","ID generado autom\xE1ticamente","disabled","",3,"ngModelChange","ngModel"],["for","reportDescription"],["id","reportDescription","placeholder","Describe el estado o problema del equipo...",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","Activo"],["value","En Revisi\xF3n"],["value","Resuelto"],["value","Pendiente"],[1,"button","save-button",3,"click","disabled"],[1,"reports-list"],[1,"reports-container"],[1,"no-reports"],[1,"placeholder-icon"],[1,"placeholder-text"],[1,"report-item"],[1,"report-image"],[3,"src","alt"],[1,"report-details"],[1,"report-header"],[1,"report-date"],[1,"report-id"],[1,"report-tech"],[1,"icon"],[1,"report-status",3,"ngClass"],[1,"report-description"],[1,"report-actions"],[1,"button","detail-button",3,"click"],[1,"button","delete-button",3,"click"],[1,"detail-header"],[1,"button","back-button",3,"click"],[1,"detail-content"],[1,"detail-image-container"],["alt","Imagen del reporte",1,"detail-image",3,"src"],[1,"detail-info"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],[1,"status-selector"],[3,"ngModelChange","change","ngModel"],[1,"detail-row","description-row"],[1,"detail-description"]],template:function(i,n){i&1&&(bt(0,"div",0)(1,"div",1),xi(2,oy,41,9)(3,ly,44,9,"div",2),vt()()),i&2&&(zt(2),Be(n.showDetailView?-1:2),zt(),Be(n.showDetailView&&n.selectedReport?3:-1))},dependencies:[Hl,hg,Yl,Ag,Cg,Gl,xg,$l,Xl],styles:[`.camera-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#f8fafc;border-radius:12px}.camera-tabs[_ngcontent-%COMP%]{display:flex;background-color:#fff;border-radius:12px 12px 0 0;overflow:hidden;margin-bottom:1rem;box-shadow:0 2px 5px #0000000d}.camera-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{flex:1;padding:1rem;background:none;border:none;font-weight:500;color:#64748b;cursor:pointer;transition:all .3s ease;position:relative;border-bottom:3px solid transparent;display:flex;align-items:center;justify-content:center;gap:.5rem}.camera-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]:hover{background-color:#1a56db0d}.camera-tabs[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]{color:#1a56db;border-bottom-color:#1a56db;background-color:#1a56db0d}.camera-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background-color:#1a56db;color:#fff;height:20px;min-width:20px;border-radius:10px;font-size:.75rem;padding:0 .375rem;margin-left:.25rem}.camera-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.camera-error[_ngcontent-%COMP%]{padding:.75rem;margin:.5rem;background-color:#ef44441a;color:#ef4444;border-radius:12px;border-left:3px solid #ef4444;text-align:center;font-size:.875rem}.camera-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}.camera-view[_ngcontent-%COMP%]   .web-camera[_ngcontent-%COMP%]{position:relative;height:100%;min-height:300px;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#000;border-radius:12px;overflow:hidden}.camera-view[_ngcontent-%COMP%]   .web-camera[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.camera-view[_ngcontent-%COMP%]   .mobile-camera[_ngcontent-%COMP%]{position:relative;height:100%;min-height:300px;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#ebf3ff;border-radius:12px}.camera-view[_ngcontent-%COMP%]   .mobile-camera[_ngcontent-%COMP%]   .mobile-camera-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#1a56db;padding:2rem}.camera-view[_ngcontent-%COMP%]   .mobile-camera[_ngcontent-%COMP%]   .mobile-camera-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-bottom:1rem;opacity:.7}.camera-view[_ngcontent-%COMP%]   .mobile-camera[_ngcontent-%COMP%]   .mobile-camera-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.9}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]{position:absolute;bottom:1rem;left:0;right:0;display:flex;justify-content:center;align-items:center;gap:1rem}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]{width:70px;height:70px;background-color:#fff;border:4px solid #1a56db;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #00000014}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 8px 25px #0003}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]   .capture-icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#1a56db;border-radius:50%;transition:all .3s ease}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]:active   .capture-icon[_ngcontent-%COMP%]{transform:scale(.9)}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .gallery-button[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#fff;border:2px solid #1a56db;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px #00000014}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .gallery-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#1a56db}.camera-view[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   .gallery-button[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:#ebf3ff}.gallery-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem}.gallery-view[_ngcontent-%COMP%]   .gallery-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem 1rem;background-color:#fff;border-radius:12px;border:2px dashed #ebf3ff}.gallery-view[_ngcontent-%COMP%]   .gallery-empty[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ebf3ff;margin-bottom:1rem}.gallery-view[_ngcontent-%COMP%]   .gallery-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin-bottom:1.5rem}.gallery-view[_ngcontent-%COMP%]   .gallery-empty[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background-color:#1a56db;color:#fff;border:none;border-radius:12px;font-weight:500;cursor:pointer;transition:all .3s ease}.gallery-view[_ngcontent-%COMP%]   .gallery-empty[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]:hover{background-color:#0f3e8c;transform:translateY(-2px)}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;margin-bottom:1rem}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{position:relative}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{position:relative;aspect-ratio:1;border-radius:12px;overflow:hidden;box-shadow:0 4px 15px #00000014}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:all .3s ease}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;background-color:#ef4444;color:#fff;border:none;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;opacity:.8;transition:all .3s ease}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{opacity:1;transform:scale(1.1)}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.gallery-view[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.03)}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:1rem}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:12px;font-weight:500;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;gap:.5rem}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]{background-color:#ef44441a;color:#ef4444;border:1px solid rgba(239,68,68,.3)}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]:hover{background-color:#ef444433}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{background-color:#1a56db;color:#fff;border:none}.gallery-view[_ngcontent-%COMP%]   .gallery-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:hover{background-color:#0f3e8c;transform:translateY(-2px)}@media (max-width: 768px){.gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))!important}.camera-controls[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]{width:60px!important;height:60px!important}.camera-controls[_ngcontent-%COMP%]   .camera-button[_ngcontent-%COMP%]   .capture-icon[_ngcontent-%COMP%], .camera-controls[_ngcontent-%COMP%]   .gallery-button[_ngcontent-%COMP%]{width:40px!important;height:40px!important}.camera-controls[_ngcontent-%COMP%]   .gallery-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem!important}}
/*# sourceMappingURL=camera.component-VCKRGFLN.css.map */`]})}return r})();var Na=Wl("Haptics",{web:()=>import("./chunk-XX745JBG.js").then(r=>new r.HapticsWeb)});var cy=["signatureCanvas"],hy=(r,t)=>t.IdReporte;function uy(r,t){if(r&1&&(bt(0,"div",6),Us(),bt(1,"svg",11),si(2,"circle",12)(3,"line",13)(4,"line",14),vt(),Lt(5),vt()),r&2){let e=Kt();zt(5),qs(" ",e.errorMessage," ")}}function dy(r,t){if(r&1&&(bt(0,"div",7),Us(),bt(1,"svg",11),si(2,"path",15)(3,"polyline",16),vt(),Lt(4),vt()),r&2){let e=Kt();zt(4),qs(" ",e.successMessage," ")}}function fy(r,t){r&1&&(bt(0,"div",8),si(1,"div",17),bt(2,"p"),Lt(3,"Cargando trabajos pendientes..."),vt()())}function py(r,t){r&1&&(bt(0,"div",21)(1,"p"),Lt(2,"No hay reportes pendientes en este momento."),vt()())}function gy(r,t){if(r&1&&(bt(0,"div",30)(1,"strong"),Lt(2,"Departamento"),vt(),bt(3,"span"),Lt(4),vt()()),r&2){let e=Kt().$implicit;zt(4),Ti(e.departamento)}}function my(r,t){if(r&1&&(bt(0,"div",31)(1,"strong"),Lt(2,"Ubicaci\xF3n"),vt(),bt(3,"span"),Lt(4),vt()()),r&2){let e=Kt().$implicit;zt(4),Ti(e.location)}}function by(r,t){if(r&1){let e=vn();bt(0,"div",24),ze("click",function(){let n=Le(e).$implicit,s=Kt(4);return Me(s.selectReporte(n))}),bt(1,"div",25)(2,"h3",26),Lt(3),vt(),bt(4,"span"),da(5,"lowercase"),Lt(6),vt()(),bt(7,"div",27)(8,"div",28)(9,"strong"),Lt(10,"Fecha de asignaci\xF3n"),vt(),bt(11,"span"),Lt(12),da(13,"date"),vt()(),bt(14,"div",29)(15,"strong"),Lt(16,"Descripci\xF3n"),vt(),bt(17,"p"),Lt(18),vt()(),xi(19,gy,5,1,"div",30)(20,my,5,1,"div",31),vt()()}if(r&2){let e=t.$implicit,i=Kt(4);br("selected",(i.selectedReporte==null?null:i.selectedReporte.IdReporte)===e.IdReporte),zt(3),Ti(e.Tipo_Trabajo),zt(),ag("priority-badge priority-",cg(5,11,e.priority),""),zt(2),Ti(e.priority||"Normal"),zt(6),Ti(mo(13,13,e.fecha,"dd/MM/yyyy")),zt(6),Ti(e.jobDescription),zt(),Be(e.departamento?19:-1),zt(),Be(e.location?20:-1)}}function vy(r,t){if(r&1&&(bt(0,"div",22),ha(1,by,21,16,"div",23,hy),vt()),r&2){let e=Kt(3);zt(),ua(e.pendingReportes.value)}}function yy(r,t){if(r&1&&xi(0,py,3,0,"div",21)(1,vy,3,0,"div",22),r&2){let e=Kt(2);Be(e.pendingReportes.value.length===0?0:1)}}function wy(r,t){if(r&1){let e=vn();bt(0,"div",9)(1,"div",18)(2,"button",19),ze("click",function(){Le(e);let n=Kt();return Me(n.activeTab="reportes")}),Lt(3," Reportes "),bt(4,"span",20),Lt(5),vt()()(),xi(6,yy,2,1),vt()}if(r&2){let e=Kt();zt(2),br("active",e.activeTab==="reportes"),zt(3),Ti(e.pendingReportes.value.length),zt(),Be(e.activeTab==="reportes"?6:-1)}}function _y(r,t){r&1&&(bt(0,"span",37),Lt(1,"Este campo es requerido"),vt())}function xy(r,t){r&1&&(bt(0,"span",37),Lt(1,"Este campo es requerido"),vt())}function Ay(r,t){if(r&1&&si(0,"img",43),r&2){let e=Kt(2);Vi("src",e.imgUrl,Vs)}}function Cy(r,t){r&1&&(bt(0,"div",44),Us(),bt(1,"svg",66),si(2,"rect",67)(3,"circle",68)(4,"polyline",69),vt(),la(),bt(5,"p"),Lt(6,"Sin imagen"),vt()())}function Py(r,t){if(r&1){let e=vn();bt(0,"button",70),ze("click",function(){Le(e);let n=Kt(2);return Me(n.addToEvidence())}),Us(),bt(1,"svg",47),si(2,"circle",12)(3,"line",71)(4,"line",72),vt(),la(),bt(5,"span"),Lt(6,"A\xF1adir a evidencias"),vt()()}if(r&2){let e=Kt(2);Vi("disabled",!e.imgUrl)}}function Sy(r,t){if(r&1){let e=vn();bt(0,"div",75),ze("click",function(){let n=Le(e).$implicit,s=Kt(3);return Me(s.setMainPhoto(n))}),si(1,"img",76),bt(2,"button",77),ze("click",function(n){let s=Le(e).$index;return Kt(3).deletePhoto(s),Me(n.stopPropagation())}),Lt(3,"\xD7"),vt()()}if(r&2){let e=t.$implicit,i=t.$index,n=Kt(3);br("selected",n.imgUrl===e.url),zt(),uo("alt","Foto ",i+1,""),Vi("src",e.url,Vs)}}function Ey(r,t){if(r&1&&(bt(0,"div",56)(1,"h4"),Lt(2,"Galer\xEDa de fotos"),vt(),bt(3,"div",73),ha(4,Sy,4,5,"div",74,gu),vt()()),r&2){let e=Kt(2);zt(4),ua(e.photos)}}function Ly(r,t){if(r&1){let e=vn();bt(0,"div",79),si(1,"img",80),bt(2,"button",81),ze("click",function(){let n=Le(e).$index,s=Kt(3);return Me(s.removeEvidenceImage(n))}),Lt(3,"\xD7"),vt()()}if(r&2){let e=t.$implicit,i=t.$index;zt(),uo("alt","Evidencia ",i+1,""),Vi("src",e,Vs)}}function My(r,t){if(r&1&&(bt(0,"div",57)(1,"h4"),Lt(2,"Evidencias a\xF1adidas"),vt(),bt(3,"div",78),ha(4,Ly,4,3,"div",79,gu),vt()()),r&2){let e=Kt(2);zt(4),ua(e.evidenceImages)}}function ky(r,t){r&1&&(bt(0,"span",37),Lt(1,"La firma es requerida"),vt())}function Ty(r,t){r&1&&(si(0,"span",82),Lt(1," Enviando... "))}function Oy(r,t){r&1&&Lt(0," Completar reporte ")}function Ny(r,t){if(r&1){let e=vn();bt(0,"h2"),Lt(1),vt(),bt(2,"div",32)(3,"div",33)(4,"label",34),Lt(5," Descripci\xF3n de trabajo "),bt(6,"span",35),Lt(7,"*"),vt()(),bt(8,"textarea",36),$s("ngModelChange",function(n){Le(e);let s=Kt();return Gs(s.completionDescription,n)||(s.completionDescription=n),Me(n)}),vt(),xi(9,_y,2,0,"span",37),vt(),bt(10,"div",33)(11,"label",38),Lt(12," Materiales utilizados "),bt(13,"span",35),Lt(14,"*"),vt()(),bt(15,"textarea",39),$s("ngModelChange",function(n){Le(e);let s=Kt();return Gs(s.materialsUsed,n)||(s.materialsUsed=n),Me(n)}),vt(),xi(16,xy,2,0,"span",37),vt(),bt(17,"div",40)(18,"label"),Lt(19,"Evidencia fotogr\xE1fica"),vt(),bt(20,"div",41)(21,"div",42),xi(22,Ay,1,1,"img",43)(23,Cy,7,0,"div",44),vt(),bt(24,"div",45)(25,"button",46),ze("click",function(){Le(e);let n=Kt();return Me(n.takePicture())}),Us(),bt(26,"svg",47),si(27,"path",48)(28,"circle",49),vt(),la(),bt(29,"span"),Lt(30,"Tomar foto"),vt()(),bt(31,"label",50),Us(),bt(32,"svg",47),si(33,"path",51)(34,"polyline",52)(35,"line",53),vt(),la(),bt(36,"span"),Lt(37,"Subir imagen"),vt(),bt(38,"input",54),ze("change",function(n){Le(e);let s=Kt();return Me(s.handleFileUpload(n))}),vt()(),xi(39,Py,7,1,"button",55),vt(),xi(40,Ey,6,0,"div",56),vt(),xi(41,My,6,0,"div",57),vt(),bt(42,"div",58)(43,"label"),Lt(44," Firma digital "),bt(45,"span",35),Lt(46,"*"),vt()(),bt(47,"div",59),si(48,"canvas",null,0),bt(50,"div",60)(51,"button",61),ze("click",function(){Le(e);let n=Kt();return Me(n.clearSignature())}),Lt(52,"Limpiar"),vt(),bt(53,"button",62),ze("click",function(){Le(e);let n=Kt();return Me(n.saveSignature())}),Lt(54,"Guardar firma"),vt()()(),xi(55,ky,2,0,"span",37),vt(),bt(56,"div",63)(57,"button",64),ze("click",function(){Le(e);let n=Kt();return Me(n.previewPdf(n.selectedReporte))}),Lt(58," Vista previa PDF "),vt(),bt(59,"button",65),ze("click",function(){Le(e);let n=Kt();return Me(n.markAsCompleted(n.selectedReporte))}),xi(60,Ty,2,0)(61,Oy,1,0),vt()()()}if(r&2){let e=Kt();zt(),qs("Completar reporte: ",e.selectedReporte.Tipo_Trabajo,""),zt(7),br("error",e.showErrors&&!e.completionDescription.trim()),Ws("ngModel",e.completionDescription),zt(),Be(e.showErrors&&!e.completionDescription.trim()?9:-1),zt(6),br("error",e.showErrors&&!e.materialsUsed.trim()),Ws("ngModel",e.materialsUsed),zt(),Be(e.showErrors&&!e.materialsUsed.trim()?16:-1),zt(6),Be(e.imgUrl?22:23),zt(17),Be(e.imgUrl?39:-1),zt(),Be(e.photos.length>0?40:-1),zt(),Be(e.evidenceImages.length>0?41:-1),zt(6),br("error",e.showErrors&&e.isSignatureEmpty()),zt(8),Be(e.showErrors&&e.isSignatureEmpty()?55:-1),zt(2),Vi("disabled",!e.completionDescription.trim()||!e.materialsUsed.trim()||e.isSignatureEmpty()),zt(2),Vi("disabled",!e.completionDescription.trim()||!e.materialsUsed.trim()||e.isSignatureEmpty()||e.isSubmitting),zt(),Be(e.isSubmitting?60:61)}}function Iy(r,t){if(r&1){let e=vn();bt(0,"div",10)(1,"div",83)(2,"div",84)(3,"h3"),Lt(4,"Vista previa del PDF"),vt(),bt(5,"button",85),ze("click",function(){Le(e);let n=Kt();return Me(n.closePdfPreview())}),Lt(6,"\xD7"),vt()(),bt(7,"div",86)(8,"div",87),si(9,"pdf-viewer",88),vt()(),bt(10,"div",89)(11,"button",90),ze("click",function(){Le(e);let n=Kt();return Me(n.closePdfPreview())}),Lt(12,"Cerrar"),vt(),bt(13,"button",91),ze("click",function(){Le(e);let n=Kt();return Me(n.confirmCompletion())}),Lt(14,"Confirmar y enviar"),vt()()()()}if(r&2){let e=Kt();zt(9),Vi("src",e.pdfSrc)("render-text",!0)("original-size",!1)}}var y_=(()=>{class r{handleFileUpload(e){let i=e.target.files[0];if(i){if(this.isLoading=!0,this.errorMessage="",!i.type.match("image.*")){this.errorMessage="Solo se permiten archivos de imagen",this.isLoading=!1;return}try{let n=new FileReader;n.onload=s=>{let a=s.target.result;this.imgUrl=a,this.cameraService.addPhoto({url:a,date:new Date,name:i.name}),this.isLoading=!1},n.onerror=()=>{this.errorMessage="Error al leer el archivo",this.isLoading=!1},n.readAsDataURL(i)}catch(n){console.error("Error processing image:",n),this.errorMessage="Error al procesar la imagen",this.isLoading=!1}}}activeTab="tasks";signatureCanvas;cameraComponent;firestore=gs(gg);auth=gs(pg);router=gs(fg);taskService=gs(Tg);formBuilder=gs(Pg);cameraService=gs(Jo);pendingReportes=new oa([]);pendingTasks=[];currentUser=null;subscriptions=[];isLoading=!0;isSubmitting=!1;showErrors=!1;selectedTask=null;errorMessage="";successMessage="";completionDescription="";materialsUsed="";reportForm;selectedReporte=null;signaturePad;signatureData=null;showPdfPreview=!1;pdfSrc;showCameraModal=!1;showPreviewModal=!1;evidenceImages=[];imgUrl="";photos=[];showGalleryView=!1;isMobile=!1;constructor(){this.isMobile=Xs.isNativePlatform()||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),console.log("Ejecutando en plataforma m\xF3vil:",this.isMobile)}ngOnInit(){console.log("Inicializando componente worker-pendingtask"),this.setupAuthListener(),this.initForm(),this.subscriptions.push(this.cameraService.photos$.subscribe(e=>{this.photos=e,e.length>0&&!this.imgUrl&&(this.imgUrl=e[0].url)}))}ngAfterViewInit(){setTimeout(()=>{this.initSignaturePad(),this.resizeCanvas()},300)}onResize(e){this.resizeCanvas()}initForm(){this.reportForm=this.formBuilder.group({notes:["",vu.required],status:["completed",vu.required]})}resizeCanvas(){if(this.signatureCanvas&&this.signatureCanvas.nativeElement){let e=this.signatureCanvas.nativeElement,i=Math.max(window.devicePixelRatio||1,1),n=e.parentElement?.offsetWidth||e.offsetWidth,s=this.signaturePad?.toData();e.width=n*i,e.height=200*i,e.style.width=`${n}px`,e.style.height="200px";let a=e.getContext("2d");a&&a.scale(i,i),this.initSignaturePad(),s&&s.length&&this.signaturePad.fromData(s)}}initSignaturePad(){if(this.signatureCanvas&&this.signatureCanvas.nativeElement){let e=this.signatureCanvas.nativeElement;this.signaturePad=new Kl(e,{backgroundColor:"rgb(255, 255, 255)",penColor:"rgb(0, 0, 0)",velocityFilterWeight:this.isMobile?.4:.7,minWidth:this.isMobile?1:.5,maxWidth:this.isMobile?3.5:2.5,throttle:16,minDistance:this.isMobile?2:1}),this.isMobile&&this.setupMobileTouchEvents(e)}}setupMobileTouchEvents(e){let i=e.parentElement,n=s=>{s.preventDefault(),s.stopPropagation()};e.addEventListener("touchstart",n,{passive:!1}),e.addEventListener("touchmove",n,{passive:!1}),e.addEventListener("touchend",n,{passive:!1}),Xs.isPluginAvailable("Haptics")&&(e.addEventListener("touchstart",()=>dt(this,null,function*(){try{yield Na.impact({style:fa.Light})}catch(s){console.log("Haptics no disponible:",s)}})),e.addEventListener("touchend",()=>dt(this,null,function*(){try{yield Na.impact({style:fa.Light})}catch(s){console.log("Haptics no disponible:",s)}}))),i.addEventListener("touchstart",()=>{i.classList.add("active-signing")}),i.addEventListener("touchend",()=>{i.classList.remove("active-signing")})}clearSignature(){this.signaturePad&&(this.signaturePad.clear(),this.signatureData=null,this.isMobile&&Xs.isPluginAvailable("Haptics")&&Na.impact({style:fa.Medium}).catch(e=>console.log("Error de haptics:",e)))}saveSignature(){this.signaturePad&&!this.signaturePad.isEmpty()?(this.signatureData=this.signaturePad.toDataURL("image/jpeg",.8),this.isMobile&&Xs.isPluginAvailable("Haptics")&&Na.impact({style:fa.Medium}).catch(e=>console.log("Error de haptics:",e)),this.showSuccess("Firma guardada correctamente")):this.handleError("No hay firma para guardar")}setupAuthListener(){let e=this.auth.onAuthStateChanged(i=>dt(this,null,function*(){if(i){console.log("Usuario autenticado:",i.email);try{yield this.loadUserData(i.uid)}catch(n){console.error("Error en la inicializaci\xF3n:",n),this.handleError("Error al cargar los datos del usuario")}}else console.log("No hay usuario autenticado"),this.router.navigate(["/login"])}));e&&this.subscriptions.push(new $p(()=>e()))}loadUserData(e){return dt(this,null,function*(){try{console.log("Cargando datos del usuario:",e);let i=yield bg(Vl(this.firestore,"Usuario",e));if(i.exists()){let n=i.data();if(this.currentUser=mi(pe({},n),{IdUsuario:e}),console.log("Datos de usuario cargados:",this.currentUser),this.currentUser.IdUsuario)this.loadPendingReportes(this.currentUser.IdUsuario),this.loadPendingTasks();else throw new Error("Usuario sin ID v\xE1lido")}else throw new Error("No se encontr\xF3 el documento del usuario")}catch(i){console.error("Error al cargar datos del usuario:",i),this.handleError("Error al cargar los datos del usuario")}})}loadPendingTasks(){return dt(this,null,function*(){try{this.isLoading=!0;let e=mu(this.firestore,"Tasks"),i=yg(e,wg("status","==","pending")),n=yield vg(i);this.pendingTasks=[],n.forEach(s=>{this.pendingTasks.push(pe({id:s.id},s.data()))}),console.log("Tareas pendientes cargadas:",this.pendingTasks)}catch(e){console.error("Error al cargar tareas pendientes:",e),this.errorMessage="Error al cargar las tareas pendientes. Intente nuevamente."}finally{this.isLoading=!1}})}selectTask(e){this.selectedTask=e,this.selectedReporte=null,this.reportForm.patchValue({status:"completed",notes:""}),this.evidenceImages=[]}selectReporte(e){this.selectedReporte=e,this.selectedTask=null,this.completionDescription="",this.materialsUsed="",this.evidenceImages=[]}loadPendingReportes(e){this.subscriptions.filter(s=>s&&typeof s.unsubscribe=="function").forEach(s=>s.unsubscribe()),console.log("Consultando reportes pendientes para el trabajador:",e);let n=this.taskService.getPendingReportesByWorker(e).pipe(Qp(s=>{console.log("Reportes pendientes recibidos:",s),s&&Array.isArray(s)?this.pendingReportes.next(s):(console.error("El formato de reportes recibido no es un array:",s),this.pendingReportes.next([])),this.isLoading=!1}),Kp(s=>(console.error("Error al cargar reportes:",s),this.handleError("Error al cargar los reportes pendientes"),this.isLoading=!1,this.pendingReportes.next([]),ho([])))).subscribe();this.subscriptions.push(n)}takePicture(){return dt(this,null,function*(){this.errorMessage="";try{this.isLoading=!0;try{let e=yield this.cameraService.takePicture();e&&(this.imgUrl=e)}catch(e){throw String(e).includes("Not implemented on web")?new Error("Esta funci\xF3n no est\xE1 disponible en navegadores web. Por favor, usa la aplicaci\xF3n m\xF3vil."):e}if(!this.imgUrl)throw new Error("No se obtuvo una imagen v\xE1lida");this.isLoading=!1}catch(e){console.error("Error al capturar imagen:",e),this.errorMessage=String(e),this.isLoading=!1}})}setMainPhoto(e){this.imgUrl=e.url}deletePhoto(e){this.cameraService.deletePhoto(e),this.photos.length>0&&!this.photos.some(i=>i.url===this.imgUrl)?this.imgUrl=this.photos[0].url:this.photos.length===0&&(this.imgUrl="")}addToEvidence(){this.imgUrl&&!this.evidenceImages.includes(this.imgUrl)?(this.evidenceImages.push(this.imgUrl),this.showSuccess("Imagen agregada como evidencia")):this.evidenceImages.includes(this.imgUrl)?this.handleError("Esta imagen ya est\xE1 en la lista de evidencias"):this.handleError("No hay imagen para agregar")}openCameraModal(){this.showCameraModal=!0,this.cameraComponent&&this.cameraComponent.switchTab("camera")}closeCameraModal(){this.showCameraModal=!1,this.cameraComponent&&this.cameraComponent.stopCamera()}saveEvidenceImages(){this.cameraComponent&&this.cameraComponent.imageGallery.length>0?(this.evidenceImages=[...this.cameraComponent.imageGallery],this.closeCameraModal()):(this.errorMessage="No hay im\xE1genes para guardar",setTimeout(()=>this.errorMessage="",3e3))}removeEvidenceImage(e){this.evidenceImages.splice(e,1)}isGalleryEmpty(){return this.photos.length===0}previewReport(){if(!this.selectedTask){this.errorMessage="Debes seleccionar una tarea para completar",setTimeout(()=>this.errorMessage="",3e3);return}if(!this.reportForm.valid){this.errorMessage="Por favor completa todos los campos requeridos",setTimeout(()=>this.errorMessage="",3e3);return}this.showPreviewModal=!0}closePreviewModal(){this.showPreviewModal=!1}validateForm(){return this.selectedReporte?!(!this.completionDescription.trim()||!this.materialsUsed.trim()||this.signaturePad&&this.signaturePad.isEmpty()&&!this.signatureData):this.selectedTask?this.reportForm.valid:!1}previewPdf(e){if(this.showErrors=!0,!this.validateForm()){this.handleError("Complete todos los campos requeridos antes de generar el PDF");return}this.saveSignature(),this.selectedReporte=e,this.generatePdf(e),this.showPdfPreview=!0}closePdfPreview(){this.showPdfPreview=!1,this.pdfSrc=null}confirmCompletion(){this.selectedReporte&&(this.markAsCompleted(this.selectedReporte),this.closePdfPreview())}generatePdf(e){try{let i=new $t,n=i.internal.pageSize.getWidth(),s=20;i.setFontSize(18),i.text("REPORTE DE TRABAJO COMPLETADO",n/2,s,{align:"center"}),s+=15,i.setFontSize(12),i.text(`Tipo de trabajo: ${e.Tipo_Trabajo}`,20,s),s+=10,i.text(`Fecha de asignaci\xF3n: ${new Date(e.fecha).toLocaleDateString()}`,20,s),s+=10,i.text(`Ubicaci\xF3n: ${e.location||"No especificada"}`,20,s),s+=10,i.text(`Departamento: ${e.departamento||"No especificado"}`,20,s),s+=10,i.text(`Prioridad: ${e.priority||"No especificada"}`,20,s),s+=15,i.setFontSize(14),i.text("Descripci\xF3n original del trabajo:",20,s),s+=8,i.setFontSize(11);let a=i.splitTextToSize(e.jobDescription||"No especificada",n-40);i.text(a,20,s),s+=a.length*6+10,i.setFontSize(14),i.text("Descripci\xF3n de la completaci\xF3n:",20,s),s+=8,i.setFontSize(11);let o=i.splitTextToSize(this.completionDescription,n-40);i.text(o,20,s),s+=o.length*6+10,i.setFontSize(14),i.text("Materiales utilizados:",20,s),s+=8,i.setFontSize(11);let l=i.splitTextToSize(this.materialsUsed,n-40);if(i.text(l,20,s),s+=l.length*6+20,this.evidenceImages.length>0){i.setFontSize(14),i.text("Evidencia fotogr\xE1fica:",20,s),s+=10;for(let c=0;c<Math.min(this.evidenceImages.length,3);c++)try{i.addImage(this.evidenceImages[c],"JPEG",20,s,60,40),s+=45}catch(u){console.error("Error adding image to PDF:",u)}}this.signatureData&&(i.addImage(this.signatureData,"JPEG",20,s,80,40),s+=45,i.setFontSize(10),i.text(`Firmado por: ${this.currentUser?.Nombre||"Trabajador"}`,20,s),s+=5,i.text(`Fecha: ${new Date().toLocaleDateString()}`,20,s)),this.pdfSrc=i.output("datauristring")}catch(i){console.error("Error al generar PDF:",i),this.handleError("Error al generar la vista previa del PDF")}}markAsCompleted(e){return dt(this,null,function*(){if(!this.validateForm()){this.showErrors=!0,this.handleError("Complete todos los campos requeridos");return}if(this.signatureData||this.saveSignature(),!e.IdReporte){this.handleError("Error: Reporte sin ID");return}try{this.isSubmitting=!0,yield this.taskService.updateReporteStatus(e.IdReporte,"Completado",this.completionDescription);let i=Vl(this.firestore,"Reportes",e.IdReporte);yield bu(i,{materialesUtilizados:this.materialsUsed,firmaDigital:this.signatureData,fechaCompletado:new Date,reporteGenerado:!0,evidenceImages:this.evidenceImages});let n=mu(this.firestore,"ReportesMetadata");yield mg(n,{reporteId:e.IdReporte,trabajadorId:this.currentUser?.IdUsuario,nombreTrabajador:this.currentUser?.Nombre||"Trabajador",fechaCompletado:new Date,tipoTrabajo:e.Tipo_Trabajo,fechaCreacionMetadata:new Date,evidenciasCount:this.evidenceImages.length}),this.isMobile&&Xs.isPluginAvailable("Haptics")&&Na.impact({style:fa.Heavy}).catch(s=>console.log("Error de haptics:",s)),this.resetForm(),this.showSuccess("Reporte marcado como completado exitosamente"),this.currentUser?.IdUsuario&&this.loadPendingReportes(this.currentUser.IdUsuario)}catch(i){console.error("Error al marcar como completado:",i),this.handleError("Error al actualizar el estado del reporte")}finally{this.isSubmitting=!1}})}submitReport(){return dt(this,null,function*(){if(!this.reportForm.valid){this.errorMessage="Por favor completa todos los campos requeridos",setTimeout(()=>this.errorMessage="",3e3);return}if(!this.selectedTask){this.errorMessage="Debes seleccionar una tarea para completar",setTimeout(()=>this.errorMessage="",3e3);return}try{this.isLoading=!0,this.closePreviewModal();let e=[];if(this.evidenceImages.length>0){let n=Lg();for(let s of this.evidenceImages){let o=yield(yield fetch(s)).blob(),l=`task_evidence/${this.selectedTask.id}/${Date.now()}_${Math.random().toString(36).substring(2,15)}`,c=Mg(n,l);yield kg(c,o);let u=yield Eg(c);e.push(u)}}let i=Vl(this.firestore,"Tasks",this.selectedTask.id);yield bu(i,{status:this.reportForm.value.status,completionNotes:this.reportForm.value.notes,evidenceImages:e,completedAt:new Date,completedBy:this.currentUser?.IdUsuario||"unknown"}),this.successMessage="Tarea completada exitosamente",setTimeout(()=>{this.selectedTask=null,this.evidenceImages=[],this.reportForm.reset(),this.loadPendingTasks(),this.successMessage=""},2e3)}catch(e){console.error("Error al enviar reporte:",e),this.errorMessage="Error al enviar el reporte. Por favor intenta nuevamente.",setTimeout(()=>this.errorMessage="",5e3)}finally{this.isLoading=!1}})}resetForm(){this.completionDescription="",this.materialsUsed="",this.signatureData=null,this.clearSignature(),this.showErrors=!1,this.reportForm.reset(),this.selectedTask=null,this.selectedReporte=null,this.evidenceImages=[]}handleError(e){this.errorMessage=e,setTimeout(()=>{this.errorMessage=""},5e3)}showSuccess(e){this.successMessage=e,setTimeout(()=>{this.successMessage=""},3e3)}goBack(){this.router.navigate(["/worker"])}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}isSignatureEmpty(){return this.signatureData?!1:this.signaturePad?this.signaturePad.isEmpty():!0}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=ca({type:r,selectors:[["app-worker-pendingtask"]],viewQuery:function(i,n){if(i&1&&(fo(cy,5),fo(Mm,5)),i&2){let s;po(s=go())&&(n.signatureCanvas=s.first),po(s=go())&&(n.cameraComponent=s.first)}},hostBindings:function(i,n){i&1&&ze("resize",function(a){return n.onResize(a)},!1,sg)},features:[og([Jo])],decls:14,vars:5,consts:[["signatureCanvas",""],[1,"tasks-container"],[1,"btn-back",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","19","y1","12","x2","5","y2","12"],["points","12 19 5 12 12 5"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"loading-state"],[1,"pending-work-container"],[1,"pdf-modal"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"alert-icon"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"spinner"],[1,"work-tabs"],[1,"tab-button",3,"click"],[1,"counter"],[1,"no-reports"],[1,"tasks-grid"],[1,"task-card",3,"selected"],[1,"task-card",3,"click"],[1,"task-header"],[1,"task-title"],[1,"task-info"],[1,"task-date"],[1,"task-description"],[1,"task-department"],[1,"task-location"],[1,"completion-form"],[1,"form-group"],["for","completionDescription"],[1,"required"],["id","completionDescription","name","completionDescription","rows","4","placeholder","Describe c\xF3mo se complet\xF3 el trabajo...",3,"ngModelChange","ngModel"],[1,"error-text"],["for","materialsUsed"],["id","materialsUsed","name","materialsUsed","rows","3","placeholder","Indica los materiales que utilizaste...",3,"ngModelChange","ngModel"],[1,"form-group","evidence-section"],[1,"evidence-container"],[1,"current-image-container"],["alt","Imagen actual",1,"current-image",3,"src"],[1,"no-image-placeholder"],[1,"evidence-controls"],["type","button",1,"btn-evidence","btn-camera",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"],["cx","12","cy","13","r","4"],[1,"btn-evidence","btn-upload"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["type","file","accept","image/*",2,"display","none",3,"change"],["type","button",1,"btn-evidence","btn-add",3,"disabled"],[1,"photos-gallery"],[1,"added-evidence"],[1,"form-group","signature-container"],[1,"signature-box"],[1,"signature-actions"],["type","button",1,"btn-clear",3,"click"],["type","button",1,"btn-save",3,"click"],[1,"task-actions"],["type","button",1,"btn-preview",3,"click","disabled"],["type","button",1,"btn-complete",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","48","height","48","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["cx","8.5","cy","8.5","r","1.5"],["points","21 15 16 10 5 21"],["type","button",1,"btn-evidence","btn-add",3,"click","disabled"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],[1,"gallery-thumbnails"],[1,"thumbnail",3,"selected"],[1,"thumbnail",3,"click"],[3,"src","alt"],[1,"delete-thumbnail",3,"click"],[1,"evidence-previews"],[1,"evidence-preview-container"],[1,"evidence-preview",3,"src","alt"],["type","button",1,"remove-evidence",3,"click"],[1,"spinner-small"],[1,"pdf-modal-content"],[1,"pdf-modal-header"],[1,"btn-close",3,"click"],[1,"pdf-modal-body"],[1,"pdf-preview-container"],[3,"src","render-text","original-size"],[1,"pdf-modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-confirm",3,"click"]],template:function(i,n){i&1&&(bt(0,"div",1)(1,"button",2),ze("click",function(){return n.goBack()}),Us(),bt(2,"svg",3),si(3,"line",4)(4,"polyline",5),vt(),Lt(5," Volver "),vt(),la(),bt(6,"h2"),Lt(7,"Trabajos Pendientes"),vt(),xi(8,uy,6,1,"div",6)(9,dy,5,1,"div",7)(10,fy,4,0,"div",8)(11,wy,7,4,"div",9)(12,Ny,62,19)(13,Iy,15,3,"div",10),vt()),i&2&&(zt(8),Be(n.errorMessage?8:-1),zt(),Be(n.successMessage?9:-1),zt(),Be(n.isLoading?10:11),zt(2),Be(n.selectedReporte?12:-1),zt(),Be(n.showPdfPreview?13:-1))},dependencies:[dg,ug,Hl,Yl,Gl,$l,Xl,Sg,z0,B0],styles:[`.tasks-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1200px;margin:0 auto}.tasks-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#0e1446}.tasks-container[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.tasks-container[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]:hover{color:#1a237e;transform:translate(-3px)}.tasks-container[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.pdf-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_modalFadeIn .3s ease-out}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]{background-color:#fff;border-radius:6px;width:90%;max-width:800px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 10px 25px #00000026}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content.camera-modal-content[_ngcontent-%COMP%]{max-width:900px;height:90vh}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e8eaf6}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#0e1446;font-size:1.25rem}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;line-height:1;color:#6c757d;cursor:pointer;transition:all .2s ease-in-out}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-header[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]:hover{color:#dc3545;transform:scale(1.1)}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]{flex-grow:1;padding:1.5rem;overflow-y:auto}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   app-camera[_ngcontent-%COMP%]{display:block;width:100%;height:100%;min-height:400px}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#0e1446;font-size:1.5rem;margin-top:0;margin-bottom:1rem}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1a237e}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#0e1446;margin-top:1.5rem;margin-bottom:.75rem}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   .pdf-preview-container[_ngcontent-%COMP%]{height:70vh;overflow-y:auto}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-body[_ngcontent-%COMP%]   .pdf-preview-container[_ngcontent-%COMP%]     pdf-viewer{display:block;height:100%}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-footer[_ngcontent-%COMP%]{padding:1rem 1.5rem;display:flex;justify-content:flex-end;gap:1rem;border-top:1px solid #e8eaf6}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-weight:500;border-radius:6px;cursor:pointer;transition:all .2s ease-in-out}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background-color:#fff;color:#6c757d;border:1px solid #e8eaf6}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e8eaf6;color:#0e1446}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background-color:#1a237e;color:#fff;border:none}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]   .pdf-modal-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]:hover{background-color:#161d69;transform:translateY(-2px)}.alert[_ngcontent-%COMP%]{padding:.75rem 1rem;border-radius:6px;margin-bottom:1rem;display:flex;align-items:center;gap:.75rem}.alert.alert-error[_ngcontent-%COMP%]{background-color:#f6cdd1;color:#bd2130}.alert.alert-success[_ngcontent-%COMP%]{background-color:#afecbd;color:#1e7e34}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2.5rem;color:#6c757d}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #1a237e;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.work-tabs[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;border-bottom:1px solid #ddd;overflow-x:auto;scrollbar-width:thin}.work-tabs[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.work-tabs[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#6c757d;border-radius:2px}.work-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;background:transparent;cursor:pointer;font-size:16px;position:relative;transition:all .2s ease-in-out;white-space:nowrap}.work-tabs[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]{font-weight:700;color:#1a237e;border-bottom:2px solid #1a237e}.work-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{display:inline-block;background-color:#e0e0e0;color:#333;border-radius:50%;width:24px;height:24px;line-height:24px;text-align:center;font-size:12px;margin-left:6px}.work-tabs[_ngcontent-%COMP%]   .tab-button.active[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{background-color:#1a237e;color:#fff}.tasks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:1rem;margin-bottom:1.5rem}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:6px;padding:1rem;cursor:pointer;transition:all .2s ease-in-out;background-color:#fff}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 4px 12px #0000001a}.tasks-grid[_ngcontent-%COMP%]   .task-card.selected[_ngcontent-%COMP%]{border-color:#1a237e;background-color:#e8eaf6;box-shadow:0 4px 12px #1976d233}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .task-title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .priority-badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:6px;font-size:.75rem;font-weight:500}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .priority-badge.priority-high[_ngcontent-%COMP%]{background-color:#f6cdd1;color:#bd2130}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .priority-badge.priority-medium[_ngcontent-%COMP%]{background-color:#fff8e1;color:#ff8f00}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .priority-badge.priority-low[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-header[_ngcontent-%COMP%]   .priority-badge.priority-normal[_ngcontent-%COMP%]{background-color:#e8eaf6;color:#1a237e}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:.5rem}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#6c757d;margin-bottom:.25rem}.tasks-grid[_ngcontent-%COMP%]   .task-card[_ngcontent-%COMP%]   .task-info[_ngcontent-%COMP%]   .task-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#333;display:-webkit-box;overflow:hidden}.no-reports[_ngcontent-%COMP%]{text-align:center;padding:2.5rem;color:#6c757d;background-color:#f9f9f9;border-radius:6px}.no-reports[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem}.no-reports[_ngcontent-%COMP%]   .btn-take-photo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background-color:#1a237e;color:#fff;border:none;border-radius:6px;padding:.75rem 1.25rem;cursor:pointer;transition:all .2s ease-in-out}.no-reports[_ngcontent-%COMP%]   .btn-take-photo[_ngcontent-%COMP%]:hover{background-color:#0e1446;transform:translateY(-2px)}.no-reports[_ngcontent-%COMP%]   .btn-take-photo[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{font-size:1.25rem}.completion-form[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:6px;padding:1.25rem;margin-bottom:1.25rem}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem;font-family:inherit}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#dc3545}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#dc3545;font-size:.75rem;margin-top:.25rem;display:block}.completion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]{color:#6c757d;font-size:.75rem;margin-top:.25rem;display:block}.camera-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:6px;padding:1.25rem;display:flex;flex-direction:column;gap:1rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]{height:300px;background-color:#000;border-radius:6px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   img.captured-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;color:#666}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:1rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{font-size:1rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.5rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border-radius:6px;border:none;font-weight:500;cursor:pointer;transition:all .2s ease-in-out;display:flex;align-items:center;justify-content:center;gap:.5rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .button-icon[_ngcontent-%COMP%]{font-size:1.25rem}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .take-picture-button[_ngcontent-%COMP%]{background-color:#1a237e;color:#fff}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .take-picture-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0e1446}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-evidence-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-evidence-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e7e34}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#1a237e}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545;padding:.75rem;border-radius:6px;margin-top:1rem;font-size:.875rem}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]{margin-top:1rem}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;font-size:1.25rem;color:#0e1446}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:.75rem}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:relative;aspect-ratio:1;border-radius:6px;overflow:hidden;border:2px solid transparent;cursor:pointer;transition:all .2s ease-in-out}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail.selected[_ngcontent-%COMP%]{border-color:#1a237e;transform:scale(1.05)}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .delete-thumbnail[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;width:24px;height:24px;border-radius:50%;background-color:#00000080;color:#fff;border:none;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease-in-out}.camera-section[_ngcontent-%COMP%]   .gallery-preview[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]   .delete-thumbnail[_ngcontent-%COMP%]:hover{background-color:#dc3545;transform:scale(1.1)}.gallery-section[_ngcontent-%COMP%]{padding:1.25rem;background-color:#f9f9f9;border-radius:6px}.gallery-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1.25rem;color:#0e1446;font-size:1.5rem}.gallery-section[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]{height:300px;background-color:#fff;border-radius:6px;overflow:hidden;display:flex;align-items:center;justify-content:center;margin-bottom:1.5rem;border:1px solid #ddd}.gallery-section[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.gallery-section[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;color:#6c757d}.gallery-section[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:1rem}.gallery-section[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{font-size:1rem}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;font-size:1.1rem;color:#6c757d}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]{position:relative;border-radius:6px;overflow:hidden;box-shadow:0 4px 15px #00000014;transition:all .2s ease-in-out;aspect-ratio:1;cursor:pointer}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item.selected[_ngcontent-%COMP%]{border:2px solid #1a237e;transform:scale(1.05)}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .photo-date[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:.5rem;background-color:#0009;color:#fff;font-size:.75rem;text-align:center}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-remove-image[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem;width:28px;height:28px;border-radius:50%;background-color:#0009;color:#fff;border:none;font-size:1.25rem;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease-in-out}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-remove-image[_ngcontent-%COMP%]:hover{background-color:#dc3545;transform:scale(1.1)}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-use-evidence[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;width:28px;height:28px;border-radius:50%;background-color:#0009;color:#fff;border:none;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease-in-out}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-use-evidence[_ngcontent-%COMP%]:disabled{background-color:#28a745;cursor:default}.gallery-section[_ngcontent-%COMP%]   .gallery-container[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]   .gallery-item[_ngcontent-%COMP%]   .btn-use-evidence[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1a237e;transform:scale(1.1)}.gallery-section[_ngcontent-%COMP%]   .no-photos[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6c757d}.gallery-section[_ngcontent-%COMP%]   .no-photos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem}.gallery-section[_ngcontent-%COMP%]   .no-photos[_ngcontent-%COMP%]   .btn-take-photo[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background-color:#1a237e;color:#fff;border:none;border-radius:6px;padding:.75rem 1.25rem;cursor:pointer;transition:all .2s ease-in-out}.gallery-section[_ngcontent-%COMP%]   .no-photos[_ngcontent-%COMP%]   .btn-take-photo[_ngcontent-%COMP%]:hover{background-color:#0e1446;transform:translateY(-2px)}.images-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.images-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.75rem;font-size:1rem;color:#0e1446}.images-section[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.images-section[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1rem;border-radius:6px;font-size:.875rem;cursor:pointer;transition:all .2s ease-in-out}.images-section[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   .btn-upload[_ngcontent-%COMP%]{background-color:#1a237e;color:#fff;border:none}.images-section[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   .btn-upload[_ngcontent-%COMP%]:hover{background-color:#0e1446}.images-section[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   .btn-gallery[_ngcontent-%COMP%]{background-color:#fff;color:#1a237e;border:1px solid #1a237e}.images-section[_ngcontent-%COMP%]   .image-input[_ngcontent-%COMP%]   .btn-gallery[_ngcontent-%COMP%]:hover{background-color:#e8eaf6}.images-section[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:.75rem}.images-section[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]{position:relative;aspect-ratio:1;border-radius:6px;overflow:hidden;border:1px solid #ddd}.images-section[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.images-section[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .btn-remove-image[_ngcontent-%COMP%]{position:absolute;top:.25rem;right:.25rem;width:24px;height:24px;border-radius:50%;background-color:#00000080;color:#fff;border:none;font-size:1rem;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease-in-out}.images-section[_ngcontent-%COMP%]   .image-previews[_ngcontent-%COMP%]   .image-preview-container[_ngcontent-%COMP%]   .btn-remove-image[_ngcontent-%COMP%]:hover{background-color:#dc3545;transform:scale(1.1)}.signature-container[_ngcontent-%COMP%]{margin-top:1.25rem}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]{border:1px solid #ddd;background-color:#fff;border-radius:6px;overflow:hidden;height:200px;display:flex;flex-direction:column}.signature-container[_ngcontent-%COMP%]   .signature-box.error[_ngcontent-%COMP%]{border-color:#dc3545}.signature-container[_ngcontent-%COMP%]   .signature-box.active-signing[_ngcontent-%COMP%]{border-color:#1a237e;box-shadow:0 0 0 2px #1a237e33}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{flex-grow:1;cursor:crosshair;touch-action:none}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]{display:flex;padding:.5rem;background-color:#f5f5f5;border-top:1px solid #eee}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem;border:none;border-radius:6px;padding:.375rem .75rem;font-size:.875rem;cursor:pointer;transition:all .2s ease-in-out}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-clear[_ngcontent-%COMP%]:hover{background-color:#bd2130}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.signature-container[_ngcontent-%COMP%]   .signature-box[_ngcontent-%COMP%]   .signature-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e7e34}.task-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:1.5rem}.task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:all .2s ease-in-out;display:flex;align-items:center;justify-content:center;gap:.5rem}.task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .spinner-small[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-left-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.task-actions[_ngcontent-%COMP%]   .btn-preview[_ngcontent-%COMP%]{background-color:#fff;color:#1a237e;border:1px solid #1a237e}.task-actions[_ngcontent-%COMP%]   .btn-preview[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#e8eaf6}.task-actions[_ngcontent-%COMP%]   .btn-complete[_ngcontent-%COMP%]{background-color:#1a237e;color:#fff}.task-actions[_ngcontent-%COMP%]   .btn-complete[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0e1446;transform:translateY(-2px)}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media screen and (max-width: 768px){.tasks-container[_ngcontent-%COMP%]{padding:1rem}.tasks-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.task-actions[_ngcontent-%COMP%]{flex-direction:column}.task-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.pdf-modal[_ngcontent-%COMP%]   .pdf-modal-content[_ngcontent-%COMP%]{width:95%;max-height:95vh}.image-previews[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(80px,1fr))!important}.gallery-section[_ngcontent-%COMP%]   .gallery-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}.gallery-section[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%], .camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .main-image-container[_ngcontent-%COMP%]{height:250px}.camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column}.camera-section[_ngcontent-%COMP%]   .gallery-thumbnails[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(80px,1fr))}.image-input[_ngcontent-%COMP%]{flex-direction:column}.work-tabs[_ngcontent-%COMP%]   .tab-button[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px}}
/*# sourceMappingURL=worker-pendingtask.component-BQZI52NZ.css.map */`]})}return r})();export{y_ as WorkerPendingtaskComponent};
//# sourceMappingURL=chunk-MN6DD7C6.js.map
