{
  "version": 3,
  "sources": ["src/app/environments/environments.ts", "src/app/services/cloudinary-image.service.ts", "src/app/services/simple-modal.service.ts", "src/app/Components/admin/admin.component.ts", "src/app/Components/admin/admin.component.html"],
  "sourcesContent": ["\nexport const environment =\n{\n    firebaseConfig : \n    {\n      apiKey: \"AIzaSyB02aFRJQaUZV4PH-1UilL0G1qR011UMOo\",\n      authDomain: \"workflowdb-4122b.firebaseapp.com\",\n      projectId: \"workflowdb-4122b\",\n      storageBucket: \"workflowdb-4122b.firebasestorage.app\",\n      messagingSenderId: \"1053802838055\",\n      appId: \"1:1053802838055:web:17ffaf05c2fe045c77b602\",\n      persistence: 'session'\n    },\n    cloudinary: \n    {\n      cloudName: 'dqv73l7uc',  \n      apiKey: '747314796397951',  \n      uploadPreset: 'profile_images'\n    }\n}", "import { Injectable, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, from, throwError } from 'rxjs';\nimport { map, catchError, switchMap } from 'rxjs/operators';\nimport { environment } from '../environments/environments';\nimport { Firestore, doc, updateDoc } from '@angular/fire/firestore';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CloudinaryImageService {\n  private readonly cloudName: string = environment.cloudinary.cloudName;\n  private readonly uploadPreset: string = environment.cloudinary.uploadPreset;\n  private readonly uploadUrl: string = `https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`;\n\n  private http = inject(HttpClient);\n  private firestore = inject(Firestore);\n\n  /**\n   * Sube una imagen a Cloudinary y actualiza el perfil del usuario\n   */\n  uploadProfileImage(file: File, userId: string, collectionName: string = 'Usuario'): Observable<string> {\n    // Validaciones básicas\n    if (!file || !file.type.includes('image')) {\n      return throwError(() => new Error('El archivo debe ser una imagen'));\n    }\n    if (!userId) {\n      return throwError(() => new Error('ID de usuario no disponible'));\n    }\n\n    // Preparar FormData para la subida a Cloudinary\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('upload_preset', this.uploadPreset);\n    formData.append('public_id', `user_${userId}_${Date.now()}`); // ID único\n    \n    // Subir a Cloudinary\n    return this.http.post<any>(this.uploadUrl, formData).pipe(\n      switchMap(response => {\n        const imageUrl = response.secure_url;\n        \n        // Actualizar Firestore con la nueva URL\n        const userRef = doc(this.firestore, collectionName, userId);\n        return from(updateDoc(userRef, {\n          Foto_Perfil: imageUrl\n        })).pipe(\n          map(() => imageUrl) // Devolver la URL de la imagen\n        );\n      }),\n      catchError(error => {\n        console.error('Error al subir imagen:', error);\n        return throwError(() => new Error('Error al subir imagen: ' + (error.message || 'Intente nuevamente')));\n      })\n    );\n  }\n\n  /**\n   * Optimiza y comprime una imagen antes de subirla\n   */\n  async optimizeImage(file: File, maxWidth: number = 500): Promise<File> {\n    return new Promise((resolve, reject) => {\n      try {\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          const img = new Image();\n          img.onload = () => {\n            // Determinar nuevas dimensiones manteniendo el aspect ratio\n            let width = img.width;\n            let height = img.height;\n            \n            if (width > maxWidth) {\n              height = Math.round((height * maxWidth) / width);\n              width = maxWidth;\n            }\n            \n            // Crear canvas para redimensionar\n            const canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            \n            // Dibujar imagen redimensionada\n            const ctx = canvas.getContext('2d');\n            if (!ctx) {\n              reject(new Error('No se pudo obtener el contexto 2D del canvas'));\n              return;\n            }\n            \n            ctx.drawImage(img, 0, 0, width, height);\n            \n            // Convertir a Blob\n            canvas.toBlob((blob) => {\n              if (!blob) {\n                reject(new Error('Error al generar blob'));\n                return;\n              }\n              \n              // Crear nuevo archivo con el mismo nombre pero comprimido\n              const optimizedFile = new File([blob], file.name, {\n                type: 'image/jpeg',\n                lastModified: Date.now()\n              });\n              \n              resolve(optimizedFile);\n            }, 'image/jpeg', 0.85); // Calidad 85%\n          };\n          \n          img.onerror = () => {\n            reject(new Error('Error al cargar la imagen para optimización'));\n          };\n          \n          img.src = event.target?.result as string;\n        };\n        \n        reader.onerror = () => {\n          reject(new Error('Error al leer el archivo para optimización'));\n        };\n        \n        reader.readAsDataURL(file);\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * Actualiza la imagen de perfil, primero optimizándola\n   */\n  async updateProfileImage(file: File, userId: string): Promise<Observable<string>> {\n    try {\n      // Optimizar la imagen antes de subirla\n      const optimizedFile = await this.optimizeImage(file);\n      // Subir la imagen optimizada\n      return this.uploadProfileImage(optimizedFile, userId);\n    } catch (error) {\n      return throwError(() => error);\n    }\n  }\n}", "import { Injectable, Renderer2, RendererFactory2, inject } from '@angular/core';\n\nexport interface ModalOptions {\n  title: string;\n  message: string;\n  okText?: string;\n  cancelText?: string | null;\n  onOk?: () => void;\n  onCancel?: () => void;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SimpleModalService {\n  private renderer: Renderer2;\n  private modalElement: HTMLElement | null = null;\n  private backdropElement: HTMLElement | null = null;\n\n  constructor(private rendererFactory: RendererFactory2) {\n    this.renderer = this.rendererFactory.createRenderer(null, null);\n  }\n\n  /**\n   * Muestra un diálogo modal simple\n   */\n  showModal(options: ModalOptions): void {\n    // Limpiar modal anterior si existe\n    this.closeModal();\n    \n    // Crear el backdrop\n    this.backdropElement = this.renderer.createElement('div');\n    this.renderer.addClass(this.backdropElement, 'fixed');\n    this.renderer.addClass(this.backdropElement, 'inset-0');\n    this.renderer.addClass(this.backdropElement, 'bg-black/50');\n    this.renderer.addClass(this.backdropElement, 'backdrop-blur-sm');\n    this.renderer.addClass(this.backdropElement, 'z-50');\n    this.renderer.setStyle(this.backdropElement, 'animation', 'fadeIn 0.3s');\n    \n    // Crear el modal\n    this.modalElement = this.renderer.createElement('div');\n    this.renderer.addClass(this.modalElement, 'fixed');\n    this.renderer.addClass(this.modalElement, 'left-1/2');\n    this.renderer.addClass(this.modalElement, 'top-1/2');\n    this.renderer.addClass(this.modalElement, '-translate-x-1/2');\n    this.renderer.addClass(this.modalElement, '-translate-y-1/2');\n    this.renderer.addClass(this.modalElement, 'bg-white');\n    this.renderer.addClass(this.modalElement, 'rounded-xl');\n    this.renderer.addClass(this.modalElement, 'p-6');\n    this.renderer.addClass(this.modalElement, 'shadow-xl');\n    this.renderer.addClass(this.modalElement, 'w-11/12');\n    this.renderer.addClass(this.modalElement, 'max-w-md');\n    this.renderer.addClass(this.modalElement, 'z-50');\n    this.renderer.setStyle(this.modalElement, 'animation', 'zoomIn 0.3s');\n    \n    // Título\n    const title = this.renderer.createElement('h3');\n    this.renderer.addClass(title, 'text-xl');\n    this.renderer.addClass(title, 'font-bold');\n    this.renderer.addClass(title, 'text-indigo-900');\n    this.renderer.addClass(title, 'mb-3');\n    this.renderer.appendChild(title, this.renderer.createText(options.title));\n    this.renderer.appendChild(this.modalElement, title);\n    \n    // Mensaje\n    const message = this.renderer.createElement('p');\n    this.renderer.addClass(message, 'text-gray-700');\n    this.renderer.addClass(message, 'mb-6');\n    this.renderer.appendChild(message, this.renderer.createText(options.message));\n    this.renderer.appendChild(this.modalElement, message);\n    \n    // Contenedor de botones\n    const buttonContainer = this.renderer.createElement('div');\n    this.renderer.addClass(buttonContainer, 'flex');\n    this.renderer.addClass(buttonContainer, 'justify-end');\n    this.renderer.addClass(buttonContainer, 'gap-3');\n    \n    // Botón de cancelar (opcional)\n    if (options.cancelText !== null) {\n      const cancelButton = this.renderer.createElement('button');\n      this.renderer.addClass(cancelButton, 'px-4');\n      this.renderer.addClass(cancelButton, 'py-2');\n      this.renderer.addClass(cancelButton, 'border');\n      this.renderer.addClass(cancelButton, 'border-gray-300');\n      this.renderer.addClass(cancelButton, 'rounded-lg');\n      this.renderer.addClass(cancelButton, 'text-gray-700');\n      this.renderer.addClass(cancelButton, 'hover:bg-gray-50');\n      this.renderer.addClass(cancelButton, 'transition-colors');\n      this.renderer.appendChild(cancelButton, this.renderer.createText(options.cancelText || 'Cancelar'));\n      \n      this.renderer.listen(cancelButton, 'click', () => {\n        this.closeModal();\n        if (options.onCancel) {\n          options.onCancel();\n        }\n      });\n      \n      this.renderer.appendChild(buttonContainer, cancelButton);\n    }\n    \n    // Botón de confirmar\n    const okButton = this.renderer.createElement('button');\n    this.renderer.addClass(okButton, 'px-4');\n    this.renderer.addClass(okButton, 'py-2');\n    this.renderer.addClass(okButton, 'bg-indigo-900');\n    this.renderer.addClass(okButton, 'text-white');\n    this.renderer.addClass(okButton, 'rounded-lg');\n    this.renderer.addClass(okButton, 'hover:bg-indigo-800');\n    this.renderer.addClass(okButton, 'transition-colors');\n    this.renderer.appendChild(okButton, this.renderer.createText(options.okText || 'Aceptar'));\n    \n    this.renderer.listen(okButton, 'click', () => {\n      this.closeModal();\n      if (options.onOk) {\n        options.onOk();\n      }\n    });\n    \n    this.renderer.appendChild(buttonContainer, okButton);\n    this.renderer.appendChild(this.modalElement, buttonContainer);\n    \n    // Agregar a DOM\n    this.renderer.appendChild(document.body, this.backdropElement);\n    this.renderer.appendChild(document.body, this.modalElement);\n    \n    // Agregar estilos para animaciones\n    const style = this.renderer.createElement('style');\n    this.renderer.appendChild(\n      style,\n      this.renderer.createText(`\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes zoomIn {\n          from { opacity: 0; transform: translate(-50%, -50%) scale(0.95); }\n          to { opacity: 1; transform: translate(-50%, -50%) scale(1); }\n        }\n        @keyframes fadeOut {\n          from { opacity: 1; }\n          to { opacity: 0; }\n        }\n        @keyframes zoomOut {\n          from { opacity: 1; transform: translate(-50%, -50%) scale(1); }\n          to { opacity: 0; transform: translate(-50%, -50%) scale(0.95); }\n        }\n      `)\n    );\n    this.renderer.appendChild(document.head, style);\n    \n    // Detectar tecla ESC para cerrar\n    const escHandler = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        document.removeEventListener('keydown', escHandler);\n        this.closeModal();\n        if (options.onCancel) {\n          options.onCancel();\n        }\n      }\n    };\n    \n    document.addEventListener('keydown', escHandler);\n    \n    // Clic en backdrop para cerrar\n    if (this.backdropElement) {\n      this.renderer.listen(this.backdropElement, 'click', () => {\n        document.removeEventListener('keydown', escHandler);\n        this.closeModal();\n        if (options.onCancel) {\n          options.onCancel();\n        }\n      });\n    }\n  }\n\n  /**\n   * Muestra un diálogo de confirmación\n   */\n  confirm(title: string, message: string, okCallback?: () => void, cancelCallback?: () => void): void {\n    this.showModal({\n      title,\n      message,\n      okText: 'Aceptar',\n      cancelText: 'Cancelar',\n      onOk: okCallback,\n      onCancel: cancelCallback\n    });\n  }\n\n  /**\n   * Muestra un mensaje de alerta\n   */\n  alert(title: string, message: string, callback?: () => void): void {\n    this.showModal({\n      title,\n      message,\n      okText: 'Aceptar',\n      cancelText: null, // Sin botón de cancelar\n      onOk: callback\n    });\n  }\n\n  /**\n   * Cierra el modal actual\n   */\n  closeModal(): void {\n    if (this.modalElement) {\n      this.renderer.setStyle(this.modalElement, 'animation', 'zoomOut 0.2s');\n    }\n    \n    if (this.backdropElement) {\n      this.renderer.setStyle(this.backdropElement, 'animation', 'fadeOut 0.2s');\n    }\n    \n    // Remover elementos después de la animación\n    setTimeout(() => {\n      if (this.modalElement) {\n        this.renderer.removeChild(document.body, this.modalElement);\n        this.modalElement = null;\n      }\n      \n      if (this.backdropElement) {\n        this.renderer.removeChild(document.body, this.backdropElement);\n        this.backdropElement = null;\n      }\n    }, 200);\n  }\n}", "import { Component, OnInit, OnDestroy, ViewChild, ElementRef, HostListener, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Router, RouterModule } from '@angular/router';\nimport { Auth } from '@angular/fire/auth';\nimport {\n  Firestore,\n  collection,\n  query,\n  where,\n  getDocs,\n  DocumentData,\n  QuerySnapshot,\n  doc,\n  updateDoc\n} from '@angular/fire/firestore';\nimport { Subscription } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\nimport { Usuario } from '../../models/interfaces';\nimport { AuthService } from '../../services/auth.service';\nimport { ClickOutsideDirective } from '../../directives/click-outside.directive';\nimport { CloudinaryImageService } from '../../services/cloudinary-image.service';\nimport { SimpleModalService } from '../../services/simple-modal.service';\n\ninterface MenuItem {\n  title: string;\n  icon: string;\n  route: string;\n  description: string;\n}\n\n@Component({\n  selector: 'app-admin',\n  standalone: true,\n  imports: [CommonModule, RouterModule, ClickOutsideDirective],\n  templateUrl: './admin.component.html',\n  styleUrl: './admin.component.scss'\n})\nexport class AdminComponent implements OnInit, OnDestroy {\n  usuario: Usuario | null = null;\n  isLoading: boolean = true;\n  isProfileMenuOpen: boolean = false;\n  isUploading: boolean = false;\n  uploadProgress: number = 0;\n  window: any = window; // Para acceder a window en la plantilla\n\n  // Inyección de dependencias\n  private router = inject(Router);\n  private auth = inject(Auth);\n  private firestore = inject(Firestore);\n  private authService = inject(AuthService);\n  private cloudinaryImageService = inject(CloudinaryImageService);\n  private modalService = inject(SimpleModalService);\n\n  @ViewChild('fileInput') fileInput!: ElementRef;\n  private userSubscription: Subscription | null = null;\n\n  menuItems: MenuItem[] = [\n    {\n      title: 'Crear cuenta',\n      icon: 'persona.png',\n      route: '/UserCreate',\n      description: 'Gestión de usuarios y permisos'\n    },\n    {\n      title: 'Configuración',\n      icon: 'tools.png',\n      route: '/configuration',\n      description: 'Ajustes del sistema'\n    },\n    {\n      title: 'Reportes',\n      icon: 'report.png',\n      route: '/reportsInterface',\n      description: 'Gestión de reportes de trabajo'\n    },\n    {\n      title: 'Estadísticas',\n      icon: 'estadistica.png',\n      route: '/statistics',\n      description: 'Análisis y métricas'\n    }\n  ];\n\n  ngOnInit() {\n    this.initializeUserData();\n  }\n\n  // Método para manejar cambios de tamaño de ventana\n  @HostListener('window:resize', ['$event'])\n  onResize(event: Event) {\n    // Actualizar posición del menú si está abierto\n    if (this.isProfileMenuOpen) {\n      this.updateDropdownPosition();\n    }\n  }\n\n  // Método para cerrar el menú (usado por la directiva clickOutside)\n  closeProfileMenu() {\n    this.isProfileMenuOpen = false;\n  }\n\n  // Método para abrir/cerrar el menú de perfil\n  toggleProfileMenu(event?: MouseEvent) {\n    if (event) {\n      event.stopPropagation(); // Evitar que el clic se propague\n    }\n    \n    this.isProfileMenuOpen = !this.isProfileMenuOpen;\n    \n    // Si el menú se abre, necesitamos posicionarlo correctamente\n    if (this.isProfileMenuOpen) {\n      setTimeout(() => this.updateDropdownPosition(), 0);\n    }\n  }\n\n  // Método para actualizar la posición del menú desplegable\n  private updateDropdownPosition() {\n    const dropdownMenu = document.querySelector('.dropdown-menu') as HTMLElement;\n    const toggleButton = document.querySelector('.toggle-button') as HTMLElement;\n    \n    if (dropdownMenu && toggleButton) {\n      const buttonRect = toggleButton.getBoundingClientRect();\n      const menuWidth = dropdownMenu.offsetWidth;\n      const windowWidth = window.innerWidth;\n      \n      // Calcular posición considerando el espacio disponible\n      let leftPosition = 0;\n      \n      if (windowWidth < 640) {\n        // Para móviles, centrar el menú\n        leftPosition = (windowWidth - menuWidth) / 2;\n      } else {\n        // Para escritorio, alinear con el botón\n        leftPosition = Math.min(\n          buttonRect.right - menuWidth,\n          windowWidth - menuWidth - 10\n        );\n        leftPosition = Math.max(10, leftPosition); // No permitir que se salga por la izquierda\n      }\n      \n      // Establecer posición\n      dropdownMenu.style.position = 'fixed';\n      dropdownMenu.style.top = (buttonRect.bottom + 10) + 'px';\n      dropdownMenu.style.left = leftPosition + 'px';\n      dropdownMenu.style.maxHeight = '450px';\n      dropdownMenu.style.overflowY = 'auto';\n    }\n  }\n\n  // Método para abrir el selector de archivos\n  openPhotoSelector() {\n    this.fileInput.nativeElement.click();\n  }\n\n  // Método para manejar la selección de una nueva foto\n  async onPhotoSelected(event: Event) {\n    const input = event.target as HTMLInputElement;\n    if (!input.files || input.files.length === 0) {\n      return;\n    }\n\n    try {\n      this.isUploading = true;\n      const file = input.files[0];\n      \n      // Validar que sea una imagen\n      if (!file.type.includes('image')) {\n        this.showToast('Por favor seleccione un archivo de imagen válido.', 'error');\n        return;\n      }\n      \n      if (!this.usuario?.IdUsuario) {\n        throw new Error('ID de usuario no disponible');\n      }\n      \n      // Comprobar tamaño de archivo\n      if (file.size > 3 * 1024 * 1024) { // 3MB\n        this.modalService.confirm(\n          'Imagen grande detectada',\n          'La imagen seleccionada es grande. ¿Desea optimizarla para mejorar el rendimiento?',\n          // Callback al aceptar\n          () => {\n            // Con optimización\n            this.processAndUploadImage(file, input, true);\n          },\n          // Callback al cancelar\n          () => {\n            // Sin optimización\n            this.processAndUploadImage(file, input, false);\n          }\n        );\n      } else {\n        // Procesar directamente si es menor de 3MB\n        this.processAndUploadImage(file, input, true);\n      }\n    } catch (error: any) {\n      console.error('Error inicial:', error);\n      this.showToast('Error al procesar imagen: ' + (error.message || 'Intente nuevamente'), 'error');\n      this.isUploading = false;\n    }\n  }\n\n  // Método para procesar y subir imagen\n  private async processAndUploadImage(file: File, input: HTMLInputElement, optimize: boolean) {\n    this.showToast('Subiendo imagen...', 'info');\n    \n    try {\n      if (optimize) {\n        // Con optimización - Esperamos a que la promesa se resuelva y obtener el Observable\n        const uploadObservable = await this.cloudinaryImageService.updateProfileImage(file, this.usuario!.IdUsuario);\n        \n        // Ahora podemos usar pipe() porque estamos trabajando con el Observable\n        uploadObservable.pipe(\n          finalize(() => {\n            this.isUploading = false;\n            input.value = '';\n          })\n        ).subscribe({\n          next: (imageUrl) => this.handleUploadSuccess(imageUrl),\n          error: (error) => this.handleUploadError(error)\n        });\n      } else {\n        // Sin optimización - Este método devuelve un Observable directamente, no hay problema\n        this.cloudinaryImageService.uploadProfileImage(file, this.usuario!.IdUsuario)\n          .pipe(\n            finalize(() => {\n              this.isUploading = false;\n              input.value = '';\n            })\n          )\n          .subscribe({\n            next: (imageUrl) => this.handleUploadSuccess(imageUrl),\n            error: (error) => this.handleUploadError(error)\n          });\n      }\n    } catch (error) {\n      console.error('Error en el procesamiento de la imagen:', error);\n      this.showToast('Error al procesar la imagen', 'error');\n      this.isUploading = false;\n    }\n  }\n\n  // Métodos auxiliares para mantener el código limpio\n  private handleUploadSuccess(imageUrl: string) {\n    if (this.usuario) {\n      this.usuario = {\n        ...this.usuario,\n        Foto_Perfil: imageUrl\n      };\n    }\n    this.showToast('Foto de perfil actualizada correctamente', 'success');\n  }\n\n  private handleUploadError(error: any) {\n    console.error('Error al actualizar foto de perfil:', error);\n    this.showToast('Error al actualizar la foto: ' + (error.message || 'Intente nuevamente'), 'error');\n  }\n\n  private async initializeUserData() {\n    try {\n      // Reiniciar estado de carga\n      this.isLoading = true;\n      this.usuario = null;\n      \n      // Obtener el usuario autenticado\n      const currentUser = this.auth.currentUser;\n      if (!currentUser) {\n        throw new Error('No hay usuario autenticado');\n      }\n      \n      // Verificar que el correo exista\n      const userEmail = currentUser.email;\n      if (!userEmail) {\n        throw new Error('Correo de usuario no disponible');\n      }\n      \n      // Consultar la colección de Usuarios\n      const usuariosRef = collection(this.firestore, 'Usuario');\n      const q = query(usuariosRef, where('Correo', '==', userEmail));\n      \n      // Ejecutar consulta\n      const querySnapshot: QuerySnapshot<DocumentData> = await getDocs(q);\n      if (!querySnapshot.empty) {\n        // Obtener el primer documento (debería ser único por correo)\n        const usuarioDoc = querySnapshot.docs[0];\n        const usuarioData = usuarioDoc.data() as Usuario;\n        \n        // Asignar datos de usuario\n        this.usuario = {\n          ...usuarioData,\n          // Asegurar que todos los campos estén definidos\n          Correo: usuarioData.Correo || '',\n          Departamento: usuarioData.Departamento || '',\n          Foto_Perfil: usuarioData.Foto_Perfil || '',\n          IdUsuario: usuarioDoc.id, // Asegurar que se use el ID del documento\n          NivelAdmin: usuarioData.NivelAdmin || '',\n          Nombre: usuarioData.Nombre || '',\n          Rol: usuarioData.Rol || '',\n          Telefono: usuarioData.Telefono || '',\n          Username: usuarioData.Username || ''\n        };\n        \n        // Verificar si la imagen de perfil está accesible\n        if (this.usuario.Foto_Perfil) {\n          this.preloadImage(this.usuario.Foto_Perfil).catch(() => {\n            console.warn('No se pudo cargar la imagen de perfil, usando imagen por defecto');\n            if (this.usuario) {\n              this.usuario.Foto_Perfil = ''; // Usar la imagen por defecto\n            }\n          });\n        }\n      } else {\n        console.warn('No se encontró usuario en la base de datos');\n        this.showToast('No se encontró su información de usuario', 'warning');\n      }\n    } catch (error: any) {\n      console.error('Error al obtener datos de usuario:', error);\n      this.handleAuthError(error);\n    } finally {\n      // Finalizar estado de carga después de un breve retraso para mostrar el spinner\n      setTimeout(() => {\n        this.isLoading = false;\n      }, 800);\n    }\n  }\n  \n  // Método para precargar imagen y verificar que esté accesible\n  private preloadImage(url: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.onload = () => resolve();\n      img.onerror = () => reject();\n      img.src = url;\n    });\n  }\n\n  // Método para manejar errores de autenticación\n  private handleAuthError(error: any) {\n    // Limpiar datos de usuario\n    this.usuario = null;\n    // Redirigir al login o mostrar mensaje de error\n    this.router.navigate(['/login']);\n  }\n\n  // Método de navegación\n  navigateTo(route: string) {\n    // Validar que la ruta exista\n    if (route) {\n      this.router.navigate([route]);\n    }\n    // Cerrar el menú desplegable si está abierto\n    this.isProfileMenuOpen = false;\n  }\n\n  async logout(): Promise<void> {\n    try {\n      this.isLoading = true;\n      await this.authService.signOut();\n    } catch (error) {\n      console.error('Logout error:', error);\n      this.showToast('Error al cerrar sesión. Por favor inténtelo nuevamente.', 'error');\n      // En caso de error, intentar redirección forzada como último recurso\n      window.location.href = '/login?forceRefresh=true&t=' + Date.now();\n    } finally {\n      this.isLoading = false;\n    }\n  }\n\n  // Sistema de notificaciones mejorado usando Tailwind\n  private showToast(message: string, type: 'success' | 'error' | 'info' | 'warning'): void {\n    // Obtener el elemento toast\n    const toast = document.getElementById('notification-toast');\n    if (!toast) return;\n    \n    // Limpiar cualquier clase o contenido anterior\n    toast.className = 'fixed bottom-5 left-1/2 -translate-x-1/2 py-3 px-5 rounded-xl text-white text-sm font-medium z-50 shadow-lg flex items-center gap-2.5 transform transition-all duration-300 w-11/12 max-w-md justify-center';\n    \n    // Aplicar estilos según el tipo\n    let icon = '';\n    \n    if (type === 'success') {\n      toast.classList.add('bg-gradient-to-r', 'from-green-600', 'to-green-500');\n      icon = '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\" /></svg>';\n    } else if (type === 'error') {\n      toast.classList.add('bg-gradient-to-r', 'from-red-600', 'to-red-500');\n      icon = '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\" /></svg>';\n    } else if (type === 'info') {\n      toast.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-blue-500');\n      icon = '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9a1 1 0 00-1-1z\" clip-rule=\"evenodd\" /></svg>';\n    } else if (type === 'warning') {\n      toast.classList.add('bg-gradient-to-r', 'from-yellow-600', 'to-yellow-500');\n      icon = '<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\" /></svg>';\n    }\n    \n    toast.innerHTML = icon + message;\n    \n    // Mostrar el toast con animación\n    toast.classList.remove('hidden');\n    \n    // Ocultar después de 4 segundos\n    setTimeout(() => {\n      toast.classList.add('opacity-0', 'translate-y-6');\n      setTimeout(() => {\n        toast.classList.add('hidden');\n        toast.classList.remove('opacity-0', 'translate-y-6');\n      }, 300);\n    }, 4000);\n  }\n\n  ngOnDestroy() {\n    // Limpiar cualquier suscripción pendiente\n    if (this.userSubscription) {\n      this.userSubscription.unsubscribe();\n    }\n  }\n}", "<div class=\"min-h-screen bg-gradient-to-br from-indigo-50 to-blue-50 px-4 py-8 md:px-8 md:py-10 lg:px-12\">\n  <div class=\"max-w-7xl mx-auto\">\n    <!-- Header -->\n    <header class=\"bg-white/95 backdrop-blur-lg rounded-2xl shadow-md p-4 md:p-6 mb-8 md:mb-10 flex flex-col sm:flex-row justify-between items-center gap-4 transition-all duration-300 hover:shadow-lg hover:-translate-y-1\">\n      <!-- Logo Section -->\n      <div class=\"flex items-center\">\n        <img src=\"icons/logo_RepoS.png\" alt=\"Repo System Logo\" class=\"h-10 md:h-14 w-auto mr-3 transition-all duration-300 hover:scale-105 hover:rotate-2\">\n        <h1 class=\"text-2xl md:text-3xl font-bold text-indigo-900 relative\">\n          Repo System\n          <span class=\"absolute bottom-0 left-0 w-1/3 h-0.5 bg-gradient-to-r from-indigo-900 to-transparent rounded transition-all duration-300 group-hover:w-full group-hover:opacity-80\"></span>\n        </h1>\n      </div>\n      <!-- User Controls -->\n      <div class=\"flex items-center gap-5 z-30\">\n        <!-- User Welcome Info -->\n        <div class=\"text-right transition-all duration-200 hover:-translate-y-1\">\n          <div *ngIf=\"usuario\" class=\"flex flex-col items-end\">\n            <p class=\"text-sm text-gray-600 font-medium m-0 bg-gradient-to-r from-gray-500 to-gray-600 bg-clip-text text-transparent\">Bienvenido,</p>\n            <span class=\"text-indigo-900 font-semibold truncate max-w-[150px] md:max-w-[200px]\" [title]=\"usuario.Nombre\">\n              {{usuario.Nombre}}\n            </span>\n          </div>\n          <div *ngIf=\"!usuario\" class=\"flex flex-col items-end\">\n            <p class=\"text-sm text-gray-600 font-medium m-0 bg-gradient-to-r from-gray-500 to-gray-600 bg-clip-text text-transparent\">Cargando...</p>\n          </div>\n        </div>\n        \n        <!-- Profile Dropdown -->\n        <div class=\"relative z-40\" clickOutside (clickOutside)=\"closeProfileMenu()\">\n          <!-- Profile Toggle Button -->\n          <button\n            class=\"flex items-center p-1.5 rounded-full bg-indigo-50 transition-all duration-200 hover:bg-indigo-100 hover:-translate-y-1 hover:shadow-md active:translate-y-0\"\n            (click)=\"toggleProfileMenu($event)\"\n          >\n            <img\n              [src]=\"usuario && usuario.Foto_Perfil ? usuario.Foto_Perfil : 'icons/default_profile.png'\"\n              alt=\"Foto de perfil\"\n              class=\"w-10 h-10 rounded-full object-cover border-2 border-white shadow-md transition-all duration-300 hover:border-indigo-100 hover:scale-105\"\n              onerror=\"this.src='icons/default_profile.png'; this.onerror=null;\"\n            >\n            <span class=\"text-xs text-indigo-900 ml-2 transition-transform duration-300\" [class.rotate-180]=\"isProfileMenuOpen\">▼</span>\n          </button>\n          \n          <!-- Dropdown Menu -->\n          <div\n            *ngIf=\"isProfileMenuOpen\"\n            class=\"absolute top-14 right-0 w-72 sm:w-80 bg-white rounded-xl shadow-lg z-50 origin-top-right animate-fadeIn flex flex-col max-h-[450px]\"\n            [ngStyle]=\"{'right': (window.innerWidth < 640) ? '50%' : '0', 'transform': (window.innerWidth < 640) ? 'translateX(50%)' : 'none'}\"\n          >\n            <!-- Profile Header -->\n            <div class=\"p-5 flex flex-col items-center border-b border-gray-100 bg-gradient-to-br from-indigo-50 to-blue-50\">\n              <!-- Profile Photo -->\n              <div class=\"relative mb-4\" [class.opacity-70]=\"isUploading\">\n                <img\n                  [src]=\"usuario && usuario.Foto_Perfil ? usuario.Foto_Perfil : 'icons/default_profile.png'\"\n                  alt=\"Foto de perfil\"\n                  class=\"w-24 h-24 rounded-full object-cover border-4 border-white shadow-md mb-2 transition-all hover:scale-[1.02] hover:shadow-lg\"\n                  onerror=\"this.src='icons/default_profile.png'; this.onerror=null;\"\n                >\n                <div *ngIf=\"isUploading\" class=\"absolute inset-0 flex items-center justify-center\">\n                  <div class=\"w-10 h-10 border-4 border-indigo-200 border-t-indigo-900 rounded-full animate-spin\"></div>\n                </div>\n                <button\n                  class=\"bg-indigo-900 text-white rounded-full px-3 py-1.5 text-xs flex items-center gap-1.5 transition-all hover:bg-indigo-800 hover:-translate-y-1 hover:shadow-md active:translate-y-0 disabled:bg-indigo-400 disabled:cursor-not-allowed mx-auto\"\n                  (click)=\"openPhotoSelector()\"\n                  [disabled]=\"isUploading\"\n                >\n                  <i class=\"fas fa-camera text-xs\"></i>\n                  <span>Cambiar foto</span>\n                </button>\n                <input\n                  type=\"file\"\n                  #fileInput\n                  class=\"hidden\"\n                  accept=\"image/*\"\n                  (change)=\"onPhotoSelected($event)\"\n                >\n              </div>\n              \n              <!-- Profile Info -->\n              <div class=\"text-center w-full\">\n                <p class=\"text-lg font-semibold text-indigo-900 m-0\">{{ usuario?.Nombre }}</p>\n                <span class=\"text-sm bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded-full inline-block mt-1 shadow-inner\">\n                  {{ usuario?.Rol }}\n                </span>\n                <p class=\"text-sm text-gray-500 mt-1.5 break-all\">{{ usuario?.Correo }}</p>\n              </div>\n            </div>\n            \n            <!-- Menu Items -->\n            <div class=\"py-2 overflow-y-auto flex-grow\">\n              <a class=\"flex items-center px-5 py-3 text-gray-700 transition-all cursor-pointer hover:bg-indigo-50 hover:pl-6 group\"\n                (click)=\"navigateTo('/profile')\">\n                <i class=\"fas fa-user text-indigo-900 mr-3 w-5 text-center transition-transform duration-200 group-hover:translate-x-1\"></i>\n                <span class=\"text-sm font-medium\">Mi Perfil</span>\n              </a>\n              <a class=\"flex items-center px-5 py-3 text-gray-700 transition-all cursor-pointer hover:bg-indigo-50 hover:pl-6 group\"\n                (click)=\"navigateTo('/settings')\">\n                <i class=\"fas fa-cog text-indigo-900 mr-3 w-5 text-center transition-transform duration-200 group-hover:translate-x-1\"></i>\n                <span class=\"text-sm font-medium\">Configuración</span>\n              </a>\n              <hr class=\"my-1.5 mx-4 border-gray-100\">\n              <a class=\"flex items-center px-5 py-3 text-red-600 transition-all cursor-pointer hover:bg-red-50 hover:pl-6 group mb-1\"\n                (click)=\"logout()\">\n                <i class=\"fas fa-sign-out-alt text-red-600 mr-3 w-5 text-center transition-transform duration-200 group-hover:translate-x-1\"></i>\n                <span class=\"text-sm font-medium\">Cerrar Sesión</span>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n\n    <!-- Analytics Preview -->\n    <div *ngIf=\"!isLoading\" class=\"bg-white rounded-3xl p-6 md:p-8 mb-10 shadow-md transition-all duration-300 overflow-hidden hover:-translate-y-2 hover:shadow-lg group\">\n      <img src=\"icons/reportA.jpg\" alt=\"Analytics Preview\" class=\"w-full h-64 md:h-72 lg:h-80 object-cover rounded-xl transition-transform duration-300 group-hover:scale-[1.01] filter hover:saturate-[1.1] hover:contrast-[1.05]\">\n    </div>\n\n    <!-- Loading State -->\n    <div *ngIf=\"isLoading\" class=\"flex flex-col items-center justify-center h-64 z-10\">\n      <div class=\"w-12 h-12 border-4 border-indigo-200 border-t-indigo-900 rounded-full mb-5 animate-spin\"></div>\n      <p class=\"text-gray-700 font-medium bg-gradient-to-r from-gray-600 to-gray-500 bg-clip-text text-transparent animate-pulse\">Cargando dashboard...</p>\n    </div>\n\n    <!-- Dashboard Grid -->\n    <div *ngIf=\"!isLoading\" class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mt-8 z-10\">\n      <div\n        *ngFor=\"let item of menuItems\"\n        class=\"bg-white rounded-3xl p-6 sm:p-8 text-center cursor-pointer transition-all duration-300 shadow-md relative overflow-hidden hover:shadow-lg transform hover:-translate-y-2 hover:rotate-1 group\"\n        (click)=\"navigateTo(item.route)\"\n      >\n        <div class=\"absolute inset-0 bg-gradient-to-br from-indigo-50/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n        \n        <div class=\"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 sm:mb-6 rounded-full flex items-center justify-center bg-indigo-50 transition-all duration-300 group-hover:bg-indigo-100 relative z-10\">\n          <img [src]=\"'icons/' + item.icon\" [alt]=\"item.title\" class=\"w-10 h-10 sm:w-12 sm:h-12 object-contain transition-all duration-300 group-hover:scale-110 group-hover:rotate-3\">\n        </div>\n        \n        <h3 class=\"text-lg sm:text-xl font-semibold text-gray-800 transition-all duration-300 group-hover:text-indigo-900 relative z-10\">{{ item.title }}</h3>\n        <p class=\"text-gray-500 text-xs sm:text-sm mt-2 transition-all duration-300 relative z-10\">{{ item.description }}</p>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!-- Toast Notifications -->\n<div id=\"notification-toast\" class=\"fixed bottom-5 left-1/2 -translate-x-1/2 py-3 px-5 rounded-xl text-white text-sm font-medium z-50 shadow-lg flex items-center gap-2.5 transform transition-all duration-300 hidden w-11/12 max-w-md justify-center\"></div>\n"],
  "mappings": "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",
  "names": ["environment", "firebaseConfig", "apiKey", "authDomain", "projectId", "storageBucket", "messagingSenderId", "appId", "persistence", "cloudinary", "cloudName", "uploadPreset", "CloudinaryImageService", "cloudName", "environment", "cloudinary", "uploadPreset", "uploadUrl", "http", "inject", "HttpClient", "firestore", "Firestore", "uploadProfileImage", "file", "userId", "collectionName", "type", "includes", "throwError", "Error", "formData", "FormData", "append", "Date", "now", "post", "pipe", "switchMap", "response", "imageUrl", "secure_url", "userRef", "doc", "from", "updateDoc", "Foto_Perfil", "map", "catchError", "error", "console", "message", "optimizeImage", "maxWidth", "__async", "Promise", "resolve", "reject", "reader", "FileReader", "onload", "event", "img", "Image", "width", "height", "Math", "round", "canvas", "document", "createElement", "ctx", "getContext", "drawImage", "toBlob", "blob", "optimizedFile", "File", "name", "lastModified", "onerror", "src", "target", "result", "readAsDataURL", "updateProfileImage", "factory", "\u0275fac", "providedIn", "SimpleModalService", "rendererFactory", "renderer", "modalElement", "backdropElement", "constructor", "createRenderer", "showModal", "options", "closeModal", "createElement", "addClass", "setStyle", "title", "appendChild", "createText", "message", "buttonContainer", "cancelText", "cancelButton", "listen", "onCancel", "okButton", "okText", "onOk", "document", "body", "style", "head", "escHandler", "event", "key", "removeEventListener", "addEventListener", "confirm", "okCallback", "cancelCallback", "alert", "callback", "setTimeout", "removeChild", "\u0275\u0275inject", "RendererFactory2", "factory", "\u0275fac", "providedIn", "\u0275\u0275elementStart", "\u0275\u0275text", "\u0275\u0275elementEnd", "\u0275\u0275advance", "\u0275\u0275property", "ctx_r0", "usuario", "Nombre", "\u0275\u0275textInterpolate1", "\u0275\u0275element", "\u0275\u0275template", "AdminComponent_div_17_div_4_Template", "\u0275\u0275listener", "\u0275\u0275restoreView", "_r2", "\u0275\u0275nextContext", "\u0275\u0275resetView", "openPhotoSelector", "$event", "onPhotoSelected", "navigateTo", "logout", "\u0275\u0275pureFunction2", "_c1", "window", "innerWidth", "\u0275\u0275classProp", "isUploading", "Foto_Perfil", "\u0275\u0275sanitizeUrl", "\u0275\u0275textInterpolate", "Rol", "Correo", "item_r4", "_r3", "$implicit", "route", "icon", "title", "description", "AdminComponent_div_20_div_1_Template", "menuItems", "AdminComponent", "isLoading", "isProfileMenuOpen", "uploadProgress", "router", "inject", "Router", "auth", "Auth", "firestore", "Firestore", "authService", "AuthService", "cloudinaryImageService", "CloudinaryImageService", "modalService", "SimpleModalService", "fileInput", "userSubscription", "ngOnInit", "initializeUserData", "onResize", "event", "updateDropdownPosition", "closeProfileMenu", "toggleProfileMenu", "stopPropagation", "setTimeout", "dropdownMenu", "document", "querySelector", "toggleButton", "buttonRect", "getBoundingClientRect", "menuWidth", "offsetWidth", "windowWidth", "leftPosition", "Math", "min", "right", "max", "style", "position", "top", "bottom", "left", "maxHeight", "overflowY", "nativeElement", "click", "__async", "input", "target", "files", "length", "file", "type", "includes", "showToast", "IdUsuario", "Error", "size", "confirm", "processAndUploadImage", "error", "console", "message", "optimize", "updateProfileImage", "pipe", "finalize", "value", "subscribe", "next", "imageUrl", "handleUploadSuccess", "handleUploadError", "uploadProfileImage", "__spreadProps", "__spreadValues", "currentUser", "userEmail", "email", "usuariosRef", "collection", "q", "query", "where", "querySnapshot", "getDocs", "empty", "warn", "usuarioDoc", "docs", "usuarioData", "data", "Departamento", "id", "NivelAdmin", "Telefono", "Username", "preloadImage", "catch", "handleAuthError", "url", "Promise", "resolve", "reject", "img", "Image", "onload", "onerror", "src", "navigate", "signOut", "location", "href", "Date", "now", "toast", "getElementById", "className", "classList", "add", "innerHTML", "remove", "ngOnDestroy", "unsubscribe", "selectors", "viewQuery", "rf", "ctx", "\u0275\u0275resolveWindow", "AdminComponent_div_10_Template", "AdminComponent_div_11_Template", "AdminComponent_div_17_Template", "AdminComponent_div_18_Template", "AdminComponent_div_19_Template", "AdminComponent_div_20_Template", "CommonModule", "NgForOf", "NgIf", "NgStyle", "RouterModule", "styles"]
}
